<!DOCTYPE html>
<!-- saved from url=(0070)https://juejin.cn/book/6950646725295996940/section/6953057493043904549 -->
<html lang="zh"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Electron + React 从 0 到 1 实现简历平台实战 - 彭道宽 - 掘金课程</title><meta data-n-head="ssr" name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover"><meta data-n-head="ssr" name="apple-itunes-app" content="app-id=987739104"><meta data-n-head="ssr" name="theme-color" content="#ffffff"><meta data-n-head="ssr" name="msapplication-TileColor" content="#da532c"><link data-n-head="ssr" rel="preconnect" href="https://lf3-cdn-tos.bytescm.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="https://mcs.snssdk.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="https://i.snssdk.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="dns-prefetch" href="https://lf3-cdn-tos.bytescm.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://api.juejin.cn/"><link data-n-head="ssr" rel="dns-prefetch" href="https://lf-cdn-tos.bytescm.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://unpkg.byted-static.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p1-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p3-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p6-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p9-juejin.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://p1-jj.byteimg.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://mcs.snssdk.com/"><link data-n-head="ssr" rel="dns-prefetch" href="https://i.snssdk.com/"><link data-n-head="ssr" rel="apple-touch-icon" sizes="180x180" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/apple-touch-icon.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="32x32" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/favicon-32x32.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="16x16" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/favicon-16x16.png"><link data-n-head="ssr" rel="mask-icon" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/safari-pinned-tab.svg" color="#1E80FF"><link data-n-head="ssr" rel="manifest" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/site.webmanifest"><link data-n-head="ssr" rel="search" title="掘金" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/search.xml" type="application/opensearchdescription+xml"><link data-n-head="ssr" rel="stylesheet" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/ionicons.min.css"><link data-n-head="ssr" rel="stylesheet" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/index.css"><link data-n-head="ssr" rel="stylesheet" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/iconfont.css"><link data-n-head="ssr" rel="stylesheet" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/bytedesign.min.css"><script async="" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/browser.cn.js" crossorigin="anonymous"></script><script async="" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/analytics.js"></script><script data-n-head="ssr" type="text/javascript" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/acrawler.js"></script><link rel="preload" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/fa7ef76.js" as="script"><link rel="preload" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/e66b202.js" as="script"><link rel="preload" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/9fca362.js" as="script"><link rel="preload" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/app.ab9b18a.css" as="style"><link rel="preload" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/9332c9f.js" as="script"><link rel="preload" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/default.2050f18.css" as="style"><link rel="preload" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/d6e38f1.js" as="script"><link rel="preload" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/62.ce0c6a0.css" as="style"><link rel="preload" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/af29e2a.js" as="script"><link rel="preload" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/197.3d69a3b.css" as="style"><link rel="preload" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/8ecf414.js" as="script"><link rel="stylesheet" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/app.ab9b18a.css"><link rel="stylesheet" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/default.2050f18.css"><link rel="stylesheet" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/62.ce0c6a0.css"><link rel="stylesheet" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/197.3d69a3b.css">
  <script charset="utf-8" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/da373fe.js"></script><script charset="utf-8" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/537fa9e.js"></script><script charset="utf-8" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/8792628.js"></script><link rel="preload" as="style" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/8.4ebc7e8.css"><script charset="utf-8" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/0bddfa4.js"></script><link rel="preload" as="style" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/134.092fb39.css"><script charset="utf-8" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/dc34c08.js"></script><link rel="preload" as="style" href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/176.290e99d.css"><script charset="utf-8" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/4fddd2f.js"></script><style>
    .wx_draw_wrap {
      box-sizing: border-box;
      position: fixed;
      top: 50%;
      left: 0px;
      z-index: 888888;
      margin-top: -20px;
    }
    .wx_draw {
      box-sizing: border-box;
      position: fixed;
      top: 50%;
      left: 0px;
      z-index: 888888;
      width: 40px;
      height: 40px;
      line-height: 16px;
      font-size: 12px;
      padding: 4px;
      background-color: rgb(232, 243, 255);
      border: 1px solid rgb(232, 243, 255);
      color: rgb(30, 128, 255);
      text-align: center;
      overflow: hidden;
      cursor: pointer;
    }
    .wx_popup {
      position: fixed;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      z-index: 999999;
    }
    .wx_mask {
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
    }
    .wx_main {
      --width: 460px;
      position: absolute;
      left: 50%;
      top: 50%;
      width: var(--width);
      transform: translate(-50%, -50%);
      background: #fff;
      border-radius: 4px;
    }
    .wx_main .wx_header {
      height: 40px;
      line-height: 40px;
      font-size: 16px;
      padding: 0 16px;
      border-bottom: 1px solid #999;
      display: flex;
      align-items: center;
      justify-content: space-between;
      color: #000;
      font-weight: 400;
    }
    .wx_score {
      font-size: 12px;
      font-size: #00a100;
    }
    .wx_main .wx_body {
      padding: 16px;
      border-bottom: 1px solid #999;
      position: relative;
    }
    .wx_main .wx_options {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    .wx_main .wx_options div {
      width: 80px;
      text-align: center;
      height: 24px;
      line-height: 24px;
      background-color: rgb(232, 243, 255);
      border: 1px solid #c9d4e3;
      color: rgb(30, 128, 255);
      cursor: pointer;
      border-radius: 2px;
    }
    .wx_main .wx_body p {
      margin: 0 0 8px;
    }
    .wx_body table {
      width: 100%;
      text-align: center;
      border-left: 1px solid #ccc;
      border-top: 1px solid #ccc;
    }
    .wx_body table th,
    .wx_body table td {
      border-right: 1px solid #ccc;
      border-bottom: 1px solid #ccc;
      line-height: 20px;
    }
    .wx_body table th {
      line-height: 28px;
    }
    .wx_main .wx_body img {
      vertical-align: middle;
      width: 40px;
      height: 40px;
    }
    .wx_main .wx_footer {
      padding: 12px 16px;
      text-align: right;
    }
    .wx_btn {
      display: inline-block;
      width: 48px;
      cursor: pointer;
      text-align: center;
      height: 20px;
      line-height: 20px;
      background-color: rgb(232, 243, 255);
      border: 1px solid #c9d4e3;
      color: rgb(30, 128, 255);
      border-radius: 2px;
    }
    .wx_loading {
      position: absolute;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      z-index: 9999999;
      background: rgba(0,0,0,0.65);
    }
    .wx_loading .circular {
      height: 42px;
      width: 42px;
      -webkit-animation: loading-rotate 2s linear infinite;
      animation: loading-rotate 2s linear infinite;
      position: absolute;
      left: 50%;
      top: 50%;
      margin-top: -21px;
      margin-left: -21px;
    }
    .wx_loading .path {
      -webkit-animation: loading-dash 1.5s ease-in-out infinite;
      animation: loading-dash 1.5s ease-in-out infinite;
      stroke-dasharray: 90, 150;
      stroke-dashoffset: 0;
      stroke-width: 2;
      stroke: #409eff;
      stroke-linecap: round;
    }
    @keyframes loading-rotate {
      100% {
        -webkit-transform: rotate(360deg);
        transform: rotate(360deg);
      }
    }
    @keyframes loading-dash {
      0% {
        stroke-dasharray: 1, 200;
        stroke-dashoffset: 0;
      }
      50% {
        stroke-dasharray: 90, 150;
        stroke-dashoffset: -40px;
      }
      100% {
        stroke-dasharray: 90, 150;
        stroke-dashoffset: -120px;
      }
    }
  </style><script src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/monitors.3.7.0.cn.js" async="" crossorigin="anonymous"></script><script src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/sentry.3.7.0.cn.js" async="" crossorigin="anonymous"></script><style type="text/css">.code-editor-container{display:block;position:relative;overflow:hidden;box-sizing:border-box;}iframe.code-editor-frame{width:100%;height:100%;border:none;border-radius:8px;box-sizing:border-box;border:0.5px solid rgba(128,128,128,0.4);}</style><script charset="utf-8" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/8260be0.js"></script><style type="text/css">.medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}</style></head>
  <body>
    <div id="__nuxt"><div id="__layout"><div id="juejin"><!----> <div data-v-c2465156="" class="book-read-view"><section data-v-c2465156="" class="book-section"><div data-v-c2465156="" class="book-summary"><div data-v-c2465156="" class="book-summary-masker"></div> <div data-v-c2465156="" class="book-summary-inner"><div data-v-c2465156="" class="book-summary__header"><a data-v-c2465156="" href="https://juejin.cn/course" target="" rel="" class="logo"><svg data-v-c2465156="" width="137" height="28" viewBox="0 0 137 28" fill="none" xmlns="http://www.w3.org/2000/svg" class="" style="height: 100%; width: auto;"><path data-v-c2465156="" d="M17.5865 17.3955H17.5902L28.5163 8.77432L25.5528 6.39453L17.5902 12.6808H17.5865L17.5828 12.6845L9.62018 6.40201L6.6604 8.78181L17.5828 17.3992L17.5865 17.3955Z" fill="#1E80FF"></path><path data-v-c2465156="" d="M17.5872 6.77268L21.823 3.40505L17.5872 0.00748237L17.5835 0L13.3552 3.39757L17.5835 6.76894L17.5872 6.77268Z" fill="#1E80FF"></path><path data-v-c2465156="" d="M17.5865 23.2854L17.5828 23.2891L2.95977 11.7531L0 14.1291L0.284376 14.3574L17.5865 28L28.5238 19.3752L35.1768 14.1254L32.2133 11.7456L17.5865 23.2854Z" fill="#1E80FF"></path><path data-v-c2465156="" d="M133.287 18.4172H131.162L129.923 23.0758H126.825V16.7559H135.364V14.7315H126.825V11.1469H133.074V9.12256H118.454V11.1469H124.703V14.7315H116.164V16.7559H124.703V23.0758H121.601L120.363 18.4172H118.237L119.487 23.0758H115.543V25.1001H135.985V23.0758H132.041L133.287 18.4172Z" fill="#323232"></path><path data-v-c2465156="" d="M130.522 3.3151L130.2 2.94092H121.321L120.999 3.3151C119.298 5.2467 117.378 6.97337 115.278 8.46009V10.9522C116.206 10.3573 120.183 7.72295 122.327 4.98768H129.235C131.375 7.72295 135.356 10.3573 136.284 10.9522V8.46009C134.169 6.97586 132.235 5.2491 130.522 3.3151Z" fill="#323232"></path><path data-v-c2465156="" d="M94.9037 8.53127H96.494V6.50323H94.9037V2.88867H92.9056V6.50323H91.3303V8.53127H92.9094V14.7914L91.3303 15.3377V17.5828L92.9094 17.0365V20.7371C92.8414 22.2391 92.5579 23.7236 92.0674 25.145H94.1629C94.6112 23.7165 94.863 22.2335 94.9112 20.7371V16.3442L96.5053 15.7904V13.5229L94.9112 14.0767L94.9037 8.53127Z" fill="#323232"></path><path data-v-c2465156="" d="M99.1875 2.88867H97.6608V20.7446C97.6727 22.2359 97.4852 23.7221 97.1033 25.1637H99.1875C99.5206 23.7145 99.6851 22.2316 99.6776 20.7446V9.77357H112.321V2.88867H99.1875ZM110.308 7.75303H99.6851V4.91671H110.304L110.308 7.75303Z" fill="#323232"></path><path data-v-c2465156="" d="M110.305 23.405H107.566V17.6838H110.021H110.702H111.91V11.8166H110.021V15.9363H107.566V11.1431H105.676V15.9363H103.27V11.8166H101.381V17.6838H102.298H103.27H105.676V23.405H102.967V19.173H101.074V25.1524H102.286H102.967H110.305H110.683H112.195V19.173H110.305V23.405Z" fill="#323232"></path><path data-v-c2465156="" d="M53.0024 2.91846V4.83801L56.5908 6.11397L53.0024 7.38618V9.30573L59.2887 7.07187L65.5749 9.30573V7.38618L61.9865 6.11397L65.5749 4.83801V2.91846L59.2887 5.15232L53.0024 2.91846Z" fill="#323232"></path><path data-v-c2465156="" d="M79.9508 11.697H88.5944V9.47813H79.9508V2.80273H77.5299V9.47813H68.8863V11.697H77.5299V22.9823H67.76V25.2012H89.7207V22.9823H79.9508V11.697Z" fill="#323232"></path><path data-v-c2465156="" d="M48.9461 5.39227L52.2913 5.18272V3.24072L43.6813 3.78328V5.72529L47.0265 5.512V8.50545H43.5803V10.4213H47.0265V25.164H48.9461V10.4213H52.3923V8.50545H48.9461V5.39227Z" fill="#323232"></path><path data-v-c2465156="" d="M57.6539 9.01025H55.6595L55.1768 10.3648H52.9991V12.2357H54.5145L52.55 17.7662H53.8821V24.1534H55.7007V16.8457H58.6642V25.1787H60.5837V16.8457H63.4612V21.059C63.4534 22.1374 63.181 23.1974 62.6679 24.146H64.7147C65.1423 23.173 65.3627 22.1217 65.362 21.059V15.6932V15.1282H60.5837V13.2572H58.6642V15.1282H55.4836L56.5313 12.2245H65.594V10.3536H57.1749L57.6539 9.01025Z" fill="#323232"></path><path data-v-c2465156="" d="M43.562 24.6246H45.4591L46.2786 11.4272H44.3815L43.562 24.6246Z" fill="#323232"></path><path data-v-c2465156="" d="M49.7849 11.4272L50.3499 23.2963H52.247L51.682 11.4272H49.7849Z" fill="#323232"></path></svg></a> <div data-v-c2465156="" class="label">课程</div> <!----></div> <!----> <div data-v-881c6d64="" data-v-c2465156="" class="book-directory-comp beautify-scrollbar-warp book-directory is-buyer bought" cur-index="-1"><div data-v-881c6d64="" style="padding: 0px 15px;"><!----></div> <div data-v-881c6d64="" class="section-list"><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">1</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">开篇-技术选型和项目结构</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><div data-v-881c6d64="" class="label" style="color: rgb(30, 128, 255); background: rgb(234, 242, 255);">
              上次学到
            </div> <span data-v-881c6d64="">学习时长: 9分26秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">2</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">基础篇-Electron初步认识并掌握基础知识</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 25分56秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">3</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">设计篇-需求功能设计与数据存储方案设计</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 15分4秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">4</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">环境篇-动手搭建我们的简历平台</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 95分33秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">5</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">🏆 500米里程碑｜环境搭建篇完成</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 4分19秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">6</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">业务篇-首页开发，好的印象能加分</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 42分35秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">7</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">业务篇-如何写我们的Redux与File</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 29分58秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">8</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">业务篇-简历制作之常用组件设计与简历数据设计</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 32分20秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">9</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">业务篇-简历制作之入口页面开发</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 27分31秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">10</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">业务篇-简历制作之工具条模块与简历模版之间通信</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 52分46秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">11</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">业务篇-简历制作之数据的录入与展示</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 48分49秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">12</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">业务篇-简历制作之导出PDF</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 11分23秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">13</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">🏆 1000米里程碑 ｜简历主流程完成</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 1分43秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">14</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">🐼  支线篇-打包生成第一个桌面应用（骄傲自豪）</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 28分6秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">15</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">业务篇-简历模版列表实现与侧边栏交互效果</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 73分42秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">16</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">业务篇-首页主题换肤功能实现且Hooks优化逻辑</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 40分27秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">17</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">业务篇-简历数据存档且自定义存储路径（多窗口）</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 56分39秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">18</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">业务篇-思考并补全遗漏的功能细节，整体优化代码，让应用更健壮</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 51分35秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">19</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">🏆 1500米里程碑 ｜丰富功能</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 1分41秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">20</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">优化篇-公共弹窗拆解优化，让职能更加单一</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 20分59秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">21</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">定制篇-自定义 Electron 原生应用菜单</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 40分50秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">22</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">打包篇-应用程序生产环境构建</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 54分25秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">23</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">打包篇-生产环境疑难杂症的解决</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 48分</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">24</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">打包篇-Webpack打包优化</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 42分44秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">25</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">打包篇-Electron打包体积优化</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 9分40秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">26</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">🏆 到达目的地-应用程序发布</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 7分37秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">27</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">结尾篇-行而不辍，未来可期</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 4分38秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">28</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">彩蛋篇-Webpack基础介绍与两大利器</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 22分53秒</span></div></div></a><a data-v-881c6d64="" class="section route-active"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">29</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">彩蛋篇-RcReduxModel中间件开发设计</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 78分13秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">30</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">期望篇-可视化自定义独特的简历模版</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 55分32秒</span></div></div></a><a data-v-881c6d64="" class="section"><div data-v-881c6d64="" class="left"><div data-v-881c6d64="" class="index">31</div></div> <div data-v-881c6d64="" class="center"><div data-v-881c6d64="" class="main-line"><div data-v-881c6d64="" class="title"><!----> <span data-v-881c6d64="" class="title-text">问题篇-常见问题解决</span></div> <div data-v-881c6d64="" class="right"><!----></div></div> <div data-v-881c6d64="" class="sub-line"><!----> <span data-v-881c6d64="">学习时长: 10分28秒</span></div></div></a></div></div> <div data-v-c2465156="" class="book-summary__footer"><div data-v-c2465156="" class="qr-icon"><svg data-v-c2465156="" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" class=""><path data-v-c2465156="" fill="#BABABA" fill-rule="evenodd" d="M11 0h9v9h-9V0zM0 0h9v9H0V0zm0 11h9v9H0v-9zm14-5h3V3h-3v3zM3 6h3V3H3v3zm0 11v-3h3v3H3zm8-6h3v3h-3v-3zm3 3h3v3h-3v-3zm3-3h3v3h-3v-3zm-6 6h3v3h-3v-3zm6 0h3v3h-3v-3z"></path></svg></div> <div data-v-c2465156="" class="qr-tips"><span data-v-c2465156="" class="ion-close"></span> <div data-v-c2465156="" class="title"><span data-v-c2465156="">关注公众号</span></div> <div data-v-c2465156="" class="qr-img"><img data-v-c2465156="" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/wx-qr.966373a.jpg"></div></div></div></div></div> <div data-v-c2465156="" class="book-content"><div data-v-c2465156="" class="book-content-inner"><div data-v-c2465156="" class="book-content__header visible"><div data-v-c2465156="" class="switch"><svg data-v-c2465156="" width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns" class="" style="width: 30px; height: 30px; vertical-align: middle;"><title data-v-c2465156="">juejin_logo copy</title><desc data-v-c2465156="">Created with Sketch.</desc><defs data-v-c2465156=""></defs><g data-v-c2465156="" id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage"><g data-v-c2465156="" id="juejin_logo-copy" sketch:type="MSArtboardGroup" fill="#007FFF"><path data-v-c2465156="" d="M23.2819984,7.7030545 L19.8538714,5 L16.2721918,7.8241757 L16.0865388,7.97375707 L19.8538714,10.977629 L23.6327866,7.97375707 L23.2819984,7.7030545 Z M36.2727433,18.185664 L19.8439434,31.1400064 L3.42507143,18.1936064 L1,20.1414735 L19.8439434,35 L38.6981457,20.1335312 L36.2727433,18.185664 Z M19.8439434,19.2367048 L10.903809,12.1875172 L8.47840667,14.1353844 L19.8439434,23.0970293 L31.2190771,14.127442 L28.7936748,12.1795749 L19.8439434,19.2367048 Z" id="Fill-1-Copy-2" sketch:type="MSShapeGroup"></path></g></g></svg></div> <div data-v-c2465156="" class="menu"><svg data-v-c2465156="" width="16px" height="13px" viewBox="0 0 16 13" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class=""><title data-v-c2465156="">Group 4</title><desc data-v-c2465156="">Created with Sketch.</desc><defs data-v-c2465156=""></defs><g data-v-c2465156="" id="全屏" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g data-v-c2465156="" id="2_fullscreen_close-sidebar" transform="translate(-19.000000, -25.000000)" fill="#979797"><g data-v-c2465156="" id="Group-4" transform="translate(19.000000, 25.000000)"><rect data-v-c2465156="" id="Rectangle-3" x="0" y="5.5" width="16" height="1.5"></rect><rect data-v-c2465156="" id="Rectangle-3" x="0" y="0" width="16" height="1.5"></rect><rect data-v-c2465156="" id="Rectangle-3-Copy" x="0" y="11" width="16" height="1.5"></rect></g></g></g></svg></div> <div data-v-c2465156="" class="title"><a data-v-c2465156="" href="https://juejin.cn/book/6950646725295996940" target="" rel="">
              Electron + React 从 0 到 1 实现简历平台实战
            </a></div> <div data-v-27c6ac96="" data-v-c2465156="" class="user-auth user-auth"><div data-v-27c6ac96="" class="nav-item menu"><img data-v-248050e4="" data-v-47508ed8="" data-v-27c6ac96="" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/9de2b34dc072bac38d995cd9638181cf_100x100.awebp" alt="整只羊的头像" class="lazy avatar avatar" loading="lazy"> <!----></div> <!----></div> <!----></div> <div data-v-c2465156="" class="book-body transition--next"><div data-v-3bdbd109="" data-v-c2465156="" class="section-view book-section-content" user="[object Object]"><div data-v-841680ca="" data-v-3bdbd109="" class="section-content"><div data-v-841680ca="" class="section-page book-section-view"><div data-v-841680ca="" class="video-wrapper"><div data-v-1a72956a="" data-v-841680ca="" class="video video"><div data-v-1a72956a="" id="mse"><!----> <!----></div></div></div> <div data-v-841680ca="" class="article-content"><div class="markdown-body"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;margin-bottom:5px}.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{font-size:20px}.markdown-body h2{padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><h2 data-id="heading-0">前言</h2>
<p>本章节将会给大家分享 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FSugarTurboS%2Frc-redux-model" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/SugarTurboS/rc-redux-model" ref="nofollow noopener noreferrer">re-redux-model</a> 的出现缘由以及设计过程，当然还有核心源码的解读，如果你对本章节内容兴趣不大，可以快速阅读或跳过。</p>
<p>本文的整体思路：</p>
<ul>
<li>为什么要写 rc-redux-model</li>
<li>我期望做成什么样</li>
<li>知识储备</li>
<li>核心源码解读</li>
</ul>
<h2 data-id="heading-1">A. 为什么要写 rc-redux-model</h2>
<h3 data-id="heading-2">1. 出现缘由</h3>
<p>前面给大家不断强调，<strong>React 是单向数据流的形式</strong>，它不存在数据向上回溯的技能，要么就是向下分发，要么就是自己内部管理。</p>
<p><img src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/ec1c1df7d3594a7cae3e702aaddbfdd1_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" alt="image.png" loading="lazy" class="medium-zoom-image"></p>
<blockquote>
<p>在 react 中，有 props 和 state，当我想从父组件给子组件传递数据时，可通过 props 进行数据传递，如果我想在组件内部自行管理状态，那可以选择使用 state。</p>
</blockquote>
<p>很快，我遇到了一个问题，那就是兄弟组件之间如何进行通信？答案是在父组件中管理 state，通过 props 下发给各子组件，子组件通过回调方式，进行通信。</p>
<p>这会存在什么问题？如果你想共享数据，你得把所有需要共享的 state 集中放到组件顶层，然后分发给所有子组件。为此，需要一个库来作为更加牛逼、专业的顶层 state 发给各组件，于是，我引入了 redux。</p>
<h3 data-id="heading-3">2. 体验不佳</h3>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Freduxjs%2Fredux" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/reduxjs/redux" ref="nofollow noopener noreferrer">redux</a> 可以说是较成熟，生态圈较完善的一个库了，搭配 &nbsp;<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fzalmoxisus%2Fredux-devtools-extension" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/zalmoxisus/redux-devtools-extension" ref="nofollow noopener noreferrer">redux-devtools-extension</a>&nbsp; 这个 chrome 插件，让你开发更加快乐。然，世间万物，皆有利弊。</p>
<p>本身我使用 redux 不会有所谓的“痛点”，<strong>因为 redux 默认只支持同步操作，让使用者自行选择处理异步，对于异步请求 redux 是无能为力的</strong>。这么说吧，它保证自己是纯粹的，脏活累活丢给别人去干。</p>
<p>于是我的痛点在于：如何处理异步请求，为此我使用了 redux-saga 去解决异步问题，但是在使用 &nbsp;<code>redux</code> + <code>redux-saga</code> 中，我发现，这会让我的 <strong>[重复性]</strong> 工作变多(逐步晋升 CV 工程师)，因为它在我项目中，会存在啰嗦的样板代码。</p>
<p>举个例子：异步请求，获取用户信息，我需要创建 &nbsp;<code>saga/user.js</code>、<code>reducers/user.js</code>、以及 <code>action/user.js</code>，为了统一管理 const，我可能还会有一个 &nbsp;<code>const/user.js</code>，然后在这些文件之间来回切换。（什么玩意？）</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// const/user.js</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">FETCH_USER_INFO</span> = <span class="hljs-string">'FETCH_USER_INFO'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">FETCH_USER_INFO_SUCCESS</span> = <span class="hljs-string">'FETCH_USER_INFO_SUCCESS'</span>;
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// actions/user.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchUserInfo</span>(<span class="hljs-params">params, callback</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">type</span>: <span class="hljs-variable constant_">FETCH_USER_INFO</span>,
    params,
    callback,
  };
}
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// sagas/user.js</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">fetchUserInfoSaga</span>(<span class="hljs-params">{ params, callback }</span>) {
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">yield</span> <span class="hljs-title function_">call</span>(fetch.<span class="hljs-property">callAPI</span>, {
    <span class="hljs-attr">actionName</span>: <span class="hljs-variable constant_">FETCH_USER_INFO</span>,
    params,
  });
  <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">yield</span> <span class="hljs-title function_">put</span>({
      <span class="hljs-attr">type</span>: <span class="hljs-variable constant_">FETCH_USER_INFO_SUCCESS</span>,
      <span class="hljs-attr">data</span>: res.<span class="hljs-property">data</span>,
    });
    callback &amp;&amp; <span class="hljs-title function_">callback</span>();
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">throw</span> res.<span class="hljs-property">msg</span>;
  }
}
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// reducers/user.js</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">userReducer</span>(<span class="hljs-params">state, action</span>) {
  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-attr">FETCH_USER_INFO_SUCCESS</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Immutable</span>.<span class="hljs-title function_">set</span>(state, <span class="hljs-string">'userInfo'</span>, action.<span class="hljs-property">data</span>);
  }
}
</code></pre>
<p>这种样板代码，简直就是 CV 操作，只需复制一份，修改一下文件名、参数等，就能实现一个请求流程。对我个人而言，这会让我不够专注，分散管理 const、action、saga、reducer 一套流程，需要不断的跳跃思路。随着文件数量变多，我是真的不喜欢如此<code>繁琐</code>的流程，有没有好的框架能帮我把这些事都做完呢？</p>
<h3 data-id="heading-4">3. dva 速心丸？</h3>
<blockquote>
<p>dva，基于 redux 和 redux-saga 的数据流方案，让你在一个 model 文件中写所有的 &nbsp;<code>action、state、effect、reducers</code>等，为了简化开发体验，内置了 react-router 和 fetch**。</p>
</blockquote>
<p>我是如何看待 dva 的？从官方声明来看，dva 是基于 &nbsp;<code>redux</code>&nbsp;+&nbsp;<code>redux-saga</code>&nbsp; 的方案，只是在你写的时候，都写在一个 model 文件，然后它帮你做一些处理；其次它是一个框架，而不是一个库，是否意味着：我在项目开始之前，我就需要确定项目的架构是不是用 dva，如果开发一半，我想换成 dva 这种状态管理的写法，而去引入 dva ，是否不合理？再或者，我只是做一些 demo、写点个人小项目，但我又想像写 dva 的数据状态管理 model 那种方式，引入 dva 是不是反而变得笨重呢？</p>
<h3 data-id="heading-5">4. 自己所需</h3>
<p>出发点为：在于解决繁琐重复的工作，store 文件分散，state 类型和赋值错误的问题，为此，我期望为跟我一样困惑的小伙伴，提供一个写状态管理较为 <strong>[舒服]</strong> 的书写方式，无缝兼容原有项目，只需要安装这个包，就能引入一套数据管理方案，写起来又舒服简洁。</p>
<h2 data-id="heading-6">B. 如何实现 rc-redux-model</h2>
<h3 data-id="heading-7">01. 初建雏形</h3>
<p>由于之前有阅读过 <code>redux</code> 的源码，同时也大致阅读过 <code>redux-thunk</code> 的源码，并且查阅了一些与 redux 相关文章，在有了一些知识储备之后，开始着手编写相关代码。（下面我会介绍部分知识点）</p>
<blockquote>
<p>如果你对 redux 源码存在疑惑，你不妨看看这篇 <a href="https://juejin.cn/post/6844904183426973703" target="_blank" title="https://juejin.cn/post/6844904183426973703">【KT】轻松搞定 Redux 源码解读与编程艺术</a></p>
</blockquote>
<p>在参考了 dva 对 model 的参数说明，进行参数定义，由于我没有 redux-saga ，所以是没有 &nbsp;<code>effect</code>&nbsp; 这个属性的，于是初步得到我的 model 参数</p>
<p><img src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/51a302b2e11b48f0b4a9e0f31c9c6bec_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" alt="image.png" loading="lazy" class="medium-zoom-image"></p>
<p>下面是一个 <code>model</code> 的类型约束</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">RModel</span> {
  <span class="hljs-attr">namespace</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// 命名空间</span>
  <span class="hljs-attr">state</span>: {
    [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>;
  };
  action?: {
    [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-function">(<span class="hljs-params">{
      dispatch,
      getState,
      currentAction,
      commit,
      call,
    }</span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  };
  reducers?: {
    [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>;
  };
}
</code></pre>
<p>按照我的设想，我会存在多个 model 文件，聚集在一起之后，得到的是一个数组 :</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// model.js</span>
<span class="hljs-keyword">import</span> aModel <span class="hljs-keyword">from</span> <span class="hljs-string">'./aModel'</span>;
<span class="hljs-keyword">import</span> bModel <span class="hljs-keyword">from</span> <span class="hljs-string">'./bModel'</span>;
<span class="hljs-keyword">import</span> cModel <span class="hljs-keyword">from</span> <span class="hljs-string">'./cModel'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [aModel, bModel, cModel];
</code></pre>
<p>我所希望的是：通过传入 &nbsp;<code>RModel[]</code>，实例化 <code>RcReduxModel</code>，得到的实例带有经过处理后的 reducers</p>
<ul>
<li>reducers：所有 <code>model.reducers</code> 集合，这样我可以无障碍的用在 &nbsp;<code>store.combineReducers</code>中，可以兼容你现有的项目，因为只要你用了 redux， 那么你肯定得通过 &nbsp;<code>combineReducers API</code>&nbsp; 去集合所有的 reducers</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// createStore.js</span>

<span class="hljs-comment">// 👇 导入聚集所有 model，得到的是一个数组</span>
<span class="hljs-keyword">import</span> models <span class="hljs-keyword">from</span> <span class="hljs-string">'./models'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">RcReduxModel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'rc-redux-model'</span>;

<span class="hljs-keyword">const</span> reduxModel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RcReduxModel</span>(models);

<span class="hljs-keyword">const</span> reducerList = <span class="hljs-title function_">combineReducers</span>(reduxModel.<span class="hljs-property">reducers</span>);
<span class="hljs-keyword">return</span> <span class="hljs-title function_">createStore</span>(reducerList);
</code></pre>
<p>因为我想像写 model 那样，所有东西都在一个文件中，自然而然，这个 action 集到 model 里边之后，如何处理异步就成了我需要解决的一个问题</p>
<h3 data-id="heading-8">02. 异步处理</h3>
<p>我可以将 <code>redux-thunk</code>&nbsp; 或 &nbsp;<code>redux-saga</code>&nbsp; 集成进去，但感觉没必要。出于对这两个库的学习，以及在使用上带给我的 <strong>[体验]</strong>，我在想，能不能自行处理？于是，我去将 &nbsp;<code>redux-thunk</code>&nbsp; 的源码看了一遍。</p>
<blockquote>
<p>redux-thunk 中判断你的 action 是 function 还是 object，从而判断你的 action 是同步还是异步</p>
</blockquote>
<p>怎么理解呢？大家肯定都有写过同步 action 或者异步 action</p>
<ul>
<li>
<p>同步：通过 dispatch 发起一个 action，去修改 redux 的 state 值</p>
</li>
<li>
<p>异步：通过 dispatch 发起一个 action，由于 redux 没有异步能力，所以借助 redux-thunk 的能力，redux-thunk 发现你发起的 action 并不是一个 object，而是一个 function，它就会去帮你把请求发出，当请求处理完后，得到数据，你再发起一个同步的 action 去修改 redux 的 state 值</p>
</li>
</ul>
<p>最后得出了一个解决方案：<strong>在 &nbsp;<code>rc-redux-model</code>&nbsp; 中，每一个 action 都是异步的，也就是你发起的每一个 action，都是函数</strong>。</p>
<pre><code class="hljs language-js" lang="js">aModel = {
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">a</span>: <span class="hljs-string">''</span>,
  },
  <span class="hljs-attr">action</span>: {
    <span class="hljs-comment">// 这两个 action 都是 function</span>
    <span class="hljs-attr">firstAction</span>: <span class="hljs-function">(<span class="hljs-params">{ getState, dispatch }</span>) =&gt;</span> {},
    <span class="hljs-attr">secondAction</span>: <span class="hljs-function">(<span class="hljs-params">{ getState, dispatch }</span>) =&gt;</span> {},
  },
};
</code></pre>
<p>即使你想要发起一个同步 action，去修改 state 的值，我也会将其作为异步进行处理，也就是你修改 state 值，你需要这么写</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// component.js</span>

<span class="hljs-comment">// 👇 1. 发起一个 action 用于修改 state 值</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">dispatch</span>({
  <span class="hljs-attr">type</span>: <span class="hljs-string">'aModel/setStateA'</span>,
  <span class="hljs-attr">payload</span>: <span class="hljs-string">'666'</span>,
});
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// aModel.js</span>

aModel = {
  <span class="hljs-attr">namespace</span>: <span class="hljs-string">'aModel'</span>,
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">a</span>: <span class="hljs-string">'111'</span>,
  },
  <span class="hljs-attr">action</span>: {
    <span class="hljs-comment">// 👇 2. 这是异步action，在这里你可以做异步请求，也可以做同步处理</span>
    <span class="hljs-comment">// 总之，异步或同步，都需要经过这里的“转发”，再去修改 state 值</span>
    <span class="hljs-attr">setStateA</span>: <span class="hljs-function">(<span class="hljs-params">{ currentAction, dispatch }</span>) =&gt;</span> {
      <span class="hljs-title function_">dispatch</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'aModel/CHANGE_STATE_A'</span>,
        <span class="hljs-attr">payload</span>: currentAction.<span class="hljs-property">payload</span>,
      });
    },
  },
  <span class="hljs-attr">reducers</span>: {
    [<span class="hljs-string">'CHANGE_STATE_A'</span>](state, payload) {
      <span class="hljs-keyword">return</span> {
        ...state,
        <span class="hljs-attr">a</span>: payload,
      };
    },
  },
};
</code></pre>
<p>明确了这两点，接下来就只需要开发即可。开发接下来我会讲到，我们继续往下看</p>
<h3 data-id="heading-9">03. 提高体验</h3>
<p>由于每个 action，都需要小伙伴们自己去写，极度麻烦，以下面这个例子说明</p>
<p>我想要修改 state 中的 a 值，需要自己写 action、reducers</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// aModel.js</span>

aModel = {
  <span class="hljs-attr">namespace</span>: <span class="hljs-string">'aModel'</span>,
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">a</span>: <span class="hljs-string">'111'</span>,
  },
  <span class="hljs-attr">action</span>: {
    <span class="hljs-comment">// 👇 2. 这是异步action，在这里你可以做异步请求，也可以做同步处理</span>
    <span class="hljs-comment">// 总之，异步或同步，都需要经过这里的“转发”，再去修改 state 值</span>
    <span class="hljs-attr">setStateA</span>: <span class="hljs-function">(<span class="hljs-params">{ currentAction, dispatch }</span>) =&gt;</span> {
      <span class="hljs-title function_">dispatch</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'aModel/CHANGE_STATE_A'</span>,
        <span class="hljs-attr">payload</span>: currentAction.<span class="hljs-property">payload</span>,
      });
    },
  },
  <span class="hljs-attr">reducers</span>: {
    [<span class="hljs-string">'CHANGE_STATE_A'</span>](state, payload) {
      <span class="hljs-keyword">return</span> {
        ...state,
        <span class="hljs-attr">a</span>: payload,
      };
    },
  },
};
</code></pre>
<p>假设我现在有 20 个 state，意味着我得在 model.action 中，写对应的 20 个修改 state 的 action，然后在 model.reducers 中同样写 20 个相对应的 reducer，那么就会使得该文件代码量极大，那跟一开始写 redux 区别在哪？看起来只是将 state、action、reducers 放在一个文件而已。<strong>并没有真正的解决繁琐重复的工作</strong>。</p>
<p>于是我想到了解决方案：提供一个默认的 action，大家都通过这个 action
去修改 state 值。但这会有个问题，所有修改 state 的 action，都走同一个 &nbsp;<code>action.type</code>，那么在 &nbsp;<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fzalmoxisus%2Fredux-devtools-extension" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/zalmoxisus/redux-devtools-extension" ref="nofollow noopener noreferrer">redux-devtools-extension</a>&nbsp; 中，是很难发现这个 action 触发，具体是为了修改哪个 state 值。</p>
<p>如何解决此问题呢？最终的解决方案就是：<strong>为每一个 state ，自动注册对应的 action 和 reducer， 同时再提供了一个默认的 action(setStore)</strong></p>
<blockquote>
<p>✨&nbsp; 例 : state 有 n 个值，那么最终会自动注册 n+1 个 action，用户只需要记住并调用默认的这个 action(setStore) 即可</p>
</blockquote>
<p><img src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/16444ad9771242c9a09aa9f911933d2c_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" alt="image.png" loading="lazy" class="medium-zoom-image"></p>
<p>用户只需要调用默认提供的 &nbsp;<code>setStore</code>&nbsp; 即可，然后根据 key 进行判断，从而转发到对应到 action 上</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">dispatch</span>({
  <span class="hljs-attr">type</span>: <span class="hljs-string">'[model.namespace]/setStore'</span>,
  <span class="hljs-attr">payload</span>: {
    <span class="hljs-attr">key</span>: <span class="hljs-string">`<span class="hljs-subst">${model.state.key}</span>`</span>,
    <span class="hljs-attr">values</span>: <span class="hljs-string">`<span class="hljs-subst">${your values}</span>`</span>
  },
})
</code></pre>
<p>由于 <code>setStore</code> 每次都只能修改一个 state 值，如果在同一时刻，想修改 m 个 state 值，就得发 m 个 action，于是我又添加了一个 <code>setStoreList</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">dispatch</span>({
  <span class="hljs-attr">type</span>: <span class="hljs-string">'[model.namespace]/setStoreList'</span>,
  <span class="hljs-attr">payload</span>: [
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">`<span class="hljs-subst">${model.state.key}</span>`</span>,
      <span class="hljs-attr">values</span>: <span class="hljs-string">`<span class="hljs-subst">${your values}</span>`</span>
    },
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">`<span class="hljs-subst">${model.state.key}</span>`</span>,
      <span class="hljs-attr">values</span>: <span class="hljs-string">`<span class="hljs-subst">${your values}</span>`</span>
    }
  ]
})
</code></pre>
<h3 data-id="heading-10">04. 数据不可变</h3>
<p>在函数式编程语言中，数据是不可变的，<a href="https://link.juejin.cn/?target=http%3A%2F%2Fcn.redux.js.org%2Ftutorials%2Fessentials%2Fpart-1-overview-concepts%23%25E4%25B8%258D%25E5%258F%25AF%25E5%258F%2598%25E6%2580%25A7-immutability" target="_blank" rel="nofollow noopener noreferrer" title="http://cn.redux.js.org/tutorials/essentials/part-1-overview-concepts#%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%80%A7-immutability" ref="nofollow noopener noreferrer">(这也是官方说的)</a>，所有的数据一旦产生，就不能改变其中的值，如果要改变，那就只能生成一个新的数据。由于现在很多项目都会使用 &nbsp;<code>seamless-immutable</code>，那么在业务中的 <code>model.state</code> 中，使用了 Immutable 包裹了 state，然后调用默认提供的 action，最后会报错，懂的都懂 !</p>
<p>那么该怎么办呢？内部支持 Immutable ，提供一个配置参数 <code>openSeamlessImmutable</code>，默认为 false，如果你业务中的 state 是 Immutable，而在 model 中不设置此配置，那么会报错。</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 使用 seamless-immutable</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">Immutable</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'seamless-immutable'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">namespace</span>: <span class="hljs-string">'appModel'</span>,
  <span class="hljs-attr">state</span>: <span class="hljs-title class_">Immutable</span>({}),
  <span class="hljs-attr">openSeamlessImmutable</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// 必须开启此配置</span>
};
</code></pre>
<h3 data-id="heading-11">05. 处理类型不一致</h3>
<p>这也是我有时候犯的错误，特别是在没有 TypeScript 的情况下，我们有时在 &nbsp;<code>model.state</code>&nbsp; 中定义好某个值的类型，但在改的时候却将其改为另一个类型，比如</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">namespace</span>: <span class="hljs-string">'userModel'</span>,
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">// 这里定义 name 为 string 类型</span>
  },
};
</code></pre>
<p>但在修改此 state value 时，传递的确是一个非 string 类型的值</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">dispatch</span>({
  <span class="hljs-attr">type</span>: <span class="hljs-string">'userModel/setStore'</span>,
  <span class="hljs-attr">payload</span>: {
    <span class="hljs-attr">key</span>: <span class="hljs-string">'name'</span>,
    <span class="hljs-attr">values</span>: {}, <span class="hljs-comment">// 这里 name 变成了object</span>
  },
});
</code></pre>
<p>这其实是不合理的，在 rc-redux-model 中，会针对需要修改的 &nbsp;<code>state[key]</code>&nbsp; 做类型检测处理</p>
<p><img src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/98b7d90ef77c4f43b7a739dde95a1a92_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" alt="image.png" loading="lazy" class="medium-zoom-image"></p>
<p>同时做 <code>state[key]</code> 字段的处理</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">namespace</span>: <span class="hljs-string">'userModel'</span>,
  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">// 这里只定义 state 中存在 name</span>
  },
};
</code></pre>
<p>此时想修改 state 中的另一属性值</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">dispatch</span>({
  <span class="hljs-attr">type</span>: <span class="hljs-string">'userModel/setStore'</span>,
  <span class="hljs-attr">payload</span>: {
    <span class="hljs-attr">key</span>: <span class="hljs-string">'testName'</span>,
    <span class="hljs-attr">values</span>: <span class="hljs-string">'1'</span>, <span class="hljs-comment">// 这里想修改 testName 属性的值</span>
  },
});
</code></pre>
<p>极度不合理，因为你在 state 中并没有声明此属性， rc-redux-model 会默认帮你做检测</p>
<p><img src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/297af08ca0b94602b30009c52791d0b8_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" alt="image.png" loading="lazy" class="medium-zoom-image"></p>
<h3 data-id="heading-12">C. 核心源码解读</h3>
<p>上诉更多的是对中间件的思考和功能的设计，接下来我们结合代码，来看看一款 redux 中间件该如何开发。在此之前，我希望你能对 redux 有一定的了解，我给你们准备了几篇文章，都是我在开发中间件前看的文章内容，如果你感兴趣，可以点击下方链接查看</p>
<ul>
<li><a href="https://juejin.cn/post/6844904183426973703" target="_blank" title="https://juejin.cn/post/6844904183426973703">轻松搞定 Redux 源码解读与编程艺术</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Ftech.meituan.com%2F2017%2F07%2F14%2Fredux-design-code.html" target="_blank" rel="nofollow noopener noreferrer" title="https://tech.meituan.com/2017/07/14/redux-design-code.html" ref="nofollow noopener noreferrer">redux 从设计到源码——美团技术团队</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Fnews%2F41333" target="_blank" rel="nofollow noopener noreferrer" title="https://cloud.tencent.com/developer/news/41333" ref="nofollow noopener noreferrer">redux 之洋葱模型的源码分析与感悟</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fcloud.tencent.com%2Fdeveloper%2Fnews%2F41333" target="_blank" rel="nofollow noopener noreferrer" title="https://cloud.tencent.com/developer/news/41333" ref="nofollow noopener noreferrer">深入浅出 Event Sourcing 和 CQRS</a></li>
<li><a href="https://link.juejin.cn/?target=http%3A%2F%2Fcn.redux.js.org%2Ftutorials%2Fessentials%2Fpart-1-overview-concepts" target="_blank" rel="nofollow noopener noreferrer" title="http://cn.redux.js.org/tutorials/essentials/part-1-overview-concepts" ref="nofollow noopener noreferrer">✨ redux 官方教程（推荐）</a></li>
</ul>
<blockquote>
<p>最起码上面 Part B 部分中的 action、reducer 等你都得明白吧？你得知道一个 action 是怎样的，reducer 是怎样的，不然下面你理解时会非常困难。</p>
</blockquote>
<p>看完之后，我们需要掌握几个最基础且重要的词汇：<code>函数式编程</code>、<code>compose</code>、<code>洋葱模型</code>，不要急，我们一个个来过知识点。</p>
<h4 data-id="heading-13">函数式编程</h4>
<ol>
<li>函数是第一等公民</li>
</ol>
<p>怎么理解，在 JS 中，函数可以当作是变量传入，也可以赋值给一个变量，甚至于，函数执行的返回结果也可以是函数。</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> func = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {};

<span class="hljs-comment">// 1. 当作参数</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">demo1</span>(<span class="hljs-params">func</span>) {}

<span class="hljs-comment">// 2. 赋值给另一个变量</span>
<span class="hljs-keyword">const</span> copy_func = func;

<span class="hljs-comment">// 3. 函数执行的返回结果是函数</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">demo2</span>(<span class="hljs-params"></span>) {
  <span class="hljs-keyword">return</span> func;
}
</code></pre>
<ol start="2">
<li>数据是不可变的(Immutable)</li>
</ol>
<p>在函数式编程语言中，数据是不可变的，所有的数据一旦产生，就不能改变其中的值，如果要改变，那就只能生成一个新的数据。</p>
<p>所以我们在 redux 中强调了，不能直接修改 state 的值，<strong><a href="https://link.juejin.cn/?target=http%3A%2F%2Fcn.redux.js.org%2Ftutorials%2Fessentials%2Fpart-1-overview-concepts%23%25E4%25B8%258D%25E5%258F%25AF%25E5%258F%2598%25E6%2580%25A7-immutability" target="_blank" rel="nofollow noopener noreferrer" title="http://cn.redux.js.org/tutorials/essentials/part-1-overview-concepts#%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%80%A7-immutability" ref="nofollow noopener noreferrer">代码必需先复制原来的 object/array，然后更新它的复制体。Redux 期望所有状态更新都是使用不可变的方式</a>。</strong></p>
<blockquote>
<p>额外补充一下，下边的两句话引用来自 <code>Dan Abramov</code> 的博客: <a href="https://link.juejin.cn/?target=https%3A%2F%2Foverreacted.io%2Fhow-are-function-components-different-from-classes%2F" target="_blank" rel="nofollow noopener noreferrer" title="https://overreacted.io/how-are-function-components-different-from-classes/" ref="nofollow noopener noreferrer">How Are Function Components Different from Classes?</a> 在 react 中，我们从 <code>this.props.xxx</code> 中读取数据。为什么我们可以得到最新的实例？其实不是因为 props 改变了，在 react 中，props 是不可变(immutable)的，他们永远不会改变。然而，this 是可变(mutable)的。这就是 react 类组件 this 存在的意义。</p>
</blockquote>
<ol start="3">
<li>函数只接受一个参数</li>
</ol>
<p>怎么理解，大伙估计都写了很久的多参数，看到这个懵了啊，我也懵了，但是这就是规矩，无规矩，不成方圆 ～</p>
<p>所以当你看<strong>中间件</strong>的代码时，你就不会奇怪了，比如这行代码 ～</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">middleware</span> = (<span class="hljs-params">store</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">next</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> {};
</code></pre>
<p>换成我们能够理解的形式，那就是 :</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">middleware</span> = (<span class="hljs-params">store</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">next</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> {};
  };
};
</code></pre>
<p>这里有人就疑问了，这不就是依赖了三个参数吗，那能不能这样写啊？</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">middleware</span> = (<span class="hljs-params">store, next, action</span>) =&gt; {};
</code></pre>
<p>可以，但这是规矩，是函数式编程就是要求只能有一个参数，懂 ?</p>
<h4 data-id="heading-14">组合 compose</h4>
<p>说说组合 compose，这个是个啥玩意，我们来看一段代码 :</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">compose</span> = (<span class="hljs-params">f, g</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">x</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">f</span>(<span class="hljs-title function_">g</span>(x));
  };
};

<span class="hljs-keyword">const</span> add = <span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) {
  <span class="hljs-keyword">return</span> x + <span class="hljs-number">2</span>;
};

<span class="hljs-keyword">const</span> del = <span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) {
  <span class="hljs-keyword">return</span> x - <span class="hljs-number">1</span>;
};

<span class="hljs-comment">// 使用组合函数，🧬 基因突变，强强联合</span>
<span class="hljs-keyword">const</span> composeFunction = <span class="hljs-title function_">compose</span>(add, del)(<span class="hljs-number">100</span>);
</code></pre>
<p>猜一下，执行 composeFunction 打印什么？答对的，给自己鼓个掌 👏</p>
<p>好了，我已经把最为强大的忍术：函数式编程术语之 compose 组合函数，教给你了～ 你多看几遍，之后你看 redux 的源码你就有种醍醐灌地的感觉。</p>
<h4 data-id="heading-15">洋葱模型</h4>
<p>洋葱模型是本质上是一层层的处理逻辑，而在函数式编程世界里，意味着用函数来做处理单元。先不说其他，我们先上一个例子，帮助大家理解～</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> middleware = [];
middleware.<span class="hljs-title function_">push</span>(<span class="hljs-function">(<span class="hljs-params">next</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'A'</span>);
  <span class="hljs-title function_">next</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'A1'</span>);
});
middleware.<span class="hljs-title function_">push</span>(<span class="hljs-function">(<span class="hljs-params">next</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'B'</span>);
  <span class="hljs-title function_">next</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'B1'</span>);
});
middleware.<span class="hljs-title function_">push</span>(<span class="hljs-function">(<span class="hljs-params">next</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'C'</span>);
});

<span class="hljs-comment">// 这里的 run 不用 care</span>
<span class="hljs-keyword">let</span> func = <span class="hljs-title function_">run</span>(middleware);
<span class="hljs-title function_">func</span>();
</code></pre>
<p>猜猜打印顺序是个啥 ？没错，打印结果为 : A -&gt; B -&gt; C -&gt; B1 -&gt; A1</p>
<p>当程序运行到 <code>next()</code> 的时候会暂停当前程序，进入下一个中间件，处理完之后才会仔回过头来继续处理。</p>
<img src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/c6c7365ec7224aae815de0b4ddaa72fb_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" width="200" loading="lazy" class="medium-zoom-image">
<p>我们看这张图，很有意思，会有两次进入同一个中间件的行为，而且是在所有第一次的中间件执行之后，才依次返回上一个中间件。你品，你细品～</p>
<img src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/09c6b76fffb64795bcd663f883bb3a75_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" width="200" loading="lazy" class="medium-zoom-image">
<p>如果你能看懂上面这段中间件的代码，那么我稍微改写一下，你也应该看得懂</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">f1</span>(<span class="hljs-params">store</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">next</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">action</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'step1 中间件1 开始'</span>);
      <span class="hljs-title function_">next</span>(action);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'step2 中间件1 结束'</span>);
    };
  };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">f2</span>(<span class="hljs-params">store</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">next</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">action</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'step3 中间件2 开始'</span>);
      <span class="hljs-title function_">next</span>(action);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'step4 中间件2 结束'</span>);
    };
  };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">f3</span>(<span class="hljs-params">store</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">next</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">action</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'step5 中间件3 开始'</span>);
      <span class="hljs-title function_">next</span>(action);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'step6 中间件3 结束'</span>);
    };
  };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">reducer</span>(<span class="hljs-params">state, action</span>) {
  <span class="hljs-keyword">if</span> (action.<span class="hljs-property">type</span> === <span class="hljs-string">'INIT_STORE'</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'我是大帅哥'</span>);
  }
  <span class="hljs-keyword">return</span> {};
}

<span class="hljs-keyword">var</span> store = <span class="hljs-title class_">Redux</span>.<span class="hljs-title function_">createStore</span>(reducer, <span class="hljs-title class_">Redux</span>.<span class="hljs-title function_">applyMiddleware</span>(f1, f2, f3));

store.<span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'INIT_STORE'</span> });
</code></pre>
<p>这时候想必大家还是有些难以理解，大概解读一下，在这个示例代码中，洋葱模型运行过程就是：</p>
<p>派发 action → 经过 <code>applyMiddleware API</code> 的组合 -&gt; action 传入 f1 副作用 → 打印 step1 → 执行 f1 的 next（这个 next 指向 f2 副作用）→ 打印 step3 → 执行 f2 的 next（这个 next 指向 f3 副作用）→ 打印 step5 → 执行 f3 的 next（这个 next 指向<code>store.dispatch</code>）→ 执行完毕 -&gt; 打印我是大帅哥 -&gt; 返回到 f3 副作用打印 step6 → 返回到 f2 打印 step4 → 返回到 f1 副作用打印 step2 -&gt; dispatch 执行完毕。</p>
<p>有人就会好奇了，这里的 <code>next</code> 到底是什么东西，其实他就是 <code>store.dispatch</code>，有点饶？我们来梳理一下。</p>
<p>如果你还不太能理解，请放轻松，先把上边我给的几个链接文章看一看，并且去搜索相关知识，自己补充补充知识。如果你能看懂上面这段中间件的 store 例子，那么请深呼吸一口气，接下来我们再深入一点。看看 <code>applyMiddleware</code> 的源码，不要怀疑，这真的是 redux 的源码。</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">applyMiddleware</span>(<span class="hljs-params">...middlewares</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">createStore</span>) =&gt;</span>
    <span class="hljs-function">(<span class="hljs-params">reducer, ...args</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createStore</span>(reducer, ...args);
      <span class="hljs-keyword">let</span> <span class="hljs-attr">dispatch</span>: <span class="hljs-title class_">Dispatch</span> = <span class="hljs-function">() =&gt;</span> {};

      <span class="hljs-keyword">const</span> middlewareAPI = {
        <span class="hljs-attr">getState</span>: store.<span class="hljs-property">getState</span>,
        <span class="hljs-attr">dispatch</span>: <span class="hljs-function">(<span class="hljs-params">action, ...args</span>) =&gt;</span> <span class="hljs-title function_">dispatch</span>(action, ...args),
      };

      <span class="hljs-keyword">const</span> chain = middlewares.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">middleware</span>) =&gt;</span> <span class="hljs-title function_">middleware</span>(middlewareAPI));
      dispatch = <span class="hljs-title function_">compose</span>(...chain)(store.<span class="hljs-property">dispatch</span>);

      <span class="hljs-keyword">return</span> {
        ...store,
        dispatch,
      };
    };
}
</code></pre>
<p>短短十几行代码，将我们上边说的知识点都包含了。不要怀疑，这就是源码，先试着理解一下。</p>
<p>首先，传入了一个中间件数组 <code>middlewares</code>，我们将它进行剥皮，并给中间件 middleware 都以我们定义的 middlewareAPI 作为参数注入，所以我们每一个中间件的上下文是 dispatch 和 getState，为什么？为什么要注入这两个玩意？因为</p>
<ul>
<li>getState：每一层洋葱都可以获取到当前的状态。</li>
<li>dispatch：为了可以将操作传递给下一个洋葱。</li>
</ul>
<p>那它是如何给每一个 middleware 注入的呢？看这段代码：</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> chain = middlewares.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">middleware</span>) =&gt;</span> <span class="hljs-title function_">middleware</span>(middlewareAPI));
</code></pre>
<p>遍历 middlewares，然后每一个中间件都注入 <code>store.getState</code> 和 <code>store.dispatch</code>，那经过这样处理之后，chain 是个什么东西？</p>
<p>很好理解，上面说过了函数式编程的要点：函数只接受一个参数，再复习一下这段代码</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">middleware</span> = (<span class="hljs-params">store, next, action</span>) =&gt; {};
</code></pre>
<p>是否有些眼熟，改写成我们熟知的函数式编程，就变成下面这样了</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">middleware</span> = (<span class="hljs-params">store</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">next</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> {};
</code></pre>
<p>也就是说，chain 其实是一个 <code>(store) =&gt; (next) =&gt; (action) =&gt; {}</code> 函数的数组，也就是中间件剥开后返回的函数组成的数组。</p>
<p>我们再看看这行代码</p>
<pre><code class="hljs language-ts" lang="ts">dispatch = <span class="hljs-title function_">compose</span>(...chain)(store.<span class="hljs-property">dispatch</span>);
</code></pre>
<p><code>compose</code> 应该不陌生了，组合函数，这里的代码改成我们常见的样子，就是下面这种形式</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">compose</span>(<span class="hljs-params">...chain</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">store.dispatch</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> chain.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">store.dispatch</span>) =&gt;</span> <span class="hljs-title function_">a</span>(<span class="hljs-title function_">b</span>(store.<span class="hljs-property">dispatch</span>)))
  }
}
</code></pre>
<p>我们以 store.dispatch 作为参数进行注入～ 通过 compose 对中间件数组内剥出来的高阶函数进行组合形成一个调用链。调用一次，中间件内的所有函数都将被执行。</p>
<p>知识量有点多，如果觉得有点乱，我们再来捋一捋。</p>
<ul>
<li>抛出第一个问题？<code>dispatch 是用来干嘛的？</code></li>
</ul>
<p>dispatch 是用来分发 action 的`，good，那么，我们可以得到第一个函数</p>
<pre><code class="hljs language-js" lang="js">(store.<span class="hljs-property">dispatch</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> {}
</code></pre>
<ul>
<li>这里抛出第二个问题，为了在每一个中间件中，都需要得到实时的 store 数据，怎么搞？</li>
</ul>
<p>那就不需要只传 <code>store.dispatch</code>，再给它传一个 <code>store.getState</code>，那么，我们可以得到修改后的函数</p>
<pre><code class="hljs language-js" lang="js">(store.<span class="hljs-property">dispatch</span>, store.<span class="hljs-property">getState</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> {}
</code></pre>
<ul>
<li>第三个问题，为了让下一个中间件，具备 dispatch 的能力，该怎么办？</li>
</ul>
<p>那就把 store.dispatch 传给下一个中间件，让它具备 <code>dispatch</code> 能力，那么，我们可以得到修改后的函数</p>
<pre><code class="hljs language-js" lang="js">(store.<span class="hljs-property">dispatch</span>, store.<span class="hljs-property">getState</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">store.dispatch</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> {}
</code></pre>
<ul>
<li>第四个问题，为了能够让每一个中间件持有最终的 dispatch，如何处理？</li>
</ul>
<p>redux 开发者利用了闭包的特性，将内部的 dispatch 与外部进行强绑定，也就是这段代码</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 这是我们意yin的代码</span>
<span class="hljs-keyword">let</span> <span class="hljs-title function_">dispatch</span> = (<span class="hljs-params"></span>) =&gt; {};

middlewares.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">middleware</span>) =&gt;</span>
  <span class="hljs-title function_">middleware</span>({
    getState,
    <span class="hljs-title function_">dispatch</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">return</span> dispatch;
    },
  })
);
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 映射到 redux 中的真实源码</span>
<span class="hljs-keyword">let</span> middlewareAPI = {
  <span class="hljs-attr">getState</span>: store.<span class="hljs-property">getState</span>,
  <span class="hljs-attr">dispatch</span>: <span class="hljs-function">(<span class="hljs-params">action, ...args</span>) =&gt;</span> <span class="hljs-title function_">dispatch</span>(action, ...args),
};

<span class="hljs-comment">// 其实你把 middlewareAPI 写到 middleware 里边，就等价于上边那玩意了</span>
<span class="hljs-keyword">const</span> chain = middlewares.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">middleware</span>) =&gt;</span> <span class="hljs-title function_">middleware</span>(middlewareAPI));
dispatch = <span class="hljs-title function_">compose</span>(...chain)(store.<span class="hljs-property">dispatch</span>);
</code></pre>
<p>所以最终我们对一个中间件形式就是：</p>
<pre><code class="hljs language-ts" lang="ts">middleware = <span class="hljs-function">(<span class="hljs-params">store.dispatch, store.getState</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">store.dispatch</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> {}

<span class="hljs-comment">// 改一下名称</span>
middleware = <span class="hljs-function">(<span class="hljs-params">store.dispatch, store.getState</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">next</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> {}
</code></pre>
<ul>
<li>
<p>问题五，dispatch 在这里边扮演了什么角色？</p>
</li>
<li>
<p>绑定了各个中间件的 next，说了 next 实际上就是 store.dispatch</p>
</li>
<li>
<p>暴露一个接口用来接收 action</p>
</li>
</ul>
<blockquote>
<p>你可以这么理解，中间件其实就是我们自定义了一个 dispatch，然后这个 dispatch 会按照洋葱模型进行 pipe</p>
</blockquote>
<p><strong>有个疑惑: 为什么在 middlewareAPI 中，dispatch 不是直接写成 store.dispatch, 而是用的匿名函数的闭包引用？</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// 为什么不这么写....</span>
<span class="hljs-keyword">let</span> middlewareAPI = {
  <span class="hljs-attr">getState</span>: store.<span class="hljs-property">getState</span>,
  <span class="hljs-attr">dispatch</span>: <span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> store.<span class="hljs-title function_">dispatch</span>(action),
};
</code></pre>
<p><strong>其实写成匿名函数的闭包引用是为了每一个中间件都取的是最新的 dispatch</strong>，假设我们现在执行某一个中间件 m1，然后 dispatch 了 action1，当此 action1 执行完毕，接着应该执行下一个中间件 m2，在下一个中间件中，dispatch 应当是最新的引用，不然这个 action2 走的是没有经过任何中间件修饰的 store.dispatch，这显然是不行的。所以要写成匿名函数的闭包引用。</p>
<h3 data-id="heading-16">结合 rc-redux-model 源码</h3>
<p>上面看完之后，最为重要的是你需要知道，一个中间件的组成</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">middleware</span> = (<span class="hljs-params">store.dispatch, store.getState</span>) =&gt; <span class="hljs-function">(<span class="hljs-params">next</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> {}
</code></pre>
<p>记住这一点，那么接下来就好办了，因为我们做的是一个 redux 中间件，在使用上是</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { createStore, applyMiddleware, combineReducers } <span class="hljs-keyword">from</span> <span class="hljs-string">'redux'</span>;
<span class="hljs-keyword">import</span> models <span class="hljs-keyword">from</span> <span class="hljs-string">'./models'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">RcReduxModel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'rc-redux-model'</span>;

<span class="hljs-keyword">const</span> reduxModel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RcReduxModel</span>(models);

<span class="hljs-comment">// 👉 利用 combineReducers 把我们写的 reducers 搞进去</span>
<span class="hljs-keyword">const</span> reducerList = <span class="hljs-title function_">combineReducers</span>(reduxModel.<span class="hljs-property">reducers</span>);
<span class="hljs-comment">// 👉 利用 applyMiddleware 将我们写的中间件搞进去</span>
<span class="hljs-keyword">return</span> <span class="hljs-title function_">createStore</span>(reducerList, <span class="hljs-title function_">applyMiddleware</span>(reduxModel.<span class="hljs-property">thunk</span>));
</code></pre>
<p>接下来，我们开始写代码</p>
<h4 data-id="heading-17">D. 开始实现 RcReduxModel 类</h4>
<p>下面这张图是 UML 图，我们可以来看一下，共有 3 个成员变量及 1 个私有方法。</p>
<p><img src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/b3eed17f36714742975252bdf6bd18f3_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" alt="image.png" loading="lazy" class="medium-zoom-image"></p>
<ul>
<li>models：你传进来的 models 经过一系列处理之后的最终 models</li>
<li>reducers：所有 model 下的 reducers，整合在一起，用于 redux.combineReducers</li>
<li>thunk：自己实现的 thunk 中间件，对 dispatch 的增强，用于 redux.applyMiddleware</li>
<li>start()：主逻辑，该方法下的主要工作为
<ul>
<li>自动为每一个 state 值注册 action</li>
<li>自动注册每一个 model 的 reducers</li>
<li>实现 dispatch 对中间件的增强</li>
</ul>
</li>
</ul>
<p>在此之前，我们来看一下一个 model 的类型声明</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">RModel</span> {
  <span class="hljs-attr">namespace</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// 命名空间</span>
  openSeamlessImmutable?: <span class="hljs-built_in">boolean</span>;
  <span class="hljs-attr">state</span>: {
    [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>;
  };
  action?: {
    [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-function">(<span class="hljs-params">{
      dispatch,
      getState,
      currentAction,
      commit,
      call,
    }</span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  };
  reducers?: {
    [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>;
  };
}
</code></pre>
<p>下面是伪代码，具体请看线上代码：👉 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FSugarTurboS%2Frc-redux-model%2Fblob%2Fmaster%2Fcore%2Findex.ts" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/SugarTurboS/rc-redux-model/blob/master/core/index.ts" ref="nofollow noopener noreferrer">index.ts</a></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">class</span> <span class="hljs-title class_">RcReduxModel</span> {
  <span class="hljs-keyword">public</span> <span class="hljs-attr">models</span>: {
    [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-title class_">RModel</span>;
  };
  <span class="hljs-keyword">public</span> <span class="hljs-attr">thunk</span>: <span class="hljs-built_in">any</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-attr">reducers</span>: <span class="hljs-built_in">any</span>;

  <span class="hljs-keyword">public</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params">models: RModel[]</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">models</span> = {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reducers</span> = {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">thunk</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">start</span>(models);
  }

  <span class="hljs-keyword">private</span> <span class="hljs-title function_">start</span>(<span class="hljs-params">models: RModel[]</span>) {
    <span class="hljs-comment">// step1. 自动为每一个 state 都注册一个 action，并且提供默认修改 state 的 action</span>
    <span class="hljs-comment">// returns 返回经过处理之后的 model 集合</span>
    <span class="hljs-keyword">let</span> autoActionAndReducerModel = models.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">model: RModal</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">registerAutoAction</span>(model);
    });

    <span class="hljs-comment">// step2. 每一个 model 中的 reducers 只是一个对象，而在 redux 中，reducer 是一个方法</span>
    <span class="hljs-comment">// 该方法的写法为：(state, action) =&gt; newState; 所以我们需要改造成符合 redux 的写法</span>
    <span class="hljs-comment">// 才能支持 redux.combineReducers 去使用，让我们修改一下</span>
    autoActionAndReducerModel.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">model: RModal</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">reducers</span>[model.<span class="hljs-property">namespace</span>] = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">registerReducers</span>(model); <span class="hljs-comment">// 该方法返回的是一个函数</span>
    });

    <span class="hljs-comment">// step3. 中间件增强，核心之处：(dispatch, getState) =&gt; (next) =&gt; (action) =&gt; {}</span>
    <span class="hljs-comment">// 注入自定义的 callAPI、commit 等功能，具体看下面代码</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">thunk</span> = <span class="hljs-title function_">middleware</span>(autoActionAndReducerModel);

    <span class="hljs-comment">// step4. 检测 model 是否有重复，并将处理之后的 model 赋值给成员变量</span>
    autoActionAndReducerModel.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">model: RModal</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">registerModel</span>(model, models);
    });
  }
}
</code></pre>
<p>上面就是整个 <code>RcReduxModel</code> 类的核心要点，相比结合注释，大家都能理解，接下来我将一步步带大家实现对应的方法</p>
<ul>
<li>registerAutoAction()：自动为每一个 state 都注册一个 action，并且提供默认修改 state 的 action</li>
<li>registerReducers()：将 model 中的 reducer 对象变为 (state, action) =&gt; newState 函数</li>
<li>middleware()：中间件 (dispatch, getState) =&gt; (next) =&gt; (action) =&gt; {}</li>
<li>registerModel()：所有 model 的集合</li>
</ul>
<h4 data-id="heading-18">registerAutoAction()</h4>
<p>该方法接收的是一个 model，上面说了一个 model 都具备什么属性，如果你拿到了一个 model，你期望为每一个 state 提供对应的 action，该如何实现呢？</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 生成自动注册修改 state 的 action.type</span>
<span class="hljs-keyword">const</span> generateReducerActionType = (<span class="hljs-attr">namespace</span>: string, <span class="hljs-attr">key</span>: string): <span class="hljs-function"><span class="hljs-params">string</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`SET_<span class="hljs-subst">${namespace.toUpperCase()}</span>_<span class="hljs-subst">${key.toUpperCase()}</span>`</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">model: RModel</span>): <span class="hljs-title class_">RModel</span> {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">nextAction</span>: any = {};
  <span class="hljs-keyword">let</span> <span class="hljs-attr">nextReducers</span>: any = {};

  <span class="hljs-keyword">const</span> {
    namespace,
    state = {},
    action = {},
    reducers = {},
    openSeamlessImmutable,
  } = model;

  <span class="hljs-comment">// step1. 如果没有 state，那就不需要自动注册了</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(state).<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> model;

  <span class="hljs-comment">// step2. 如果存在 state 值，那就遍历 stateKey</span>
  <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(state).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">stateKey: string</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> actionTypeToReducer = <span class="hljs-title function_">generateReducerActionType</span>(namespace, stateKey);

    <span class="hljs-comment">// step3. 给每一个 state 都自动生成一个能修改 state 的 action</span>
    <span class="hljs-keyword">if</span> (!nextAction[<span class="hljs-string">`set<span class="hljs-subst">${stateKey}</span>`</span>]) {
      nextAction[<span class="hljs-string">`set<span class="hljs-subst">${stateKey}</span>`</span>] = <span class="hljs-title function_">autoAction</span>(actionTypeToReducer);
    }

    <span class="hljs-comment">// step4. 注册了 action，对应的 reducer 应该要有一个 action.type 映射，好修改 state 值</span>
    <span class="hljs-keyword">if</span> (!nextReducers[<span class="hljs-string">`<span class="hljs-subst">${actionTypeToReducer}</span>`</span>]) {
      nextReducers[<span class="hljs-string">`<span class="hljs-subst">${actionTypeToReducer}</span>`</span>] = <span class="hljs-title function_">autoReducers</span>(
        stateKey,
        openSeamlessImmutable
      );
    }
  });

  <span class="hljs-comment">// step5. 如果有太多的 state，用户记不住注册的 action</span>
  <span class="hljs-comment">// 所以这里提供两个默认的 action</span>
  nextAction[<span class="hljs-string">'setStore'</span>] = <span class="hljs-title function_">autoSetStoreAction</span>(namespace);
  nextAction[<span class="hljs-string">'setStoreList'</span>] = <span class="hljs-title function_">autoSetStoreListAction</span>(namespace);

  <span class="hljs-comment">// step6. 如果存在重复，以用户定义的为主</span>
  nextAction = { ...nextAction, ...action };
  nextReducers = { ...nextReducers, ...reducers };
  <span class="hljs-keyword">return</span> {
    ...model,
    <span class="hljs-attr">action</span>: nextAction,
    <span class="hljs-attr">reducers</span>: nextReducers,
  };
}
</code></pre>
<p>自动注册 action 的代码就这么点，但核心在于 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FSugarTurboS%2Frc-redux-model%2Fblob%2Fmaster%2Fcore%2FregisterAutoAction.ts%23L10" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/SugarTurboS/rc-redux-model/blob/master/core/registerAutoAction.ts#L10" ref="nofollow noopener noreferrer">autoAction</a> 的实现和 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FSugarTurboS%2Frc-redux-model%2Fblob%2Fmaster%2Fcore%2FregisterAutoAction.ts%23L25" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/SugarTurboS/rc-redux-model/blob/master/core/registerAutoAction.ts#L25" ref="nofollow noopener noreferrer">autoReducers</a> 的实现。</p>
<p>这边给大家留一个悬念，我怕你们懒得去看源码，所以我这里就不贴代码了，实现也很简单，小伙伴们快<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FSugarTurboS%2Frc-redux-model%2Fblob%2Fmaster%2Fcore%2FregisterAutoAction.ts" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/SugarTurboS/rc-redux-model/blob/master/core/registerAutoAction.ts" ref="nofollow noopener noreferrer">👉 点击这里</a> 去看源码啊！</p>
<h4 data-id="heading-19">registerReducers()</h4>
<p>该方法接收的是一个 model，那么我们如何将 model.reducers 对象，变成我们期望的 (state, action) =&gt; newState 呢？</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">registerReducers</span>(<span class="hljs-params">model: RModel</span>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-keyword">namespace</span>, state, reducers } = model;

  invariant(reducers, `model's reducers must be defined, but got undefined`);

  const reducersActionTypes = <span class="hljs-title class_">Object</span>.keys(reducers);

  return (storeState: any, storeAction: any) =&gt; {
    <span class="hljs-keyword">const</span> newState = storeState || state;
    <span class="hljs-keyword">const</span> reducersActionKeys = storeAction.<span class="hljs-property">type</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>);
    <span class="hljs-comment">// step1. 因为我们规定每一个 action type 都必须是 [namespace]/[actionName] 这种格式</span>
    <span class="hljs-keyword">const</span> reducersActionModelName = reducersActionKeys[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">const</span> reducersActionSelfName = reducersActionKeys[<span class="hljs-number">1</span>];

    <span class="hljs-comment">// step2. 如果命名空间对不上，直接返回数据</span>
    <span class="hljs-keyword">if</span> (reducersActionModelName !== <span class="hljs-keyword">namespace</span>) return newState;

    // step3. 如果自动注册的 reducer type 存在当前这个 actionName，就会触发执行，将 state 值修改
    // 其实真正修改的在于上面的 autoReducers 方法，一定要去看这个方法
    if (reducersActionTypes.includes(reducersActionSelfName)) {
      <span class="hljs-keyword">return</span> reducers[reducersActionSelfName](newState, storeAction.<span class="hljs-property">payload</span>);
    }
    <span class="hljs-keyword">return</span> newState;
  };
}
</code></pre>
<h4 data-id="heading-20">middleware()</h4>
<p>该方法接收的是一个 model 集合，也就是 <code>RModel[]</code>，接下来我们如何实现一个中间件？</p>
<p>中间件的核心之处 <code>(dispatch, getState) =&gt; (next) =&gt; (action) =&gt; {}</code></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getCurrentModel</span> = (<span class="hljs-params">actionModelName: <span class="hljs-built_in">string</span>, models: <span class="hljs-built_in">Array</span>&lt;RModel&gt;</span>) =&gt; {
  <span class="hljs-keyword">if</span> (models.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">const</span> findModel = models.<span class="hljs-title function_">filter</span>(
    <span class="hljs-function">(<span class="hljs-params">model: RModel</span>) =&gt;</span> model.<span class="hljs-property">namespace</span> === actionModelName
  );
  <span class="hljs-keyword">if</span> (findModel.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> findModel[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">actionToReducer</span> = (<span class="hljs-params">
  currentModel: RModal,
  actionModelName: <span class="hljs-built_in">string</span>,
  next: <span class="hljs-built_in">any</span>
</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">reducerAction: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (currentModel &amp;&amp; currentModel.<span class="hljs-property">reducers</span>) {
      <span class="hljs-keyword">if</span> (currentModel.<span class="hljs-property">reducers</span>[reducerAction.<span class="hljs-property">type</span>]) {
        <span class="hljs-title function_">next</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">`<span class="hljs-subst">${actionModelName}</span>/<span class="hljs-subst">${reducerAction.<span class="hljs-keyword">type</span>}</span>`</span>,
          <span class="hljs-attr">payload</span>: reducerAction.<span class="hljs-property">payload</span>,
        });
      }
    }
  };
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">callAPI</span> = (<span class="hljs-params">dispatch: <span class="hljs-built_in">any</span></span>) =&gt; <span class="hljs-keyword">async</span> (<span class="hljs-attr">service</span>: <span class="hljs-built_in">any</span>, <span class="hljs-attr">params</span>: <span class="hljs-built_in">any</span>) =&gt; {
  <span class="hljs-keyword">let</span> result = {};
  <span class="hljs-keyword">try</span> {
    result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">service</span>(params);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(params);
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(result);
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">models: RModel[]</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">{ dispatch, getState }: <span class="hljs-built_in">any</span></span>) =&gt;</span>
    <span class="hljs-function">(<span class="hljs-params">next: <span class="hljs-built_in">any</span></span>) =&gt;</span>
    <span class="hljs-function">(<span class="hljs-params">action: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
      <span class="hljs-comment">// step1. 因为我们规定每一个 action type 都必须是 [namespace]/[actionName] 这种格式</span>
      <span class="hljs-keyword">const</span> actionKeyTypes = action.<span class="hljs-property">type</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'/'</span>);
      <span class="hljs-title function_">invariant</span>(actionKeyTypes.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">2</span>, <span class="hljs-string">`dispatch action only accept [namespace/actionName], but got <span class="hljs-subst">${action.<span class="hljs-keyword">type</span>}</span>`</span>);
      <span class="hljs-keyword">const</span> actionModelName = actionKeyTypes[<span class="hljs-number">0</span>];
      <span class="hljs-keyword">const</span> actionSelfName = actionKeyTypes[<span class="hljs-number">1</span>];

      <span class="hljs-comment">// step2. 得到当前的 model</span>
      <span class="hljs-keyword">const</span> currentModel = <span class="hljs-title function_">getCurrentModel</span>(actionModelName, models);
      <span class="hljs-keyword">if</span> (currentModel) {
        <span class="hljs-comment">// step3. 当前这个 action 对象中是否存在当前发的这个 action</span>
        <span class="hljs-keyword">const</span> currentModelAction = currentModel.<span class="hljs-property">action</span> ? currentModel.<span class="hljs-property">action</span>[actionSelfName] : <span class="hljs-literal">null</span>;
        <span class="hljs-title function_">invariant</span>(currentModelAction, <span class="hljs-string">`[<span class="hljs-subst">${actionSelfName}</span>] does not exist [<span class="hljs-subst">${actionModelName}</span>]!`</span>);

        <span class="hljs-comment">// step4. 如果当前这个 action 存在并且是一个函数 （autoAction 返回的是一个 Function，所以一定要去看这个方法）</span>
        <span class="hljs-keyword">if</span> (currentModelAction &amp;&amp; <span class="hljs-keyword">typeof</span> currentModelAction === <span class="hljs-string">'function'</span>) {
          <span class="hljs-keyword">const</span> commitActionToReducer = <span class="hljs-title function_">actionToReducer</span>(currentModel, actionModelName, next);
          <span class="hljs-comment">// step5. 发起一个 同步 action，也就是发一个到 reducer 的 action</span>
          <span class="hljs-comment">// 当 reducer 接收到 action.type 与我们发过来的一致时，就进行 state 值修改</span>
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">currentModelAction</span>({
            dispatch,
            getState,
            <span class="hljs-attr">currentAction</span>: action,
            <span class="hljs-attr">commit</span>: commitActionToReducer,
            <span class="hljs-attr">call</span>: <span class="hljs-title function_">callAPI</span>(dispatch),
          });
        }
      }

      <span class="hljs-comment">// step6. 执行下一个中间件，因为 applyMiddleware 可能不仅是集成我们的中间件</span>
      <span class="hljs-comment">// 意味着当前这个 action 也许不是我们所期望的 action，我们不这个中间件不处理了</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">next</span>(action);
    };
}
</code></pre>
<h4 data-id="heading-21">registerModel()</h4>
<p>该方法就是检测 model 是否有重复</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">registerModel</span>(<span class="hljs-params">model: RModal, models: RModal[]</span>) {
  <span class="hljs-title function_">invariant</span>(model.<span class="hljs-property">namespace</span>, <span class="hljs-string">`model's namespace is undefined`</span>);
  <span class="hljs-title function_">invariant</span>(<span class="hljs-keyword">typeof</span> model.<span class="hljs-property">namespace</span> === <span class="hljs-string">'string'</span>, <span class="hljs-string">`model's namespace should be string, but got <span class="hljs-subst">${<span class="hljs-keyword">typeof</span> model.<span class="hljs-keyword">namespace</span>}</span>`</span>);
  
  <span class="hljs-keyword">const</span> duplicateModel = models.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">mod: RModal</span>) =&gt;</span> mod.<span class="hljs-property">namespace</span> === model.<span class="hljs-property">namespace</span>);
  <span class="hljs-title function_">invariant</span>(duplicateModel.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">1</span>, <span class="hljs-string">`model's namespace should be unique, but now got the same namespace length = <span class="hljs-subst">${duplicateModel.length}</span>, with the same namespace is <span class="hljs-subst">${model.<span class="hljs-keyword">namespace</span>}</span>`</span>);
  
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">models</span>[model.<span class="hljs-property">namespace</span>]) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">models</span>[model.<span class="hljs-property">namespace</span>] = model;
  }
}
</code></pre>
<h4 data-id="heading-22">总结</h4>
<p>上述就是整个 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FSugarTurboS%2Frc-redux-model" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/SugarTurboS/rc-redux-model" ref="nofollow noopener noreferrer">rc-redux-model</a> 核心代码，实现不难，我还是期望小伙伴们都能去看源码，当然我的代码写的也不一定是最佳的，希望能给你带来一些思路。</p>
<p>如果你能捋清楚并且看懂源码，那么我们可以实现一个例如著名的 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FLogRocket%2Fredux-logger" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/LogRocket/redux-logger" ref="nofollow noopener noreferrer">redux-logger</a>，我们练手实现它的简易版本，实现起来大同小异，只需要将未修改前的 redux 和修改之后的 redux 打印出来，再把修改的 action 打印出来，一个最小化的 redux 数据打印中间件就完成了。</p>
<h2 data-id="heading-23">最后</h2>
<p>该篇幅特别长，我很想拆成两篇去写，但最后想想还是算了，这篇文章主要是从我为什么要做一个中间件，到我期望做成怎么样，再到做之前的知识储备，及最终的做成什么样。</p>
<p>希望我的一些思考和实现能给你带来一些收获。最后如果你觉得该中间件还行，能给你一些帮助，那我不知廉耻的求个小星星 ✨ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FSugarTurboS%2Frc-redux-model" target="_blank" rel="nofollow noopener noreferrer" title="https://github.com/SugarTurboS/rc-redux-model" ref="nofollow noopener noreferrer">rc-redux-model</a></p><style>.markdown-body pre,.markdown-body pre>code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style></div></div> <!----> <section data-v-841680ca="" class="book-comments"><div data-v-841680ca="" class="box-title">留言</div> <div data-v-76f63394="" data-v-841680ca="" data-jj-helper="comment-container" class="container"><div data-v-733426cc="" data-v-76f63394="" class="comment-form comment-form hasborder" jj-helper-item-id="6950646725295996940" jj-helper-item-type="12"><div data-v-733426cc="" class="avatar-box"><img data-v-248050e4="" data-v-47508ed8="" data-v-733426cc="" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/9de2b34dc072bac38d995cd9638181cf_100x100.awebp" alt="" class="lazy avatar avatar" loading="lazy"></div><div data-v-733426cc="" class="form-box"><div data-v-7c7c7498="" data-v-733426cc="" class="auth-card"><!----> <div data-v-733426cc="" data-v-7c7c7498="" class="input-box"><div data-v-733426cc="" data-v-7c7c7498="" contenteditable="true" spellcheck="false" placeholder="输入评论（Enter换行，⌘ + Enter发送）" disabled="disabled" class="rich-input empty"></div><!----></div></div><div data-v-733426cc="" class="action-box"><div data-v-9fe533ba="" data-v-733426cc="" class="emoji-container emoji-btn" style="display: none;"><div data-v-9fe533ba="" class="emoji-box"><svg data-v-9fe533ba="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon"><path data-v-9fe533ba="" fill-rule="evenodd" clip-rule="evenodd" d="M8.00002 0.666504C12.0501 0.666504 15.3334 3.94975 15.3334 7.99984C15.3334 12.0499 12.0501 15.3332 8.00002 15.3332C3.94993 15.3332 0.666687 12.0499 0.666687 7.99984C0.666687 3.94975 3.94993 0.666504 8.00002 0.666504ZM8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM10.6667 5.66667V7.66667H9.33333V5.66667H10.6667ZM6.66667 5.66667V7.66667H5.33333V5.66667H6.66667ZM10.0767 9.33333H11.0495C11.1804 9.33333 11.2866 9.43951 11.2866 9.57048C11.2866 9.60754 11.2779 9.64409 11.2612 9.67718L11.244 9.71053C10.6294 10.8739 9.40726 11.6667 7.99998 11.6667C6.61523 11.6667 5.40977 10.8991 4.7859 9.76612L4.73786 9.67593C4.67845 9.56052 4.72385 9.4188 4.83926 9.35939C4.87253 9.34226 4.90941 9.33333 4.94683 9.33333H5.92347C6.02396 9.33332 6.11908 9.37865 6.18238 9.4567C6.26207 9.55496 6.32833 9.62955 6.38117 9.68046C6.80074 10.0847 7.37133 10.3333 7.99998 10.3333C8.63289 10.3333 9.20694 10.0814 9.62728 9.67224C9.67791 9.62296 9.74135 9.55121 9.8176 9.45698C9.88089 9.37877 9.97611 9.33333 10.0767 9.33333Z"></path></svg> <span data-v-9fe533ba="">表情</span></div> <!----></div><div data-v-733426cc="" class="image-btn" style="display: none;"><svg data-v-733426cc="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon"><path data-v-733426cc="" fill-rule="evenodd" clip-rule="evenodd" d="M14 1.3335C14.3514 1.3335 14.6394 1.60546 14.6648 1.95041L14.6666 2.00016V14.0002C14.6666 14.3516 14.3947 14.6396 14.0497 14.665L14 14.6668H1.99998C1.64853 14.6668 1.36059 14.3949 1.33514 14.0499L1.33331 14.0002V2.00016C1.33331 1.64871 1.60527 1.36077 1.95023 1.33532L1.99998 1.3335H14ZM13.3333 2.66618H2.66664V13.3328H13.3333V2.66618ZM11.9219 6.7879C11.9719 6.83791 12 6.90574 12 6.97647V11.7993C12 11.9098 11.9104 11.9993 11.8 11.9993H6.81615C6.7975 11.9993 6.77945 11.9968 6.76232 11.992L3.91042 11.9847C3.79996 11.9844 3.71063 11.8947 3.7109 11.7842C3.71102 11.7313 3.73209 11.6807 3.76948 11.6433L6.52468 8.88807C6.62882 8.78393 6.79766 8.78393 6.9018 8.88807L8.17297 10.1593L11.5447 6.7879C11.6489 6.68376 11.8177 6.68376 11.9219 6.7879ZM5.99997 3.99951V5.99951H3.99997V3.99951H5.99997Z"></path></svg><span data-v-733426cc="">图片</span></div><div data-v-733426cc="" class="submit"><span data-v-733426cc="" style="display: none;">⌘ + Enter</span><button data-v-733426cc="" disabled="disabled" class="submit-btn">发表评论</button></div></div></div><input data-v-733426cc="" type="file" class="hidden"></div> <!----> <div data-v-76f63394="" class="comment-list-wrapper"><div data-v-76f63394="" class="title">
      全部评论（1）
      <!----></div> <div data-v-76f63394="" class="comment-list comment-list"><div data-v-5ca9a68f="" class="image-viewer-box"><!----></div> <div data-v-e1bd52a4="" class="comment comment" data-jj-helper-comment-id="7003202080806896391" data-jj-helper-item-id="6950646725295996940" data-jj-helper-item-type="12" data-jj-helper-comment-status="1"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-e1bd52a4="" class="popover-box user-popover popover"><!---->  <a data-v-e1bd52a4="" href="https://juejin.cn/user/2365804755554792" target="_blank" rel="" class="user-link" data-v-f1a2074a=""><img data-v-248050e4="" data-v-47508ed8="" data-v-e1bd52a4="" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/78726a66556106ea927598ef6659edde_100x100.awebp" alt="给npy的前端秘籍的头像" class="lazy avatar avatar" loading="lazy"></a></div> <div data-v-e1bd52a4="" class="content-box"><div data-v-e1bd52a4="" class="comment-main"><span data-v-e1bd52a4="" class="delete">
        删除
      </span> <div data-v-e1bd52a4="" class="user-box"><div data-v-f1a2074a="" data-v-9421b4e2="" data-v-e1bd52a4="" class="popover-box user-popover"><!---->  <a data-v-0ef8bafa="" data-v-e1bd52a4="" href="https://juejin.cn/user/2365804755554792" target="_blank" rel="" class="username username" data-v-f1a2074a=""><span data-v-0ef8bafa="" class="name" style="max-width: 128px;">
    给npy的前端秘籍
  </span> <span data-v-3de16c56="" data-v-0ef8bafa="" blank="true" class="rank"><img data-v-3de16c56="" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/lv-3.7938ebc.png" alt="lv-3" title="创作等级"></span> <img data-v-7b42e73d="" data-v-0ef8bafa="" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/65a6a28f15d70e5a77bf881c5ec5340d.svg" alt="掘友等级" title="掘友等级" class="jueyou-level"> <!----> </a></div> <!----> <div data-v-29d7f98b="" data-v-e1bd52a4="" class="comment-more-info"><span data-v-29d7f98b="" class="divide"></span> <span data-v-29d7f98b="" class="position">
    公众号 @ 给npy的前端秘籍
  </span> <span data-v-29d7f98b="" class="divide"></span> <time data-v-29d7f98b="" datetime="1630560051000" title="Thu Sep 02 2021 13:20:51 GMT+0800 (中国标准时间)" class="time">
    1年前
  </time> <!----> <!----></div></div> <!----> <div data-v-e1bd52a4="" class="content">来了来了</div> <div data-v-e1bd52a4="" class="limit-btn" style="display: none;">
        展开
      </div> <div data-v-e1bd52a4="" class="limit-btn" style="display: none;">
        收起
      </div> <!----> <div data-v-e1bd52a4="" class="action-box"><div data-v-e1bd52a4="" class="action-left"><div data-v-e1bd52a4="" class="item dig-item"><svg data-v-e1bd52a4="" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-e1bd52a4="" fill-rule="evenodd" clip-rule="evenodd" d="M8.56162 2.16903C8.66569 2.09612 8.78195 2.06075 8.88247 2.09071C8.97653 2.11874 9.23851 2.25868 9.50988 2.9675C9.64419 3.31832 9.9356 4.24191 9.42155 6.05383C9.29751 6.49103 9.61394 6.95254 10.0926 6.95922L13.492 7.00667L13.492 7.00672H13.4991C13.6049 7.00672 13.7228 7.01937 13.8134 7.05849C13.8544 7.07622 13.8815 7.0959 13.8999 7.11552C13.9166 7.13326 13.9368 7.16198 13.9515 7.21587C13.9848 7.33735 14.0228 7.74663 13.9473 8.42213C13.874 9.07808 13.698 9.9443 13.341 10.9593C13.0424 11.8083 12.6601 12.5287 12.0684 13.4874C12.0558 13.5047 12.0462 13.5192 12.0418 13.526L12.0404 13.528C12.0292 13.5449 12.0242 13.5526 12.018 13.5613C12.0076 13.5759 12.0018 13.5815 11.9983 13.5845C11.996 13.5865 11.9908 13.5907 11.9777 13.5954C11.9638 13.6004 11.9311 13.6095 11.8706 13.6095H5.56278L5.56373 6.58441C5.87126 6.41852 6.19881 6.20079 6.54112 5.8401C6.93883 5.42103 7.33789 4.82891 7.76254 3.94134C7.84974 3.75908 7.91745 3.55913 7.97574 3.37714C7.99264 3.32437 8.0087 3.2733 8.02438 3.22344L8.02439 3.2234C8.066 3.09109 8.10495 2.96727 8.14985 2.84264C8.2758 2.49303 8.40247 2.28052 8.56162 2.16903ZM10.452 2.6068C10.1323 1.7716 9.70208 1.28228 9.17063 1.12389C8.64564 0.967414 8.20308 1.18842 7.98278 1.34276C7.55169 1.64476 7.33837 2.11859 7.20071 2.50071C7.14817 2.64656 7.10002 2.79968 7.05661 2.93775C7.0422 2.98357 7.02832 3.02773 7.01496 3.06941C6.95791 3.24755 6.90763 3.39066 6.85248 3.50594C6.45683 4.33291 6.1121 4.82661 5.80935 5.14563C5.51322 5.45766 5.23983 5.62142 4.9473 5.76772C4.71095 5.88592 4.55494 6.12857 4.55491 6.40111L4.55388 13.912C4.55383 14.3021 4.87002 14.6183 5.26008 14.6183H11.8706C12.2097 14.6183 12.4663 14.5109 12.6519 14.3531C12.7387 14.2792 12.7988 14.2038 12.8387 14.1479C12.8556 14.1243 12.8704 14.102 12.8786 14.0895L12.8813 14.0854L12.8826 14.0835L12.8955 14.068L12.9142 14.0377C13.5304 13.0409 13.9578 12.2465 14.2927 11.294C14.6745 10.2085 14.8679 9.26762 14.9499 8.53421C15.0297 7.82035 15.009 7.25796 14.9246 6.94965C14.805 6.51236 14.5104 6.26063 14.2134 6.13235C13.9385 6.01358 13.661 5.9981 13.5028 5.99787L10.4907 5.95583C10.9296 4.15742 10.648 3.11853 10.452 2.6068ZM1.0008 6.46734C0.981809 6.06471 1.30313 5.72787 1.70621 5.72787H2.75264C3.14266 5.72787 3.45883 6.04405 3.45883 6.43407V13.9437C3.45883 14.3337 3.14266 14.6499 2.75264 14.6499H2.06044C1.68335 14.6499 1.37279 14.3536 1.35502 13.977L1.0008 6.46734Z" fill="#8A919F"></path></svg>
            点赞
          </div> <div data-v-e1bd52a4="" class="item"><svg data-v-e1bd52a4="" width="16" height="16" viewBox="0 0 16 16" fill="#86909c" xmlns="http://www.w3.org/2000/svg" class=""><path data-v-e1bd52a4="" fill-rule="evenodd" clip-rule="evenodd" d="M14 1C14.3682 1 14.6667 1.29848 14.6667 1.66667V12.3333C14.6667 12.7015 14.3682 13 14 13H10.5924L8.44602 14.932C8.19248 15.1601 7.8076 15.1601 7.55406 14.932L5.40737 13H2.00004C1.63185 13 1.33337 12.7015 1.33337 12.3333V1.66667C1.33337 1.29848 1.63185 1 2.00004 1H14ZM13.3334 2.33333H2.6667V11.6667H5.919L8 13.5395L10.0807 11.6667H13.3334V2.33333ZM11.3334 6.66667C11.3334 6.48257 11.1841 6.33333 11 6.33333H5.00003C4.81594 6.33333 4.6667 6.48257 4.6667 6.66667V7.33333C4.6667 7.51743 4.81594 7.66667 5.00003 7.66667H11C11.1841 7.66667 11.3334 7.51743 11.3334 7.33333V6.66667Z"></path></svg>
            回复
          </div></div></div></div> <div data-v-e1bd52a4="" class="subcomment-wrapper"><!----> <!----></div></div></div></div> <!----></div></div></section></div></div></div></div> <div data-v-7f935304="" data-v-c2465156="" class="handle book-direction"><div data-v-7f935304="" class="book-handle"><div data-v-7f935304="" class="step-btn step-btn--prev"><img data-v-7f935304="" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/87ad47e35a060899d2234a8b5e7f378f.svg"></div> <div data-v-7f935304="" class="step-btn step-btn--next"><img data-v-7f935304="" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/54d8a353dfbeff543c8a513821df8caf.svg"></div></div> <!----></div></div></div></section> <!----> <!----></div> <!----> <div class="global-component-box"><div data-v-262fe4c6="" class="alert-list alert-list"></div> <!----> <!----> <!----> <!----> <!----> <!----></div> <!----> <!----> <!----> <!----> <!----> <!----> <!----> <!----></div></div></div><script>window.__NUXT__=(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){o.loading=a;o.skeleton=b;o.cursor=f;o.data=[];o.total=d;o.hasMore=b;return {layout:"default",data:[{}],fetch:[],error:c,state:{view:{activityIndex:{activityList:[],pageInfo:{hasNextPage:a,endCursor:e},afterPosition:e,activityListIsLoading:b,activityListIsError:a,userActivityList:[],placeholder:e,actionType:{FETCH:"@\u002Fview\u002Factivity-index\u002FFETCH",FETCH_RECOMMEND_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_RECOMMEND_LIST",RESET_ACTIVITY_LIST:"@\u002Fview\u002Factivity-index\u002FRESET_ACTIVITY_LIST",FETCH_USER_ACTIVITY_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_USER_ACTIVITY_LIST",FETCH_NEW_COUNT:"@\u002Fview\u002Factivity-index\u002FFETCH_NEW_COUNT",DELETE_ACTIVITY:"@\u002Fview\u002Factivity-index\u002FDELETE_ACTIVITY",TOGGLE_FOLLOW_USER:"@\u002Fview\u002Factivity-index\u002FTOGGLE_FOLLOW_USER",FETCH_ENTRY_COMMENT_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_ENTRY_COMMENT_LIST",UPDATE_LIST_LOADING:"@\u002Fview\u002Factivity-index\u002FUPDATE_LIST_LOADING",RESET:"@\u002Fview\u002Factivity-index\u002FRESET"},hotList:{list:[],after:e,loading:a,hasNextPage:a,actionType:{UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FFETCH",RESET:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FRESET"}},sidebar:{bannerList:[],actionType:{RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FRESET",UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FUPDATE_STATE",FETCH_BANNER:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FFETCH_BANNER"},recommend:{pageSize:g,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FRESET"},after:d},followed:{pageSize:g,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FRESET"},after:d},recommendPin:{list:[],after:e,loading:a,hasNextPage:b,actionType:{UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FFETCH",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FRESET"}}},topicPinList:{pageSize:g,page:h,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FRESET"},topicId:e,navList:[{type:j,name:j,title:"推荐 ",id:j},{type:k,name:k,title:"热门 ",id:k},{type:m,name:m,title:"关注 ",id:m},{type:i,name:"opensource",title:"开源推荐 ",id:"5c09ea2b092dcb42c740fe73"},{type:i,name:"recruitment",title:"内推招聘",id:"5abb61e1092dcb4620ca3322"},{type:i,name:"dating",title:"掘金相亲",id:"5abcaa67092dcb4620ca335c"},{type:i,name:"slacking",title:"上班摸鱼",id:"5c106be9092dcb2cc5de7257"},{type:i,name:"app",title:"应用安利",id:"5b514af1092dcb61bd72800d"},{type:i,name:"tool",title:"开发工具",id:"5abb67d2092dcb4620ca3324"},{type:i,name:"news",title:"New资讯",id:"5c46a17f092dcb4737217152"}],sortType:n}},search:{search_result_from:d,query:e,list:[],linkList:[],loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fsearch\u002FFETCH",FETCH_MORE:"@\u002Fview\u002Fsearch\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fsearch\u002FRESET"}},columnIndex:{list:{pageSize:g,page:h,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FRESET"},sort:l,category:"all"},hotList:{pageSize:g,page:h,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FUPDATE",FETCH:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFETCH_MORE",RESET:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FRESET"}}},timelineIndex:{tdkTemplates:[],categoryNavList:[],tagNavList:[],splitTagList:[],timelineAdList:[],list:[],sort:n,category:j,categoryId:e,tagId:e,tag:"全部",actionType:{FETCH_TIMELINE_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_TIMELINE_LIST",FETCH_CATEGORY_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_CATEGORY_LIST",FETCH_TAG_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_TAG_LIST",DELETE_ENTRY:"@\u002Fview\u002FtimelineIndex\u002FDELETE_ENTRY",DELETE_USER_ENTRIES:"@\u002Fview\u002FtimelineIndex\u002FDELETE_USER_ENTRIES",DELETE_TAG_ENTRIES:"@\u002Fview\u002FtimelineIndex\u002FDELETE_TAG_ENTRIES",FETCH_MORE:"@\u002Fview\u002FtimelineIndex\u002FFETCH_MORE",FETCH:"@\u002Fview\u002FtimelineIndex\u002FFETCH",RESET:"@\u002Fview\u002FtimelineIndex\u002FRESET"},serverRenderTimelineList:a,timelineList:{list:[],cursor:f,skeleton:b,loading:a,hasMore:b,categoryId:e,tagId:e,sort:e,actionType:{UPDATE_STATE:"timeline-list\u002FUPDATE_STATE",FETCH_MORE:"timeline-list\u002FFETCH_MORE",FETCH:"timeline-list\u002FFETCH",RESET:"timeline-list\u002FRESET"}},recommendList:{list:[],cursor:f,loading:a,skeleton:b,hasMore:b,actionType:{UPDATE_STATE:"recommend-list\u002FUPDATE_STATE",FETCH_MORE:"recommend-list\u002FFETCH_MORE",FETCH:"recommend-list\u002FFETCH",RESET:"recommend-list\u002FRESET"}},followingList:{list:[],cursor:f,skeleton:b,loading:a,hasMore:b,actionType:{UPDATE_STATE:"following-list\u002FUPDATE_STATE",FETCH_MORE:"following-list\u002FFETCH_MORE",FETCH:"following-list\u002FFETCH",RESET:"following-list\u002FRESET"}}},subscribe:{subscribed:{list:[],cursor:f,skeleton:b,loading:a,hasMore:a,actionType:{UPDATE_STATE:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FFETCH_MORE",FETCH:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FFETCH",RESET:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FRESET"}},all:{list:[],cursor:f,loading:a,skeleton:b,hasMore:a,linkList:e,actionType:{UPDATE_STATE:"view\u002Fsubscribe\u002Fall\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fsubscribe\u002Fall\u002Flist\u002FFETCH_MORE",FETCH:"view\u002Fsubscribe\u002Fall\u002Flist\u002FFETCH",RESET:"view\u002Fsubscribe\u002Fall\u002Flist\u002FRESET"}}},entryPublic:{entry:{user:{}},relatedEntryList:[],relatedCollectionList:[],actionType:{FETCH:"@\u002Fview\u002FentryPublic\u002FFETCH",RESET:"@\u002Fview\u002FentryPublic\u002FRESET"}},user:{user:{},serverRendered:a,userAnnuals:[],actionType:{FETCH:"@\u002Fview\u002Fuser\u002FFETCH",RESET:"@\u002Fview\u002Fuser\u002FRESET",UPDATE:"@\u002Fview\u002Fuser\u002FUPDATE",FETCH_ANNUALS:"@\u002Fview\u002Fuser\u002FFETCH_ANNUALS"},detailList:{actionType:{RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FRESET"},likeList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FRESET"}},postList:{list:[],hasMore:a,skeleton:a,loading:a,sort:l,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FRESET"}},searchList:{list:[],hasMore:a,skeleton:a,loading:a,key_word:e,search_type:d,cursor:f,isPostSearch:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FRESET"}},tagList:{list:[],loading:a,skeleton:b,hasMore:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FRESET"}},collectionList:{list:[],userId:e,skeleton:b,hasMore:a,cursor:f,type:"created",loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FRESET",TOGGLE_FOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FTOGGLE_FOLLOW_COLLECTION",FOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFOLLOW_COLLECTION",UNFOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FUNFOLLOW_COLLECTION",DELELTE_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FDELELTE_COLLECTION",ADD_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FADD_COLLECTION",EDIT_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FEDIT_COLLECTION"}},followerList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FRESET"}},followingList:{list:[],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FRESET"}},followingTeamsList:{list:[],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FRESET"}},activityList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FRESET"}},bookList:{list:[],cursor:f,skeleton:b,hasMore:a,loading:a,type:"bought",actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FRESET"}},pinList:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FRESET"}},courseList:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FRESET"}},pinPraisedList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FRESET"}},eventList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FRESET"}},selfColumnList:{list:[],hasMore:a,skeleton:a,loading:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FRESET"}},columnFollowedList:{list:[],hasMore:a,skeleton:a,loading:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FRESET",FILTER:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFILTER"}},realtimes:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FRESET",DELETE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FDELETE"}},realtimeliked:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FRESET",DELETE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FDELETE"}}}},tag:{tag:{},actionType:{FETCH:"@\u002Fview\u002Ftag\u002FFETCH",FETCH_LIST:"@\u002Fview\u002Ftag\u002FFETCH_LIST",RESET:"@\u002Fview\u002Ftag\u002FRESET"},list:{list:[],cursor:f,loading:a,skeleton:a,hasMore:a,actionType:{UPDATE_STATE:"@\u002Fview\u002Ftag\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Ftag\u002Flist\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Ftag\u002Flist\u002FFETCH",RESET:"@\u002Fview\u002Ftag\u002Flist\u002FRESET"}}},notification:{user:{actionType:{READ_ALL:"@\u002Fview\u002Fnotification\u002Fuser\u002FREAD_ALL",RESET:"@\u002Fview\u002Fnotification\u002Fuser\u002FRESET"},listState:{list:[],cursor:f,hasMore:a,isLoading:a,messageType:3,msgTotal:d,msgSubMap:{"1":d,"2":d,"3":d,"4":d}},list:{pageSize:g,page:h,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FRESET"}}},system:{actionType:{READ_ALL:"@\u002Fview\u002Fnotification\u002Fsystem\u002FREAD_ALL",RESET:"@\u002Fview\u002Fnotification\u002Fsystem\u002FRESET"},list:{pageSize:g,page:h,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FRESET"}}}},column:{renderPost:b,serverRenderList:a,column:{},entry:{},entryView:{},author:{},adEntryList:[],relatedEntryList:[],linkVotingList:[],userAnnuals:[],columnList:[],cachedHtml:e,showSidebar:a,actionType:{FETCH:"view\u002Fcolumn\u002FFETCH",FETCH_CACHED_HTML:"view\u002Fcolumn\u002FFETCH_CACHED_HTML",FETCH_ADDITIONAL:"view\u002Fcolumn\u002FFETCH_ADDITIONAL",FETCH_SIDEBAR_ADENTRY:"view\u002Fcolumn\u002FFETCH_SIDEBAR_ADENTRY",FETCH_AUTHOR_EXTRA:"view\u002Fcolumn\u002FFETCH_AUTHOR_EXTRA",RESET:"view\u002Fcolumn\u002FRESET"},recommendedArticleList:{list:[],cursor:f,loading:a,skeleton:a,hasMore:a,articleId:e,actionType:{UPDATE_STATE:"view\u002Fcolumn\u002Frecommend-List\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fcolumn\u002Frecommend-List\u002FFETCH_MORE",FETCH:"view\u002Fcolumn\u002Frecommend-List\u002FFETCH",RESET:"view\u002Fcolumn\u002Frecommend-List\u002FRESET"}}},collection:{collection:{author:{}},actionType:{FETCH:"@\u002Fview\u002Fcollection\u002FFETCH",REFRESH:"@\u002Fview\u002Fcollection\u002FREFRESH",RESET:"@\u002Fview\u002Fcollection\u002FRESET"},list:{pageSize:g,page:h,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fcollection\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fcollection\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fcollection\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fcollection\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fcollection\u002Flist\u002FRESET"},id:e,sort:l}},gettingStarted:{category:{},actionType:{UPDATE_STATE:"@\u002Fview\u002FgettingStarted\u002FUPDATE_STATE",FOLLOW:"@\u002Fview\u002FgettingStarted\u002FFOLLOW",RESET:"@\u002Fview\u002FgettingStarted\u002FRESET",UPDATE_CATEGORY:"@\u002Fview\u002FgettingStarted\u002FUPDATE_CATEGORY"}},pin:{pin:{user:{},imageUrlList:[]},pinList:[],actionType:{FETCH:"@\u002Fview\u002Fpin\u002FFETCH",RESET:"@\u002Fview\u002Fpin\u002FRESET"},sidebar:{list:[],after:e,loading:a,isRecommend:a,hasNextPage:b,actionType:{UPDATE_STATE:"@\u002Fview\u002Fpin\u002Fsidebar\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fpin\u002Fsidebar\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Fpin\u002Fsidebar\u002FFETCH",RESET:"@\u002Fview\u002Fpin\u002Fsidebar\u002FRESET"}},commentList:{pageSize:g,page:h,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fpin\u002FcommentList\u002FUPDATE",FETCH:"@\u002Fview\u002Fpin\u002FcommentList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fpin\u002FcommentList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fpin\u002FcommentList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fpin\u002FcommentList\u002FRESET"},pinId:c},subCommentList:{pageSize:g,page:h,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FUPDATE",FETCH:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FRESET"},commentId:c}},topic:{topic:e,followedTopicList:[],actionType:{FETCH:"@\u002Fview\u002Ftopic\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Ftopic\u002FUPDATE_STATE",RESET:"@\u002Fview\u002Ftopic\u002FRESET"},allTopicList:{pageSize:q,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FRESET"},sortType:k},pinlist:{pageSize:g,page:h,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FpinList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FpinList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FpinList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FpinList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FpinList\u002FRESET"},sortType:n},sidebar:{actionType:{RESET:"@\u002Fview\u002Ftopic\u002Fsidebar\u002FRESET",UPDATE_STATE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002FUPDATE_STATE"},attender:{pageSize:g,page:h,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FRESET"},topicId:c}},followedList:{pageSize:q,page:d,total:d,pointer:c,lastPointer:c,list:[],loading:a,error:c,canPrev:b,canNext:b,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FRESET"},after:d}},recommendationIndex:{actionType:{FETCH_USER:"@\u002Fview\u002Frecommendation\u002FFETCH_USER",FETCH_MORE:"@\u002Fview\u002Frecommendation\u002FFETCH_MORE",RESET:"@\u002Fview\u002Frecommendation\u002FRESET",FETCH:"@\u002Fview\u002Frecommendation\u002FFETCH"},cursor:e,hasMore:e,userList:[],loading:a,skeleton:b,category:j,categoryNavList:[],serverRenderUserList:a},event:{event:{},loading:a,user:{},actionType:{FETCH:"view\u002Fevent\u002FFETCH",RESET:"view\u002Fevent\u002FRESET"}},academyIndex:{academy:{},bannerList:[],qualitiedList:[],latestList:[],offlineList:[],loading:a,user:{},actionType:{FETCH:"view\u002Facademy\u002FFETCH",RESET:"view\u002Facademy\u002FRESET"}},coursesIndex:{loading:a,list:[],sort:"online",actionType:{FETCH:"view\u002Fcourses\u002FFETCH",RESET:"view\u002Fcourses\u002FRESET",FETCH_MORE:"view\u002Fcourses\u002FFETCH_MORE"}},team:{team:{},loading:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FFETCH",RESET:"@\u002Fview\u002Fteam\u002FRESET",UPDATE:"@\u002Fview\u002Fteam\u002FUPDATE",FOLLOW:"@\u002Fview\u002Fteam\u002FFOLLOW"},detailList:{actionType:{RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002FRESET"},posts:{list:[],hasMore:a,skeleton:a,loading:a,sort:l,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FRESET"}},pins:{list:[],hasMore:a,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FRESET"}},hire:{list:[],hasMore:a,cursor:f,loading:a,skeleton:b,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FRESET"}}}},couponList:{list:{"0":o,"1":o,"2":o}},payment:{selectedDiscount:{},bookletDetail:{},coupons:{availables:[],unavailables:[]}}},component:{indexAside:{bannerList:[],userList:[],actionType:{FETCH_BANNER:"@\u002Fcomponent\u002Faside\u002FFETCH_BANNER",FETCH_USER:"@\u002Fcomponent\u002Faside\u002FFETCH_USER",CLOSE_BANNER:"@\u002Fcomponent\u002Faside\u002FCLOSE_BANNER"}}},ore:{oreCount:d},avatarMenuInfo:{},common:{theme:"light"},env:{ua:"Mozilla\u002F5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit\u002F537.36 (KHTML, like Gecko) Chrome\u002F106.0.0.0 Safari\u002F537.36"},auth:{user:{id:"4230576475209821",self_description:void 0,followed:a,viewerIsFollowing:void 0,community:void 0,subscribedTagCount:30,wroteBookCount:d,boughtBookCount:112,isBindedPhone:h,level:3,user_id:"4230576475209821",user_name:"整只羊",company:"鲸灵",job_title:"前端摸鱼工程师",avatar_large:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F9de2b34dc072bac38d995cd9638181cf~300x300.image",power:486,phone:"13*****8620",email:e,allow_notification:b,rank_index:d,wallet_total_bill:d,description:"一位专注于摸鱼的前端开发者",blog_address:e,is_black:a,editor_type:"md",register_time:1550569542,update_time:1625646368,administrator:d,builder:d,favorable_author:d,book_author:d,phone_verified:h,wechat_verified:h,weibo_verified:d,github_verified:d,followee_count:40,follower_count:19,post_article_count:18,digg_article_count:119,view_article_count:2048,subscribe_tag_count:30,got_digg_count:63,got_view_count:18749,comment_count:40,collect_set_count:7,booklet_count:d,buy_booklet_count:112,post_shortmsg_count:3,comment_shortmsg_count:7,digg_shortmsg_count:4,ltime:d,isfollowed:a,forbidden_words:d,create_collect_set_count:7,follow_collect_set_count:d,weibo_nickname:e,wechat_nickname:"整只羊",github_nickname:e,apply_logout:d,is_logout:d,weibo_id:e,is_new:a,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,graduated_at:-62135596800,blog_move_priority:a,tech_team:{org_id:f,org_name:e,org_icon:e,role:d},job_count:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,digg_news_count:d,news_privilege:d,digg_toutiao_count:d,follow_column_cnt:d,can_tag_cnt:3,need_lead:d,follow_topic_count:3,badges:{wear_badges:c,obtain_badges:c,obtain_count:d,show_badge:a,link_url:e},is_collect_fast:a,user_growth_info:{user_id:4230576475209821,jpower:486,jscore:359.6,jpower_level:3,jscore_level:4,jscore_title:"进阶掘友",author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:500,jscore_this_level_mini_score:150},is_vip:a,collection_set_article_count:d,juejinPower:486,jobTitle:"前端摸鱼工程师",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"整只羊",blogAddress:e,selfDescription:"一位专注于摸鱼的前端开发者",beLikedCount:63,beReadCount:18749,followerCount:19,followingCount:40,collectionCount:7,createdCollectionCount:7,followingCollectionCount:d,postedPostsCount:18,pinCount:3,likedArticleCount:119,likedPinCount:4,avatar:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F9de2b34dc072bac38d995cd9638181cf~300x300.image",latestLoginedInAt:c,createdAt:new Date(1550569542000),updatedAt:c,phoneNumber:"13*****8620",titleDescription:e,followeesCount:40,applyEventCount:d,followTopicCnt:3},clientId:e,token:e},tag:{subscribedTagList:[]},entry:{isLikeLoading:a},collection:{},comment:{},bookComment:{},repoComment:{},category:{list:[]},user:{subscribedTagList:[]},notification:{unreadCount:{user:d,system:d,total:d}},follow:{subscribedTagList:[]},error:{location:c,errorView:c,statusCode:200},abTest:{info:{}},suspensionPanel:{needSuspension:b},pinComment:{},pin:{deleteDialogVisible:a,reportDialogVisible:a,targetPin:c,isOnFocus:a},topic:{visible:a},activity:{"2020":{},offer:{is_show:d,start_time:d},voteData:void 0},header:{leadStep:d,isPopupZlink:a},tcc:{tccConfig:c},route:{name:"bookSection",path:p,hash:e,query:{},params:{id:"6950646725295996940",sectionId:"6962895331667230727"},fullPath:p,meta:{},from:{name:c,path:r,hash:e,query:{},params:{},fullPath:r,meta:{}}}},serverRendered:b,routePath:p,config:{API_HOST:"api.juejin.cn",CAPTCHA_HOST:"verify.snssdk.com",PLATFORM_APPID:{wechat:1277,weibo:1276,github:1045,wechatApp:1070},http:{}},globalRefs:{}}}(false,true,null,0,"","0",20,1,"topic","recommended","hot","newest","following","popular",{},"\u002Fbook\u002F6950646725295996940\u002Fsection\u002F6962895331667230727",100,"\u002F"));</script><script src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/fa7ef76.js" defer=""></script><script src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/d6e38f1.js" defer=""></script><script src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/af29e2a.js" defer=""></script><script src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/8ecf414.js" defer=""></script><script src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/e66b202.js" defer=""></script><script src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/9fca362.js" defer=""></script><script src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/9332c9f.js" defer=""></script>
  

<link href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/62.ce0c6a0.css" rel="stylesheet" type="text/css"><link href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/8.4ebc7e8.css" rel="stylesheet" type="text/css"><link href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/default.2050f18.css" rel="stylesheet" type="text/css"><div>
    <div class="wx_draw">掘金抽奖</div>

    <!--v-if-->
  </div><link href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/134.092fb39.css" rel="stylesheet" type="text/css"><link href="./29.彩蛋篇-RcReduxModel中间件开发设计_files/176.290e99d.css" rel="stylesheet" type="text/css"><div data-v-41eefe39="" data-transfer="true" class="lead byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1000; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1000; display: none;"><div class="byte-modal__content" style="width: 500px;"><div class="byte-modal__header"><img data-v-41eefe39="" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/MaskGroup.13dfc4f.png" alt="" loading="lazy" class="header-bgc"> <span data-v-41eefe39="" class="header-title">选择你感兴趣的技术方向</span><span aria-label="Close" class="byte-modal__headerbtn"><i class="byte-icon byte-icon--close"><svg t="1561638608887" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="441911" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M512 448l288-288c6.4-6.4 19.2-6.4 32 0l25.6 32c6.4 6.4 6.4 19.2 0 32L569.6 505.6l288 288c6.4 6.4 6.4 19.2 0 32l-32 32c-6.4 6.4-19.2 6.4-32 0L512 569.6l-288 288c-6.4 6.4-19.2 6.4-32 0l-32-32c-6.4-6.4-6.4-19.2 0-32L448 505.6 160 224c-6.4-12.8-6.4-25.6 0-32l32-32c6.4-6.4 19.2-6.4 32 0L512 448z" p-id="441912"></path><path d="M512 448l288-288c6.4-6.4 19.2-6.4 32 0l25.6 32c6.4 6.4 6.4 19.2 0 32L569.6 505.6l288 288c6.4 6.4 6.4 19.2 0 32l-32 32c-6.4 6.4-19.2 6.4-32 0L512 569.6l-288 288c-6.4 6.4-19.2 6.4-32 0l-32-32c-6.4-6.4-6.4-19.2 0-32L448 505.6 160 224c-6.4-12.8-6.4-25.6 0-32l32-32c6.4-6.4 19.2-6.4 32 0L512 448z" p-id="441913"></path></svg></i></span></div><div class="byte-modal__body"> <div data-v-41eefe39="" class="classify-box"><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M2 2.5C1.44772 2.5 1 2.94772 1 3.5V11.5C1 12.0523 1.44772 12.5 2 12.5H14C14.5523 12.5 15 12.0523 15 11.5V3.5C15 2.94772 14.5523 2.5 14 2.5H2ZM4.5 7.5C4.22386 7.5 4 7.72386 4 8V10C4 10.2761 4.22386 10.5 4.5 10.5H5C5.27614 10.5 5.5 10.2761 5.5 10V8C5.5 7.72386 5.27614 7.5 5 7.5H4.5ZM7 5.5C7 5.22386 7.22386 5 7.5 5H8C8.27614 5 8.5 5.22386 8.5 5.5V10C8.5 10.2761 8.27614 10.5 8 10.5H7.5C7.22386 10.5 7 10.2761 7 10V5.5ZM10.5 6.5C10.2239 6.5 10 6.72386 10 7V10C10 10.2761 10.2239 10.5 10.5 10.5H11C11.2761 10.5 11.5 10.2761 11.5 10V7C11.5 6.72386 11.2761 6.5 11 6.5H10.5Z" fill="#86909C"></path><rect data-v-41eefe39="" id="Rectangle 282" x="3" y="13.5" width="10" height="1.3" rx="0.5" fill="#86909C"></rect></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              后端
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M2 2.5C1.44772 2.5 1 2.94772 1 3.5V6.5H15V3.5C15 2.94772 14.5523 2.5 14 2.5H2ZM15 7.8H1V13.5C1 14.0523 1.44772 14.5 2 14.5H14C14.5523 14.5 15 14.0523 15 13.5V7.8ZM8.65811 8.52566C8.92009 8.61298 9.06167 8.89614 8.97434 9.15811L7.97434 12.1581C7.88702 12.4201 7.60386 12.5617 7.34189 12.4743C7.07991 12.387 6.93833 12.1039 7.02566 11.8419L8.02566 8.84189C8.11298 8.57991 8.39614 8.43833 8.65811 8.52566ZM3.5 5.5C3.77614 5.5 4 5.27614 4 5C4 4.72386 3.77614 4.5 3.5 4.5C3.22386 4.5 3 4.72386 3 5C3 5.27614 3.22386 5.5 3.5 5.5ZM5.5 5C5.5 5.27614 5.27614 5.5 5 5.5C4.72386 5.5 4.5 5.27614 4.5 5C4.5 4.72386 4.72386 4.5 5 4.5C5.27614 4.5 5.5 4.72386 5.5 5ZM6.5 5.5C6.77614 5.5 7 5.27614 7 5C7 4.72386 6.77614 4.5 6.5 4.5C6.22386 4.5 6 4.72386 6 5C6 5.27614 6.22386 5.5 6.5 5.5ZM6.44721 9.27639C6.57071 9.52338 6.4706 9.82372 6.22361 9.94721L5.11803 10.5L6.22361 11.0528C6.4706 11.1763 6.57071 11.4766 6.44721 11.7236C6.32372 11.9706 6.02338 12.0707 5.77639 11.9472L3.77639 10.9472C3.607 10.8625 3.5 10.6894 3.5 10.5C3.5 10.3106 3.607 10.1375 3.77639 10.0528L5.77639 9.05279C6.02338 8.92929 6.32372 9.0294 6.44721 9.27639ZM9.77639 9.94721C9.5294 9.82372 9.42929 9.52338 9.55279 9.27639C9.67628 9.0294 9.97662 8.92929 10.2236 9.05279L12.2236 10.0528C12.393 10.1375 12.5 10.3106 12.5 10.5C12.5 10.6894 12.393 10.8625 12.2236 10.9472L10.2236 11.9472C9.97662 12.0707 9.67628 11.9706 9.55279 11.7236C9.42929 11.4766 9.5294 11.1763 9.77639 11.0528L10.882 10.5L9.77639 9.94721Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              前端
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><rect data-v-41eefe39="" id="Rectangle 287" x="5.7002" y="12.5" width="1.3" height="3" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 289" x="1" y="6.5" width="1.3" height="6" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 290" x="13.7002" y="6.5" width="1.3" height="6" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 288" x="9" y="12.5" width="1.3" height="3" rx="0.5" fill="#86909C"></rect><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M13 5.86364V12.5C13 13.0523 12.5523 13.5 12 13.5H4C3.44772 13.5 3 13.0523 3 12.5V5.86364V5.77273C3 5.74067 3.00151 5.70897 3.00446 5.67768C3.11608 3.35397 5.30996 1.5 8 1.5C10.69 1.5 12.8839 3.35397 12.9955 5.67768C12.9985 5.70897 13 5.74067 13 5.77273V5.86364ZM7 6.25C7 6.66421 6.66421 7 6.25 7C5.83579 7 5.5 6.66421 5.5 6.25C5.5 5.83579 5.83579 5.5 6.25 5.5C6.66421 5.5 7 5.83579 7 6.25ZM9.75 7C10.1642 7 10.5 6.66421 10.5 6.25C10.5 5.83579 10.1642 5.5 9.75 5.5C9.33579 5.5 9 5.83579 9 6.25C9 6.66421 9.33579 7 9.75 7Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              Android
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39=""><g data-v-41eefe39="" id="pingguo-2 1"><path data-v-41eefe39="" id="Vector" d="M11.821 8.9388C11.8035 7.16562 13.267 6.31556 13.3322 6.27312C12.5097 5.06956 11.2287 4.90506 10.7724 4.88581C9.6821 4.77556 8.64523 5.52763 8.09179 5.52763C7.5401 5.52763 6.6861 4.902 5.78179 4.91863C4.59354 4.93613 3.49761 5.60944 2.88598 6.67387C1.65136 8.8163 2.56967 11.9899 3.77323 13.7277C4.36123 14.5782 5.06254 15.5332 5.98304 15.4991C6.86942 15.4637 7.20498 14.9255 8.27642 14.9255C9.34785 14.9255 9.64929 15.4991 10.5877 15.4816C11.5415 15.4637 12.1461 14.6149 12.7302 13.7618C13.4052 12.7752 13.6835 11.8197 13.6997 11.7707C13.6787 11.7611 11.8394 11.0567 11.821 8.9388ZM10.0584 3.73563C10.547 3.14281 10.8769 2.32031 10.7868 1.5C10.0829 1.52888 9.22973 1.969 8.72485 2.56006C8.2716 3.08463 7.87523 3.922 7.98154 4.72613C8.76729 4.78737 9.56923 4.32669 10.0584 3.73563Z" fill="#86909C"></path></g></g><defs data-v-41eefe39=""></defs></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              iOS
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><rect data-v-41eefe39="" id="Rectangle 289" x="1" y="8.5" width="1.3" height="5" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 292" x="14" y="8.5" width="1.3" height="5" rx="0.5" fill="#86909C"></rect><rect data-v-41eefe39="" id="Rectangle 293" x="7.5" y="4.5" width="1" height="3" rx="0.5" fill="#86909C"></rect><circle data-v-41eefe39="" id="Ellipse 25" cx="8" cy="2.5" r="1" fill="#86909C"></circle><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M3 7.5C3 6.94772 3.44772 6.5 4 6.5H12C12.5523 6.5 13 6.94772 13 7.5V14.5C13 15.0523 12.5523 15.5 12 15.5H4C3.44772 15.5 3 15.0523 3 14.5V7.5ZM7 11.25C7 11.6642 6.66421 12 6.25 12C5.83579 12 5.5 11.6642 5.5 11.25C5.5 10.8358 5.83579 10.5 6.25 10.5C6.66421 10.5 7 10.8358 7 11.25ZM9.75 12C10.1642 12 10.5 11.6642 10.5 11.25C10.5 10.8358 10.1642 10.5 9.75 10.5C9.33579 10.5 9 10.8358 9 11.25C9 11.6642 9.33579 12 9.75 12Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              人工智能
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><g data-v-41eefe39="" id="kaifagongjuicon-hui 1"><path data-v-41eefe39="" id="Vector" d="M14.212 5.04986L13.497 5.76886C13.3158 5.95088 13.1005 6.09531 12.8633 6.19386C12.6261 6.29242 12.3718 6.34315 12.115 6.34315C11.8582 6.34315 11.6039 6.29242 11.3667 6.19386C11.1295 6.09531 10.9142 5.95088 10.733 5.76886C10.3664 5.39915 10.1606 4.89955 10.1606 4.37886C10.1606 3.85817 10.3664 3.35857 10.733 2.98886L11.448 2.26986C11.843 1.87286 11.579 1.40486 10.868 1.51686C10.028 1.64786 9.262 2.07586 8.709 2.72286C8.005 3.41786 7.682 4.66486 7.922 5.81786L1.927 11.8469C1.56096 12.2165 1.35562 12.7157 1.35562 13.2359C1.35562 13.7561 1.56096 14.2552 1.927 14.6249C2.10804 14.807 2.32329 14.9515 2.56038 15.0501C2.79747 15.1487 3.05172 15.1995 3.3085 15.1995C3.56528 15.1995 3.81953 15.1487 4.05662 15.0501C4.29371 14.9515 4.50896 14.807 4.69 14.6249L10.686 8.59486C11.2693 8.7189 11.8745 8.69473 12.446 8.52459C13.0176 8.35444 13.5375 8.04373 13.958 7.62086C14.5581 7.01861 14.9243 6.22244 14.991 5.37486C15.071 4.91886 14.607 4.65286 14.212 5.04986ZM3.768 13.6979C3.67659 13.7885 3.56041 13.85 3.4341 13.8747C3.30779 13.8994 3.17699 13.8861 3.05819 13.8366C2.93939 13.7871 2.8379 13.7036 2.76651 13.5965C2.69511 13.4894 2.65701 13.3636 2.657 13.2349C2.65647 13.0618 2.72462 12.8957 2.84649 12.7729C2.96836 12.6501 3.13399 12.5807 3.307 12.5799C3.487 12.5799 3.651 12.6529 3.768 12.7719C3.888 12.8889 3.96 13.0539 3.96 13.2349C3.9604 13.3209 3.94363 13.4062 3.91066 13.4857C3.87769 13.5652 3.82919 13.6373 3.768 13.6979ZM3.118 5.16786L5.377 7.43986L6.297 6.51286L4.04 4.24286L3.535 3.27086L1.92 2.11186L1 3.03986L2.151 4.66086L3.118 5.16786ZM10.672 9.98586C10.642 9.95526 10.6062 9.93095 10.5667 9.91436C10.5272 9.89776 10.4848 9.88921 10.442 9.88921C10.3992 9.88921 10.3568 9.89776 10.3173 9.91436C10.2778 9.93095 10.242 9.95526 10.212 9.98586L8.83 11.3759C8.79955 11.4062 8.7754 11.4423 8.75891 11.482C8.74243 11.5218 8.73395 11.5644 8.73395 11.6074C8.73395 11.6504 8.74243 11.693 8.75891 11.7327C8.7754 11.7724 8.79955 11.8085 8.83 11.8389L12.09 15.1169C12.2106 15.2383 12.3541 15.3348 12.5122 15.4006C12.6703 15.4663 12.8398 15.5002 13.011 15.5002C13.1822 15.5002 13.3517 15.4663 13.5098 15.4006C13.6679 15.3348 13.8114 15.2383 13.932 15.1169C14.442 14.6049 14.442 13.7769 13.932 13.2639L10.672 9.98586Z" fill="#86909C"></path></g></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              开发工具
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M1 2.5C1 1.94772 1.44772 1.5 2 1.5H14C14.5523 1.5 15 1.94772 15 2.5V14.5C15 15.0523 14.5523 15.5 14 15.5H2C1.44772 15.5 1 15.0523 1 14.5V2.5ZM3 5C3 4.72386 3.22386 4.5 3.5 4.5H12.5C12.7761 4.5 13 4.72386 13 5V5.3C13 5.57614 12.7761 5.8 12.5 5.8H3.5C3.22386 5.8 3 5.57614 3 5.3V5ZM3.5 7.5C3.22386 7.5 3 7.72386 3 8V8.3C3 8.57614 3.22386 8.8 3.5 8.8H4.5C4.77614 8.8 5 8.57614 5 8.3V8C5 7.72386 4.77614 7.5 4.5 7.5H3.5ZM7 8C7 7.72386 7.22386 7.5 7.5 7.5H8.5C8.77614 7.5 9 7.72386 9 8V8.3C9 8.57614 8.77614 8.8 8.5 8.8H7.5C7.22386 8.8 7 8.57614 7 8.3V8ZM11.5 7.5C11.2239 7.5 11 7.72386 11 8V8.3C11 8.57614 11.2239 8.8 11.5 8.8H12.5C12.7761 8.8 13 8.57614 13 8.3V8C13 7.72386 12.7761 7.5 12.5 7.5H11.5ZM3 11C3 10.7239 3.22386 10.5 3.5 10.5H7.5C7.77614 10.5 8 10.7239 8 11V11.3C8 11.5761 7.77614 11.8 7.5 11.8H3.5C3.22386 11.8 3 11.5761 3 11.3V11ZM10.5 10.5C10.2239 10.5 10 10.7239 10 11V11.3C10 11.5761 10.2239 11.8 10.5 11.8H12.5C12.7761 11.8 13 11.5761 13 11.3V11C13 10.7239 12.7761 10.5 12.5 10.5H10.5Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              代码人生
            </span></div></div></div><div data-v-41eefe39="" class="technology-box"><div data-v-41eefe39="" class="wrap"><svg data-v-41eefe39="" width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg" class="left"><g data-v-41eefe39="" id="&amp;#230;&amp;#161;&amp;#136;&amp;#228;&amp;#190;&amp;#139;"><path data-v-41eefe39="" id="Subtract" fill-rule="evenodd" clip-rule="evenodd" d="M14.9187 7.03385C15.0999 7.26744 14.9466 7.7 14.651 7.7H6.32905V4.5H5.02905V7.7H3.6C2.16406 7.7 1 6.53594 1 5.1C1 3.66406 2.16406 2.5 3.6 2.5H14.651C14.9466 2.5 15.0999 2.93257 14.9188 3.16616C14.5064 3.69779 14.2602 4.36959 14.2602 5.10001C14.2602 5.83043 14.5064 6.50222 14.9187 7.03385Z" fill="#86909C"></path><path data-v-41eefe39="" id="Subtract_2" fill-rule="evenodd" clip-rule="evenodd" d="M1.34902 14.5008C1.0534 14.5008 0.900077 14.0682 1.08126 13.8346C1.49363 13.303 1.7398 12.6312 1.7398 11.9008C1.7398 11.1704 1.49362 10.4986 1.08125 9.96694C0.900064 9.73335 1.05339 9.30078 1.34901 9.30078H12.4C13.8359 9.30078 15 10.4648 15 11.9008C15 13.3367 13.8359 14.5008 12.4 14.5008H1.34902Z" fill="#86909C"></path></g></svg> <div data-v-41eefe39="" class="right"><span data-v-41eefe39="" class="descrip">
              阅读
            </span></div></div></div></div> <!----></div><div class="byte-modal__footer"><div data-v-41eefe39="" class="left">跳过</div> <div data-v-41eefe39="" class="mid" style="display: none;">上一步</div> <div data-v-41eefe39="" class="right">
      至少选择1个分类
    </div></div></div></div></div><div data-v-8bb78912="" data-transfer="true" class="upgrade-new-modal byte-modal v-transfer-dom"><div class="byte-modal__mask" style="z-index: 1001; display: none;"></div><div class="byte-modal__wrapper" style="z-index: 1001; display: none;"><div class="byte-modal__content" style="width: 311px;"><div class="byte-modal__header"><span class="byte-modal__title"></span><!----></div><div class="byte-modal__body"> <!----> <div data-v-8bb78912="" class="close-icon"><img data-v-8bb78912="" src="./29.彩蛋篇-RcReduxModel中间件开发设计_files/8867e249c23a7c0ea596c139befc04d7.svg" alt=""></div></div><!----></div></div></div></body></html>