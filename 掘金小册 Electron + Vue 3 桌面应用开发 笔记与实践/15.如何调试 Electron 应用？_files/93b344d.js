(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1038:function(t,e,n){},1039:function(t,e,n){},1040:function(t,e,n){},1041:function(t,e,n){},1090:function(t,e,n){"use strict";n(980)},1190:function(t,e,n){"use strict";var o=n(49),r=n(8),l=Object(r.d)({props:{userId:{type:String,default:""},type:{type:String,default:"default"},teaType:{type:String,default:""}},setup:function(){return{handleTea:function(t){Object(o.d)("private_msg_page_show",{visit_source:t})}}}}),c=(n(1218),n(29)),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("NuxtLink",{staticClass:"im-button",class:{"has-icon":"hasIcon"===t.type},attrs:{to:"/notification/im?participantId="+t.userId},nativeOn:{click:function(e){return t.handleTea(t.teaType)}}},["hasIcon"===t.type?o("img",{staticClass:"im-icon",attrs:{src:n(1217),alt:"私信"}}):t._e(),t._v(" "),o("div",[t._v("私信")])])}),[],!1,null,"11443840",null);e.a=component.exports},1216:function(t,e,n){"use strict";n(1038)},1217:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHLSURBVHgB7ZdbTsJAGIXPT9AXE8KjiRe6A3EH7EB2IK5AdsDPDlwC7ABXIEvAFdh4SXxsfNToeGqBTLFQCmOKyXxJ05lpO/P1NO1MAY/H4wRZbDhUE+wDXR44Qwl8AeEH0H9VCe32lOhU8o7FAOUSvgHnkUo0a6jYR/eAFsqXjAlqBh27ISUquyGZIKjb1Qr+CV7UNV7UNZWFyo0BrlicoCQ4/phvfDd2sdtl2QWBmiZniS6LF9zq+FviD/uQ442eVcZZJ0heDxSufwJtnnjNahMOidMTwahiMAytWSiLlOgRU6RUtDjPznCUcm56dYZzwOFeVCaZoqdqlLse73QUd/akMkK2cOGU10nvWE2LffYkmcr7jyo6O1bNuoAntrlrUzzkfvBOaTvl6UCDeMtJea30askNd7HiKVWxmoCbckWlJ2oyUw6Tx9OZpczyJd/YyAjGBdLLJU90TpGUl/WxbnpbiVoEyEl5kaLpZbGJ6JxVKW+THlyLWgSYptxQMzaJmNNvrivROWaLx7sKv3pyjRd1jRd1jRd1TVrUIMKuIHiwq+mfO/lZ+YQon5BLxFu74dc/E9eVARe6yqmwgRKg0D3T07x/KI/HsyHfQKq0yUCbcHQAAAAASUVORK5CYII="},1218:function(t,e,n){"use strict";n(1039)},1219:function(t,e,n){"use strict";n(1040)},1220:function(t,e,n){"use strict";n(1041)},858:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(6);var o=n(12),r=n(13),l=function(){function t(){Object(o.a)(this,t),this.busy=!1}return Object(r.a)(t,[{key:"do",value:function(t){var e=this;return this.busy?Promise.resolve():(this.busy=!0,Promise.resolve("function"==typeof t?t():t).then((function(t){return e.busy=!1,t})).catch((function(t){return e.busy=!1,Promise.reject(t)})))}}]),t}();function c(){return new l}},859:function(t,e,n){"use strict";n(121);var o=n(69),r=n(269),l=n(273),c=n(7),f=n(18),d=Object(c.b)({components:{Lazy:l.a},props:{url:{type:String,default:""},default:{type:String,default:void 0},quality:{type:Number,default:void 0},width:{type:Number,default:0},height:{type:Number,default:0},shrink:{type:Boolean,default:!1},format:{type:String,default:void 0},alt:{type:String,default:"image"},blank:{type:String,default:""},hasMark:{type:Boolean,default:!1},lazy:{type:Boolean,default:!0}},computed:{defaultThumbUrl:function(){return this.default||o.h},thumbUrl:function(){var t,e,n=this.url||(this.blank?"":this.defaultThumbUrl);return this.shrink?Object(r.e)(n,this.width*o.l,this.height*o.l,{format:this.format,quality:this.quality,supportWebP:Object(f.m)(null===(t=this.$nuxt)||void 0===t?void 0:t.context)},this.hasMark?"zoomCrop":"noMark"):Object(r.b)(n,this.width*o.l,this.height*o.l,{format:this.format,quality:this.quality},this.hasMark?"zoomCrop":"noMark",{supportWebP:Object(f.m)(null===(e=this.$nuxt)||void 0===e?void 0:e.context)})}}}),h=n(29),component=Object(h.a)(d,(function(){var t=this.$createElement;return(this._self._c||t)("lazy",{attrs:{url:this.thumbUrl,alt:this.alt,lazy:this.lazy,"loading-style":{aspectRatio:""+this.width/this.height}}})}),[],!1,null,null,null);e.a=component.exports},875:function(t,e,n){"use strict";n.r(e);n(16),n(15),n(11),n(14),n(6);var o=n(0),r=n(8),l=n(4),c=n(858),f=n(177),d=n(28),h=n(84),v=n(987),m=Object(r.d)({components:{Triangle:v.a},props:{disalbe:{type:Boolean,default:!1},promise:Promise},setup:function(t,e){var data=Object(r.q)({visible:!1,top:0,left:0,isTop:!1}),n=Object(r.r)(null),o=Object(r.r)(null),l=Object(r.r)();return{data:data,popoverStyle:Object(r.a)((function(){return{top:"".concat(data.top,"px"),left:"".concat(data.left,"px")}})),contentElem:l,showPopover:function(r){t.disalbe||(clearTimeout(o.value),e.emit("show"),n.value=setTimeout((function(){Promise.resolve(t.promise).then((function(){n.value&&(data.visible=!0,e.root.$nextTick((function(){var t=r.target,e=null==t?void 0:t.getBoundingClientRect(),n=t.offsetWidth||33,o=t.offsetHeight||33,c=l.value,f=(null==c?void 0:c.offsetWidth)||260,d=(null==c?void 0:c.offsetHeight)||160,h=e.left-f/2+n/2,v=e.top-d-12;data.isTop=!1,v<60&&(data.isTop=!0,v=e.top+o+8),h=Math.max(0,h),data.left=h,data.top=v})))}))}),300))},hidePopover:function(){clearTimeout(n.value),n.value=null,e.emit("hide"),o.value=setTimeout((function(){o.value=null,data.visible=!1}),300)}}}}),y=(n(1216),n(29)),w=Object(y.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popover-box",on:{mouseenter:function(e){return t.showPopover(e)},mouseleave:t.hidePopover}},[n("transition",{attrs:{name:"fade"}},[t.data.visible?n("div",{ref:"contentElem",staticClass:"popover-content",style:t.popoverStyle},[t._t("content"),t._v(" "),n("triangle",{staticClass:"triangle-bottom",class:{isTop:t.data.isTop}})],2):t._e()]),t._v(" "),t._t("default")],2)}),[],!1,null,"f1a2074a",null).exports,A=n(876),O=n(1190);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var C=Object(r.d)({components:{Avatar:f.a,Popover:w,Button:A.a,ImButton:O.a},props:{userId:String,showJscoreLevel:{type:Boolean,default:!1},enablePopover:{type:Boolean,default:!0}},data:function(){return{user:null,followLock:Object(c.a)(),fetchUserPromise:null,isFollowing:!1}},computed:j(j({},Object(h.mapGetters)({currentUser:l.USER})),{},{position:function(){return this.user&&(this.$userPosition(this.user)||this.user.description||"暂无简介")},self:function(){return this.currentUser&&this.currentUser.id===this.userId},followed:function(){return this.user&&this.user.followed}}),methods:{toFollowing:function(){window.open("/user/".concat(this.userId,"/following"),"_blank")},toFollower:function(){window.open("/user/".concat(this.userId,"/followers"),"_blank")},handleShow:function(){this.fetchUserPromise=this.fetch().then((function(t){if(t.is_logout)return Promise.reject()}))},fetch:function(){var t=this;return Object(d.i)(this.userId,{ignore404:!0}).then((function(e){return t.user=e,e}))},toggleFollow:function(){var t=this;this.isFollowing=!0,this.followLock.do((function(){return t.$ensureAuthorized().then((function(){return t.$store.dispatch(l.TOGGLE_FOLLOW_USER,t.user).catch((function(e){t.$error(e)}))})).catch((function(t){return console.warn("follow failed err:",t)})).finally((function(){return t.isFollowing=!1}))}))}}}),x=(n(1219),n(1220),Object(y.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Popover",{staticClass:"user-popover",attrs:{promise:t.fetchUserPromise},on:{show:t.handleShow},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"info-row",on:{click:function(t){t.stopPropagation()}}},[n("app-link",{attrs:{to:t.$userRoute(t.user),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:t.user,decorative:!0,alt:t.user.username+"的头像"}})],1),t._v(" "),n("div",{staticClass:"user-info"},[n("username",{attrs:{user:t.user,"show-jscore-level":t.showJscoreLevel}}),t._v(" "),n("div",{staticClass:"position"},[t._v(t._s(t.position))])],1)],1),t._v(" "),t.self?t._e():n("div",{staticClass:"operate-btn"},[n("Button",{staticClass:"follow-btn",attrs:{"st:name":"followBtn",attention:!0,"custom-attention-text":"关注","cancel-attention-text":"已关注",cancel:t.followed,loading:t.isFollowing,size:"large","show-icon":!1},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleFollow(e)}}}),t._v(" "),n("ImButton",{staticClass:"im-btn",attrs:{"tea-type":"personal_information_card","user-id":t.userId}})],1),t._v(" "),n("div",{staticClass:"meta-row",on:{click:function(t){t.stopPropagation()}}},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"item",on:{click:t.toFollowing}},[n("div",{staticClass:"count"},[t._v(t._s(t.user.followingCount||0))]),t._v(" "),n("div",{staticClass:"title"},[t._v("关注")])]),t._v(" "),n("li",{staticClass:"divider"}),t._v(" "),n("li",{staticClass:"item",on:{click:t.toFollower}},[n("div",{staticClass:"count"},[t._v(t._s(t.user.followerCount||0))]),t._v(" "),n("div",{staticClass:"title"},[t._v("粉丝")])])])])]},proxy:!0}])},[t._v(" "),t._t("default")],2)}),[],!1,null,"9421b4e2",null));e.default=x.exports},876:function(t,e,n){"use strict";var o=n(8),r=n(917),l=n.n(r),c=n(918),f=n.n(c),d=n(919),h=n.n(d),v=n(920),m=n.n(v),y=n(921),w=n.n(y),A=Object(o.d)({props:{type:{type:String,default:"primary"},attention:Boolean,customAttentionText:String,cancelAttentionText:String,size:{type:String,default:"medium"},status:{type:String,default:"default"},disabled:Boolean,loading:Boolean,cancel:Boolean,text:String,icon:String,showIcon:{type:Boolean,default:!0}},setup:function(t,e){var n=Object(o.a)((function(){return t.attention}));return{handleClick:function(n){t.disabled||t.loading||e.emit("click",n)},isAttentionType:n,attentionText:Object(o.a)((function(){return"mini"===t.size&&t.loading?"":t.cancel?t.loading?"取消":t.cancelAttentionText||"已关注":t.customAttentionText||"关注"})),iconSrc:Object(o.a)((function(){return t.loading?t.cancel||n.value&&"primary"!==t.type?m.a:w.a:n.value&&t.showIcon?"mini"===t.size?"":t.icon||t.cancel?h.a:"primary"===t.type?l.a:f.a:""}))}}}),O=(n(922),n(29)),component=Object(O.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"ui-btn",class:[t.type,t.size,t.status,t.cancel?"cancel":"",t.attention?"attention":""],attrs:{disabled:t.disabled||t.loading},on:{click:t.handleClick}},[t.iconSrc?n("img",{staticClass:"img",class:t.loading?"loading":"",attrs:{src:t.iconSrc}}):t._e(),t._v(" "),t.isAttentionType?[t._v("\n    "+t._s(t.attentionText)+"\n  ")]:t._t("default",[t._v(t._s(t.text))])],2)}),[],!1,null,"05e27314",null);e.a=component.exports},879:function(t,e,n){},917:function(t,e,n){t.exports=n.p+"c5c64e06a56896da43c1d084d2482cf3.svg"},918:function(t,e,n){t.exports=n.p+"bd960fe696b2c2b82cea3c0e2e2f2aae.svg"},919:function(t,e,n){t.exports=n.p+"062856d97fc330530a3a64c01d915edc.svg"},920:function(t,e,n){t.exports=n.p+"img/loading.b144729.png"},921:function(t,e,n){t.exports=n.p+"img/loading-light.e96acb8.png"},922:function(t,e,n){"use strict";n(879)},980:function(t,e,n){},987:function(t,e,n){"use strict";n(1090);var o=n(29),component=Object(o.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"container"},[e("em",{staticClass:"triangle"})])}],!1,null,"68da8972",null);e.a=component.exports}}]);