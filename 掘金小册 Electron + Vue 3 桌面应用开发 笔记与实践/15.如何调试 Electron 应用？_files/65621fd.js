(window.webpackJsonp=window.webpackJsonp||[]).push([[62,2,5,9,154,157],{1e3:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,d],style:[style,v],attrs:Object.assign({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),h.concat([n("path",{attrs:{d:"M8 6L4 9L4 3L8 6Z",fill:"#8A919F"}})]))}}},1001:function(t,e,n){"use strict";n(929)},1002:function(t,e,n){"use strict";n(930)},1003:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),h.concat([n("path",{attrs:{d:"M12.8 5.2C13.9532 6.46 14.8 8.2 14.8 10C14.7039 12.8937 12.6843 15.1706 9.97973 15.8159C10.359 12.3442 7.77588 9.35406 7.77588 9.35406C7.77588 9.35406 7.99512 13.7064 6.79514 15.8104C4.03715 15.1428 2 12.7806 2 9.8C2 7.776 2.9336 5.9728 4.4 4.8C5.8608 3.7056 6.8 1.9656 6.8 0C9.684 0.4368 11.894 2.9264 11.894 5.932C11.894 6.5012 11.746 7.0652 11.6 7.6C12.1264 6.9024 12.6184 6.0876 12.8 5.2Z",fill:"#F53F3F"}})]))}}},1004:function(t,e,n){"use strict";n(931)},1005:function(t,e,n){"use strict";n(932)},1036:function(t,e,n){"use strict";n.d(e,"c",(function(){return w})),n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return k}));var r=n(1284),o=n.n(r),c=n(1285),l=n.n(c),h=n(1286),f=n.n(h),d=n(1287),v=n.n(d),m=n(1288),y=n.n(m),w=function(s){return s.attributes["*"].push("data*"),s},_=["arduino","bash","c","cpp","csharp","css","diff","go","ini","java","javascript","json","kotlin","less","lua","makefile","markdown","objectivec","perl","php","phpTemplate","plaintext","python","pythonRepl","r","ruby","rust","scss","shell","sql","swift","typescript","vbnet","xml","yaml","html","dart","scala","vbscript","erlang","matlab"],k={vbscript:o.a,erlang:l.a,matlab:f.a,dart:v.a,scala:y.a}},1038:function(t,e,n){},1039:function(t,e,n){},1040:function(t,e,n){},1041:function(t,e,n){},1046:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.00002 0.666504C12.0501 0.666504 15.3334 3.94975 15.3334 7.99984C15.3334 12.0499 12.0501 15.3332 8.00002 15.3332C3.94993 15.3332 0.666687 12.0499 0.666687 7.99984C0.666687 3.94975 3.94993 0.666504 8.00002 0.666504ZM8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM10.6667 5.66667V7.66667H9.33333V5.66667H10.6667ZM6.66667 5.66667V7.66667H5.33333V5.66667H6.66667ZM10.0767 9.33333H11.0495C11.1804 9.33333 11.2866 9.43951 11.2866 9.57048C11.2866 9.60754 11.2779 9.64409 11.2612 9.67718L11.244 9.71053C10.6294 10.8739 9.40726 11.6667 7.99998 11.6667C6.61523 11.6667 5.40977 10.8991 4.7859 9.76612L4.73786 9.67593C4.67845 9.56052 4.72385 9.4188 4.83926 9.35939C4.87253 9.34226 4.90941 9.33333 4.94683 9.33333H5.92347C6.02396 9.33332 6.11908 9.37865 6.18238 9.4567C6.26207 9.55496 6.32833 9.62955 6.38117 9.68046C6.80074 10.0847 7.37133 10.3333 7.99998 10.3333C8.63289 10.3333 9.20694 10.0814 9.62728 9.67224C9.67791 9.62296 9.74135 9.55121 9.8176 9.45698C9.88089 9.37877 9.97611 9.33333 10.0767 9.33333Z"}})]))}}},1047:function(t,e,n){"use strict";n(942)},1048:function(t,e,n){"use strict";n(943)},1055:function(t,e,n){},1056:function(t,e,n){},1058:function(t,e,n){t.exports=n.p+"img/auditing-placeholder.1726838.png"},1059:function(t,e,n){t.exports=n.p+"img/auditing-placeholder-mobile.7c24b8f.png"},1060:function(t,e,n){t.exports=n.p+"img/loading-placeholder.9112506.png"},1061:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAq4AAAMMAQMAAACokrcUAAAABlBMVEUTGiQYIS3+UMXuAAAAgElEQVR42uzMMQ0AAAwCsPnXTMJU8LUCel2IVqvVarVarVar1Wq1Wq1Wq9VqtVqtVqvVttqFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPDtwSEBAAAAgKD/r11hAwAAAAAAAGATjapzHPFOaqgAAAAASUVORK5CYII="},1062:function(t,e,n){"use strict";n(948)},1090:function(t,e,n){"use strict";n(980)},1092:function(t,e,n){"use strict";n.r(e);n(138),n(45),n(21);var r=n(5),o=n(27),c=n(883),l=n(1298),h=n(1201),f=n.n(h),d=n(1303),v=n.n(d),m=n(1209),y=n(1345),w=n.n(y),_=n(1202),k=n.n(_),C=n(1374),O=n.n(C),x=n(1375),V=n.n(x),S=n(1203),T=n.n(S),P=n(1205),E=n.n(P),j=n(1042),L=n.n(j),R=n(1211),I=n(1642),A=n(1916),D=(n(71),n(15),n(54),n(70),n(39),n(22),n(23),n(139),n(11),n(6),n(14),n(43),n(53),n(1053)),html=n(4409),M=n(269);function B(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var F=1512*n(69).l;function H(t,e){var n;t.properties.src=Object(M.e)((null===(n=t.properties)||void 0===n?void 0:n.src)||"",F,0,{supportWebP:e},"zoomInCrop"),t.properties.loading="lazy"}var U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.copyable,n=t.supportWebP,r=void 0!==n&&n;return function(t,n){var c,l,h="juejin",f=null===(c=n.frontmatter)||void 0===c?void 0:c.theme;Object.keys(L.a).includes(f)&&(h=f),null===(l=t.children)||void 0===l||l.unshift({type:"element",tagName:"style",children:[{type:"text",value:L.a[h].style}]});var d=0;Object(D.a)(t,"element",(function(t,n,c){var l;switch(t.properties||(t.properties={}),t.tagName){case"a":var p=t.properties||{},h=p.href||"";h&&!h.toString().startsWith("#")&&(p.target="_blank"),p.title=h;var f=t.children;if(f&&f[0]&&"text"===f[0].type){/^(https?:\/\/)?[-a-z0-9@:%._+~#=]{1,256}\.[a-z]{2,6}/i.test(f[0].value)&&(f[0].value=f[0].value.replace(/^https?:\/\//i,"").replace(/\/(.*)$/,(function(t){return t.length>12?"".concat(t.slice(0,12),"…"):t})))}Object(o.e)(h)&&(p.ref="nofollow noopener noreferrer",p.href=Object(o.h)(h)?Object(o.d)(h):h);break;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":t.properties["data-id"]="heading-".concat(d++);break;case"img":H(t,r);break;case"code":if(!c||"pre"!==c.tagName)return;t.properties.className=null!==(l=t.properties.className)&&void 0!==l?l:[];var v,m=t.properties.className;e&&!m.includes("language-mermaid")&&(m.push("copyable"),t.children.push(Object(html.a)("span.copy-code-btn",["复制代码"])));var y,w=B(m);try{for(w.s();!(y=w.n()).done;){var _=y.value;if("lang-"===_.slice(0,5)){v=_.slice(5);break}if("language-"===_.slice(0,9)){v=_.slice(9);break}}}catch(t){w.e(t)}finally{w.f()}v&&(t.properties.lang=v)}}))}},$=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.supportWebP,n=void 0!==e&&e;return function(t){Object(D.a)(t,"element",(function(t){switch(t.properties||(t.properties={}),t.tagName){case"img":H(t,n)}}))}},G=n(1206),W=n(8),z=n(1299),Y=n(1036),K=n(1590),Z=n.n(K),X=n(157),J=n(1058),Q=n.n(J),tt=n(1059),et=n.n(tt),nt=n(1060),it=n.n(nt),ot=n(1061),st=n.n(ot),at=(n(1207),n(18)),ct=Object(W.d)({components:{Viewer:l.b},props:{markdown:{type:String},html:{type:String},copyable:{type:Boolean,default:!1},cachedHtml:{type:String,default:""},needLoginBeforeCopyCode:{type:Boolean,default:!1},isLogined:{type:Boolean,default:!1}},data:function(){return{sanitize:Y.c,commonPlugins:(component=this,[O()(),f()({languages:Y.b,subset:Y.a}),w()(),Object(m.a)(),k()(),T()(),v()({background:"rgba(0,0,0,0.7)"}),V()({test:o.e,internalProps:{target:"_blank"}}),Object(G.viewer)({auditingBackground:component.$device.isMobile?et.a:Q.a,loadingBackground:component.$device.isMobile?st.a:it.a}),{remark:function(p){return p.use(z.b)}},Z()()])};var component},computed:{withoutViewer:function(){return!!this.cachedHtml||!this.markdown},supportWebP:function(){var t;return Object(at.m)(null===(t=this.$nuxt)||void 0===t?void 0:t.context)},sanitizedHtml:function(){return this.cachedHtml?-1===this.cachedHtml.indexOf("webp")||this.supportWebP?this.cachedHtml:Object(R.a)().use($,{supportWebP:this.supportWebP}).processSync(this.cachedHtml):this.html?Object(R.a)().use(I.a).use(A.a,{subset:Y.a,languages:Y.b}).use(U,{copyable:this.copyable,supportWebP:this.supportWebP}).processSync(this.html):this.cachedHtml||""},plugins:function(){var t=this,e={viewerEffect:function(t){var e,n,o=t.file,c=t.markdownBody;n=(null==o?void 0:o.frontmatter)&&"string"!=typeof o.frontmatter?o.frontmatter:{};var l=document.createElement("style");return null===(e=c||document.head)||void 0===e||e.appendChild(l),Object(r.a)(regeneratorRuntime.mark((function t(){var e,r,o,c,h,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=null!==(e=n.highlight)&&void 0!==e?e:null===(r=L.a[n.theme])||void 0===r?void 0:r.highlight,h=null!==(o=E.a[c])&&void 0!==o?o:E.a.github,t.next=4,h().then((function(t){return t.default}));case 4:f=t.sent,l.innerHTML=f;case 6:case"end":return t.stop()}}),t)})))(),function(){l.remove()}},rehype:function(u){return u.use(U,{copyable:t.copyable,supportWebP:t.supportWebP})}};return this.commonPlugins.concat(e)},remarkRehypeOptions:function(){return{handlers:Object.assign({},z.a)}}},mounted:function(){var t=this;this.withoutViewer&&this.plugins.forEach((function(p){var e;null===(e=p.viewerEffect)||void 0===e||e.call(p,{markdownBody:t.$el})}))},methods:{onContentElementClick:function(t){var e;if(this.copyable){var n=t.target;if("copy-code-btn"===n.className){var text=n.textContent||"",r=n.parentNode,content=null===(e=null==r?void 0:r.textContent)||void 0===e?void 0:e.replace(new RegExp("\n?".concat(text,"$")),"");try{if(this.needLoginBeforeCopyCode&&!this.isLogined)return this.$requestLogin(),void this.$TEA("login_guide_click",{from:X.a.code});Object(c.a)(content||""),this.$alertMsg("代码复制成功")}catch(t){this.$error("代码复制失败")}}}}}}),ut=(n(1062),n(29)),lt=Object(ut.a)(ct,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-content",on:{"!click":function(e){return t.onContentElementClick(e)}}},[!t.cachedHtml&&t.markdown?n("viewer",{attrs:{value:t.markdown,plugins:t.plugins,sanitize:t.sanitize,"remark-rehype":t.remarkRehypeOptions}}):n("div",{staticClass:"markdown-body",class:{cache:t.cachedHtml,html:t.html},domProps:{innerHTML:t._s(t.sanitizedHtml)}})],1)}),[],!1,null,null,null);e.default=lt.exports},1094:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return l}));n(45),n(50);function r(t){return t>=1e4?"".concat((t/1e4).toFixed(1),"w"):t>=1e3?"".concat((t/1e3).toFixed(1),"k"):"".concat(t)}function o(t){return t>1e8?"".concat(parseInt("".concat(t/1e8)),"亿+"):t>1e4?"".concat(parseInt("".concat(t/1e4)),"w+"):"".concat(t)}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(t/100).toFixed(2)}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===t?0:t/100}},1190:function(t,e,n){"use strict";var r=n(49),o=n(8),c=Object(o.d)({props:{userId:{type:String,default:""},type:{type:String,default:"default"},teaType:{type:String,default:""}},setup:function(){return{handleTea:function(t){Object(r.d)("private_msg_page_show",{visit_source:t})}}}}),l=(n(1218),n(29)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("NuxtLink",{staticClass:"im-button",class:{"has-icon":"hasIcon"===t.type},attrs:{to:"/notification/im?participantId="+t.userId},nativeOn:{click:function(e){return t.handleTea(t.teaType)}}},["hasIcon"===t.type?r("img",{staticClass:"im-icon",attrs:{src:n(1217),alt:"私信"}}):t._e(),t._v(" "),r("div",[t._v("私信")])])}),[],!1,null,"11443840",null);e.a=component.exports},1195:function(t,e,n){"use strict";n(121);var r=n(7),o=n(859),c=(n(1245),n(29)),l=Object(c.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"video-label"},[this._v("视频")])}),[],!1,null,"2f5eaa22",null).exports,h=n(69),f=n(9),d=Object(r.b)({components:{Thumb:o.a,VideoBookLabel:l},props:{book:{type:Object,default:function(){return{}}},width:{type:Number,default:0},height:{type:Number,default:0}},setup:function(t,e){var n=e.root.$device.isMobile,o=n?100:150,c=n?140:210,l=Object(r.a)((function(){var e;return(null===(e=t.book)||void 0===e?void 0:e.base_info)||{}}));return{isVideoBook:Object(r.a)((function(){var t;return(null===(t=l.value)||void 0===t?void 0:t.course_type)===f.BookletCourseType.Video})),defaultBookThumbUrl:h.c,coverSize:{width:t.width?t.width:o,height:t.height?t.height:c},bookBaseInfo:l}}}),v=(n(1246),Object(c.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-thumb"},[n("thumb",{staticClass:"book-thumb-img",attrs:{alt:"「"+t.bookBaseInfo.title+"」封面",url:t.bookBaseInfo.cover_img,default:t.defaultBookThumbUrl,quality:95,width:t.coverSize.width,height:t.coverSize.height}}),t._v(" "),t.isVideoBook?n("VideoBookLabel"):t._e()],1)}),[],!1,null,"077cd020",null));e.a=v.exports},1204:function(t,e,n){var map={"./locale":985,"./locale.js":985};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=1204},1214:function(t,e,n){},1216:function(t,e,n){"use strict";n(1038)},1217:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHLSURBVHgB7ZdbTsJAGIXPT9AXE8KjiRe6A3EH7EB2IK5AdsDPDlwC7ABXIEvAFdh4SXxsfNToeGqBTLFQCmOKyXxJ05lpO/P1NO1MAY/H4wRZbDhUE+wDXR44Qwl8AeEH0H9VCe32lOhU8o7FAOUSvgHnkUo0a6jYR/eAFsqXjAlqBh27ISUquyGZIKjb1Qr+CV7UNV7UNZWFyo0BrlicoCQ4/phvfDd2sdtl2QWBmiZniS6LF9zq+FviD/uQ442eVcZZJ0heDxSufwJtnnjNahMOidMTwahiMAytWSiLlOgRU6RUtDjPznCUcm56dYZzwOFeVCaZoqdqlLse73QUd/akMkK2cOGU10nvWE2LffYkmcr7jyo6O1bNuoAntrlrUzzkfvBOaTvl6UCDeMtJea30askNd7HiKVWxmoCbckWlJ2oyUw6Tx9OZpczyJd/YyAjGBdLLJU90TpGUl/WxbnpbiVoEyEl5kaLpZbGJ6JxVKW+THlyLWgSYptxQMzaJmNNvrivROWaLx7sKv3pyjRd1jRd1jRd1TVrUIMKuIHiwq+mfO/lZ+YQon5BLxFu74dc/E9eVARe6yqmwgRKg0D3T07x/KI/HsyHfQKq0yUCbcHQAAAAASUVORK5CYII="},1218:function(t,e,n){"use strict";n(1039)},1219:function(t,e,n){"use strict";n(1040)},1220:function(t,e,n){"use strict";n(1041)},1245:function(t,e,n){"use strict";n(1055)},1246:function(t,e,n){"use strict";n(1056)},1280:function(t,e,n){},1290:function(t,e,n){(function(e){t.exports=function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},n=function(t){return t&&t.Math==Math&&t},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")(),i={},o=function(t){try{return!!t()}catch(t){return!0}},c=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={},a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,h=l&&!a.call({1:2},1);s.f=h?function(t){var e=l(this,t);return!!e&&e.enumerable}:a;var u,f,d=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},v={}.toString,p=function(t){return v.call(t).slice(8,-1)},m=p,g="".split,y=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==m(t)?g.call(t,""):Object(t)}:Object,w=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},_=y,b=w,k=function(t){return _(b(t))},C=function(t){return"object"==typeof t?null!==t:"function"==typeof t},O=r,x=function(t){return"function"==typeof t?t:void 0},V=function(t,e){return arguments.length<2?x(O[t]):O[t]&&O[t][e]},S=V("navigator","userAgent")||"",T=r,P=S,E=T.process,j=T.Deno,L=E&&E.versions||j&&j.version,R=L&&L.v8;R?f=(u=R.split("."))[0]<4?1:u[0]+u[1]:P&&(!(u=P.match(/Edge\/(\d+)/))||u[1]>=74)&&(u=P.match(/Chrome\/(\d+)/))&&(f=u[1]);var I=f&&+f,A=I,D=o,M=!!Object.getOwnPropertySymbols&&!D((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&A&&A<41})),B=M&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,N=V,F=B?function(t){return"symbol"==typeof t}:function(t){var e=N("Symbol");return"function"==typeof e&&Object(t)instanceof e},H=C,U={exports:{}},$=r,G=function(t,e){try{Object.defineProperty($,t,{value:e,configurable:!0,writable:!0})}catch(n){$[t]=e}return e},W=G,z="__core-js_shared__",Y=r[z]||W(z,{}),K=Y;(U.exports=function(t,e){return K[t]||(K[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.16.2",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var Z=w,q=function(t){return Object(Z(t))},X=q,J={}.hasOwnProperty,Q=Object.hasOwn||function(t,e){return J.call(X(t),e)},tt=0,et=Math.random(),nt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++tt+et).toString(36)},it=r,ot=U.exports,st=Q,at=nt,ct=M,ut=B,lt=ot("wks"),ht=it.Symbol,ft=ut?ht:ht&&ht.withoutSetter||at,pt=function(t){return st(lt,t)&&(ct||"string"==typeof lt[t])||(ct&&st(ht,t)?lt[t]=ht[t]:lt[t]=ft("Symbol."+t)),lt[t]},vt=C,gt=F,mt=pt("toPrimitive"),yt=function(t,e){if(!vt(t)||gt(t))return t;var n,i=t[mt];if(void 0!==i){if(void 0===e&&(e="default"),n=i.call(t,e),!vt(n)||gt(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,i;if("string"===e&&"function"==typeof(n=t.toString)&&!H(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!H(i=n.call(t)))return i;if("string"!==e&&"function"==typeof(n=t.toString)&&!H(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}(t,e)},bt=yt,wt=F,_t=function(t){var e=bt(t,"string");return wt(e)?e:String(e)},kt=C,Ct=r.document,Ot=kt(Ct)&&kt(Ct.createElement),xt=function(t){return Ot?Ct.createElement(t):{}},Vt=xt,St=!c&&!o((function(){return 7!=Object.defineProperty(Vt("div"),"a",{get:function(){return 7}}).a})),Tt=c,Pt=s,Et=d,jt=k,Lt=_t,Rt=Q,It=St,At=Object.getOwnPropertyDescriptor;i.f=Tt?At:function(t,e){if(t=jt(t),e=Lt(e),It)try{return At(t,e)}catch(t){}if(Rt(t,e))return Et(!Pt.f.call(t,e),t[e])};var Dt={},Mt=C,Bt=function(t){if(!Mt(t))throw TypeError(String(t)+" is not an object");return t},Nt=c,Ft=St,Ht=Bt,Ut=_t,$t=Object.defineProperty;Dt.f=Nt?$t:function(t,e,n){if(Ht(t),e=Ut(e),Ht(n),Ft)try{return $t(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var Gt=Dt,Wt=d,zt=c?function(t,e,n){return Gt.f(t,e,Wt(1,n))}:function(t,e,n){return t[e]=n,t},qt={exports:{}},Yt=Y,Kt=Function.toString;"function"!=typeof Yt.inspectSource&&(Yt.inspectSource=function(t){return Kt.call(t)});var Zt,Xt,Jt,Qt=Yt.inspectSource,te=Qt,ee=r.WeakMap,ne="function"==typeof ee&&/native code/.test(te(ee)),ie=U.exports,re=nt,oe=ie("keys"),rt=function(t){return oe[t]||(oe[t]=re(t))},se={},ae=ne,ce=C,ue=zt,le=Q,he=Y,fe=rt,de=se,dt="Object already initialized",pe=r.WeakMap;if(ae||he.state){var ve=he.state||(he.state=new pe),ge=ve.get,me=ve.has,ye=ve.set;Zt=function(t,e){if(me.call(ve,t))throw new TypeError(dt);return e.facade=t,ye.call(ve,t,e),e},Xt=function(t){return ge.call(ve,t)||{}},Jt=function(t){return me.call(ve,t)}}else{var be=fe("state");de[be]=!0,Zt=function(t,e){if(le(t,be))throw new TypeError(dt);return e.facade=t,ue(t,be,e),e},Xt=function(t){return le(t,be)?t[be]:{}},Jt=function(t){return le(t,be)}}var we={set:Zt,get:Xt,has:Jt,enforce:function(t){return Jt(t)?Xt(t):Zt(t,{})},getterFor:function(t){return function(e){var n;if(!ce(e)||(n=Xt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},_e=r,ke=zt,Ce=Q,Oe=G,xe=Qt,Ve=we.get,Se=we.enforce,Te=String(String).split("String");(qt.exports=function(t,e,n,i){var r,o=!!i&&!!i.unsafe,s=!!i&&!!i.enumerable,a=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof e||Ce(n,"name")||ke(n,"name",e),(r=Se(n)).source||(r.source=Te.join("string"==typeof e?e:""))),t!==_e?(o?!a&&t[e]&&(s=!0):delete t[e],s?t[e]=n:ke(t,e,n)):s?t[e]=n:Oe(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&Ve(this).source||xe(this)}));var Pe={},Ee=Math.ceil,je=Math.floor,Le=function(t){return isNaN(t=+t)?0:(t>0?je:Ee)(t)},Re=Le,Ie=Math.min,Ae=function(t){return t>0?Ie(Re(t),9007199254740991):0},De=Le,Me=Math.max,Be=Math.min,Ne=function(t,e){var n=De(t);return n<0?Me(n+e,0):Be(n,e)},Fe=k,He=Ae,Ue=Ne,$e=function(t){return function(e,n,i){var r,o=Fe(e),s=He(o.length),a=Ue(i,s);if(t&&n!=n){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}},Ge={includes:$e(!0),indexOf:$e(!1)},We=Q,ze=k,qe=Ge.indexOf,Ye=se,Ke=function(t,e){var n,i=ze(t),r=0,o=[];for(n in i)!We(Ye,n)&&We(i,n)&&o.push(n);for(;e.length>r;)We(i,n=e[r++])&&(~qe(o,n)||o.push(n));return o},Ze=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Xe=Ke,Je=Ze.concat("length","prototype");Pe.f=Object.getOwnPropertyNames||function(t){return Xe(t,Je)};var Qe={};Qe.f=Object.getOwnPropertySymbols;var tn,en=Pe,nn=Qe,rn=Bt,on=V("Reflect","ownKeys")||function(t){var e=en.f(rn(t)),n=nn.f;return n?e.concat(n(t)):e},sn=Q,an=on,cn=i,un=Dt,ln=o,hn=/#|\.prototype\./,fn=function(t,e){var n=pn[dn(t)];return n==gn||n!=vn&&("function"==typeof e?ln(e):!!e)},dn=fn.normalize=function(t){return String(t).replace(hn,".").toLowerCase()},pn=fn.data={},vn=fn.NATIVE="N",gn=fn.POLYFILL="P",mn=fn,yn=r,bn=i.f,wn=zt,_n=qt.exports,kn=G,Cn=function(t,e){for(var n=an(e),i=un.f,r=cn.f,o=0;o<n.length;o++){var s=n[o];sn(t,s)||i(t,s,r(e,s))}},On=mn,xn=function(t,e){var n,i,r,o,s,a=t.target,c=t.global,l=t.stat;if(n=c?yn:l?yn[a]||kn(a,{}):(yn[a]||{}).prototype)for(i in e){if(o=e[i],r=t.noTargetGet?(s=bn(n,i))&&s.value:n[i],!On(c?i:a+(l?".":"#")+i,t.forced)&&void 0!==r){if(typeof o==typeof r)continue;Cn(o,r)}(t.sham||r&&r.sham)&&wn(o,"sham",!0),_n(n,i,o,t)}},Vn=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Sn=Ke,Tn=Ze,Pn=Object.keys||function(t){return Sn(t,Tn)},En=Dt,jn=Bt,Ln=Pn,Rn=c?Object.defineProperties:function(t,e){jn(t);for(var n,i=Ln(e),r=i.length,o=0;r>o;)En.f(t,n=i[o++],e[n]);return t},In=V("document","documentElement"),An=Bt,Dn=Rn,Mn=Ze,Bn=se,Nn=In,Fn=xt,Hn=rt("IE_PROTO"),Un=function(){},$n=function(t){return"<script>"+t+"<\/script>"},Gn=function(t){t.write($n("")),t.close();var e=t.parentWindow.Object;return t=null,e},Wn=function(){try{tn=new ActiveXObject("htmlfile")}catch(t){}var t,e;Wn="undefined"!=typeof document?document.domain&&tn?Gn(tn):((e=Fn("iframe")).style.display="none",Nn.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write($n("document.F=Object")),t.close(),t.F):Gn(tn);for(var n=Mn.length;n--;)delete Wn.prototype[Mn[n]];return Wn()};Bn[Hn]=!0;var zn=Object.create||function(t,e){var n;return null!==t?(Un.prototype=An(t),n=new Un,Un.prototype=null,n[Hn]=t):n=Wn(),void 0===e?n:Dn(n,e)},qn=Vn,Yn=C,Kn=[].slice,Zn={},Xn=function(t,e,n){if(!(e in Zn)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";Zn[e]=Function("C,a","return new C("+i.join(",")+")")}return Zn[e](t,n)},Jn=Function.bind||function(t){var e=qn(this),n=Kn.call(arguments,1),i=function(){var r=n.concat(Kn.call(arguments));return this instanceof i?Xn(e,r.length,r):e.apply(t,r)};return Yn(e.prototype)&&(i.prototype=e.prototype),i},Qn=xn,ti=Vn,ei=Bt,ni=C,ii=zn,ri=Jn,oi=o,si=V("Reflect","construct"),ai=oi((function(){function t(){}return!(si((function(){}),[],t)instanceof t)})),ci=!oi((function(){si((function(){}))})),li=ai||ci;function ui(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hi(t,e){return(hi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hi(t,e)}function di(t){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vi(t,e){if(e&&("object"===di(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pi(t)}function gi(t){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Qn({target:"Reflect",stat:!0,forced:li,sham:li},{construct:function(t,e){ti(t),ei(e);var n=arguments.length<3?t:ti(arguments[2]);if(ci&&!ai)return si(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(ri.apply(t,i))}var r=n.prototype,o=ii(ni(r)?r:Object.prototype),s=Function.apply.call(t,o,e);return ni(s)?s:o}});var yi=p,bi=Array.isArray||function(t){return"Array"==yi(t)},wi=F,_i=function(t){if(wi(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)},ki={},Ci=k,Oi=Pe.f,xi={}.toString,Vi="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];ki.f=function(t){return Vi&&"[object Window]"==xi.call(t)?function(t){try{return Oi(t)}catch(t){return Vi.slice()}}(t):Oi(Ci(t))};var Si={},Ti=pt;Si.f=Ti;var Pi=r,Ei=Q,ji=Si,Li=Dt.f,Ri=Dt.f,Ii=Q,Ai=pt("toStringTag"),Di=function(t,e,n){t&&!Ii(t=n?t:t.prototype,Ai)&&Ri(t,Ai,{configurable:!0,value:e})},Mi=Vn,Bi=function(t,e,n){if(Mi(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}},Ni=C,Fi=bi,Hi=pt("species"),Ui=function(t,e){return new(function(t){var e;return Fi(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Fi(e.prototype)?Ni(e)&&null===(e=e[Hi])&&(e=void 0):e=void 0),void 0===e?Array:e}(t))(0===e?0:e)},$i=Bi,Gi=y,Wi=q,zi=Ae,qi=Ui,Yi=[].push,Ki=function(t){var e=1==t,n=2==t,i=3==t,r=4==t,o=6==t,s=7==t,a=5==t||o;return function(c,l,u,h){for(var f,d,p=Wi(c),v=Gi(p),g=$i(l,u,3),m=zi(v.length),y=0,w=h||qi,b=e?w(c,m):n||s?w(c,0):void 0;m>y;y++)if((a||y in v)&&(d=g(f=v[y],y,p),t))if(e)b[y]=d;else if(d)switch(t){case 3:return!0;case 5:return f;case 6:return y;case 2:Yi.call(b,f)}else switch(t){case 4:return!1;case 7:Yi.call(b,f)}return o?-1:i||r?r:b}},Zi={forEach:Ki(0),map:Ki(1),filter:Ki(2),some:Ki(3),every:Ki(4),find:Ki(5),findIndex:Ki(6),filterReject:Ki(7)},Xi=xn,Ji=r,Qi=V,tr=c,er=M,nr=o,ir=Q,rr=bi,or=C,sr=F,ar=Bt,cr=q,ur=k,hr=_t,lr=_i,fr=d,dr=zn,pr=Pn,vr=Pe,gr=ki,mr=Qe,yr=i,br=Dt,wr=s,_r=zt,kr=qt.exports,Cr=U.exports,Or=se,xr=nt,Vr=pt,Sr=Si,Tr=Di,Pr=we,Er=Zi.forEach,jr=rt("hidden"),Lr="Symbol",Rr=Vr("toPrimitive"),Ir=Pr.set,Ar=Pr.getterFor(Lr),Dr=Object.prototype,Mr=Ji.Symbol,Br=Qi("JSON","stringify"),Nr=yr.f,Fr=br.f,Hr=gr.f,Ur=wr.f,$r=Cr("symbols"),Gr=Cr("op-symbols"),Wr=Cr("string-to-symbol-registry"),zr=Cr("symbol-to-string-registry"),qr=Cr("wks"),Yr=Ji.QObject,Kr=!Yr||!Yr.prototype||!Yr.prototype.findChild,Zr=tr&&nr((function(){return 7!=dr(Fr({},"a",{get:function(){return Fr(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=Nr(Dr,e);i&&delete Dr[e],Fr(t,e,n),i&&t!==Dr&&Fr(Dr,e,i)}:Fr,Xr=function(t,e){var n=$r[t]=dr(Mr.prototype);return Ir(n,{type:Lr,tag:t,description:e}),tr||(n.description=e),n},Jr=function(t,e,n){t===Dr&&Jr(Gr,e,n),ar(t);var i=hr(e);return ar(n),ir($r,i)?(n.enumerable?(ir(t,jr)&&t[jr][i]&&(t[jr][i]=!1),n=dr(n,{enumerable:fr(0,!1)})):(ir(t,jr)||Fr(t,jr,fr(1,{})),t[jr][i]=!0),Zr(t,i,n)):Fr(t,i,n)},Qr=function(t,e){ar(t);var n=ur(e),i=pr(n).concat(io(n));return Er(i,(function(e){tr&&!to.call(n,e)||Jr(t,e,n[e])})),t},to=function(t){var e=hr(t),n=Ur.call(this,e);return!(this===Dr&&ir($r,e)&&!ir(Gr,e))&&(!(n||!ir(this,e)||!ir($r,e)||ir(this,jr)&&this[jr][e])||n)},eo=function(t,e){var n=ur(t),i=hr(e);if(n!==Dr||!ir($r,i)||ir(Gr,i)){var r=Nr(n,i);return!r||!ir($r,i)||ir(n,jr)&&n[jr][i]||(r.enumerable=!0),r}},no=function(t){var e=Hr(ur(t)),n=[];return Er(e,(function(t){ir($r,t)||ir(Or,t)||n.push(t)})),n},io=function(t){var e=t===Dr,n=Hr(e?Gr:ur(t)),i=[];return Er(n,(function(t){!ir($r,t)||e&&!ir(Dr,t)||i.push($r[t])})),i};er||(kr((Mr=function(){if(this instanceof Mr)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?lr(arguments[0]):void 0,e=xr(t),n=function(t){this===Dr&&n.call(Gr,t),ir(this,jr)&&ir(this[jr],e)&&(this[jr][e]=!1),Zr(this,e,fr(1,t))};return tr&&Kr&&Zr(Dr,e,{configurable:!0,set:n}),Xr(e,t)}).prototype,"toString",(function(){return Ar(this).tag})),kr(Mr,"withoutSetter",(function(t){return Xr(xr(t),t)})),wr.f=to,br.f=Jr,yr.f=eo,vr.f=gr.f=no,mr.f=io,Sr.f=function(t){return Xr(Vr(t),t)},tr&&(Fr(Mr.prototype,"description",{configurable:!0,get:function(){return Ar(this).description}}),kr(Dr,"propertyIsEnumerable",to,{unsafe:!0}))),Xi({global:!0,wrap:!0,forced:!er,sham:!er},{Symbol:Mr}),Er(pr(qr),(function(t){!function(t){var e=Pi.Symbol||(Pi.Symbol={});Ei(e,t)||Li(e,t,{value:ji.f(t)})}(t)})),Xi({target:Lr,stat:!0,forced:!er},{for:function(t){var e=lr(t);if(ir(Wr,e))return Wr[e];var n=Mr(e);return Wr[e]=n,zr[n]=e,n},keyFor:function(t){if(!sr(t))throw TypeError(t+" is not a symbol");if(ir(zr,t))return zr[t]},useSetter:function(){Kr=!0},useSimple:function(){Kr=!1}}),Xi({target:"Object",stat:!0,forced:!er,sham:!tr},{create:function(t,e){return void 0===e?dr(t):Qr(dr(t),e)},defineProperty:Jr,defineProperties:Qr,getOwnPropertyDescriptor:eo}),Xi({target:"Object",stat:!0,forced:!er},{getOwnPropertyNames:no,getOwnPropertySymbols:io}),Xi({target:"Object",stat:!0,forced:nr((function(){mr.f(1)}))},{getOwnPropertySymbols:function(t){return mr.f(cr(t))}}),Br&&Xi({target:"JSON",stat:!0,forced:!er||nr((function(){var t=Mr();return"[null]"!=Br([t])||"{}"!=Br({a:t})||"{}"!=Br(Object(t))}))},{stringify:function(t,e,n){for(var i,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(i=e,(or(e)||void 0!==t)&&!sr(t))return rr(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!sr(e))return e}),r[1]=e,Br.apply(null,r)}}),Mr.prototype[Rr]||_r(Mr.prototype,Rr,Mr.prototype.valueOf),Tr(Mr,Lr),Or[jr]=!0;var ro=xn,oo=o,so=k,ao=i.f,co=c,uo=oo((function(){ao(1)}));ro({target:"Object",stat:!0,forced:!co||uo,sham:!co},{getOwnPropertyDescriptor:function(t,e){return ao(so(t),e)}});var lo=_t,ho=Dt,fo=d,po=function(t,e,n){var i=lo(e);i in t?ho.f(t,i,fo(0,n)):t[i]=n},vo=on,go=k,mo=i,yo=po;function bo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function wo(t,e,n){return e&&bo(t.prototype,e),n&&bo(t,n),t}function _o(t,e,n){return(_o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gi(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}xn({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(t){for(var e,n,i=go(t),r=mo.f,o=vo(i),s={},a=0;o.length>a;)void 0!==(n=r(i,e=o[a++]))&&yo(s,e,n);return s}});var ko=zn,Co=Dt,Oo=pt("unscopables"),xo=Array.prototype;null==xo[Oo]&&Co.f(xo,Oo,{configurable:!0,value:ko(null)});var Vo=function(t){xo[Oo][t]=!0},So=xn,To=Zi.find,Po=Vo,Eo=!0;"find"in[]&&Array(1).find((function(){Eo=!1})),So({target:"Array",proto:!0,forced:Eo},{find:function(t){return To(this,t,arguments.length>1?arguments[1]:void 0)}}),Po("find");var jo=o,Lo=I,Ro=pt("species"),Io=function(t){return Lo>=51||!jo((function(){var e=[];return(e.constructor={})[Ro]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Ao=xn,Do=o,Mo=bi,Bo=C,No=q,Fo=Ae,Ho=po,Uo=Ui,$o=Io,Go=I,Wo=pt("isConcatSpreadable"),zo=9007199254740991,qo="Maximum allowed index exceeded",Yo=Go>=51||!Do((function(){var t=[];return t[Wo]=!1,t.concat()[0]!==t})),Ko=$o("concat"),Zo=function(t){if(!Bo(t))return!1;var e=t[Wo];return void 0!==e?!!e:Mo(t)};Ao({target:"Array",proto:!0,forced:!Yo||!Ko},{concat:function(t){var e,n,i,r,o,s=No(this),a=Uo(s,0),c=0;for(e=-1,i=arguments.length;e<i;e++)if(Zo(o=-1===e?s:arguments[e])){if(c+(r=Fo(o.length))>zo)throw TypeError(qo);for(n=0;n<r;n++,c++)n in o&&Ho(a,c,o[n])}else{if(c>=zo)throw TypeError(qo);Ho(a,c++,o)}return a.length=c,a}});var Xo={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Jo=o,Qo=function(t,e){var n=[][t];return!!n&&Jo((function(){n.call(null,e||function(){throw 1},1)}))},ts=Zi.forEach,es=r,ns=Xo,is=Qo("forEach")?[].forEach:function(t){return ts(this,t,arguments.length>1?arguments[1]:void 0)},rs=zt;for(var os in ns){var ss=es[os],as=ss&&ss.prototype;if(as&&as.forEach!==is)try{rs(as,"forEach",is)}catch(t){as.forEach=is}}var cs=q,us=Pn;xn({target:"Object",stat:!0,forced:o((function(){us(1)}))},{keys:function(t){return us(cs(t))}});var ls=xn,hs=C,fs=bi,ds=Ne,ps=Ae,vs=k,gs=po,ms=pt,ys=Io("slice"),bs=ms("species"),ws=[].slice,_s=Math.max;ls({target:"Array",proto:!0,forced:!ys},{slice:function(t,e){var n,i,r,o=vs(this),s=ps(o.length),a=ds(t,s),c=ds(void 0===e?s:e,s);if(fs(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!fs(n.prototype)?hs(n)&&null===(n=n[bs])&&(n=void 0):n=void 0,n===Array||void 0===n))return ws.call(o,a,c);for(i=new(void 0===n?Array:n)(_s(c-a,0)),r=0;a<c;a++,r++)a in o&&gs(i,r,o[a]);return i.length=r,i}});var ks=Bt,Cs=function(){var t=ks(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Os={},xs=o,Vs=r.RegExp;Os.UNSUPPORTED_Y=xs((function(){var t=Vs("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),Os.BROKEN_CARET=xs((function(){var t=Vs("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));var Ss=o,Ts=r.RegExp,Ps=Ss((function(){var t=Ts(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),Es=o,js=r.RegExp,Ls=Es((function(){var t=js("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Rs=_i,Is=Cs,As=Os,Ds=U.exports,Ms=zn,Bs=we.get,Ns=Ps,Fs=Ls,Hs=RegExp.prototype.exec,Us=Ds("native-string-replace",String.prototype.replace),$s=Hs,Gs=function(){var t=/a/,e=/b*/g;return Hs.call(t,"a"),Hs.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),Ws=As.UNSUPPORTED_Y||As.BROKEN_CARET,zs=void 0!==/()??/.exec("")[1];(Gs||zs||Ws||Ns||Fs)&&($s=function(t){var e,n,i,r,o,s,a,c=this,l=Bs(c),u=Rs(t),h=l.raw;if(h)return h.lastIndex=c.lastIndex,e=$s.call(h,u),c.lastIndex=h.lastIndex,e;var f=l.groups,d=Ws&&c.sticky,p=Is.call(c),v=c.source,g=0,m=u;if(d&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),m=u.slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==u.charAt(c.lastIndex-1))&&(v="(?: "+v+")",m=" "+m,g++),n=new RegExp("^(?:"+v+")",p)),zs&&(n=new RegExp("^"+v+"$(?!\\s)",p)),Gs&&(i=c.lastIndex),r=Hs.call(d?n:c,m),d?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=c.lastIndex,c.lastIndex+=r[0].length):c.lastIndex=0:Gs&&r&&(c.lastIndex=c.global?r.index+r[0].length:i),zs&&r&&r.length>1&&Us.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r&&f)for(r.groups=s=Ms(null),o=0;o<f.length;o++)s[(a=f[o])[0]]=r[a[1]];return r});var qs=$s;xn({target:"RegExp",proto:!0,forced:/./.exec!==qs},{exec:qs});var Ys=qt.exports,Ks=qs,Zs=o,Xs=pt,Js=zt,Qs=Xs("species"),ta=RegExp.prototype,ea=function(t,e,n,i){var r=Xs(t),o=!Zs((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),s=o&&!Zs((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Qs]=function(){return n},n.flags="",n[r]=/./[r]),n.exec=function(){return e=!0,null},n[r](""),!e}));if(!o||!s||n){var a=/./[r],c=e(r,""[t],(function(t,e,n,i,r){var s=e.exec;return s===Ks||s===ta.exec?o&&!r?{done:!0,value:a.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}));Ys(String.prototype,t,c[0]),Ys(ta,r,c[1])}i&&Js(ta[r],"sham",!0)},na=C,ia=p,ra=pt("match"),oa=function(t){var e;return na(t)&&(void 0!==(e=t[ra])?!!e:"RegExp"==ia(t))},sa=Bt,aa=Vn,ca=pt("species"),ua=function(t,e){var n,i=sa(t).constructor;return void 0===i||null==(n=sa(i)[ca])?e:aa(n)},la=Le,ha=_i,fa=w,da=function(t){return function(e,n){var i,r,o=ha(fa(e)),s=la(n),a=o.length;return s<0||s>=a?t?"":void 0:(i=o.charCodeAt(s))<55296||i>56319||s+1===a||(r=o.charCodeAt(s+1))<56320||r>57343?t?o.charAt(s):i:t?o.slice(s,s+2):r-56320+(i-55296<<10)+65536}},pa={codeAt:da(!1),charAt:da(!0)},va=pa.charAt,ga=function(t,e,n){return e+(n?va(t,e).length:1)},ma=p,ya=qs,ba=function(t,e){var n=t.exec;if("function"==typeof n){var i=n.call(t,e);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==ma(t))throw TypeError("RegExp#exec called on incompatible receiver");return ya.call(t,e)},wa=ea,_a=oa,ka=Bt,Ca=w,Oa=ua,xa=ga,Va=Ae,Sa=_i,Ta=ba,Pa=qs,Ea=o,ja=Os.UNSUPPORTED_Y,La=[].push,Ra=Math.min,Ia=4294967295;wa("split",(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=Sa(Ca(this)),r=void 0===n?Ia:n>>>0;if(0===r)return[];if(void 0===t)return[i];if(!_a(t))return e.call(i,t,r);for(var o,s,a,c=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,h=new RegExp(t.source,l+"g");(o=Pa.call(h,i))&&!((s=h.lastIndex)>u&&(c.push(i.slice(u,o.index)),o.length>1&&o.index<i.length&&La.apply(c,o.slice(1)),a=o[0].length,u=s,c.length>=r));)h.lastIndex===o.index&&h.lastIndex++;return u===i.length?!a&&h.test("")||c.push(""):c.push(i.slice(u)),c.length>r?c.slice(0,r):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var r=Ca(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,r,n):i.call(Sa(r),e,n)},function(t,r){var o=ka(this),s=Sa(t),a=n(i,o,s,r,i!==e);if(a.done)return a.value;var c=Oa(o,RegExp),l=o.unicode,u=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(ja?"g":"y"),h=new c(ja?"^(?:"+o.source+")":o,u),f=void 0===r?Ia:r>>>0;if(0===f)return[];if(0===s.length)return null===Ta(h,s)?[s]:[];for(var d=0,p=0,v=[];p<s.length;){h.lastIndex=ja?0:p;var g,m=Ta(h,ja?s.slice(p):s);if(null===m||(g=Ra(Va(h.lastIndex+(ja?p:0)),s.length))===d)p=xa(s,p,l);else{if(v.push(s.slice(d,p)),v.length===f)return v;for(var y=1;y<=m.length-1;y++)if(v.push(m[y]),v.length===f)return v;p=d=g}}return v.push(s.slice(d)),v}]}),!!Ea((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),ja);var Aa=xn,Da=k,Ma=[].join,Ba=y!=Object,Na=Qo("join",",");Aa({target:"Array",proto:!0,forced:Ba||!Na},{join:function(t){return Ma.call(Da(this),void 0===t?",":t)}});var Fa=xn,Ha=Ne,Ua=Le,$a=Ae,Ga=q,Wa=Ui,za=po,qa=Io("splice"),Ya=Math.max,Ka=Math.min,Za=9007199254740991,Xa="Maximum allowed length exceeded";Fa({target:"Array",proto:!0,forced:!qa},{splice:function(t,e){var n,i,r,o,s,a,c=Ga(this),l=$a(c.length),u=Ha(t,l),h=arguments.length;if(0===h?n=i=0:1===h?(n=0,i=l-u):(n=h-2,i=Ka(Ya(Ua(e),0),l-u)),l+n-i>Za)throw TypeError(Xa);for(r=Wa(c,i),o=0;o<i;o++)(s=u+o)in c&&za(r,o,c[s]);if(r.length=i,n<i){for(o=u;o<l-i;o++)a=o+n,(s=o+i)in c?c[a]=c[s]:delete c[a];for(o=l;o>l-i+n;o--)delete c[o-1]}else if(n>i)for(o=l-i;o>u;o--)a=o+n-1,(s=o+i-1)in c?c[a]=c[s]:delete c[a];for(o=0;o<n;o++)c[o+u]=arguments[o+2];return c.length=l-i+n,r}});var Ja={};Ja[pt("toStringTag")]="z";var Qa="[object z]"===String(Ja),tc=Qa,ec=p,nc=pt("toStringTag"),ic="Arguments"==ec(function(){return arguments}()),rc=tc?ec:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),nc))?n:ic?ec(e):"Object"==(i=ec(e))&&"function"==typeof e.callee?"Arguments":i},oc=rc,sc=Qa?{}.toString:function(){return"[object "+oc(this)+"]"},ac=Qa,cc=qt.exports,uc=sc;ac||cc(Object.prototype,"toString",uc,{unsafe:!0});var lc=r.Promise,hc=qt.exports,fc=function(t,e,n){for(var i in e)hc(t,i,e[i],n);return t},dc=C,pc=Bt,vc=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return pc(n),function(t){if(!dc(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(i),e?t.call(n,i):n.__proto__=i,n}}():void 0),gc=V,mc=Dt,yc=c,bc=pt("species"),wc=function(t){var e=gc(t),n=mc.f;yc&&e&&!e[bc]&&n(e,bc,{configurable:!0,get:function(){return this}})},_c=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},kc={},Cc=kc,Oc=pt("iterator"),xc=Array.prototype,Vc=function(t){return void 0!==t&&(Cc.Array===t||xc[Oc]===t)},Sc=rc,Tc=kc,Pc=pt("iterator"),Ec=function(t){if(null!=t)return t[Pc]||t["@@iterator"]||Tc[Sc(t)]},jc=Bt,Lc=function(t){var e=t.return;if(void 0!==e)return jc(e.call(t)).value},Rc=Bt,Ic=Vc,Ac=Ae,Dc=Bi,Mc=Ec,Bc=Lc,Nc=function(t,e){this.stopped=t,this.result=e},Fc=pt("iterator"),Hc=!1;try{var Uc=0,$c={next:function(){return{done:!!Uc++}},return:function(){Hc=!0}};$c[Fc]=function(){return this},Array.from($c,(function(){throw 2}))}catch(t){}var Gc,Wc,zc,qc,Yc=/(?:ipad|iphone|ipod).*applewebkit/i.test(S),Kc="process"==p(r.process),Zc=r,Xc=o,Jc=Bi,Qc=In,tu=xt,ol=Yc,eu=Kc,nu=Zc.setImmediate,iu=Zc.clearImmediate,ru=Zc.process,ul=Zc.MessageChannel,ou=Zc.Dispatch,su=0,dl={};try{Gc=Zc.location}catch(t){}var au=function(t){if(dl.hasOwnProperty(t)){var e=dl[t];delete dl[t],e()}},cu=function(t){return function(){au(t)}},uu=function(t){au(t.data)},lu=function(t){Zc.postMessage(String(t),Gc.protocol+"//"+Gc.host)};nu&&iu||(nu=function(t){for(var e=[],n=arguments.length,i=1;n>i;)e.push(arguments[i++]);return dl[++su]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Wc(su),su},iu=function(t){delete dl[t]},eu?Wc=function(t){ru.nextTick(cu(t))}:ou&&ou.now?Wc=function(t){ou.now(cu(t))}:ul&&!ol?(qc=(zc=new ul).port2,zc.port1.onmessage=uu,Wc=Jc(qc.postMessage,qc,1)):Zc.addEventListener&&"function"==typeof postMessage&&!Zc.importScripts&&Gc&&"file:"!==Gc.protocol&&!Xc(lu)?(Wc=lu,Zc.addEventListener("message",uu,!1)):Wc="onreadystatechange"in tu("script")?function(t){Qc.appendChild(tu("script")).onreadystatechange=function(){Qc.removeChild(this),au(t)}}:function(t){setTimeout(cu(t),0)});var hu,fu,du,pu,vu,gu,mu,yu,bu={set:nu,clear:iu},wu=r,_u=/ipad|iphone|ipod/i.test(S)&&void 0!==wu.Pebble,ku=/web0s(?!.*chrome)/i.test(S),Cu=r,Ou=i.f,xu=bu.set,Vu=Yc,Su=_u,Tu=ku,Pu=Kc,Eu=Cu.MutationObserver||Cu.WebKitMutationObserver,ju=Cu.document,Lu=Cu.process,Ru=Cu.Promise,Iu=Ou(Cu,"queueMicrotask"),Au=Iu&&Iu.value;Au||(hu=function(){var t,e;for(Pu&&(t=Lu.domain)&&t.exit();fu;){e=fu.fn,fu=fu.next;try{e()}catch(t){throw fu?pu():du=void 0,t}}du=void 0,t&&t.enter()},Vu||Pu||Tu||!Eu||!ju?!Su&&Ru&&Ru.resolve?((mu=Ru.resolve(void 0)).constructor=Ru,yu=mu.then,pu=function(){yu.call(mu,hu)}):pu=Pu?function(){Lu.nextTick(hu)}:function(){xu.call(Cu,hu)}:(vu=!0,gu=ju.createTextNode(""),new Eu(hu).observe(gu,{characterData:!0}),pu=function(){gu.data=vu=!vu}));var Du=Au||function(t){var e={fn:t,next:void 0};du&&(du.next=e),fu||(fu=e,pu()),du=e},Mu={},Bu=Vn,Nu=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=Bu(e),this.reject=Bu(n)};Mu.f=function(t){return new Nu(t)};var Fu,Hu,Uu,$u,Gu=Bt,Wu=C,zu=Mu,qu=r,Yu="object"==typeof window,Ku=xn,Zu=r,Xu=V,Ju=lc,Qu=qt.exports,tl=fc,el=vc,nl=Di,il=wc,rl=C,sl=Vn,al=_c,cl=Qt,ll=function(t,e,n){var i,r,o,s,a,c,l,u=n&&n.that,h=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),p=Dc(e,u,1+h+d),v=function(t){return i&&Bc(i),new Nc(!0,t)},g=function(t){return h?(Rc(t),d?p(t[0],t[1],v):p(t[0],t[1])):d?p(t,v):p(t)};if(f)i=t;else{if("function"!=typeof(r=Mc(t)))throw TypeError("Target is not iterable");if(Ic(r)){for(o=0,s=Ac(t.length);s>o;o++)if((a=g(t[o]))&&a instanceof Nc)return a;return new Nc(!1)}i=r.call(t)}for(c=i.next;!(l=c.call(i)).done;){try{a=g(l.value)}catch(t){throw Bc(i),t}if("object"==typeof a&&a&&a instanceof Nc)return a}return new Nc(!1)},hl=ua,fl=bu.set,pl=Du,vl=Mu,gl=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},ml=we,yl=mn,bl=Yu,wl=Kc,_l=I,kl=pt("species"),Cl="Promise",Ol=ml.get,xl=ml.set,Vl=ml.getterFor(Cl),Sl=Ju&&Ju.prototype,Tl=Ju,Pl=Sl,El=Zu.TypeError,jl=Zu.document,Ll=Zu.process,Rl=vl.f,Il=Rl,Al=!!(jl&&jl.createEvent&&Zu.dispatchEvent),Dl="function"==typeof PromiseRejectionEvent,Ml="unhandledrejection",Bl=!1,Nl=yl(Cl,(function(){var t=cl(Tl),e=t!==String(Tl);if(!e&&66===_l)return!0;if(_l>=51&&/native code/.test(t))return!1;var n=new Tl((function(t){t(1)})),i=function(t){t((function(){}),(function(){}))};return(n.constructor={})[kl]=i,!(Bl=n.then((function(){}))instanceof i)||!e&&bl&&!Dl})),Fl=Nl||!function(t,e){if(!e&&!Hc)return!1;var n=!1;try{var i={};i[Fc]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}((function(t){Tl.all(t).catch((function(){}))})),Hl=function(t){var e;return!(!rl(t)||"function"!=typeof(e=t.then))&&e},Ul=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;pl((function(){for(var i=t.value,r=1==t.state,o=0;n.length>o;){var s,a,c,l=n[o++],u=r?l.ok:l.fail,h=l.resolve,f=l.reject,d=l.domain;try{u?(r||(2===t.rejection&&zl(t),t.rejection=1),!0===u?s=i:(d&&d.enter(),s=u(i),d&&(d.exit(),c=!0)),s===l.promise?f(El("Promise-chain cycle")):(a=Hl(s))?a.call(s,h,f):h(s)):f(i)}catch(t){d&&!c&&d.exit(),f(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Gl(t)}))}},$l=function(t,e,n){var i,r;Al?((i=jl.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),Zu.dispatchEvent(i)):i={promise:e,reason:n},!Dl&&(r=Zu["on"+t])?r(i):t===Ml&&function(t,e){var n=qu.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Gl=function(t){fl.call(Zu,(function(){var e,n=t.facade,i=t.value;if(Wl(t)&&(e=gl((function(){wl?Ll.emit("unhandledRejection",i,n):$l(Ml,n,i)})),t.rejection=wl||Wl(t)?2:1,e.error))throw e.value}))},Wl=function(t){return 1!==t.rejection&&!t.parent},zl=function(t){fl.call(Zu,(function(){var e=t.facade;wl?Ll.emit("rejectionHandled",e):$l("rejectionhandled",e,t.value)}))},th=function(t,e,n){return function(i){t(e,i,n)}},ql=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Ul(t,!0))},Yl=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw El("Promise can't be resolved itself");var i=Hl(e);i?pl((function(){var n={done:!1};try{i.call(e,th(Yl,n,t),th(ql,n,t))}catch(e){ql(n,e,t)}})):(t.value=e,t.state=1,Ul(t,!1))}catch(e){ql({done:!1},e,t)}}};if(Nl&&(Pl=(Tl=function(t){al(this,Tl,Cl),sl(t),Fu.call(this);var e=Ol(this);try{t(th(Yl,e),th(ql,e))}catch(t){ql(e,t)}}).prototype,(Fu=function(t){xl(this,{type:Cl,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=tl(Pl,{then:function(t,e){var n=Vl(this),i=Rl(hl(this,Tl));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=wl?Ll.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&Ul(n,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),Hu=function(){var t=new Fu,e=Ol(t);this.promise=t,this.resolve=th(Yl,e),this.reject=th(ql,e)},vl.f=Rl=function(t){return t===Tl||t===Uu?new Hu(t):Il(t)},"function"==typeof Ju&&Sl!==Object.prototype)){$u=Sl.then,Bl||(Qu(Sl,"then",(function(t,e){var n=this;return new Tl((function(t,e){$u.call(n,t,e)})).then(t,e)}),{unsafe:!0}),Qu(Sl,"catch",Pl.catch,{unsafe:!0}));try{delete Sl.constructor}catch(t){}el&&el(Sl,Pl)}Ku({global:!0,wrap:!0,forced:Nl},{Promise:Tl}),nl(Tl,Cl,!1),il(Cl),Uu=Xu(Cl),Ku({target:Cl,stat:!0,forced:Nl},{reject:function(t){var e=Rl(this);return e.reject.call(void 0,t),e.promise}}),Ku({target:Cl,stat:!0,forced:Nl},{resolve:function(t){return function(t,e){if(Gu(t),Wu(e)&&e.constructor===t)return e;var n=zu.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),Ku({target:Cl,stat:!0,forced:Fl},{all:function(t){var e=this,n=Rl(e),i=n.resolve,r=n.reject,o=gl((function(){var n=sl(e.resolve),o=[],s=0,a=1;ll(t,(function(t){var c=s++,l=!1;o.push(void 0),a++,n.call(e,t).then((function(t){l||(l=!0,o[c]=t,--a||i(o))}),r)})),--a||i(o)}));return o.error&&r(o.value),n.promise},race:function(t){var e=this,n=Rl(e),i=n.reject,r=gl((function(){var r=sl(e.resolve);ll(t,(function(t){r.call(e,t).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}});var Kl=c,Zl=Dt.f,Xl=Function.prototype,Jl=Xl.toString,Ql=/^\s*function ([^ (]*)/;Kl&&!("name"in Xl)&&Zl(Xl,"name",{configurable:!0,get:function(){try{return Jl.call(this).match(Ql)[1]}catch(t){return""}}});var eh=C,nh=vc,ih=function(t,e,n){var i,r;return nh&&"function"==typeof(i=e.constructor)&&i!==n&&eh(r=i.prototype)&&r!==n.prototype&&nh(t,r),t},rh=w,oh=_i,sh="[\t\n\v\f\r                　\u2028\u2029\ufeff]",ah=RegExp("^"+sh+sh+"*"),ch=RegExp(sh+sh+"*$"),uh=function(t){return function(e){var n=oh(rh(e));return 1&t&&(n=n.replace(ah,"")),2&t&&(n=n.replace(ch,"")),n}},lh={start:uh(1),end:uh(2),trim:uh(3)},hh=c,fh=r,dh=mn,ph=qt.exports,vh=Q,gh=p,mh=ih,yh=F,bh=yt,wh=o,_h=zn,kh=Pe.f,Ch=i.f,Oh=Dt.f,xh=lh.trim,Vh="Number",Sh=fh.Number,Th=Sh.prototype,Ph=gh(_h(Th))==Vh,Eh=function(t){if(yh(t))throw TypeError("Cannot convert a Symbol value to a number");var e,n,i,r,o,s,a,c,l=bh(t,"number");if("string"==typeof l&&l.length>2)if(43===(e=(l=xh(l)).charCodeAt(0))||45===e){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+l}for(s=(o=l.slice(2)).length,a=0;a<s;a++)if((c=o.charCodeAt(a))<48||c>r)return NaN;return parseInt(o,i)}return+l};if(dh(Vh,!Sh(" 0o1")||!Sh("0b1")||Sh("+0x1"))){for(var jh,Lh=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Lh&&(Ph?wh((function(){Th.valueOf.call(n)})):gh(n)!=Vh)?mh(new Sh(Eh(e)),n,Lh):Eh(e)},Rh=hh?kh(Sh):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Ih=0;Rh.length>Ih;Ih++)vh(Sh,jh=Rh[Ih])&&!vh(Lh,jh)&&Oh(Lh,jh,Ch(Sh,jh));Lh.prototype=Th,Th.constructor=Lh,ph(fh,Vh,Lh)}var Ah=Zi.map;xn({target:"Array",proto:!0,forced:!Io("map")},{map:function(t){return Ah(this,t,arguments.length>1?arguments[1]:void 0)}});var Dh=Zi.filter;xn({target:"Array",proto:!0,forced:!Io("filter")},{filter:function(t){return Dh(this,t,arguments.length>1?arguments[1]:void 0)}});var Mh=c,Bh=o,Nh=Pn,Fh=Qe,Hh=s,Uh=q,$h=y,Gh=Object.assign,Wh=Object.defineProperty,zh=!Gh||Bh((function(){if(Mh&&1!==Gh({b:1},Gh(Wh({},"a",{enumerable:!0,get:function(){Wh(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=Gh({},t)[n]||Nh(Gh({},e)).join("")!=i}))?function(t,e){for(var n=Uh(t),i=arguments.length,r=1,o=Fh.f,s=Hh.f;i>r;)for(var a,c=$h(arguments[r++]),l=o?Nh(c).concat(o(c)):Nh(c),u=l.length,h=0;u>h;)a=l[h++],Mh&&!s.call(c,a)||(n[a]=c[a]);return n}:Gh,qh=zh;xn({target:"Object",stat:!0,forced:Object.assign!==qh},{assign:qh});var Yh={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,o||t,s),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var c,l,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,r),!0;case 5:return u.fn.call(u.context,e,i,r,o),!0;case 6:return u.fn.call(u.context,e,i,r,o,s),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var f,d=u.length;for(l=0;l<d;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,i);break;case 4:u[l].fn.call(u[l].context,e,i,r);break;default:if(!c)for(f=1,c=new Array(h-1);f<h;f++)c[f-1]=arguments[f];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,i,r){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||s(this,o);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==e||r&&!a[c].once||i&&a[c].context!==i)&&l.push(a[c]);l.length?this._events[o]=1===l.length?l[0]:l:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(Yh);var Kh=Yh.exports;function Zh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Xh(t){return function(t){if(Array.isArray(t))return Zh(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Zh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zh(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Jh=Bt,Qh=Ae,tf=_i,ef=w,nf=ga,rf=ba;ea("match",(function(t,e,n){return[function(e){var n=ef(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,n):new RegExp(e)[t](tf(n))},function(t){var i=Jh(this),r=tf(t),o=n(e,i,r);if(o.done)return o.value;if(!i.global)return rf(i,r);var s=i.unicode;i.lastIndex=0;for(var a,c=[],l=0;null!==(a=rf(i,r));){var u=tf(a[0]);c[l]=u,""===u&&(i.lastIndex=nf(r,Qh(i.lastIndex),s)),l++}return 0===l?null:c}]}));var of=c,sf=r,af=mn,cf=ih,uf=zt,lf=Dt.f,hf=Pe.f,ff=oa,df=_i,pf=Cs,vf=Os,gf=qt.exports,mf=o,yf=Q,bf=we.enforce,wf=wc,_f=Ps,kf=Ls,Cf=pt("match"),Of=sf.RegExp,xf=Of.prototype,Vf=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Sf=/a/g,Tf=/a/g,Pf=new Of(Sf)!==Sf,Ef=vf.UNSUPPORTED_Y,jf=of&&(!Pf||Ef||_f||kf||mf((function(){return Tf[Cf]=!1,Of(Sf)!=Sf||Of(Tf)==Tf||"/a/i"!=Of(Sf,"i")})));if(af("RegExp",jf)){for(var Lf=function(t,e){var n,i,r,o,s,a,c=this instanceof Lf,l=ff(t),u=void 0===e,h=[],f=t;if(!c&&l&&u&&t.constructor===Lf)return t;if((l||t instanceof Lf)&&(t=t.source,u&&(e="flags"in f?f.flags:pf.call(f))),t=void 0===t?"":df(t),e=void 0===e?"":df(e),f=t,_f&&"dotAll"in Sf&&(i=!!e&&e.indexOf("s")>-1)&&(e=e.replace(/s/g,"")),n=e,Ef&&"sticky"in Sf&&(r=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,"")),kf&&(t=(o=function(t){for(var e,n=t.length,i=0,r="",o=[],s={},a=!1,c=!1,l=0,u="";i<=n;i++){if("\\"===(e=t.charAt(i)))e+=t.charAt(++i);else if("]"===e)a=!1;else if(!a)switch(!0){case"["===e:a=!0;break;case"("===e:Vf.test(t.slice(i+1))&&(i+=2,c=!0),r+=e,l++;continue;case">"===e&&c:if(""===u||yf(s,u))throw new SyntaxError("Invalid capture group name");s[u]=!0,o.push([u,l]),c=!1,u="";continue}c?u+=e:r+=e}return[r,o]}(t))[0],h=o[1]),s=cf(Of(t,e),c?this:xf,Lf),(i||r||h.length)&&(a=bf(s),i&&(a.dotAll=!0,a.raw=Lf(function(t){for(var e,n=t.length,i=0,r="",o=!1;i<=n;i++)"\\"!==(e=t.charAt(i))?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),r+=e):r+="[\\s\\S]":r+=e+t.charAt(++i);return r}(t),n)),r&&(a.sticky=!0),h.length&&(a.groups=h)),t!==f)try{uf(s,"source",""===f?"(?:)":f)}catch(t){}return s},Rf=function(t){t in Lf||lf(Lf,t,{configurable:!0,get:function(){return Of[t]},set:function(e){Of[t]=e}})},If=hf(Of),Af=0;If.length>Af;)Rf(If[Af++]);xf.constructor=Lf,Lf.prototype=xf,gf(sf,"RegExp",Lf)}wf("RegExp");var Df=qt.exports,Mf=Bt,Bf=_i,Nf=o,Ff=Cs,Hf="toString",Uf=RegExp.prototype,$f=Uf.toString,Gf=Nf((function(){return"/a/b"!=$f.call({source:"a",flags:"b"})})),td=$f.name!=Hf;(Gf||td)&&Df(RegExp.prototype,Hf,(function(){var t=Mf(this),e=Bf(t.source),n=t.flags;return"/"+e+"/"+Bf(void 0===n&&t instanceof RegExp&&!("flags"in Uf)?Ff.call(t):n)}),{unsafe:!0});var Wf=o,zf="\t\n\v\f\r                　\u2028\u2029\ufeff",qf=lh.trim;xn({target:"String",proto:!0,forced:function(t){return Wf((function(){return!!zf[t]()||"​᠎"!="​᠎"[t]()||zf[t].name!==t}))}("trim")},{trim:function(){return qf(this)}});var Yf=q,Kf=Math.floor,Zf="".replace,Xf=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Jf=/\$([$&'`]|\d{1,2})/g,Qf=ea,ed=o,nd=Bt,dd=Le,id=Ae,rd=_i,od=w,sd=ga,ad=function(t,e,n,i,r,o){var s=n+t.length,a=i.length,c=Jf;return void 0!==r&&(r=Yf(r),c=Xf),Zf.call(o,c,(function(o,c){var l;switch(c.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(s);case"<":l=r[c.slice(1,-1)];break;default:var u=+c;if(0===u)return o;if(u>a){var h=Kf(u/10);return 0===h?o:h<=a?void 0===i[h-1]?c.charAt(1):i[h-1]+c.charAt(1):o}l=i[u-1]}return void 0===l?"":l}))},cd=ba,ud=pt("replace"),ld=Math.max,hd=Math.min,fd="$0"==="a".replace(/./,"$0"),pd=!!/./[ud]&&""===/./[ud]("a","$0");Qf("replace",(function(t,e,n){var i=pd?"$":"$0";return[function(t,n){var i=od(this),r=null==t?void 0:t[ud];return void 0!==r?r.call(t,i,n):e.call(rd(i),t,n)},function(t,r){var o=nd(this),s=rd(t);if("string"==typeof r&&-1===r.indexOf(i)&&-1===r.indexOf("$<")){var a=n(e,o,s,r);if(a.done)return a.value}var c="function"==typeof r;c||(r=rd(r));var l=o.global;if(l){var u=o.unicode;o.lastIndex=0}for(var h=[];;){var f=cd(o,s);if(null===f)break;if(h.push(f),!l)break;""===rd(f[0])&&(o.lastIndex=sd(s,id(o.lastIndex),u))}for(var d,p="",v=0,g=0;g<h.length;g++){f=h[g];for(var m=rd(f[0]),y=ld(hd(dd(f.index),s.length),0),w=[],b=1;b<f.length;b++)w.push(void 0===(d=f[b])?d:String(d));var _=f.groups;if(c){var k=[m].concat(w,y,s);void 0!==_&&k.push(_);var C=rd(r.apply(void 0,k))}else C=ad(m,s,y,w,_,r);y>=v&&(p+=s.slice(v,y)+C,v=y+m.length)}return p+s.slice(v)}]}),!!ed((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!fd||pd);var vd=Math.floor,gd=function(t,e){var n=t.length,i=vd(n/2);return n<8?md(t,e):yd(gd(t.slice(0,i),e),gd(t.slice(i),e),e)},md=function(t,e){for(var n,i,r=t.length,o=1;o<r;){for(i=o,n=t[o];i&&e(t[i-1],n)>0;)t[i]=t[--i];i!==o++&&(t[i]=n)}return t},yd=function(t,e,n){for(var i=t.length,r=e.length,o=0,s=0,a=[];o<i||s<r;)o<i&&s<r?a.push(n(t[o],e[s])<=0?t[o++]:e[s++]):a.push(o<i?t[o++]:e[s++]);return a},bd=gd,wd=S.match(/firefox\/(\d+)/i),_d=!!wd&&+wd[1],kd=/MSIE|Trident/.test(S),Cd=S.match(/AppleWebKit\/(\d+)\./),Od=!!Cd&&+Cd[1],xd=xn,Vd=Vn,Sd=q,Td=Ae,Pd=_i,Ed=o,jd=bd,Ld=Qo,Rd=_d,Id=kd,Ad=I,Dd=Od,Md=[],Bd=Md.sort,Nd=Ed((function(){Md.sort(void 0)})),Fd=Ed((function(){Md.sort(null)})),Hd=Ld("sort"),Ud=!Ed((function(){if(Ad)return Ad<70;if(!(Rd&&Rd>3)){if(Id)return!0;if(Dd)return Dd<603;var t,e,n,i,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)Md.push({k:e+i,v:n})}for(Md.sort((function(t,e){return e.v-t.v})),i=0;i<Md.length;i++)e=Md[i].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}}));xd({target:"Array",proto:!0,forced:Nd||!Fd||!Hd||!Ud},{sort:function(t){void 0!==t&&Vd(t);var e=Sd(this);if(Ud)return void 0===t?Bd.call(e):Bd.call(e,t);var n,i,r=[],o=Td(e.length);for(i=0;i<o;i++)i in e&&r.push(e[i]);for(n=(r=jd(r,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:Pd(e)>Pd(n)?1:-1}}(t))).length,i=0;i<n;)e[i]=r[i++];for(;i<o;)delete e[i++];return e}});var $d="undefined"!=typeof window&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,Gd={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},Wd="%c[xgplayer]",zd={config:{debug:$d?3:1},logInfo:function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.config.debug>=3&&(e=console).log.apply(e,[Wd,Gd.info,t].concat(i))},logWarn:function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.config.debug>=1&&(e=console).warn.apply(e,[Wd,Gd.warn,t].concat(i))},logError:function(t){var e;if(!(this.config.debug<1)){for(var n=this.config.debug>=2?"trace":"error",i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];(e=console)[n].apply(e,[Wd,Gd.error,t].concat(r))}}},qd=function(){function t(e){ui(this,t),this.bufferedList=e}return wo(t,[{key:"start",value:function(t){return this.bufferedList[t].start}},{key:"end",value:function(t){return this.bufferedList[t].end}},{key:"length",get:function(){return this.bufferedList.length}}]),t}(),rp={};function Yd(t,e){for(var n=0,i=e.length;n<i;n++)if(t.indexOf(e[n])>-1)return!0;return!1}rp.createDom=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement(t);return r.className=i,r.innerHTML=e,Object.keys(n).forEach((function(e){var i=e,o=n[e];"video"===t||"audio"===t||"live-video"===t?o&&r.setAttribute(i,o):r.setAttribute(i,o)})),r},rp.createDomFromHtml=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var i=document.createElement("div");i.innerHTML=t;var r=i.children;return i=null,r.length>0?(r=r[0],n&&rp.addClass(r,n),e&&Object.keys(e).forEach((function(t){r.setAttribute(t,e[t])})),r):null}catch(t){return zd.logError("util.createDomFromHtml",t),null}},rp.hasClass=function(t,e){if(!t||!e)return!1;try{return Array.prototype.some.call(t.classList,(function(t){return t===e}))}catch(r){var n=t.className&&"object"===di(t.className)?t.getAttribute("class"):t.className;return n&&!!n.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}},rp.addClass=function(t,e){if(t&&e)try{e.trim().split(/\s+/g).forEach((function(e){e&&t.classList.add(e)}))}catch(n){rp.hasClass(t,e)||(t.className&&"object"===di(t.className)?t.setAttribute("class",t.getAttribute("class")+" "+e):t.className+=" "+e)}},rp.removeClass=function(t,e){if(t&&e)try{e.trim().split(/\s+/g).forEach((function(e){e&&t.classList.remove(e)}))}catch(n){rp.hasClass(t,e)&&e.split(/\s+/g).forEach((function(e){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className&&"object"===di(t.className)?t.setAttribute("class",t.getAttribute("class").replace(n," ")):t.className=t.className.replace(n," ")}))}},rp.toggleClass=function(t,e){t&&e.split(/\s+/g).forEach((function(e){rp.hasClass(t,e)?rp.removeClass(t,e):rp.addClass(t,e)}))},rp.classNames=function(){for(var t=arguments,e=[],n=function(n){"String"===rp.typeOf(t[n])?e.push(t[n]):"Object"===rp.typeOf(t[n])&&Object.keys(t[n]).map((function(i){t[n][i]&&e.push(i)}))},i=0;i<arguments.length;i++)n(i);return e.join(" ")},rp.findDom=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;try{t=e.querySelector(n)}catch(r){zd.logError("util.findDom",r),0===n.indexOf("#")&&(t=e.getElementById(n.slice(1)))}return t},rp.getCss=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,!1)[e]},rp.padStart=function(t,e,n){for(var i=String(n),r=e>>0,o=Math.ceil(r/i.length),s=[],a=String(t);o--;)s.push(i);return s.join("").substring(0,r-a.length)+a},rp.format=function(t){if(window.isNaN(t))return"";t=Math.round(t);var e=rp.padStart(Math.floor(t/3600),2,0),n=rp.padStart(Math.floor((t-3600*e)/60),2,0),i=rp.padStart(Math.floor(t-3600*e-60*n),2,0);return("00"===e?[n,i]:[e,n,i]).join(":")},rp.event=function(t){if(t.touches){var e=t.touches[0]||t.changedTouches[0];t.clientX=e.clientX||0,t.clientY=e.clientY||0,t.offsetX=e.pageX-e.target.offsetLeft,t.offsetY=e.pageY-e.target.offsetTop}t._target=t.target||t.srcElement},rp.typeOf=function(t){return Object.prototype.toString.call(t).match(/([^\s.*]+)(?=]$)/g)[0]},rp.deepCopy=function(t,e){if("Object"===rp.typeOf(e)&&"Object"===rp.typeOf(t))return Object.keys(e).forEach((function(n){"Object"!==rp.typeOf(e[n])||e[n]instanceof Node?"Array"===rp.typeOf(e[n])?t[n]="Array"===rp.typeOf(t[n])?t[n].concat(e[n]):e[n]:t[n]=e[n]:void 0===t[n]||void 0===t[n]?t[n]=e[n]:rp.deepCopy(t[n],e[n])})),t},rp.deepMerge=function(t,e){return Object.keys(e).map((function(n){var i;"Array"===rp.typeOf(e[n])&&"Array"===rp.typeOf(t[n])?"Array"===rp.typeOf(t[n])&&(i=t[n]).push.apply(i,Xh(e[n])):rp.typeOf(t[n])!==rp.typeOf(e[n])||null===t[n]||"Object"!==rp.typeOf(t[n])||e[n]instanceof window.Node?null!==e[n]&&(t[n]=e[n]):rp.deepMerge(t[n],e[n])})),t},rp.getBgImage=function(t){var e=(t.currentStyle||window.getComputedStyle(t,null)).backgroundImage;if(!e||"none"===e)return"";var n=document.createElement("a");return n.href=e.replace(/url\("|"\)/g,""),n.href},rp.copyDom=function(t){if(t&&1===t.nodeType){var e=document.createElement(t.tagName);return Array.prototype.forEach.call(t.attributes,(function(t){e.setAttribute(t.name,t.value)})),t.innerHTML&&(e.innerHTML=t.innerHTML),e}return""},rp.setInterval=function(t,e,n,i){t._interval[e]||(t._interval[e]=setInterval(n.bind(t),i))},rp.clearInterval=function(t,e){clearInterval(t._interval[e]),t._interval[e]=null},rp.setTimeout=function(t,e,n){t._timers||(t._timers=[]);var i=setTimeout((function(){e(),rp.clearTimeout(t,i)}),n);return t._timers.push(i),i},rp.clearTimeout=function(t,e){var n=t._timers;if("Array"===rp.typeOf(n)){for(var i=0;i<n.length;i++)if(n[i]===e){n.splice(i,1),clearTimeout(e);break}}else clearTimeout(e)},rp.clearAllTimers=function(t){var e=t._timers;"Array"===rp.typeOf(e)&&(e.map((function(t){clearTimeout(t)})),t._timerIds=[])},rp.createImgBtn=function(t,e,n,i){var r,o,s,a=rp.createDom("xg-".concat(t),"",{},"xgplayer-".concat(t,"-img"));return a.style.backgroundImage='url("'.concat(e,'")'),n&&i&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(t){return!(n.indexOf(t)>-1&&i.indexOf(t)>-1&&(r=parseFloat(n.slice(0,n.indexOf(t)).trim()),o=parseFloat(i.slice(0,i.indexOf(t)).trim()),s=t,1))})),a.style.width="".concat(r).concat(s),a.style.height="".concat(o).concat(s),a.style.backgroundSize="".concat(r).concat(s," ").concat(o).concat(s),a.style.margin="start"===t?"-".concat(o/2).concat(s," auto auto -").concat(r/2).concat(s):"auto 5px auto 5px"),a},rp.Hex2RGBA=function(t,e){var n=[];if(/^\#[0-9A-F]{3}$/i.test(t)){var i="#";t.replace(/[0-9A-F]/gi,(function(t){i+=t+t})),t=i}return/^#[0-9A-F]{6}$/i.test(t)?(t.replace(/[0-9A-F]{2}/gi,(function(t){n.push(parseInt(t,16))})),"rgba(".concat(n.join(","),", ").concat(e,")")):"rgba(255, 255, 255, 0.1)"},rp.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},rp.checkIsFunction=function(t){return t&&"function"==typeof t},rp.checkIsObject=function(t){return null!==t&&"object"===di(t)},rp.hide=function(t){t.style.display="none"},rp.show=function(t,e){t.style.display=e||"block"},rp.isUndefined=function(t){if(null==t)return!0},rp.setStyleFromCsstext=function(t,e){e&&("String"===rp.typeOf(e)?e.replace(/\s+/g,"").split(";").map((function(e){if(e){var n=e.split(":");n.length>1&&(t.style[n[0]]=n[1])}})):Object.keys(e).map((function(n){t.style[n]=e[n]})))},rp.filterStyleFromText=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=t.style.cssText;if(!n)return{};var i=n.replace(/\s+/g,"").split(";"),r={},o={};return i.map((function(t){if(t){var n=t.split(":");n.length>1&&(Yd(n[0],e)?r[n[0]]=n[1]:o[n[0]]=n[1])}})),t.setAttribute("style",""),Object.keys(o).map((function(e){t.style[e]=o[e]})),r},rp.getStyleFromCsstext=function(t){var e=t.style.cssText;if(!e)return{};var n=e.replace(/\s+/g,"").split(";"),i={};return n.map((function(t){if(t){var e=t.split(":");e.length>1&&(i[e[0]]=e[1])}})),i},rp.preloadImg=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(t){var i=new window.Image;i.complete?e&&e():(i.onload=function(t){i=null,e&&e(t)},i.onerror=function(t){i=null,n&&n(t)}),i.src=t}},rp.stopPropagation=function(t){t&&(t.stopPropagation(),t.cancelable&&t.preventDefault())},rp.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},rp.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},rp.checkTouchSupport=function(){return"ontouchstart"in window},rp.getBuffered2=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=[],i=0;i<t.length;i++)n.push({start:t.start(i)<.5?0:t.start(i),end:t.end(i)});n.sort((function(t,e){return t.start-e.start||e.end-t.end}));var r=[];if(e)for(var o=0;o<n.length;o++){var s=r.length;if(s){var a=r[s-1].end;n[o].start-a<e?n[o].end>a&&(r[s-1].end=n[o].end):r.push(n[o])}else r.push(n[o])}else r=n;return new qd(r)},rp.getEventPos=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{x:t.x/e,y:t.y/e,clientX:t.clientX/e,clientY:t.clientY/e,offsetX:t.offsetX/e,offsetY:t.offsetY/e,pageX:t.pageX/e,pageY:t.pageY/e}},rp.requestAnimationFrame=function(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(e)return e(t)},rp.getHostFromUrl=function(t){if(null==t||""===t||"string"!=typeof t)return"";var e=t.split("/"),n="";return e.length>3&&e[2]&&(n=e[2]),n},rp.cancelAnimationFrame=function(t){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;e&&e(t)};var Kd=rp,Zd=/(Android)\s([\d.]+)/,Xd=/(Version)\/([\d.]+)/,Jd=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],Qd={get device(){return Qd.os.isPc?"pc":"mobile"},get browser(){if("undefined"==typeof navigator)return"";var t=navigator.userAgent.toLowerCase(),e={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(e).filter((function(n){return e[n].test(t)})))[0]},get os(){if("undefined"==typeof navigator)return{};var t=navigator.userAgent,e=/(?:Windows Phone)/.test(t),n=/(?:SymbianOS)/.test(t)||e,i=/(?:Android)/.test(t),r=/(?:Firefox)/.test(t),o=/(?:iPad|PlayBook)/.test(t)||i&&!/(?:Mobile)/.test(t)||r&&/(?:Tablet)/.test(t),s=/(?:iPhone)/.test(t)&&!o,a=!(s||i||n||o),c=/(?:iPad|PlayBook)/.test(t);return{isTablet:o,isPhone:s,isIpad:c,isIos:s||c,isAndroid:i,isPc:a,isSymbian:n,isWindowsPhone:e,isFireFox:r}},get osVersion(){var t=navigator.userAgent,e="",n=(e=/(?:iPhone)|(?:iPad|PlayBook)/.test(t)?Xd:Zd)?e.exec(t):[];if(n&&n.length>=3){var i=n[2].split(".");return i.length>0?parseInt(i[0]):0}return 0},get isWeixin(){return"undefined"!=typeof navigator&&(!!/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase())||void 0)},isSupportMP4:function(){if(this.supportResult)return this.supportResult;var t=document.createElement("video"),e={isSupport:!1,mime:""};return"function"==typeof t.canPlayType&&Jd.map((function(n){"probably"===t.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(e.isSupport=!0,e.mime+="||".concat(n))})),this.supportResult=e,t=null,e}},tp=Qd,ep="3.0.0-next.22",np={1:"network",2:"network",3:"decoder",4:"format"},ip=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};ui(this,t);var i=e&&e.i18n?e.i18n.ERROR_TYPES:null;if(e.video){var r=n.mediaError?n.mediaError:e.video.error||{},o=e.duration,s=e.currentTime,a=e.ended,c=e.src,l=e.currentSrc,u=e.video,h=u.readyState,f=u.networkState,d={playerVersion:ep,currentTime:s,duration:o,ended:a,readyState:h,networkState:f,src:c||l,errorType:n.errorType,errorCode:n.errorCode||r.code,message:n.errorMessage||r.message,mediaError:r,originError:n.originError?n.originError.stack:""};return n.ext&&Object.keys(n.ext).map((function(t){d[t]=n.ext[t]})),d}if(arguments.length>1){for(var p={playerVersion:ep,domain:document.domain},v=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],g=0;g<arguments.length;g++)p[v[g]]=arguments[g];return p.ex=i?(i[arguments[0]]||{}).msg:"",p}},op="play",sp="playing",ap="ended",cp="pause",up="error",lp="seeking",hp="seeked",fp="timeupdate",dp="waiting",pp="canplay",vp="durationchange",gp="volumechange",mp="loadeddata",yp="ratechange",bp="progress",wp="loadstart",_p="emptied",kp="focus",Cp="blur",Op="ready",xp="urlNull",Vp="autoplay_started",Sp="autoplay_was_prevented",Tp="complete",Pp="destroy",Ep="urlchange",jp="fullscreen_change",Lp="cssFullscreen_change",Rp="mini_state_change",Ip="definition_change",Ap="after_definition_change",Dp="video_resize",Mp="pip_change",Bp="rotate",Np="screenShot",Fp="playnext",Hp="shortcut",Up="user_action",$p=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","ratechange","progress","loadstart","emptied","stalled","suspend","abort"],Gp={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},Wp=Object.freeze({__proto__:null,PLAY:op,PLAYING:sp,ENDED:ap,PAUSE:cp,ERROR:up,SEEKING:lp,SEEKED:hp,TIME_UPDATE:fp,WAITING:dp,CANPLAY:pp,CANPLAY_THROUGH:"canplaythrough",DURATION_CHANGE:vp,VOLUME_CHANGE:gp,LOADED_DATA:mp,RATE_CHANGE:yp,PROGRESS:bp,LOAD_START:wp,EMPTIED:_p,STALLED:"stalled",SUSPEND:"suspend",ABORT:"abort",BUFFER_CHANGE:"bufferedChange",PLAYER_FOCUS:kp,PLAYER_BLUR:Cp,READY:Op,URL_NULL:xp,AUTOPLAY_STARTED:Vp,AUTOPLAY_PREVENTED:Sp,COMPLETE:Tp,REPLAY:"replay",DESTROY:Pp,URL_CHANGE:Ep,FULLSCREEN_CHANGE:jp,CSS_FULLSCREEN_CHANGE:Lp,MINI_STATE_CHANGE:Rp,DEFINITION_CHANGE:Ip,BEFORE_DEFINITION_CHANGE:"before_definition_change",AFTER_DEFINITION_CHANGE:Ap,SEI_PARSED:"SEI_PARSED",RETRY:"retry",VIDEO_RESIZE:Dp,PIP_CHANGE:Mp,ROTATE:Bp,SCREEN_SHOT:Np,PLAYNEXT:Fp,SHORTCUT:Hp,XGLOG:"xglog",USER_ACTION:Up,USER_ACTION1:"user_action1",VIDEO_EVENTS:$p,STATS_EVENTS:Gp});function zp(t,e){this&&this.emit&&("error"===t?this.errorHandler(t):this.emit(t,e))}function qp(t,e){return function(n){var i={player:e,eventName:t,originalEvent:n,detail:n.detail||{},timeStamp:n.timeStamp,currentTime:e.currentTime,duration:e.duration,paused:e.paused,ended:e.ended,isInternalOp:!!e._internalOp[n.type],muted:e.muted,volume:e.volume,host:Kd.getHostFromUrl(e.currentSrc),vtype:e.vtype};if(e.removeInnerOP(n.type),"timeupdate"===t&&(e._currentTime=e.video&&e.video.currentTime),"durationchange"===t&&(e._duration=e.video.duration),"volumechange"===t&&(i.isMutedChange=e._lastMuted!==e.muted,e._lastMuted=e.muted),e.videoEventMiddleware[t])try{e.videoEventMiddleware[t].call(e,i,zp.bind(e))}catch(n){throw zp.call(e,t,i),n}else zp.call(e,t,i)}}var Yp=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;ui(this,n),(i=e.call(this,t))._hasStart=!1,i._currentTime=0,i._duration=0,i._internalOp={},i._lastMuted=!1,i.vtype="MP4",i.videoConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"x5-playsinline":t.playsinline,"webkit-playsinline":t.playsinline,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:2,mediaType:t.mediaType||"video"},t.videoConfig,t.videoAttributes);var r=t["x5-video-player-type"]||t.x5VideoPlayerType;return tp.isWeixin&&tp.os.isAndroid&&r&&(i.videoConfig["x5-video-player-type"]=r,delete i.videoConfig.playsinline,delete i.videoConfig["webkit-playsinline"],delete i.videoConfig["x5-playsinline"]),t.loop&&(i.videoConfig.loop="loop"),i.video=Kd.createDom(i.videoConfig.mediaType,"",i.videoConfig,""),t.defaultPlaybackRate&&(i.video.defaultPlaybackRate=i.video.playbackRate=t.defaultPlaybackRate),"Number"===Kd.typeOf(t.volume)&&(i.volume=t.volume),t.autoplayMuted&&(i.video.muted=!0,i._lastMuted=!0),t.autoplay&&(i.video.autoplay=!0),i._interval={},i.videoEventMiddleware={},i.attachVideoEvents(),i}return wo(n,[{key:"setEventsMiddleware",value:function(t){var e=this;Object.keys(t).map((function(n){e.videoEventMiddleware[n]=t[n]}))}},{key:"removeEventsMiddleware",value:function(t){var e=this;Object.keys(t).map((function(t){delete e.videoEventMiddleware[t]}))}},{key:"attachVideoEvents",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.video;this._evHandlers||(this._evHandlers=$p.map((function(e){var n="on".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));return"function"==typeof t[n]&&t.on(e,t[n]),mi({},e,qp(e,t))}))),this._evHandlers.forEach((function(t){var n=Object.keys(t)[0];e.addEventListener(n,t[n],!1)}))}},{key:"detachVideoEvents",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.video;this._evHandlers.forEach((function(t){var n=Object.keys(t)[0];e.removeEventListener(n,t[n],!1)})),this._evHandlers.forEach((function(e){var n=Object.keys(e)[0],i="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));"function"==typeof t[i]&&t.off(n,t[i])})),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(t,e){var n=this;t.removeAttribute("src"),e.forEach((function(t){n.video.appendChild(Kd.createDom("source","",{src:"".concat(t.src),type:"".concat(t.type||"")}))}));var i=t.children;if(i){this._videoSourceCount=i.length,!this._sourceError&&(this._sourceError=function(t){n._videoSourceCount--,0===n._videoSourceCount&&(n.videoEventMiddleware.error?n.videoEventMiddleware.error.call(n,t,(function(){n.errorHandler("error")})):n.errorHandler("error",{code:4,message:"sources load error"}))});for(var r=0;r<i.length;r++)i[r].addEventListener("error",this._sourceError)}}},{key:"_detachSourceEvents",value:function(t){var e=t.children;if(e&&0!==e.length&&this._sourceError){for(var n=0;n<e.length;n++)e[n].removeEventListener("error",this._sourceError);for(;e.length>0;)t.removeChild(e[0])}}},{key:"errorHandler",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.video&&(this.video.error||e)){var n=this.video.error||e,i=n.code?np[n.code]:"other";n.message,this.video.currentSrc||(n={code:6,message:"empty_src"}),this.emit(t,new ip(this,{errorType:i,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"destroy",value:function(){for(var t in this.video&&(this.video.pause&&(this.video.pause(),this.video.muted=!0),this.video.removeAttribute("src"),this.video.load()),this._currentTime=0,this._duration=0,this.videoConfig=null,this._interval)clearInterval(this._interval[t]),this._interval[t]=null;this.detachVideoEvents(),this.video=null,this.videoEventMiddleware={},this.removeAllListeners()}},{key:"play",value:function(){return this.video?this.video.play():null}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"canPlayType",value:function(t){return!!this.video&&this.video.canPlayType(t)}},{key:"getBufferedRange",value:function(t){var e=[0,0];if(!this.video)return e;t||(t=this.video.buffered);var n=this.video.currentTime;if(t)for(var i=0,r=t.length;i<r&&(e[0]=t.start(i),e[1]=t.end(i),!(e[0]<=n&&n<=e[1]));i++);return e[0]-n<=0&&n-e[1]<=0?e:[0,0]}},{key:"autoplay",get:function(){return!!this.video&&this.video.autoplay},set:function(t){this.video&&(this.video.autoplay=t)}},{key:"buffered",get:function(){return this.video?this.video.buffered:null}},{key:"buffered2",get:function(){return this.video?Kd.getBuffered2(this.video.buffered):null}},{key:"bufferedPoint",get:function(){var t={start:0,end:0};if(!this.video)return t;var e=this.video.buffered;if(!e||0===e.length)return t;for(var n=0;n<e.length;n++)if((e.start(n)<=this.currentTime||e.start(n)<.1)&&e.end(n)>=this.currentTime)return{start:e.start(n),end:e.end(n)};return t}},{key:"crossOrigin",get:function(){return this.video?this.video.crossOrigin:""},set:function(t){this.video&&(this.video.crossOrigin=t)}},{key:"currentSrc",get:function(){return this.video?this.video.currentSrc:""},set:function(t){this.video&&(this.video.currentSrc=t)}},{key:"currentTime",get:function(){return this.video?void 0!==this.video.currentTime?this.video.currentTime:this._currentTime:0},set:function(t){this.video&&(this.video.currentTime=t)}},{key:"defaultMuted",get:function(){return!!this.video&&this.video.defaultMuted},set:function(t){this.video&&(this.video.defaultMuted=t)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.video&&this.video.ended}},{key:"error",get:function(){return this.video.error}},{key:"errorNote",get:function(){return this.video.error?["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.video.error.code-1]:""}},{key:"loop",get:function(){return!!this.video&&this.video.loop},set:function(t){this.video&&(this.video.loop=t)}},{key:"muted",get:function(){return!!this.video&&this.video.muted},set:function(t){this.video&&this.video.muted!==t&&(this._lastMuted=this.video.muted,this.video.muted=t)}},{key:"networkState",get:function(){return this.video.networkState}},{key:"paused",get:function(){return!this.video||this.video.paused}},{key:"playbackRate",get:function(){return this.video?this.video.playbackRate:0},set:function(t){this.video&&t!==1/0&&(this.video.defaultPlaybackRate=t,this.video.playbackRate=t)}},{key:"played",get:function(){return this.video?this.video.played:null}},{key:"preload",get:function(){return!!this.video&&this.video.preload},set:function(t){this.video&&(this.video.preload=t)}},{key:"readyState",get:function(){return this.video.readyState}},{key:"seekable",get:function(){return!!this.video&&this.video.seekable}},{key:"seeking",get:function(){return!!this.video&&this.video.seeking}},{key:"src",get:function(){return this.video?this.video.src:""},set:function(t){this.video&&(this.emit(Ep,t),this.emit(dp),this._currentTime=0,this._duration=0,/^blob/.test(this.video.currentSrc)||/^blob/.test(this.video.src)?this.onWaiting():(this._detachSourceEvents(this.video),"Array"===Kd.typeOf(t)?this._attachSourceEvents(this.video,t):this.video.src=t,this.load()))}},{key:"volume",get:function(){return this.video?this.video.volume:0},set:function(t){t!==1/0&&this.video&&(this.video.volume=t)}},{key:"addInnerOP",value:function(t){this._internalOp[t]=!0}},{key:"removeInnerOP",value:function(t){delete this._internalOp[t]}},{key:"emit",value:function(t,e){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=_o(gi(n.prototype),"emit",this)).call.apply(i,[this,t,e].concat(o))}},{key:"on",value:function(t,e){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=_o(gi(n.prototype),"on",this)).call.apply(i,[this,t,e].concat(o))}},{key:"once",value:function(t,e){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=_o(gi(n.prototype),"once",this)).call.apply(i,[this,t,e].concat(o))}},{key:"off",value:function(t,e){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=_o(gi(n.prototype),"off",this)).call.apply(i,[this,t,e].concat(o))}},{key:"offAll",value:function(){_o(gi(n.prototype),"removeAllListeners",this).call(this)}}]),n}(Kh),Kp=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};ui(this,t),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=e}return wo(t,[{key:"openDB",value:function(t){var e=this,n=this,i=this.myDB.version||1,r=n.indexedDB.open(n.myDB.name,i);r.onerror=function(t){},r.onsuccess=function(i){e.myDB.db=i.target.result,t.call(n)},r.onupgradeneeded=function(t){var e=t.target.result;t.target.transaction,e.objectStoreNames.contains(n.myDB.ojstore.name)||e.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(t,e){for(var n,i=this.myDB.db.transaction(t,"readwrite").objectStore(t),r=0;r<e.length;r++)(n=i.add(e[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(t,e){for(var n,i=this.myDB.db.transaction(t,"readwrite").objectStore(t),r=0;r<e.length;r++)(n=i.put(e[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(t,e,n){var i=this,r=this.myDB.db.transaction(t,"readwrite").objectStore(t).get(e);r.onerror=function(){n.call(i,null)},r.onsuccess=function(t){var e=t.target.result;n.call(i,e)}}},{key:"deleteData",value:function(t,e){this.myDB.db.transaction(t,"readwrite").objectStore(t).delete(e)}},{key:"clearData",value:function(t){this.myDB.db.transaction(t,"readwrite").objectStore(t).clear()}}]),t}(),Zp=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Xp=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Jp=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"];function Qp(t,e,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];var s=e.call.apply(e,[t].concat(r));n&&"function"==typeof n&&(s&&s.then?s.then((function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];n.call.apply(n,[t].concat(i))})):n.call.apply(n,[t].concat(r)))}function tv(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[t]&&(this.__hooks[t]=null),function(){var i=arguments,r=this;if(n.pre)try{var o;(o=n.pre).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}catch(e){throw e.message="[pluginName: ".concat(this.pluginName,":").concat(t,":pre error] >> ").concat(e.message),e}if(this.__hooks&&this.__hooks[t])try{var s,a=(s=this.__hooks[t]).call.apply(s,[this,this].concat(Array.prototype.slice.call(arguments)));a?a.then?a.then((function(t){!1!==t&&Qp.apply(void 0,[r,e,n.next].concat(Xh(i)))})).catch((function(t){throw t})):Qp.apply(void 0,[this,e,n.next].concat(Array.prototype.slice.call(arguments))):void 0===a&&Qp.apply(void 0,[this,e,n.next].concat(Array.prototype.slice.call(arguments)))}catch(e){throw e.message="[pluginName: ".concat(this.pluginName,":").concat(t,"] >> ").concat(e.message),e}else Qp.apply(void 0,[this,e,n.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function ev(t,e){var n=this.__hooks;if(n)return n.hasOwnProperty(t)?(n&&(n[t]=e),!0):(console.warn("has no supported hook which name [".concat(t,"]")),!1)}function nv(t){if(this.plugins&&this.plugins[t.toLowerCase()]){for(var e=this.plugins[t.toLowerCase()],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return e.useHooks&&e.useHooks.apply(e,i)}}function iv(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.__hooks={},e&&e.map((function(e){t.__hooks[e]=null})),Object.defineProperty(t,"hooks",{get:function(){return t.__hooks&&Object.keys(t.__hooks).map((function(e){if(t.__hooks[e])return e}))}})}function rv(t){t.__hooks=null}function ov(t,e,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];if(!t.__hooks||!t.__hooks[e])return n.call.apply(n,[t,t].concat(r));var s,a=(s=t.__hooks[e]).call.apply(s,[t,t].concat(r));if(a&&a.then)a.then((function(e){return!1===e?null:n.call.apply(n,[t,t].concat(r))})).catch((function(t){console.warn("[runHooks]".concat(e," reject"),t.message)}));else if(!1!==a)return n.call.apply(n,[t,t].concat(r))}function sv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function av(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sv(Object(n),!0).forEach((function(e){mi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cv(t,e){zd.logError("[".concat(t,"] event or callback cant be undefined or null when call ").concat(e))}var uv=function(){function t(e){ui(this,t),Kd.checkIsFunction(this.beforeCreate)&&this.beforeCreate(e),iv(this),this.__args=e,this.__events={},this.config=e.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(e)}return wo(t,[{key:"beforeCreate",value:function(t){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(t){this.player=t.player,this.playerConfig=t.player&&t.player.config,this.pluginName=t.pluginName?t.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=t.player&&t.player.logger}},{key:"updateLang",value:function(t){}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var t=Kd.checkTouchSupport()?"touch":"mouse";return!this.playerConfig||"touch"!==this.playerConfig.domEventType&&"mouse"!==this.playerConfig.domEventType||(t=this.playerConfig.domEventType),t}},{key:"on",value:function(t,e){var n=this;t&&e&&this.player?"string"==typeof t?(this.__events[t]=e,this.player.on(t,e)):Array.isArray(t)&&t.forEach((function(t){n.__events[t]=e,n.player.on(t,e)})):cv(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(t,e){t&&e&&this.player?this.player.once(t,e):cv(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(t,e){var n=this;t&&e&&this.player?"string"==typeof t?(delete this.__events[t],this.player.off(t,e)):Array.isArray(t)&&t.forEach((function(i){delete n.__events[t],n.player.off(i,e)})):cv(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var t=this;Object.keys(this.__events).map((function(e){t.__events[e]&&t.off(e,t.__events[e]),e&&delete t.__events[e]})),this.__events={}}},{key:"emit",value:function(t){var e;if(this.player){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(e=this.player).emit.apply(e,[t].concat(i))}}},{key:"emitUserAction",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=av(av({},n),{},{pluginName:this.pluginName});this.player.emitUserAction(t,e,i)}},{key:"hook",value:function(t,e){return tv.call.apply(tv,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return ev.call.apply(ev,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return n&&(e.pluginName=n),this.player.registerPlugin({plugin:t,options:e})}},{key:"getPlugin",value:function(t){return this.player?this.player.getPlugin(t):null}},{key:"__destroy",value:function(){var t=this,e=this.player,n=this.pluginName;this.offAll(),Kd.clearAllTimers(this),Kd.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map((function(e){t[e]=null})),e.unRegisterPlugin(n),rv(this)}}],[{key:"defineGetterOrSetter",value:function(t,e){for(var n in e)Object.defineProperty(t,n,e[n])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),t}();if("undefined"!=typeof Element&&!Element.prototype.matches){var lv=Element.prototype;lv.matches=lv.matchesSelector||lv.mozMatchesSelector||lv.msMatchesSelector||lv.oMatchesSelector||lv.webkitMatchesSelector}function hv(t,e,n,i,r){var o=fv.apply(this,arguments);return t.addEventListener(n,o,r),{destroy:function(){t.removeEventListener(n,o,r)}}}function fv(t,e,n,i){return function(n){n.delegateTarget=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}(n.target,e),n.delegateTarget&&i.call(t,n)}}var dv=function(t,e,n,i,r){return"function"==typeof t.addEventListener?hv.apply(null,arguments):"function"==typeof n?hv.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return hv(t,e,n,i,r)})))},pv={CONTROLS:"controls",ROOT:"root"},vv={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function gv(t){return!!t&&t.indexOf&&/^http/.test(t)}function mv(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=null;if(t instanceof window.Element)return Kd.addClass(t,n),Object.keys(i).map((function(e){t.setAttribute(e,i[e])})),t;if(gv(t)||gv(t.url))return i.src=gv(t)?t:t.url||"",o=Kd.createDom(t.tag||"img","",i,"xg-img ".concat(n));if("function"==typeof t)try{return(o=t())instanceof window.Element?(Kd.addClass(o,n),Object.keys(i).map((function(t){o.setAttribute(t,i[t])})),o):(zd.logWarn("warn>>icons.".concat(e," in config of plugin named [").concat(r,"] is a function mast return an Element Object")),null)}catch(t){return zd.logError("Plugin named [".concat(r,"]:createIcon"),t),null}return"string"==typeof t?Kd.createDomFromHtml(t,i,n):(zd.logWarn("warn>>icons.".concat(e," in config of plugin named [").concat(r,"] is invalid")),null)}var yv,bv,wv,_v=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ui(this,n),(t=e.call(this,i)).__delegates=[],t}return wo(n,[{key:"__init",value:function(t){if(_o(gi(n.prototype),"__init",this).call(this,t),t.root){var e=t.root,i=null;this.icons={},this.root=null,this.parent=null,function(t,e){var n=e.config.icons||e.playerConfig.icons;Object.keys(t).map((function(i){var r=t[i],o=r&&r.class?r.class:"",s=r&&r.attr?r.attr:{},a=null;n&&n[i]&&(o=function(t,e){return"object"===di(t)&&t.class&&"string"==typeof t.class?"".concat(e," ").concat(t.class):e}(n[i],o),s=function(t,e){return"object"===di(t)&&t.attr&&"object"===di(t.attr)&&Object.keys(t.attr).map((function(n){e[n]=t.attr[n]})),e}(n[i],s),a=mv(n[i],i,o,s,e.pluginName)),!a&&r&&(a=mv(r.icon?r.icon:r,s,o,{},e.pluginName)),e.icons[i]=a}))}(this.registerIcons()||{},this),this.langText={};var r,o,s=this.registerLanguageTexts()||{};r=s,o=this,Object.keys(r).map((function(t){Object.defineProperty(o.langText,t,{get:function(){var e=o.lang,n=o.i18n;return n[t]?n[t]:r[t]&&r[t][e]||""}})}));var a="";try{a=this.render()}catch(t){throw zd.logError("Plugin:".concat(this.pluginName,":render"),t),new Error("Plugin:".concat(this.pluginName,":render:").concat(t.message))}if(a)(i=n.insert(a,e,t.index)).setAttribute("data-index",t.index);else{if(!t.tag)return;(i=Kd.createDom(t.tag,"",t.attr,t.name)).setAttribute("data-index",t.index),e.appendChild(i)}this.root=i,this.parent=e;var c=this.config.attr||{},l=this.config.style||{};this.setAttr(c),this.setStyle(l),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var t=this;if(this.root){this._children=[];var e=this.children();e&&"object"===di(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(n){var i,r,o=n,s=e[o],a={root:t.root};"function"==typeof s?(i=t.config[o]||{},r=s):"object"===di(s)&&"function"==typeof s.plugin&&(i=s.options?Kd.deepCopy(t.config[o]||{},s.options):t.config[o]||{},r=s.plugin),a.config=i,void 0!==i.index&&(a.index=i.index),i.root&&(a.root=i.root),t.registerPlugin(r,a,o)}))}}},{key:"updateLang",value:function(t){t||(t=this.lang);var e=this.root,n=this.i18n,i=this.langText;e&&function t(e,n){for(var i=0;i<e.children.length;i++)e.children[i].children.length>0?t(e.children[i],n):n(e.children[i])}(e,(function(e){var r=e.getAttribute&&e.getAttribute("lang-key");if(r){var o=n[r.toUpperCase()]||i[r];o&&(e.innerHTML="function"==typeof o?o(t):o)}}))}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.i18n||{},i=this.langText;t.setAttribute&&t.setAttribute("lang-key",e);var r=n[e]||i[e]||"";r&&(t.innerHTML=r)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.root=e.root||this.root;var r=_o(gi(n.prototype),"registerPlugin",this).call(this,t,e,i);return this._children.push(r),r}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(t){if(this.root)return this.root.querySelector(t)}},{key:"bind",value:function(t,e,i){var r=this;if(arguments.length<3&&"function"==typeof e)Array.isArray(t)?t.forEach((function(t){r.bindEL(t,e)})):this.bindEL(t,e);else{var o=n.delegate.call(this,this.root,t,e,i);this.__delegates=this.__delegates.concat(o)}}},{key:"unbind",value:function(t,e){var n=this;if(arguments.length<3&&"function"==typeof e)Array.isArray(t)?t.forEach((function(t){n.unbindEL(t,e)})):this.unbindEL(t,e);else for(var i="".concat(t,"_").concat(e),r=0;r<this.__delegates.length;r++)if(this.__delegates[r].key===i){this.__delegates[r].destroy(),this.__delegates.splice(r,1);break}}},{key:"setStyle",value:function(t,e){var n=this;if(this.root)return"String"===Kd.typeOf(t)?this.root.style[t]=e:void("Object"===Kd.typeOf(t)&&Object.keys(t).map((function(e){n.root.style[e]=t[e]})))}},{key:"setAttr",value:function(t,e){var n=this;if(this.root)return"String"===Kd.typeOf(t)?this.root.setAttribute(t,e):void("Object"===Kd.typeOf(t)&&Object.keys(t).map((function(e){n.root.setAttribute(e,t[e])})))}},{key:"setHtml",value:function(t,e){this.root&&(this.root.innerHTML=t,"function"==typeof e&&e())}},{key:"bindEL",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(t)in this.root&&"function"==typeof e&&this.root.addEventListener(t,e,n)}},{key:"unbindEL",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(t)in this.root&&"function"==typeof e&&this.root.removeEventListener(t,e,n)}},{key:"show",value:function(t){if(this.root)return this.root.style.display=void 0!==t?t:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(t,e){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!(e&&e instanceof window.Element))return null;try{return"string"==typeof t?this.find(t).appendChild(e):t.appendChild(e)}catch(t){return zd.logError("Plugin:appendChild",t),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var t=this,e=this.player;this.__delegates.map((function(t){t.destroy()})),this.__delegates=[],this._children instanceof Array&&(this._children.map((function(t){e.unRegisterPlugin(t.pluginName)})),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),_o(gi(n.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map((function(e){t[e]=null}))}}],[{key:"insert",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.children.length,r=Number(n),o=t instanceof window.Node;if(i){for(var s=0,a=null,c="";s<i;s++){a=e.children[s];var l=Number(a.getAttribute("data-index"));if(l>=r){c="beforebegin";break}l<r&&(c="afterend")}return o?"afterend"===c?e.appendChild(t):e.insertBefore(t,a):a.insertAdjacentHTML(c,t),"afterend"===c?e.children[e.children.length-1]:e.children[s]}return o?e.appendChild(t):e.insertAdjacentHTML("beforeend",t),e.children[e.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[];if(t instanceof window.Node&&"function"==typeof i)if(Array.isArray(n))n.forEach((function(n){var s=dv(t,e,n,i,r);s.key="".concat(e,"_").concat(n),o.push(s)}));else{var s=dv(t,e,n,i,r);s.key="".concat(e,"_").concat(n),o.push(s)}return o}},{key:"ROOT_TYPES",get:function(){return pv}},{key:"POSITIONS",get:function(){return vv}}]),n}(uv),kv=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Cv=Q,Ov=q,xv=kv,Vv=rt("IE_PROTO"),Sv=Object.prototype,Tv=xv?Object.getPrototypeOf:function(t){return t=Ov(t),Cv(t,Vv)?t[Vv]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Sv:null},Pv=o,Ev=Tv,jv=zt,Lv=Q,Rv=pt("iterator"),Iv=!1;[].keys&&("next"in(wv=[].keys())?(bv=Ev(Ev(wv)))!==Object.prototype&&(yv=bv):Iv=!0),(null==yv||Pv((function(){var t={};return yv[Rv].call(t)!==t})))&&(yv={}),Lv(yv,Rv)||jv(yv,Rv,(function(){return this}));var Av={IteratorPrototype:yv,BUGGY_SAFARI_ITERATORS:Iv},Dv=Av.IteratorPrototype,Mv=zn,Bv=d,Nv=Di,Fv=kc,Hv=function(){return this},Uv=function(t,e,n){var i=e+" Iterator";return t.prototype=Mv(Dv,{next:Bv(1,n)}),Nv(t,i,!1),Fv[i]=Hv,t},$v=xn,Gv=Uv,Wv=Tv,zv=vc,qv=Di,Yv=zt,Kv=qt.exports,Zv=kc,Xv=Av.IteratorPrototype,Jv=Av.BUGGY_SAFARI_ITERATORS,Qv=pt("iterator"),tg="values",eg="entries",ng=function(){return this},ig=function(t,e,n,i,r,o,s){Gv(n,e,i);var a,c,l,u=function(t){if(t===r&&v)return v;if(!Jv&&t in d)return d[t];switch(t){case"keys":case tg:case eg:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",f=!1,d=t.prototype,p=d[Qv]||d["@@iterator"]||r&&d[r],v=!Jv&&p||u(r),g="Array"==e&&d.entries||p;if(g&&(a=Wv(g.call(new t)),Xv!==Object.prototype&&a.next&&(Wv(a)!==Xv&&(zv?zv(a,Xv):"function"!=typeof a[Qv]&&Yv(a,Qv,ng)),qv(a,h,!0))),r==tg&&p&&p.name!==tg&&(f=!0,v=function(){return p.call(this)}),d[Qv]!==v&&Yv(d,Qv,v),Zv[e]=v,r)if(c={values:u(tg),keys:o?v:u("keys"),entries:u(eg)},s)for(l in c)(Jv||f||!(l in d))&&Kv(d,l,c[l]);else $v({target:e,proto:!0,forced:Jv||f},c);return c},rg=k,og=Vo,sg=kc,ag=we,cg=ig,ug="Array Iterator",lg=ag.set,hg=ag.getterFor(ug),fg=cg(Array,"Array",(function(t,e){lg(this,{type:ug,target:rg(t),index:0,kind:e})}),(function(){var t=hg(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}}),"values");sg.Arguments=sg.Array,og("keys"),og("values"),og("entries");var dg=pa.charAt,pg=_i,vg=we,gg=ig,mg="String Iterator",yg=vg.set,bg=vg.getterFor(mg);gg(String,"String",(function(t){yg(this,{type:mg,string:pg(t),index:0})}),(function(){var t,e=bg(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=dg(n,i),e.index+=t.length,{value:t,done:!1})}));var wg=r,_g=Xo,kg=fg,Cg=zt,Og=pt,xg=Og("iterator"),Vg=Og("toStringTag"),Sg=kg.values;for(var Tg in _g){var Pg=wg[Tg],Eg=Pg&&Pg.prototype;if(Eg){if(Eg[xg]!==Sg)try{Cg(Eg,xg,Sg)}catch(t){Eg[xg]=Sg}if(Eg[Vg]||Cg(Eg,Vg,Tg),_g[Tg])for(var jg in kg)if(Eg[jg]!==kg[jg])try{Cg(Eg,jg,kg[jg])}catch(t){Eg[jg]=kg[jg]}}}var Lg=function(){function t(){var e=this;if(ui(this,t),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver((function(t){var n=(new Date).getTime();n-e.timeStamp<100||(e.timeStamp=n,e.__trigger(t))})),this.timeStamp=(new Date).getTime()}catch(t){console.error(t)}}return wo(t,[{key:"addObserver",value:function(t,e){if(this.observer){this.observer&&this.observer.observe(t);for(var n=this.__handlers,i=-1,r=0;r<n.length;r++)n[r]&&t===n[r].target&&(i=r);i>-1?this.__handlers[i].handler=e:this.__handlers.push({target:t,handler:e})}}},{key:"unObserver",value:function(t){var e=-1;this.__handlers.map((function(n,i){t===n.target&&(e=i)}));try{this.observer&&this.observer.unobserve(t)}catch(t){}this.observer&&this.observer.unobserve(t),e>-1&&this.__handlers.splice(e,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(t){for(var e=this.__handlers,n=0;n<e.length;n++)if(e[n]&&t===e[n].target){try{e[n].handler(t)}catch(t){console.error(t)}return!0}return!1}},{key:"__trigger",value:function(t){for(var e=0;e<t.length&&!this.__runHandler(t[e].target);e++);}}]),t}(),Rg=null,Ig={init:function(t){var e,n,i=t._pluginInfoId;i||(i=(new Date).getTime(),t._pluginInfoId=i),this.pluginGroup||(this.pluginGroup={}),!t.config.closeResizeObserver&&(e=t.root,n=function(){t.resize()},Rg||(Rg=new Lg),Rg.addObserver(e,n)),0===Object.keys(this.pluginGroup).length&&(t.isUserActive=!0),this.pluginGroup[i]={_player:t,_originalOptions:t.config||{}}},checkPlayerRoot:function(t){if(this.pluginGroup){for(var e=Object.keys(this.pluginGroup),n=0;n<e.length;n++){var i=this.pluginGroup[e[n]]._player;if(i.root===t)return i}return null}return null},lazyRegister:function(t,e){var n=this,i=e.timeout||1500;return Promise.race([e.loader().then((function(e){var i;i=e&&e.__esModule?e.default:e,n.register(t,i,e.options)})),new Promise((function(t,e){setTimeout((function(){e(new Error("timeout"))}),i)}))])},register:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&e&&"function"==typeof e&&void 0!==e.prototype){var i=t._pluginInfoId;i&&this.pluginGroup&&this.pluginGroup[i]||(this.init(t),i=t._pluginInfoId),this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins=[]);var r=this.pluginGroup[i]._plugins,o=this.pluginGroup[i]._originalOptions;n.player=this.pluginGroup[i]._player;var s=n.pluginName||e.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(!e.isSupported||e.isSupported()){n.config||(n.config={});for(var a=Object.keys(o),c=0;c<a.length;c++)if(s.toLowerCase()===a[c].toLowerCase()){var l=o[a[c]];"Object"===Kd.typeOf(l)?n.config=Object.assign({},n.config,o[a[c]]):"Boolean"===Kd.typeOf(l)&&(n.config.disable=!l);break}e.defaultConfig&&Object.keys(e.defaultConfig).map((function(t){void 0===n.config[t]&&(n.config[t]=e.defaultConfig[t])})),n.root?"string"==typeof n.root&&(n.root=t[n.root]):n.root=t.root,n.index=n.config.index||0;try{r[s.toLowerCase()]&&(this.unRegister(i,s.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(s,"] exist, destroy the old instance")));var u=new e(n);return r[s.toLowerCase()]=u,r[s.toLowerCase()].func=e,u&&"function"==typeof u.afterCreate&&u.afterCreate(),u}catch(t){throw console.error(t),t}}else console.warn("not supported plugin [".concat(s,"]"))}},unRegister:function(t,e){t._pluginInfoId&&(t=t._pluginInfoId),e=e.toLowerCase();try{var n=this.pluginGroup[t]._plugins[e];n&&(n.pluginName&&n.__destroy(),delete this.pluginGroup[t]._plugins[e])}catch(n){console.error("[unRegister:".concat(e,"] cgid:[").concat(t,"] error"),n)}},deletePlugin:function(t,e){var n=t._pluginInfoId;n&&this.pluginGroup&&this.pluginGroup[n]&&this.pluginGroup[n]._plugins&&delete this.pluginGroup[n]._plugins[e]},getPlugins:function(t){var e=t._pluginInfoId;return e&&this.pluginGroup[e]?this.pluginGroup[e]._plugins:{}},findPlugin:function(t,e){var n=t._pluginInfoId;if(!this.pluginGroup||!n)return null;var i=e.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(t){var e=this;function n(t){return t&&t.then?t:new Promise((function(t){t()}))}return new Promise((function(i){if(e.pluginGroup)return(t._loadingPlugins&&t._loadingPlugins.length?Promise.all(t._loadingPlugins):Promise.resolve()).then((function(){var r=t._pluginInfoId;if(e.pluginGroup[r]){for(var o=e.pluginGroup[r]._plugins,s=[],a=0,c=Object.keys(o);a<c.length;a++){var l=c[a];if(o[l]&&o[l].beforePlayerInit)try{var u=o[l].beforePlayerInit();s.push(n(u))}catch(t){throw s.push(n(null)),t}}Promise.all([].concat(s)).then((function(){i()})).catch((function(t){console.error(t),i()}))}else i()}))}))},afterInit:function(t){var e=t._pluginInfoId;if(this.pluginGroup&&e)for(var n=this.pluginGroup[e]._plugins,i=0,r=Object.keys(n);i<r.length;i++){var o=r[i];n[o]&&n[o].afterPlayerInit&&n[o].afterPlayerInit()}},setLang:function(t,e){var n=e._pluginInfoId;if(this.pluginGroup&&n){var i=this.pluginGroup[n]._plugins;Object.keys(i).map((function(e){if(i[e].updateLang)i[e].updateLang(t);else try{i[e].lang=t}catch(t){console.warn("".concat(e," setLang"))}}))}},reRender:function(t){var e=t._pluginInfoId;if(e){for(var n={},i=this.pluginGroup[e]._plugins,r=0,o=Object.keys(i);r<o.length;r++){var s=o[r];n[s]={plugin:i[s].func,options:i[s]._args},this.unRegister(e,s)}for(var a=0,c=Object.keys(n);a<c.length;a++){var l=c[a];this.register(e,l,n[l].plugin,n[l].options)}}},onPluginsReady:function(t){var e=t._pluginInfoId,n=this.pluginGroup[e]._plugins;e&&n&&Object.keys(n).map((function(t){n[t].onPluginsReady&&"function"==typeof n[t].onPluginsReady&&n[t].onPluginsReady()}))},setCurrentUserActive:function(t,e){if(this.pluginGroup&&this.pluginGroup[t]){if(!e)return this.pluginGroup[t]._player.isUserActive=e,t;for(var n=Object.keys(this.pluginGroup),i=0;i<n.length;i++){var r=this.pluginGroup[n[i]];if(r&&r._player){this.pluginGroup[n[i]]._player.isUserActive=!1;break}}return this.pluginGroup[t]._player.isUserActive=e,t}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var t=Object.keys(this.pluginGroup),e=0;e<t.length;e++){var n=this.pluginGroup[t[e]];if(n&&n._player&&n._player.isUserActive)return t[e]}return null}},destroy:function(t){var e=t._pluginInfoId;if(this.pluginGroup[e]){var n;n=t.root,Rg.unObserver(n,void 0);for(var r=this.pluginGroup[e]._plugins,o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];this.unRegister(e,a)}var c=t.isUseActive;if(delete this.pluginGroup[e],delete t._pluginInfoId,c){var l=Object.keys(this.pluginGroup);l.length>0&&this.setCurrentUserActive(l[l.length-1],!0)}}}},Ag={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"},Dg=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],Mg=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(t=e.call.apply(e,[this].concat(r))),"onMouseEnter",(function(e){var n=pi(t).player;n.userTimer&&(Kd.clearTimeout(n,n.userTimer),clearTimeout(n.userTimer))})),mi(pi(t),"onMouseLeave",(function(){pi(t).player.focus()})),t}return wo(n,[{key:"beforeCreate",value:function(t){t.config.mode||"mobile"!==tp.device||(t.config.mode="flex"),t.player.config.marginControls&&(t.config.autoHide=!1)}},{key:"afterCreate",value:function(){var t=this,e=this.config,n=e.disable,i=e.height,r=e.mode;if(!n){"flex"===r&&this.player.addClass(Ag.FLEX_CONTROLS);var o={height:"".concat(i,"px")};Object.keys(o).map((function(e){t.root.style[e]=o[e]})),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(Rp,(function(e){e?Kd.addClass(t.root,"mini-controls"):Kd.removeClass(t.root,"mini-controls")})),"mobile"!==tp.device&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&Kd.addClass(this.root,Ag.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){Kd.removeClass(this.root,Ag.CONTROLS_AUTOHIDE)}},{key:"show",value:function(){Kd.addClass(this.root,"show")}},{key:"hide",value:function(){Kd.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(this.root){var r=t.defaultConfig||{};if(!e.root){var o=e.position?e.position:e.config&&e.config.position?e.config.position:r.position;switch(o){case vv.CONTROLS_LEFT:e.root=this.left;break;case vv.CONTROLS_RIGHT:e.root=this.right;break;case vv.CONTROLS_CENTER:e.root=this.center;break;case vv.CONTROLS:e.root=this.root;break;default:e.root=this.left}return _o(gi(n.prototype),"registerPlugin",this).call(this,t,e,i)}}}},{key:"destroy",value:function(){"mobile"!==tp.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var t=this.config,e=t.mode,n=t.autoHide,i=t.initShow;if(!t.disable){var r=Kd.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===e},{"bottom-controls":"bottom"===e},mi({},Ag.CONTROLS_AUTOHIDE,n),{"xgplayer-controls-initshow":i||!n});return'<xg-controls class="'.concat(r,'" unselectable="on" onselectstart="return false">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),n}(_v),Bg={},Ng={},Fg=[],Hg={};function Ug(){Object.keys(Bg.en).map((function(t){Ng[t]=t}))}function $g(t){("Array"!==Kd.typeOf(t)?Object.keys(t).map((function(e){return{LANG:"zh"===e?"zh-cn":e,TEXT:t[e]}})):t).map((function(t){Bg[t.LANG]?Kd.deepMerge(Bg[t.LANG]||{},t.TEXT||{}):Hg[t.LANG]=t.TEXT})),Ug()}function Gg(t){var e=t.LANG,n=t.TEXT||{};Bg[e]||Fg.push(e),Bg[e]?Kd.deepMerge(n,Bg[e]):Bg[e]=n,Hg[e]&&($g([{LANG:e,TEXT:Hg[e]}]),delete Hg[e]),"zh-cn"===e&&(Bg.zh=Bg["zh-cn"]),Ug()}Gg({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});var Wg={get textKeys(){return Ng},get langKeys(){return Fg},get lang(){var t={};return Fg.map((function(e){t[e]=Bg[e]})),t.zh=Bg["zh-cn"],t},extend:$g,use:Gg};function zg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function qg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zg(Object(n),!0).forEach((function(e){mi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Yg=["play","pause","replay","retry"],Kg=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;ui(this,n);var r,o=Kd.deepMerge({id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!1,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!1,closeControlsBlur:!1,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),controls:!0,marginControls:!1,fullscreenTarget:null,controlsList:[],screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],thumbnail:null,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}},t);iv(pi(i=e.call(this,o)),Yg),i.config=o,(r=pi(i)).logInfo=zd.logInfo.bind(r),r.logWarn=zd.logWarn.bind(r),r.logError=zd.logError.bind(r);var s=i.constructor.defaultPreset;if(i.config.presets.length){var a=i.config.presets.indexOf("default");a>=0&&s&&(i.config.presets[a]=s)}else s&&i.config.presets.push(s);if(i.userTimer=null,i.waitTimer=null,i._state=1,i._hasStart=!1,i.isSeeking=!1,i.isCanplay=!1,i._runPending=!1,i.rotateDeg=0,i.isActive=!1,i.fullscreen=!1,i.cssfullscreen=!1,i.isRotateFullscreen=!1,i._fullscreenEl=null,i._cssfullscreenEl=null,i.curDefinition=null,i._orgCss="",i._fullScreenOffset=null,i._videoHeight=0,i._videoWidth=0,i._accPlayed={t:0,acc:0,loopAcc:0},i.innerContainer=null,i.controls=null,i.topBar=null,i.root=null,tp.os.isAndroid&&tp.osVersion>0&&tp.osVersion<6&&(i.config.autoplay=!1),i.database=new Kp,i.isUserActive=!1,!i._initDOM())return console.error(new Error("can't find the dom which id is ".concat(i.config.id," or this.config.el does not exist"))),vi(i);var c=i.config,l=c.definition,u=void 0===l?{}:l;if(!c.url&&u.list&&u.list.length>0){var h=u.list.find((function(t){return t.definition&&t.definition===u.defaultDefinition}));h||(u.defaultDefinition=u.list[0].definition,h=u.list[0]),i.config.url=h.url,i.curDefinition=h.definition}return i._bindEvents(),i._registerPresets(),i._registerPlugins(),Ig.onPluginsReady(pi(i)),i.setState(2),i.emit(Op),i.onReady&&i.onReady(),(i.config.videoInit||i.config.autoplay)&&(!i.hasStart||i.state<4)&&i.start(),i}return wo(n,[{key:"_initDOM",value:function(){var t=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var e=this.config.el;if(!e||1!==e.nodeType)return this.emit(up,new ip("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=e}var n=Ig.checkPlayerRoot(this.root);n&&(zd.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this._initBaseDoms();var i=this.constructor.XgVideoProxy;if(i&&this.videoConfig.mediaType===i.mediaType){var r=this.innerContainer||this.root;this.detachVideoEvents(this.video);var o=new i(r,this.config,this.videoConfig);this.attachVideoEvents(o),this.video=o}if(this.config.controls){var s=Ig.register(this,Mg);this.controls=s}var a=this.config.isMobileSimulateMode?"mobile":tp.device;if(this.addClass("".concat(Ag.DEFAULT," ").concat(Ag.INACTIVE," xgplayer-").concat(a," ").concat(this.config.controls?"":Ag.NO_CONTROLS)),this.config.autoplay?this.addClass(Ag.ENTER):this.addClass(Ag.NO_START),this.config.fluid){var c=this.config,l=c.width,u=c.height;"number"==typeof l&&"number"==typeof u||(l=600,u=337.5);var h={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(100*u/l,"%")};Object.keys(h).forEach((function(e){t.root.style[e]=h[e]}))}else["width","height"].forEach((function(e){t.config[e]&&("number"!=typeof t.config[e]?t.root.style[e]=t.config[e]:t.root.style[e]="".concat(t.config[e],"px"))}));return!0}},{key:"_initBaseDoms",value:function(){this.topBar=Kd.createDom("xg-bar","",{"data-index":-1},"xg-top-bar"),this.leftBar=Kd.createDom("xg-bar","",{"data-index":-1},"xg-left-bar"),this.rightBar=Kd.createDom("xg-bar","",{"data-index":-1},"xg-right-bar"),this.config.marginControls&&(this.innerContainer=Kd.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer)),this.config.topBarAutoHide&&Kd.addClass(this.topBar,Ag.TOP_BAR_AUTOHIDE),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var t=this;["focus","blur"].forEach((function(e){t.on(e,t["on"+e.charAt(0).toUpperCase()+e.slice(1)])})),this.onFullscreenChange=function(e,n){var i=Kd.getFullScreenEl();if(t._fullActionFrom?t._fullActionFrom="":t.emit(Up,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:t.currentTime,duration:t.duration,props:[{prop:"fullscreen",from:!0,to:!1}]}),n||i&&(i===t._fullscreenEl||"VIDEO"===i.tagName))Kd.setTimeout(t,(function(){t.resize()}),100),!t.config.closeFocusVideoFocus&&t.video.focus(),t.fullscreen=!0,t.changeFullStyle(t.root,i,Ag.FULLSCREEN),t.emit(jp,!0,t._fullScreenOffset),t.cssfullscreen&&t.exitCssFullscreen();else if(t.fullscreen){Kd.setTimeout(t,(function(){t.resize()}),100);var r=t._fullScreenOffset;t.config.needFullscreenScroll?(window.scrollTo(r.left,r.top),Kd.setTimeout(t,(function(){t.fullscreen=!1,t._fullScreenOffset=null}),100)):(!t.config.closeFocusVideoFocus&&t.video.focus(),t.fullscreen=!1,t._fullScreenOffset=null),t.cssfullscreen?t.removeClass(Ag.FULLSCREEN):t.recoverFullStyle(t.root,t._fullscreenEl,Ag.FULLSCREEN),t._fullscreenEl=null,t.emit(jp,!1)}},Zp.forEach((function(e){document&&document.addEventListener(e,t.onFullscreenChange)})),this.__webkitbeginfullscreen=function(e){t._fullscreenEl=t.video,t.onFullscreenChange(e,!0)},this.__webkitendfullscreen=function(e){t.onFullscreenChange(e,!1)},tp.os.isIos&&(this.video.addEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.addEventListener("webkitendfullscreen",this.__webkitendfullscreen)),this.once(mp,this.resize),this.playFunc=function(){t.config.closeFocusVideoFocus||t.video.focus()},this.once(op,this.playFunc)}},{key:"_unbindEvents",value:function(){var t=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Zp.forEach((function(e){document.removeEventListener(e,t.onFullscreenChange)})),this.playFunc&&this.off(op,this.playFunc),this.canPlayFunc&&this.off(pp,this.canPlayFunc),this.video.removeEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.removeEventListener("webkitendfullscreen",this.__webkitendfullscreen)}},{key:"_startInit",value:function(t){var e=this;if(this.video&&(t&&""!==t&&("Array"!==Kd.typeOf(t)||0!==t.length)||(t="",this.emit(xp),zd.logWarn("config.url is null, please get url and run player._startInit(url)"),!this.config.nullUrlStart))){this.canPlayFunc=function(){if(e.config){var t=e.config,n=t.autoplay,i=t.startTime,r=t.defaultPlaybackRate;zd.logInfo("player","canPlayFunc",i),i&&(e.currentTime=i>e.duration?e.duration:i,e.config.startTime=0),1!==r&&(e.playbackRate=r),n&&e.videoPlay(),e.off(pp,e.canPlayFunc),e.removeClass(Ag.ENTER)}},this._detachSourceEvents(this.video),"Array"===Kd.typeOf(t)?this._attachSourceEvents(this.video,t):this.video.src=t,"Number"===Kd.typeOf(this.config.volume)&&(this.volume=this.config.volume),this.loadeddataFunc&&this.once(mp,this.loadeddataFunc);var n=this.innerContainer?this.innerContainer:this.root;this.video instanceof window.Element&&!n.contains(this.video)&&n.insertBefore(this.video,n.firstChild);var i=this.video.readyState;zd.logInfo("_startInit readyState",i),this.config.autoplay&&(!/^blob/.test(this.video.currentSrc)&&!/^blob/.test(this.video.src)&&this.load(),(tp.os.isIpad||tp.os.isPhone)&&this.videoPlay()),i>=2?this.canPlayFunc():this.once(pp,this.canPlayFunc),(!this.hasStart||this.state<4)&&Ig.afterInit(this),this.hasStart=!0,this.setState(4),Kd.setTimeout(this,(function(){e.emit(Tp)}),0)}}},{key:"_registerPlugins",value:function(){var t=this;this._loadingPlugins=[];var e=this.config.ignores||[],n=this.config.plugins||[];(this.config.i18n||[]).forEach((function(t){Wg.use(t)}));var i=e.join("||").toLowerCase().split("||");n.forEach((function(e){try{var n=e.plugin?e.plugin.pluginName:e.pluginName;if(n&&i.indexOf(n.toLowerCase())>-1)return;if(e.lazy&&e.loader){var r=Ig.lazyRegister(t,e);return void(e.forceBeforeInit&&(r.then((function(){t._loadingPlugins.splice(t._loadingPlugins.indexOf(r),1)})).catch((function(e){zd.logError("_registerPlugins:loadingPlugin",e),t._loadingPlugins.splice(t._loadingPlugins.indexOf(r),1)})),t._loadingPlugins.push(r)))}return t.registerPlugin(e)}catch(t){zd.logError("_registerPlugins:",t)}}))}},{key:"_registerPresets",value:function(){var t=this;this.config.presets.forEach((function(e){var n,i,r,o,s,a,c,l,u,h,f,d,p,v;n=t,l=void 0===(c=(a=(i=e).preset&&i.options?new i.preset(i.options,n.config):new i({},n.config)).plugins)?[]:c,h=void 0===(u=a.ignores)?[]:u,f=a.icons,d=void 0===f?{}:f,v=void 0===(p=a.i18n)?[]:p,n.config.plugins||(n.config.plugins=[]),n.config.ignores||(n.config.ignores=[]),(r=n.config.plugins).push.apply(r,Xh(l)),(o=n.config.ignores).push.apply(o,Xh(h)),Object.keys(d).map((function(t){n.config.icons[t]||(n.config.icons[t]=d[t])})),(s=n.config.i18n).push.apply(s,Xh(v))}))}},{key:"registerPlugin",value:function(t,e){var n=null,i=null;t.plugin&&"function"==typeof t.plugin?(n=t.plugin,i=t.options):(n=t,i={}),e&&(i.config=e);for(var r=Object.keys(this.config),o=0;o<r.length;o++)if(n.pluginName.toLowerCase()===r[o].toLowerCase()){var s=this.config[r[o]];"Object"===Kd.typeOf(s)&&(s.root&&(i.root=s.root),s.position&&(i.position=s.position));break}var a=i.position?i.position:i.config&&i.config.position||n.defaultConfig&&n.defaultConfig.position,c=_v.POSITIONS;if(!i.root&&"string"==typeof a&&a.indexOf("controls")>-1)return this.controls&&this.controls.registerPlugin(n,i,n.pluginName);if(!i.root)switch(a){case c.ROOT_RIGHT:i.root=this.rightBar;break;case c.ROOT_LEFT:i.root=this.leftBar;break;case c.ROOT_TOP:i.root=this.topBar;break;default:i.root=this.innerContainer||this.root}return Ig.register(this,n,i)}},{key:"deregister",value:function(t){"string"==typeof t?Ig.unRegister(this,t):t instanceof uv&&Ig.unRegister(this,t.pluginName)}},{key:"unRegisterPlugin",value:function(t){this.deregister(t)}},{key:"plugins",get:function(){return Ig.getPlugins(this)}},{key:"getPlugin",value:function(t){var e=Ig.findPlugin(this,t);return e&&e.pluginName?e:null}},{key:"addClass",value:function(t){this.root&&(Kd.hasClass(this.root,t)||Kd.addClass(this.root,t))}},{key:"removeClass",value:function(t){this.root&&Kd.removeClass(this.root,t)}},{key:"hasClass",value:function(t){if(this.root)return Kd.hasClass(this.root,t)}},{key:"setAttribute",value:function(t,e){this.root&&this.root.setAttribute(t,e)}},{key:"removeAttribute",value:function(t,e){this.root&&this.root.removeAttribute(t,e)}},{key:"start",value:function(t){var e=this;return this.hasStart||this.state>=3?Promise.resolve():(this.hasStart=!0,this.setState(3),Ig.beforeInit(this).then((function(){if(e.config)return t||(t=e.url||e.config.url),e._startInit(t)})).catch((function(t){throw t.fileName="player",t.lineNumber="236",zd.logError("start:beforeInit:",t),t})))}},{key:"switchURL",value:function(t){var e=this,n=t;"Object"===Kd.typeOf(t)&&(n=t.url);var i=this.currentTime,r=this.paused;return this.src=n,new Promise((function(t){var n=function(){e.currentTime=i,r&&e.once("canplay",(function(){e.pause()})),t()};tp.os.isAndroid?e.once("timeupdate",(function(){n()})):e.once("canplay",(function(){n()})),e.play()}))}},{key:"load",value:function(){this.video&&this.video.load()}},{key:"videoPlay",value:function(){var t=this;if(this.hasStart||!(this.state<4)){this.state<6&&(this.removeClass(Ag.NO_START),!this.isCanplay&&this.addClass(Ag.ENTER));var e=_o(gi(n.prototype),"play",this).call(this);return void 0!==e&&e&&e.then?e.then((function(){t.removeClass(Ag.NOT_ALLOW_AUTOPLAY),t.addClass(Ag.PLAYING),t.state<6&&(zd.logInfo(">>>>playPromise.then"),t.setState(6),t.emit(Vp))})).catch((function(e){if(zd.logWarn(">>>>playPromise.catch",e.name),t.video&&t.video.error)return t.onError(),t.removeClass(Ag.ENTER),void t.setState(0);"NotAllowedError"===e.name&&(t._errorTimer=Kd.setTimeout(t,(function(){t._errorTimer=null,t.emit(Sp),t.addClass(Ag.NOT_ALLOW_AUTOPLAY),t.removeClass(Ag.ENTER),t.pause(),t.setState(5)}),0))})):(zd.logWarn("video.play not return promise"),this.state<6&&(this.setState(6),this.removeClass(Ag.NOT_ALLOW_AUTOPLAY),this.removeClass(Ag.NO_START),this.removeClass(Ag.ENTER),this.addClass(Ag.PLAYING),this.emit(Vp))),e}this.removeClass(Ag.NO_START),this.addClass(Ag.ENTER);var i=this.start();i&&i.then((function(e){!t.config.autoplay&&t.videoPlay()}))}},{key:"videoPause",value:function(){_o(gi(n.prototype),"pause",this).call(this)}},{key:"play",value:function(){var t=this;this.removeClass(Ag.PAUSED),ov(this,"play",(function(){t.videoPlay()}))}},{key:"pause",value:function(){var t=this;ov(this,"pause",(function(){_o(gi(n.prototype),"pause",t).call(t)}))}},{key:"seek",value:function(t,e){var n=this;if(this.video&&!isNaN(Number(t))){var i=this.config,r=i.isSeekedPlay,o=i.seekedStatus,s=e||(r?"play":o);t=t<0?0:t>this.duration?parseInt(this.duration,10):t,this.once(pp,(function(){switch(n.removeClass(Ag.ENTER),n.isSeeking=!1,s){case"play":n.play();break;case"pause":n.pause();break;default:!n.paused&&n.play()}})),this.state<6?(this.removeClass(Ag.NO_START),this.addClass(Ag.ENTER),this.currentTime=t,"play"===s&&this.play()):this.currentTime=t}}},{key:"changeDefinition",value:function(t,e){var n=this;if(this.emit(Ip,{from:e,to:t}),this.curDefinition=t.definition,this.hasStart){var i=this.switchURL(t.url);i&&i.then?i.then((function(){n.emit(Ap,{from:e,to:t})})):this.emit(Ap,{from:e,to:t})}else this.config.url=t.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(mp,this.reloadFunc)}},{key:"resetState",value:function(){var t=this,e=[Ag.NOT_ALLOW_AUTOPLAY,Ag.PLAYING,Ag.NO_START,Ag.PAUSED,Ag.REPLAY,Ag.ENTER,Ag.ENDED,Ag.ERROR,Ag.LOADING];this.hasStart=!1,this.videoPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,e.forEach((function(e){t.removeClass(e)})),this.addClass(Ag.ENTER),this.emit(_p)}},{key:"destroy",value:function(){var t=this,e=this.innerContainer,i=this.root,r=this.video;if(i&&r){if(this._hasStart=!1,this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.video),Kd.clearAllTimers(this),this.emit(Pp),Ig.destroy(this),rv(this),_o(gi(n.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),e)for(var o=e.children,s=0;s<o.length;s++)e.removeChild(o[s]);!e&&r instanceof window.Node&&i.contains(r)&&i.removeChild(r),["topBar","leftBar","rightBar","innerContainer"].map((function(e){t[e]&&i.removeChild(t[e]),t[e]=null}));var a=i.className.split(" ");a.length>0?i.className=a.filter((function(t){return t.indexOf("xgplayer")<0})).join(" "):i.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach((function(e){t[e]=!1}))}}},{key:"replay",value:function(){var t=this;this.removeClass(Ag.ENDED),this.currentTime=0,this.isSeeking=!1,ov(this,"replay",(function(){t.once(pp,(function(){var e=t.videoPlay();e&&e.catch&&e.catch((function(t){console.log(t)}))})),t.play(),t.emit("replay"),t.onPlay()}))}},{key:"retry",value:function(){var t=this;this.removeClass(Ag.ERROR),this.addClass(Ag.LOADING),ov(this,"retry",(function(){var e=t.currentTime;t.videoPause(),t.src=t.config.url,!t.config.isLive&&(t.currentTime=e),t.once(pp,(function(){t.videoPlay()}))}))}},{key:"changeFullStyle",value:function(t,e,n,i){t&&(i||(i=Ag.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=Kd.filterStyleFromText(t)),Kd.addClass(t,n),e&&e!==t&&!this._orgPCss&&(this._orgPCss=Kd.filterStyleFromText(e),Kd.addClass(e,i)))}},{key:"recoverFullStyle",value:function(t,e,n,i){i||(i=Ag.PARENT_FULLSCREEN),this._orgCss&&(Kd.setStyleFromCsstext(t,this._orgCss),this._orgCss=""),Kd.removeClass(t,n),e&&e!==t&&this._orgPCss&&(Kd.setStyleFromCsstext(e,this._orgPCss),this._orgPCss="",Kd.removeClass(e,i))}},{key:"getFullscreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,e=this.root,n=this.video;t||(t=e),this._fullScreenOffset={top:Kd.scrollTop(),left:Kd.scrollLeft()},this._fullscreenEl=t,this._fullActionFrom="get";var i=Kd.getFullScreenEl();if(i!==this._fullscreenEl)try{for(var r=0;r<Xp.length;r++){var o=Xp[r];if(t[o]){var s="webkitRequestFullscreen"===o?t.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):t[o]();return s&&s.then?s:Promise.resolve()}}return n.fullscreenEnabled||n.webkitSupportsFullscreen?(n.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(t){return Promise.reject(new Error("call getFullscreen fail"))}else this.onFullscreenChange()}},{key:"exitFullscreen",value:function(t){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),this._fullscreenEl||Kd.getFullScreenEl()){this.root;var e=this.video;this._fullActionFrom="exit";try{for(var n=0;n<Jp.length;n++){var i=Jp[n];if(document[i]){var r=document[i]();return r&&r.then?r:Promise.resolve()}}return e&&e.webkitSupportsFullscreen?(e.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch(t){return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var e=t?"".concat(Ag.INNER_FULLSCREEN," ").concat(Ag.CSS_FULLSCREEN):Ag.CSS_FULLSCREEN;this.changeFullStyle(this.root,t,e);var n=this.config.fullscreen,i=void 0===n?{}:n,r=!0===i.useCssFullscreen||"function"==typeof i.useCssFullscreen&&i.useCssFullscreen();r&&(this.fullscreen=!0,this.emit(jp,!0)),this._cssfullscreenEl=t,this.cssfullscreen=!0,this.emit(Lp,!0)}},{key:"exitCssFullscreen",value:function(){var t=this._cssfullscreenEl?"".concat(Ag.INNER_FULLSCREEN," ").concat(Ag.CSS_FULLSCREEN):Ag.CSS_FULLSCREEN;if(this.fullscreen){var e=this.config.fullscreen,n=void 0===e?{}:e;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(this.recoverFullStyle(this.root,this._cssfullscreenEl,t),this.fullscreen=!1,this.emit(jp,!1)):this.removeClass(t)}else this.recoverFullStyle(this.root,this._cssfullscreenEl,t);this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(Lp,!1)}},{key:"getRotateFullscreen",value:function(t){this.cssfullscreen&&this.exitCssFullscreen(t);var e=t?"".concat(Ag.INNER_FULLSCREEN," ").concat(Ag.ROTATE_FULLSCREEN):Ag.ROTATE_FULLSCREEN;this._fullscreenEl=t||this.root,this.changeFullStyle(this.root,t,e,Ag.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this.emit(jp,!0)}},{key:"exitRotateFullscreen",value:function(t){var e=this._fullscreenEl!==this.root?"".concat(Ag.INNER_FULLSCREEN," ").concat(Ag.ROTATE_FULLSCREEN):Ag.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,e,Ag.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(jp,!1)}},{key:"setRotateDeg",value:function(t){90===window.orientation||-90===window.orientation?this.rotateDeg=0:this.rotateDeg=t}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closePlayerBlur,delay:this.config.inactive};this.isActive?this.onFocus(t):this.emit(kp,qg({paused:this.paused,ended:this.ended},t))}},{key:"blur",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?this.emit(Cp,qg({paused:this.paused,ended:this.ended},t)):this.onBlur(t)}},{key:"onFocus",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.autoHide,i=void 0===n?!this.config.closePlayerBlur:n,r=e.delay,o=void 0===r?this.config.inactive:r;this.isActive=!0,this.removeClass(Ag.INACTIVE),this.userTimer&&Kd.clearTimeout(this,this.userTimer),i&&(this.userTimer=Kd.setTimeout(this,(function(){t.blur()}),o))}},{key:"onBlur",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.ignorePaused,n=void 0!==e&&e;if(this.isActive){var i=this.config.closePauseVideoFocus;this.isActive=!1,(n||i||!this.paused&&!this.ended)&&this.addClass(Ag.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.state>=6&&this.removeClass(Ag.ENTER),this.removeClass(Ag.LOADING),this.isCanplay=!0,this.waitTimer&&Kd.clearTimeout(this,this.waitTimer)}},{key:"onPlay",value:function(){7===this.state&&this.setState(6),this.removeClass(Ag.PAUSED),this.ended&&this.removeClass(Ag.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(Ag.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&Kd.clearTimeout(this,this.userTimer),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(Ag.ENDED),this.setState(7)}},{key:"onError",value:function(){this.setState(0),this.updateAcc("error"),this.removeClass(Ag.NOT_ALLOW_AUTOPLAY),this.removeClass(Ag.NO_START),this.removeClass(Ag.ENTER),this.removeClass(Ag.LOADING),this.addClass(Ag.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(Ag.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&Kd.clearTimeout(this,this.waitTimer),this.removeClass(Ag.LOADING),this.removeClass(Ag.SEEKING)}},{key:"onWaiting",value:function(){var t=this;this.waitTimer&&Kd.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=Kd.setTimeout(this,(function(){t.addClass(Ag.LOADING),Kd.clearTimeout(t,t.waitTimer),t.waitTimer=null}),200)}},{key:"onPlaying",value:function(){var t=this;[Ag.NO_START,Ag.PAUSED,Ag.ENDED,Ag.ERROR,Ag.REPLAY,Ag.LOADING].forEach((function(e){t.removeClass(e)}))}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.resize(),(this.waitTimer||this.hasClass(Ag.LOADING))&&this.video.readyState>2&&(this.removeClass(Ag.LOADING),Kd.clearTimeout(this,this.waitTimer),this.waitTimer=null),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=(new Date).getTime())}},{key:"onVolumechange",value:function(){"Number"===Kd.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(t,e,n){if(this.video&&e&&t){var i="String"===Kd.typeOf(t)?t:t.type||"";n.props&&"Array"!==Kd.typeOf(n.props)&&(n.props=[n.props]),this.emit(Up,qg({eventType:i,action:e,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:t},n))}}},{key:"updateAcc",value:function(t){if(this._accPlayed.t){var e=(new Date).getTime()-this._accPlayed.t;this._accPlayed.acc+=e,this._accPlayed.t=0,("ended"===t||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(t){var e=this.video.buffered;if(!e||0===e.length||!this.duration)return!0;for(var n=t||this.video.currentTime||.2,i=e.length,r=0;r<i;r++)if(e.start(r)<=n&&e.end(r)>n)return!0;return!1}},{key:"position",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(this.video&&t&&t.h){var e=1/t.h,n=1!==e?"scale(".concat(e,")"):"",i=0,r=0;t.y&&(r=(100-100*t.h)/2-100*t.y),t.w&&t.x&&(i=(100-100*t.w)/2-100*t.x),n+=" translate(".concat(i,"%, ").concat(r,"%)"),this.video.style.transform=n,this.video.style.webkitTransform=n}}},{key:"setConfig",value:function(t){var e=this;t&&Object.keys(t).forEach((function(n){e.config[n]=t[n];var i=e.plugins[n.toLowerCase()];i&&"Function"===Kd.typeOf(i.setConfig)&&i.setConfig(t[n])}))}},{key:"playNext",value:function(t){this.resetState(),this.setConfig(t),this.play(),this.emit(Fp,t)}},{key:"resize",value:function(){var t=this;if(this.video){var e=this.video,n=e.videoWidth,i=e.videoHeight,r=this.config,o=r.fitVideoSize,s=r.videoFillMode;if("fill"!==s&&"cover"!==s||this.setAttribute("data-xgfill",s),i&&n){this._videoHeight=i,this._videoWidth=n;var a=this.root.getBoundingClientRect(),c=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,l=a.width,u=a.height-c,h=parseInt(n/i*1e3,10),f=parseInt(l/u*1e3,10),d=l,p=u,v={};"auto"===o&&f>h||"fixWidth"===o?(p=l/h*1e3,this.config.fluid?v.paddingTop="".concat(100*p/d,"%"):v.height="".concat(p+c,"px")):("auto"===o&&f<h||"fixHeight"===o)&&(d=h*u/1e3,v.width="".concat(d,"px")),this.fullscreen||this.cssfullscreen||Object.keys(v).forEach((function(e){t.root.style[e]=v[e]})),("fillHeight"===s&&f<h||"fillWidth"===s&&f>h)&&this.setAttribute("data-xgfill","cover");var g={videoScale:h,vWidth:d,vHeight:p,cWidth:d,cHeight:p+c};this.emit(Dp,g)}}}},{key:"updateObjectPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.video.updateObjectPosition?this.video.updateObjectPosition(t,e):this.video.style.objectPosition="".concat(100*t,"% ").concat(100*e,"%")}},{key:"setState",value:function(t){zd.logInfo("setState","state from:".concat(Dg[this.state]," to:").concat(Dg[t])),this._state=t}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(t){"boolean"==typeof t&&(this._hasStart=t,!1===t&&(this._state=2),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return 6===this._state||7===this._state}},{key:"definitionList",get:function(){return this.config.definition.list||[]},set:function(t){var e=this,n=this.config.definition;n.list=t,this.emit("resourceReady",t);var i=null,r=null;t.forEach((function(t){e.curDefinition===t.definition&&(i=t),n.defaultDefinition===t.definition&&(r=t)})),!r&&t.length>0&&(r=t[0]),i?this.changeDefinition(i):r&&this.changeDefinition(r)}},{key:"lang",get:function(){return this.config.lang},set:function(t){0!==Wg.langKeys.filter((function(e){return e===t})).length||"zh"===t?(this.config.lang=t,Ig.setLang(t,this)):console.error("Sorry, set lang fail, because the language [".concat(t,"] is not supported now, list of all supported languages is [").concat(Wg.langKeys.join(),"] "))}},{key:"i18n",get:function(){var t=this.config.lang;return Wg.lang[t]||Wg.lang.en}},{key:"i18nKeys",get:function(){return Wg.textKeys||{}}},{key:"version",get:function(){return ep}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(t){this.__url=t}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(t){this.plugins.poster&&this.plugins.poster.update(t)}},{key:"readyState",get:function(){var t=_o(gi(n.prototype),"readyState",this);return this.i18n[t]||t}},{key:"error",get:function(){var t=_o(gi(n.prototype),"error",this);return this.i18n[t]||t}},{key:"networkState",get:function(){var t=_o(gi(n.prototype),"networkState",this);return this.i18n[t]||t}},{key:"fullscreenChanging",get:function(){return!(null===this._fullScreenOffset)}},{key:"cumulateTime",get:function(){var t=this._accPlayed;return this.updateAcc("get"),t.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(t){this.config.zoom=t}},{key:"hook",value:function(t,e){return tv.call.apply(tv,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(t,e){return ev.call.apply(ev,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(t,e,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return nv.call.apply(nv,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(t,e){"boolean"==typeof e&&e!==this.muted&&(this.addInnerOP("volumechange"),this.muted=e),Ig.setCurrentUserActive(this.playerId,t)}}],[{key:"debugger",get:function(){return zd.config.debug},set:function(t){zd.config.debug=t}},{key:"getCurrentUserActivePlayerId",value:function(){return Ig.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(t,e){Ig.setCurrentUserActive(t,e)}},{key:"install",value:function(t,e){n.plugins||(n.plugins={}),n.plugins[t]||(n.plugins[t]=e)}},{key:"use",value:function(t,e){n.plugins||(n.plugins={}),n.plugins[t]=e}}]),n}(Yp);function Zg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Xg(){return(new Date).getTime()}mi(Kg,"defaultPreset",null),mi(Kg,"XgVideoProxy",null);var Jg=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(t=e.call.apply(e,[this].concat(r))),"_onTimeupdate",(function(){zd.logInfo("[xgLogger]Events._onTimeupdate"),t._state.isTimeUpdate=!0,t._sendFirstFrame()})),mi(pi(t),"_onAutoplayStart",(function(){zd.logInfo("[xgLogger]Events._onAutoplayStart"),t._state.autoplayStart=!0,t._sendFirstFrame()})),mi(pi(t),"_onReset",(function(){t.vt=0,t.pt=0,t.fvt=0,t._isSeeking=!1,t.seekingStart=0,t.waitingStart=0,t._isWaiting=!1,t._waitTimer&&Kd.clearTimeout(pi(t),t._waitTimer),t._waittTimer&&Kd.clearTimeout(pi(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0})),mi(pi(t),"_onSeeking",(function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=Xg(),t.emitLog("seekStart",{start:Xg()}))})),mi(pi(t),"_onSeeked",(function(){t.suspendSeekingStatus("seeked")})),mi(pi(t),"_onWaitingLoadStart",(function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=Xg(),t._waitType=1,t.emitLog("waitingStart",{start:t.waitingStart,type:1,endType:"loadstart"}))})),mi(pi(t),"_onWaiting",(function(){!t._isWaiting&&t.vt&&(t._isWaiting=!0,t._waitTimer=Kd.setTimeout(pi(t),(function(){t._isWaiting&&(t.waitingStart=Xg(),Kd.clearTimeout(pi(t),t._waitTimer),t._waitTimer=null,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t._startWaitTimeout(),t.emitLog("waitingStart",{start:t.waitingStart,type:t._waitType,endType:2===t._waitType?"seek":"playing"}))}),200))})),mi(pi(t),"_onError",(function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")})),mi(pi(t),"_onPlaying",(function(){t._isWaiting&&t.suspendWaitingStatus("playing")})),t}return wo(n,[{key:"afterCreate",value:function(){var t=this;this._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1},this._onReset(),this._waitType="firstFrame",this.on(wp,(function(){var e=t._state.autoplayStart;t._state.isTimeUpdate=!1,t._state.isFFLoading=!0,zd.logInfo("[xgLogger]Events.LOAD_START",e),t.pt=Xg(),t.vt=0,t.fvt=0,t.off(Vp,t._onAutoplayStart),t.off(fp,t._onTimeupdate),t._onWaitingLoadStart(),e?t.once(fp,t._onTimeupdate):t.once(Vp,t._onAutoplayStart)})),this.on(mp,(function(){t.vt=Xg(),t.fvt=t.vt-t.pt,zd.logInfo("[xgLogger]Events.LOADED_DATA",t.fvt,t._state.isTimeUpdate),t._state.isTimeUpdate&&t._sendFirstFrame(),t.suspendWaitingStatus("loadeddata")})),this.on(lp,this._onSeeking),this.on(hp,this._onSeeked),this.on(Pp,(function(){t.endState("destroy")})),this.on(Ep,(function(){t.endState("urlChange"),t._onReset()})),this.on([sp,pp],this._onPlaying),this.on(dp,this._onWaiting),this.on(up,this._onError),this.on(_p,(function(){t.endState("emptied"),t._onReset()}))}},{key:"_sendFirstFrame",value:function(){this.s=Xg(),this.vt>0&&this._state.isFFLoading&&(zd.logInfo("[xgLogger]Events._sendFirstFrame",this.vt),this._state.isFFLoading=!1,this.emitLog("firstFrame",{fvt:this.fvt,costTime:this.fvt,vt:this.vt}))}},{key:"_startWaitTimeout",value:function(){var t=this;this._waittTimer&&Kd.clearTimeout(this,this._waittTimer),this._waittTimer=Kd.setTimeout(this,(function(){t.suspendWaitingStatus("timeout"),Kd.clearTimeout(t,t._waittTimer),t._waittTimer=null}),3e4)}},{key:"endState",value:function(t){this.suspendWaitingStatus(t),this.suspendSeekingStatus(t)}},{key:"suspendSeekingStatus",value:function(t){if(this.seekingStart){var e=Xg(),n=e-this.seekingStart;this.seekingStart=0,this.emitLog("seekEnd",{end:e,costTime:n,endType:t})}}},{key:"suspendWaitingStatus",value:function(t){if(this._waitTimer&&(Kd.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(Kd.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,this.waitingStart){var e=Xg()-this.waitingStart;this._isWaiting=!1,this.waitingStart=0,this.emitLog("waitingEnd",{costTime:e,type:this._waitType,endType:2===this._waitType?"seek":t})}}},{key:"emitLog",value:function(t,e){var n=this.player;this.emit("xglog",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zg(Object(n),!0).forEach((function(e){mi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({t:Xg(),host:Kd.getHostFromUrl(n.currentSrc),vtype:n.vtype,eventType:t,currentTime:this.player.currentTime,readyState:n.video.readyState,networkState:n.video.networkState},e))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{}}}]),n}(_v);function Qg(){return(new DOMParser).parseFromString('<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">\n  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var tm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return wo(n,[{key:"registerIcons",value:function(){return{replay:Qg}}},{key:"afterCreate",value:function(){var t=this;_v.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",(function(){t.player.replay()}),{pre:function(t){t.preventDefault(),t.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(ap,(function(){if(t.playerConfig.loop||Kd.addClass(t.player.root,"replay"),!t.config.disable){t.show();var e=t.root.querySelector("path");if(e){var n=window.getComputedStyle(e).getPropertyValue("transform");if("string"==typeof n&&n.indexOf("none")>-1)return null;e.setAttribute("transform",n)}}})),this.on(op,(function(){t.hide()}))}},{key:"handleReplay",value:function(t){t.preventDefault(),t.stopPropagation(),this.player.replay(),Kd.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),n}(_v),nm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return wo(n,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(t){this.config.isEndedShow=t}},{key:"hide",value:function(){Kd.addClass(this.root,"hide")}},{key:"show",value:function(){Kd.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(t){"string"==typeof t.player.config.poster&&(t.config.poster=t.player.config.poster)}},{key:"afterCreate",value:function(){var t=this;this.on(ap,(function(){t.isEndedShow&&Kd.removeClass(t.root,"hide")})),this.config.hideCanplay?(this.once(fp,(function(){t.onTimeUpdate()})),this.on(Ep,(function(){Kd.removeClass(t.root,"hide"),Kd.addClass(t.root,"xg-showplay"),t.once(fp,(function(){t.onTimeUpdate()}))}))):this.on(op,(function(){Kd.addClass(t.root,"hide")}))}},{key:"onTimeUpdate",value:function(){var t=this;this.player.currentTime?Kd.removeClass(this.root,"xg-showplay"):this.once(fp,(function(){t.onTimeUpdate()}))}},{key:"update",value:function(t){t&&(this.config.poster=t,this.root.style.backgroundImage="url(".concat(t,")"))}},{key:"render",value:function(){var t=this.config,e=t.poster,n=t.hideCanplay,i=e?"background-image:url(".concat(e,");"):"";return'<xg-poster class="xgplayer-poster '.concat(n?"xg-showplay":"",'" style="').concat(i,'">\n    </xg-poster>')}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),n}(_v);function im(){return(new DOMParser).parseFromString('<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',"image/svg+xml").firstChild}function rm(){return(new DOMParser).parseFromString('<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',"image/svg+xml").firstChild}var om={},sm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),(i=e.call(this,t)).autoPlayStart=!1,i}return wo(n,[{key:"afterCreate",value:function(){var t=this,e=this.player,n=this.playerConfig;this.initIcons(),this.once(Op,(function(){n&&(n.lang&&"en"===n.lang?Kd.addClass(e.root,"lang-is-en"):"jp"===n.lang&&Kd.addClass(e.root,"lang-is-jp"))})),this.on(Vp,(function(){var e="auto"===t.config.mode?"auto-hide":"hide";Kd.addClass(t.root,e),t.autoPlayStart=!0,t.onPlayPause("play")})),n.autoplay||this.show(),this.on(Sp,(function(){var e="auto"===t.config.mode?"auto-hide":"hide";t.setAttr("data-state","play"),Kd.removeClass(t.root,e),t.show()})),this.on(op,(function(){t.onPlayPause("play")})),this.on(cp,(function(){t.onPlayPause("pause")})),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(e){e.cancelable&&e.preventDefault(),e.stopPropagation();var n=t.player.paused;t.emitUserAction(e,"switch_play_pause",{props:"paused",from:n,to:!n})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"preventDefault",value:function(t){}},{key:"registerIcons",value:function(){return{startPlay:{icon:im,class:"xg-icon-play"},startPause:{icon:rm,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild("xg-start-inner",t.startPlay),this.appendChild("xg-start-inner",t.startPause)}},{key:"hide",value:function(){Kd.addClass(this.root,"hide")}},{key:"show",value:function(){Kd.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){Kd.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){Kd.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(t){t?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(t){var e=this;!function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};om[t]&&window.clearTimeout(om[t].id),om[t]={},n.start&&n.start(),om[t].id=window.setTimeout((function(){n.end&&n.end(),window.clearTimeout(om[t].id),delete om[t]}),e)}("pauseplay",400,{start:function(){Kd.addClass(e.root,"interact"),e.show(),e.switchStatus(!0)},end:function(){Kd.removeClass(e.root,"interact"),!t&&e.hide()}})}},{key:"switchPausePlay",value:function(t){var e=this.player;t.cancelable&&t.preventDefault(),t.stopPropagation(),e.state<2||(this.player.paused||6!==e.state?e.play():e.pause())}},{key:"onPlayPause",value:function(t){var e=this.config,n=this.player;if(!(n.state<6)&&this.autoPlayStart){if("show"===e.mode)return this.switchStatus(),void this.show();if("auto"!==e.mode){if(e.isShowPause&&n.paused&&!n.ended||e.isShowEnd&&n.ended)return this.switchStatus(),void this.show();if(e.disableAnimate)return this.switchStatus(),void this.hide();if("play"===t)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||n.ended)return;this.animate()}}else this.switchStatus()}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Object.keys(om).map((function(t){window.clearTimeout(om[t].id),delete om[t]}))}},{key:"render",value:function(){var t=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(t,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),n}(_v),am=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return wo(n,[{key:"render",value:function(){var t=this.config.innerHtml,e=Kd.createDom("xg-enter","",{},"xgplayer-enter");if(t&&t instanceof window.HTMLElement)e.appendChild(t);else if(t&&"string"==typeof t)e.innerHTML=t;else{for(var n="",i=1;i<=12;i++)n+='<div class="xgplayer-enter-bar'.concat(i,'"></div>');e.innerHTML='<div class="xgplayer-enter-spinner">'.concat(n,"</div>")}return e}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),n}(_v),cm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return wo(n,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var t="MINISCREEN";return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</span></div>\n      </xg-icon>")}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:10}}}]),n}(_v);function um(t){var e=parseFloat(t);return-1===t.indexOf("%")&&!isNaN(e)&&e}var lm=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],hm=lm.length;function fm(t){if("string"==typeof t&&(t=document.querySelector(t)),t&&"object"===di(t)&&t.nodeType){var e=function(t){return window.getComputedStyle(t)}(t);if("none"===e.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<hm;e++)t[lm[e]]=0;return t}();var n={};n.width=t.offsetWidth,n.height=t.offsetHeight;for(var i=n.isBorderBox="border-box"===e.boxSizing,r=0;r<hm;r++){var o=lm[r],s=e[o],a=parseFloat(s);n[o]=isNaN(a)?0:a}var c=n.paddingLeft+n.paddingRight,l=n.paddingTop+n.paddingBottom,u=n.marginLeft+n.marginRight,h=n.marginTop+n.marginBottom,f=n.borderLeftWidth+n.borderRightWidth,d=n.borderTopWidth+n.borderBottomWidth,p=i,v=um(e.width);!1!==v&&(n.width=v+(p?0:c+f));var g=um(e.height);return!1!==g&&(n.height=g+(p?0:l+d)),n.innerWidth=n.width-(c+f),n.innerHeight=n.height-(l+d),n.outerWidth=n.width+u,n.outerHeight=n.height+h,n}}function dm(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.identifier===e)return i}}var pm={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},vm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ui(this,n),(i=e.call(this)).isEnabled=!0,i.isDragging=!1,i.isDown=!1,i.position={},i.downPoint={},i.dragPoint={x:0,y:0},i.startPos={x:0,y:0},i._root=t instanceof Element?t:document.querySelector(t),i._handlerDom=r.handle instanceof Element?r.handle:document.querySelector(r.handle),i._root&&i._handlerDom?(i._bindStartEvent(),i):vi(i)}return wo(n,[{key:"_bindStartEvent",value:function(){var t=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),pm[this._startKey].map((function(e){t["on".concat(e)]=t["on".concat(e)].bind(t)}))}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(t){var e=this;if(t){var n=pm[this._startKey];n.map((function(t){window.addEventListener(t,e["on".concat(t)])})),this._boundPointerEvents=n}}},{key:"_unbindPostStartEvents",value:function(){var t=this;this._boundPointerEvents&&(this._boundPointerEvents.map((function(e){window.removeEventListener(e,t["on".concat(e)])})),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(t){this.onUp()}},{key:"animate",value:function(){var t=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame((function(){t.animate()})))}},{key:"positionDrag",value:function(){var t="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=t,this._root.style.webKitTransform=t}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(t){this.dragStart(t,t)}},{key:"onmousemove",value:function(t){this.dragMove(t,t)}},{key:"onmouseup",value:function(t){this.dragEnd(t,t)}},{key:"ontouchstart",value:function(t){var e=t.changedTouches[0];this.dragStart(t,e),this.touchIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,t.preventDefault()}},{key:"ontouchmove",value:function(t){var e=dm(t.changedTouches,this.touchIdentifier);e&&this.dragMove(t,e)}},{key:"ontouchend",value:function(t){var e=dm(t.changedTouches,this.touchIdentifier);e&&this.dragEnd(t,e),t.preventDefault()}},{key:"ontouchcancel",value:function(t){var e=dm(t.changedTouches,this.touchIdentifier);e&&this.dragCancel(t,e)}},{key:"dragStart",value:function(t,e){if(this._root&&!this.isDown&&this.isEnabled){this.downPoint=e,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var n=fm(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-n.height,this.startPos.maxX=window.innerWidth-n.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(t)}}},{key:"dragRealStart",value:function(t,e){this.isDragging=!0,this.animate(),this.emit("dragStart",this.startPos)}},{key:"dragEnd",value:function(t,e){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit("dragEnded")),this.presetInfo())}},{key:"_dragPointerMove",value:function(t,e){var n={x:e.pageX-this.downPoint.pageX,y:e.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this.dragRealStart(t,e),n}},{key:"dragMove",value:function(t,e){if(t=t||window.event,this.isDown){var n=this.startPos,i=n.x,r=n.y,o=this._dragPointerMove(t,e),s=o.x,a=o.y;s=this.checkContain("x",s,i),a=this.checkContain("y",a,r),this.position.x=i+s,this.position.y=r+a,this.dragPoint.x=s,this.dragPoint.y=a,this.emit("dragMove",this.position)}}},{key:"dragCancel",value:function(t,e){this.dragEnd(t,e)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3}},{key:"checkContain",value:function(t,e,n){return e+n<0?0-n:"x"===t&&e+n>this.startPos.maxX?this.startPos.maxX-n:"y"===t&&e+n>this.startPos.maxY?this.startPos.maxY-n:e}},{key:"_getPosition",value:function(){var t=window.getComputedStyle(this._root),e=this._getPositionCoord(t.left,"width"),n=this._getPositionCoord(t.top,"height");this.position.x=isNaN(e)?0:e,this.position.y=isNaN(n)?0:n,this._addTransformPosition(t)}},{key:"_addTransformPosition",value:function(t){var e=t.transform;if(0===e.indexOf("matrix")){var n=e.split(","),i=0===e.indexOf("matrix3d")?12:4,r=parseInt(n[i],10),o=parseInt(n[i+1],10);this.position.x+=r,this.position.y+=o}}},{key:"_getPositionCoord",value:function(t,e){if(-1!==t.indexOf("%")){var n=fm(this._root.parentNode);return n?parseFloat(t)/100*n[e]:0}return parseInt(t,10)}}]),n}(Kh),gm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;ui(this,n),mi(pi(i=e.call(this,t)),"onCancelClick",(function(t){i.exitMini(),i.isClose=!0})),mi(pi(i),"onCenterClick",(function(t){var e=pi(i).player;e.paused?e.play():e.pause()})),mi(pi(i),"onScroll",(function(t){if(!(!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-i.pos.scrollY)<50)){var e=parseInt(Kd.getCss(i.player.root,"height"));e+=i.config.scrollTop,i.pos.scrollY=window.scrollY,window.scrollY>e+5?!i.isMini&&!i.isClose&&i.getMini():window.scrollY<=e&&(i.isMini&&i.exitMini(),i.isClose=!1)}})),i.isMini=!1,i.isClose=!1;var r=pi(i).config;return i.pos={left:r.left<0?window.innerWidth-r.width-20:r.left,top:r.top<0?window.innerHeight-r.height-20:r.top,height:i.config.height,width:i.config.width,scrollY:window.scrollY||0},i.lastStyle=null,i}return wo(n,[{key:"beforeCreate",value:function(t){"boolean"==typeof t.player.config.mini&&(t.config.isShowIcon=t.player.config.mini)}},{key:"afterCreate",value:function(){var t=this;this.initIcons(),this.on(cp,(function(){t.setAttr("data-state","pause")})),this.on(op,(function(){t.setAttr("data-state","play")}))}},{key:"onPluginsReady",value:function(){var t=this,e=this.player;if(!this.config.disable){if(this.config.isShowIcon){var n={config:{onClick:function(){t.getMini()}}};e.controls.registerPlugin(cm,n,cm.pluginName)}var i=Kd.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",i,this.onCancelClick),this.bind(".play-icon",i,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new vm(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:im,class:"xg-icon-play"},pause:{icon:rm,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".play-icon",t.play),this.appendChild(".play-icon",t.pause)}},{key:"getMini",value:function(){var t=this;if(!this.isMini){var e=this.player,n=this.playerConfig,i=this.config.target||this.player.root;this.lastStyle={},Kd.addClass(e.root,"xgplayer-mini"),["width","height","top","left"].map((function(e){t.lastStyle[e]=i.style[e],i.style[e]="".concat(t.pos[e],"px")})),n.fluid&&(i.style["padding-top"]=""),this.emit(Rp,!0),e.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var t=this;if(!this.isMini)return!1;var e=this.player,n=this.playerConfig,i=this.config.target||this.player.root;Kd.removeClass(e.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map((function(e){i.style[e]=t.lastStyle[e]})),this.lastStyle=null,n.fluid&&(e.root.style.width="100%",e.root.style.height="0",e.root.style["padding-top"]="".concat(100*n.height/n.width,"%")),this.emit(Rp,!1),this.isMini=e.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var t=Kd.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",t,this.onCancelClick),this.unbind(".play-icon",t,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <xg-mini-header class="xgplayer-mini-header">\n      <div lang-key="'.concat(this.i18nKeys.MINI_DRAG,'">').concat(this.i18n.MINI_DRAG,'</div>\n      </xg-mini-header>\n      <div class="mini-cancel-btn">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>\n        </svg>\n      </div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>')}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),n}(_v),mm={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},ym=["videoClick","videoDbClick"],bm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(t=e.call.apply(e,[this].concat(r))),"onMouseMove",(function(e){var n=pi(t),i=n.player,r=n.playerConfig;i.isActive||(i.focus({autoHide:!r.closeDelayBlur}),!r.closeFocusVideoFocus&&i.video.focus())})),mi(pi(t),"onMouseEnter",(function(e){var n=pi(t),i=n.playerConfig,r=n.player;r.focus({autoHide:!i.closeDelayBlur}),!i.closeFocusVideoFocus&&r.video.focus()})),mi(pi(t),"onMouseLeave",(function(e){var n=t.playerConfig,i=n.closePlayerBlur,r=n.leavePlayerTime;i||(r?t.player.focus({autoHide:!0,delay:r}):t.player.blur())})),mi(pi(t),"onVideoClick",(function(e){var n=pi(t),i=n.player,r=n.playerConfig;e.target&&r.closeVideoClick||e.target!==i.video&&e.target!==i.innerContainer&&e.target!==i.video.__canvas||(e.preventDefault(),r.closeVideoStopPropagation||e.stopPropagation(),t._clickCount++,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),t.clickTimer=setTimeout((function(){t._clickCount&&(t._clickCount--,ov(pi(t),ym[0],(function(e,n){t.switchPlayPause(n.e)}),{e:e,paused:i.paused}),clearTimeout(t.clickTimer),t.clickTimer=null)}),300))})),mi(pi(t),"onVideoDblClick",(function(e){var n=pi(t),i=n.player,r=n.playerConfig;!e.target||e.target!==i.video&&e.target!==i.video.__canvas||r.closeVideoDblclick||(t._clickCount<2?t._clickCount=0:(t._clickCount=0,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),e.preventDefault(),e.stopPropagation(),ov(pi(t),ym[1],(function(e,n){t.emitUserAction(n.e,"switch_fullscreen",{props:"fullscreen",from:i.fullscreen,to:!i.fullscreen}),i.fullscreen?i.exitFullscreen():i.getFullscreen()}),{e:e,fullscreen:i.fullscreen})))})),t}return wo(n,[{key:"afterCreate",value:function(){var t=this;this._clickCount=0,ym.map((function(e){t.__hooks[e]=null}));var e=this.playerConfig,n=e.enableContextmenu;e.isMobileSimulateMode||"mobile"===tp.device&&!tp.os.isIpad||(this.config.disableContextmenu=!n,this.initEvents())}},{key:"initEvents",value:function(){var t=this,e=this.player,n=e.video,i=e.root;n.addEventListener("click",this.onVideoClick,!1),n.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(mm).map((function(e){i.addEventListener(e,t[mm[e]],!1)})),this.config.disableContextmenu&&n.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(t){var e=this.player;this.emitUserAction(t,"switch_play_pause",{props:"paused",from:e.paused,to:!e.paused}),e.ended?e.duration!==1/0&&e.duration>0&&e.replay():e.paused?e.play():e.pause()}},{key:"onContextmenu",value:function(t){(t=t||window.event).preventDefault&&t.preventDefault(),t.stopPropagation?t.stopPropagation():(t.returnValue=!1,t.cancelBubble=!0)}},{key:"destroy",value:function(){var t=this,e=this.player,n=e.video,i=e.root;this.clickTimer&&clearTimeout(this.clickTimer),i.removeEventListener("click",this.onVideoClick,!1),n.removeEventListener("dblclick",this.onVideoDblClick,!1),n.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(mm).map((function(e){i.removeEventListener(e,t[mm[e]],!1)}))}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{disableContextmenu:!0}}}]),n}(uv),wm=p,_m=Le,km=_i,Cm=w,Om=xn,xm=Le,Vm=function(t){var e=km(Cm(this)),n="",i=_m(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n},Sm=o,Tm=1..toFixed,Pm=Math.floor,Em=function(t,e,n){return 0===e?n:e%2==1?Em(t,e-1,n*t):Em(t*t,e/2,n)},jm=function(t,e,n){for(var i=-1,r=n;++i<6;)r+=e*t[i],t[i]=r%1e7,r=Pm(r/1e7)},Lm=function(t,e){for(var n=6,i=0;--n>=0;)i+=t[n],t[n]=Pm(i/e),i=i%e*1e7},Rm=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var i=String(t[e]);n=""===n?i:n+Vm.call("0",7-i.length)+i}return n};Om({target:"Number",proto:!0,forced:Tm&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!Sm((function(){Tm.call({})}))},{toFixed:function(t){var e,n,i,r,o=function(t){if("number"!=typeof t&&"Number"!=wm(t))throw TypeError("Incorrect invocation");return+t}(this),s=xm(t),a=[0,0,0,0,0,0],c="",l="0";if(s<0||s>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(c="-",o=-o),o>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(o*Em(2,69,1))-69)<0?o*Em(2,-e,1):o/Em(2,e,1),n*=4503599627370496,(e=52-e)>0){for(jm(a,0,n),i=s;i>=7;)jm(a,1e7,0),i-=7;for(jm(a,Em(10,i,1),0),i=e-1;i>=23;)Lm(a,1<<23),i-=23;Lm(a,1<<i),jm(a,1,1),Lm(a,2),l=Rm(a)}else jm(a,0,n),jm(a,1<<-e,0),l=Rm(a)+Vm.call("0",s);return s>0?c+((r=l.length)<=s?"0."+Vm.call("0",s-r)+l:l.slice(0,r-s)+"."+l.slice(r-s)):c+l}});var Im="pressend",Am={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},Dm={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function Mm(t){return t&&t.length>0?t[t.length-1]:null}function Bm(t){var e=navigator.userAgent;/(?:iPhone|iPad)/.test(e)&&t.cancelable&&t.preventDefault()}var Nm=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{eventType:"touch"};ui(this,t),this._pos={moving:!1,start:!1,x:0,y:0},this.config={pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0},Object.keys(i).map((function(t){n.config[t]=i[t]})),this.root=e,this.events="mouse"===i.eventType?Dm:Am,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return wo(t,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(t){var e=this,n=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout((function(){e.trigger("press",t),e._pos.press=!0,e.__clearPress()}),n.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(t){var e=this,n=this.config;if(this.dbIntrvalId)return this.__clearDb(),void this.trigger("doubleclick",t);this.dbIntrvalId=setTimeout((function(){e.__clearDb(),e._pos.start||e._pos.press||e._pos.moving||e.trigger("click",t)}),n.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(t,e){this.__handlers[t]||(this.__handlers[t]=[]),this.__handlers[t].push(e)}},{key:"off",value:function(t,e){if(this.__handlers[t]){for(var n=this.__handlers[t],i=-1,r=0;r<n.length;r++)if(n[r]===e){i=r;break}i>=0&&this.__handlers[t].splice(i,1)}}},{key:"trigger",value:function(t,e){this.__handlers[t]&&this.__handlers[t].map((function(n){try{n(e)}catch(e){console.error("trigger>>:".concat(t),e)}}))}},{key:"onTouchStart",value:function(t){var e=this._pos,n=this.root;this.config.needPreventDefault&&Bm(t);var i=Mm(t.touches);e.x=i?parseInt(i.pageX,10):t.pageX,e.y=i?parseInt(i.pageX,10):t.pageX,e.start=!0,this.__setPress(t),n.addEventListener(this.events.end,this.onTouchEnd),n.addEventListener(this.events.cancel,this.onTouchCancel),n.addEventListener(this.events.move,this.onTouchMove),this.trigger("touchstart",t)}},{key:"onTouchCancel",value:function(t){this.onTouchEnd(t)}},{key:"onTouchEnd",value:function(t){var e=this._pos,n=this.root;this.config.needPreventDefault&&Bm(t),this.__clearPress(),n.removeEventListener(this.events.cancel,this.onTouchCancel),n.removeEventListener(this.events.end,this.onTouchEnd),n.removeEventListener(this.events.move,this.onTouchMove),t.moving=e.moving,t.press=e.press,e.press&&this.trigger(Im,t),this.trigger("touchend",t),!e.press&&!e.moving&&this.__setDb(t),e.press=!1,e.start=!1,e.moving=!1}},{key:"onTouchMove",value:function(t){var e=this._pos,n=this.config,i=Mm(t.touches),r=i?parseInt(i.pageX,10):t.pageX,o=i?parseInt(i.pageY,10):t.pageX,s=r-e.x,a=o-e.y;Math.abs(a)<n.miniStep&&Math.abs(s)<n.miniStep||(this.__clearPress(),e.press&&this.trigger(Im,t),e.press=!1,e.moving=!0,this.trigger("touchmove",t))}},{key:"destroy",value:function(){var t=this,e={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(e).map((function(n){t.root.removeEventListener("touchend",t[e[n]])}))}}]),t}();function Fm(){return(new DOMParser).parseFromString('<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink">\n  <path opacity="0.54"\n    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"\n    fill="white" />\n  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>\n</svg>',"image/svg+xml").firstChild}var Hm="auto",Um="seeking",$m=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),mi(pi(i=e.call(this,t)),"onTouchStart",(function(t){var e=pi(i),n=e.player,r=e.config,o=e.pos,s=e.playerConfig,a=i.getTouche(t);if(a&&!r.disableGesture&&i.duration>0&&!n.ended){o.isStart=!0,Kd.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),i.find(".xg-dur").innerHTML=Kd.format(i.duration);var c=i.root.getBoundingClientRect();90===n.rotateDeg?(o.top=c.left,o.left=c.top,o.width=c.height,o.height=c.width):(o.top=c.top,o.left=c.left,o.width=c.width,o.height=c.height);var l=parseInt(a.pageX-o.left,10),u=parseInt(a.pageY-o.top,10);o.x=90===n.rotateDeg?u:l,o.y=90===n.rotateDeg?l:u,o.scopeL=r.scopeL*o.width,o.scopeR=(1-r.scopeR)*o.width,o.scopeM1=o.width*(1-r.scopeM)/2,o.scopeM2=o.width-o.scopeM1}})),mi(pi(i),"onTouchMove",(function(t){var e=i.getTouche(t),n=pi(i),r=n.pos,o=n.config,s=n.player;if(e&&!o.disableGesture&&i.duration&&r.isStart){var a=o.miniMoveStep,c=o.hideControlsActive,l=parseInt(e.pageX-r.left,10),u=parseInt(e.pageY-r.top,10),h=90===s.rotateDeg?u:l,f=90===s.rotateDeg?l:u;if(Math.abs(h-r.x)>a||Math.abs(f-r.y)>a){var d=h-r.x,p=f-r.y,v=r.scope;if(-1===v&&(0===(v=i.checkScope(h,f,d,p,r))&&(c?s.blur():s.focus({autoHide:!1}),!r.time&&(r.time=parseInt(1e3*s.currentTime,10)+1e3*i.timeOffset)),r.scope=v),-1===v||v>0&&!o.gestureY||0===v&&!o.gestureX)return;t.cancelable&&t.preventDefault(),i.executeMove(d,p,v,r.width,r.height),r.x=h,r.y=f}}})),mi(pi(i),"onTouchEnd",(function(t){var e=pi(i),n=e.player,r=e.pos,o=e.playerConfig;r.isStart&&(r.scope>-1&&t.cancelable&&t.preventDefault(),i.endLastMove(r.scope),setTimeout((function(){n.getPlugin("progress")&&n.getPlugin("progress").resetSeekState()}),10),r.scope=-1,i.resetPos(),Kd.checkIsFunction(o.enableSwipeHandler)&&o.enableSwipeHandler(),i.changeAction(Hm))})),mi(pi(i),"onRootTouchMove",(function(t){!i.config.disableGesture&&i.config.gestureX&&i.checkIsRootTarget(t)&&(t.stopPropagation(),i.pos.isStart?i.onTouchMove(t):i.onTouchStart(t))})),mi(pi(i),"onRootTouchEnd",(function(t){i.pos.isStart&&i.checkIsRootTarget(t)&&(t.stopPropagation(),i.onTouchEnd(t))})),i.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},i.timer=null,i}return wo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:Fm,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var t=this,e=this.playerConfig,n=this.config,i=this.player;!0===e.closeVideoDblclick&&(n.closedbClick=!0),this.resetPos(),Kd.isUndefined(e.disableGesture)||(n.disableGesture=!!e.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=Kd.createDom("xg-mask","",{},"xgmask"),i.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var r=this.domEventType;this.touch=new Nm(this.root,{eventType:r,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",(function(t){t.preventDefault()})),i.root.addEventListener("touchmove",this.onRootTouchMove,!0),i.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(vp,(function(){var e=t.player,n=t.config;1e3*e.duration<n.moveDuration&&(n.moveDuration=1e3*e.duration)})),this.on([pp,ap],(function(){var e=t.pos,n=e.time;!e.isStart&&n>0&&(t.pos.time=0)}));var o={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(o).map((function(e){t.touch.on(e,(function(n){t[o[e]](n)}))})),!n.disableActive){var s=i.plugins.progress;s&&(s.addCallBack("dragmove",(function(e){t.activeSeekNote(e.currentTime,e.forward)})),s.addCallBack("dragend",(function(){t.changeAction(Hm)})))}}},{key:"registerThumbnail",value:function(){var t=this.player.plugins.thumbnail;if(t&&t.usable){this.thumbnail=t.createThumbnail(null,"mobile-thumbnail");var e=this.find(".time-preview");e.insertBefore(this.thumbnail,e.children[0])}}},{key:"initCustomStyle",value:function(){var t=(this.playerConfig||{}).commonStyle,e=t.playedColor,n=t.progressColor;e&&(this.find(".xg-curbar").style.backgroundColor=e,this.find(".xg-cur").style.color=e),n&&(this.find(".xg-bar").style.backgroundColor=n,this.find(".time-preview").style.color=n),this.config.disableTimeProgress&&Kd.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var t=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map((function(e){t.pos[e]=0}))):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(t){var e=this.player;this.root.setAttribute("data-xg-action",t);var n=e.plugins.start;n&&n.recover()}},{key:"getTouche",value:function(t){this.player.rotateDeg;var e=t.touches&&t.touches.length>0?t.touches[t.touches.length-1]:t;return{pageX:e.pageX,pageY:e.pageY}}},{key:"checkScope",value:function(t,e,n,i,r){var o=r.width,s=-1;if(t<0||t>o)return s;var a=0===i?Math.abs(n):Math.abs(n/i);return Math.abs(n)>0&&a>=1.73&&t>r.scopeM1&&t<r.scopeM2?s=0:(0===Math.abs(n)||a<=.57)&&(s=t<r.scopeL?1:t>r.scopeR?2:3),s}},{key:"executeMove",value:function(t,e,n,i,r){switch(n){case 0:this.updateTime(t/i*this.config.scopeM);break;case 1:this.updateBrightness(e/r);break;case 2:tp.os.isIos||this.updateVolume(e/r)}}},{key:"endLastMove",value:function(t){var e=this,n=this.pos,i=this.player,r=this.config,o=(n.time-this.timeOffset)/1e3;switch(t){case 0:i.seek(Number(o).toFixed(1)),r.hideControlsEnd?i.blur():i.focus(),this.timer=setTimeout((function(){e.pos.time=0}),500)}this.changeAction(Hm)}},{key:"checkIsRootTarget",value:function(t){var e=this.player.plugins||{};return(!e.progress||!e.progress.root.contains(t.target))&&(e.start&&e.start.root.contains(t.target)||e.controls&&e.controls.root.contains(t.target))}},{key:"sendUseAction",value:function(t){var e=this.player.paused;this.emitUserAction(t,"switch_play_pause",{prop:"paused",from:e,to:!e})}},{key:"onClick",value:function(t){var e=this.player,n=this.config,i=this.playerConfig;e.state<6?i.closeVideoClick||(this.sendUseAction(new Event("click")),e.play()):!n.closedbClick||i.closeVideoClick?e.isActive?e.blur():e.focus():i.closeVideoClick||((e.isActive||n.focusVideoClick)&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),e.focus())}},{key:"onDbClick",value:function(t){var e=this.config,n=this.player;!e.closedbClick&&n.state>=6&&(this.sendUseAction(new Event("dblclick")),this.switchPlayPause())}},{key:"onPress",value:function(t){var e=this.pos,n=this.config,i=this.player;n.disablePress||(e.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:i.playbackRate,to:n.pressRate}),i.playbackRate=n.pressRate,this.changeAction("playbackrate"))}},{key:"onPressEnd",value:function(t){var e=this.pos,n=this.config,i=this.player;n.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:i.playbackRate,to:e.rate}),i.playbackRate=e.rate,e.rate=1,this.changeAction(Hm))}},{key:"updateTime",value:function(t){var e=this.player,n=this.config,i=this.player.duration;t=Number(t.toFixed(4));var r=parseInt(t*n.moveDuration,10)+this.timeOffset;r=(r+=this.pos.time)<0?0:r>1e3*i?1e3*i-200:r,e.getPlugin("time")&&e.getPlugin("time").updateTime(r/1e3),e.getPlugin("progress")&&e.getPlugin("progress").updatePercent(r/1e3/this.duration,!0),this.activeSeekNote(r/1e3,t>0),n.isTouchingSeek&&e.seek(Number((r-this.timeOffset)/1e3).toFixed(1)),this.pos.time=r}},{key:"updateVolume",value:function(t){this.player.rotateDeg&&(t=-t);var e=this.player,n=this.pos;if(t=parseInt(100*t,10),n.volume+=t,!(Math.abs(n.volume)<10)){var i=parseInt(10*e.volume,10)-parseInt(n.volume/10,10);i=i>10?10:i<1?0:i,e.volume=i/10,n.volume=0}}},{key:"updateBrightness",value:function(t){this.player.rotateDeg&&(t=-t);var e=this.pos,n=this.config,i=this.xgMask,r=e.light+.8*t;r=r>n.maxDarkness?n.maxDarkness:r<0?0:r,i&&(i.style.backgroundColor="rgba(0,0,0,".concat(r,")")),e.light=r}},{key:"activeSeekNote",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player,i=this.config,r=!(this.duration!==1/0&&this.duration>0);if(t&&"number"==typeof t&&!r&&!i.disableActive){t<0?t=0:t>n.duration&&(t=n.duration-.2),this.changeAction(Um);var o=n.plugins.start;o&&o.focusHide(),this.find(".xg-dur").innerHTML=Kd.format(this.duration),this.find(".xg-cur").innerHTML=Kd.format(t),this.find(".xg-curbar").style.width="".concat(t/this.duration*100,"%"),e?Kd.removeClass(this.find(".xg-seek-show"),"xg-back"):Kd.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(t)}}},{key:"updateThumbnails",value:function(t){var e=this.player.plugins.thumbnail;e&&e.usable&&this.thumbnail&&e.update(this.thumbnail,t,160,90)}},{key:"switchPlayPause",value:function(){var t=this.player;if(t.state<4)return!1;t.ended||(t.paused?t.play():t.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var t=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,t.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,t.root.removeEventListener("touchmove",this.onRootTouchMove,!0),t.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var t="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(t,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span>/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),n}(_v);function Gm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Wm(t){t.preventDefault(),t.returnValue=!1}function zm(t){var e=t.tagName;return!("INPUT"!==e&&"TEXTAREA"!==e&&!t.isContentEditable)}var qm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(t=e.call.apply(e,[this].concat(r))),"onBodyKeyDown",(function(e){var n=e||window.event;if(t.player&&(t.player.isUserActive||t.config.isIgnoreUserActive)&&!(t.config.disable||t.config.disableBodyTrigger||!t.checkIsVisible()||n.metaKey||n.altKey||n.ctrlKey)){var i=n.keyCode;return!(n.target!==document.body&&(!t.config.isGlobalTrigger||zm(n.target))||!t.checkCode(i,!0)||(Wm(n),t.handleKeyCode(i,e),1))}})),mi(pi(t),"onKeydown",(function(e){var n=e||window.event;if(!(t.config.disable||t.config.disableRootTrigger||n.metaKey||n.altKey||n.ctrlKey)&&(t.player.isUserActive||t.config.isIgnoreUserActive)&&(t.player.isUserActive||t.config.isIgnoreUserActive)){if(!n||37!==n.keyCode&&!t.checkCode(n.keyCode)||n.target!==t.player.root&&n.target!==t.player.video&&n.target!==t.player.controls.el)return!0;Wm(n),t.handleKeyCode(n.keyCode,e)}})),t}return wo(n,[{key:"mergekeyCodeMap",value:function(){var t=this,e=this.config.keyCodeMap;e&&Object.keys(e).map((function(n){t.keyCodeMap[n]?["keyCode","action","disable","isBodyTarget"].map((function(i){e[n][i]&&(t.keyCodeMap[n][i]=e[n][i])})):t.keyCodeMap[n]=e[n]}))}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var t="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;t&&"number"==typeof t&&(this.seekStep=t),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var t=this.player.root.getBoundingClientRect(),e=t.height,n=t.top,i=t.bottom,r=window.innerHeight;return!(n<0&&n<0-.9*e||i>0&&i-r>.9*e)}},{key:"checkCode",value:function(t,e){var n=this,i=!1;return Object.keys(this.keyCodeMap).map((function(r){n.keyCodeMap[r]&&t===n.keyCodeMap[r].keyCode&&!n.keyCodeMap[r].disable&&(i=!e||e&&!n.keyCodeMap[r].noBodyTarget)})),i}},{key:"downVolume",value:function(t){var e=this.player,n=parseFloat((e.volume-.1).toFixed(1)),i={volume:{from:e.volume,to:n}};this.emitUserAction(t,"change_volume",{props:i}),e.volume=n>=0?n:0}},{key:"upVolume",value:function(t){var e=this.player,n=parseFloat((e.volume+.1).toFixed(1)),i={volume:{from:e.volume,to:n}};this.emitUserAction(t,"change_volume",{props:i}),e.volume=n<=1?n:1}},{key:"seek",value:function(t){var e,n=this.player,r=n.currentTime,i=n.duration,o={currentTime:{from:r,to:e=r+this.seekStep<=i?r+this.seekStep:i-1}};this.emitUserAction(t,"seek",{props:o}),this.player.currentTime=e}},{key:"seekBack",value:function(t){var e=this.player.currentTime,n=0;e-this.seekStep>=0&&(n=e-this.seekStep);var i={currentTime:{from:e,to:n}};this.emitUserAction(t,"seek",{props:i}),this.player.currentTime=n}},{key:"playPause",value:function(t){var e=this.player;e&&(this.emitUserAction(t,"switch_play_pause"),e.paused?e.play():e.pause())}},{key:"exitFullscreen",value:function(t){var e=this.player,n=e.fullscreen,i=e.cssfullscreen;n&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:n,to:!n}),e.exitFullscreen()),i&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:i,to:!i}),e.exitCssFullscreen())}},{key:"handleKeyCode",value:function(t,e){var n=this;Object.keys(this.keyCodeMap).map((function(i){var r=n.keyCodeMap[i],o=r.action,s=r.keyCode,a=r.disable;s!==t||a||("function"==typeof o?o(e,n.player):"string"==typeof o&&"function"==typeof n[o]&&n[o](e,n.player),n.emit(Hp,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gm(Object(n),!0).forEach((function(e){mi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({key:i,target:e.target},n.keyCodeMap[i])))}))}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),n}(uv);function Ym(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">\n  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>\n</svg>\n',"image/svg+xml").firstChild}var Km=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return wo(n,[{key:"registerIcons",value:function(){return{loadingIcon:Ym}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>'}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:vv.ROOT}}}]),n}(_v),Zm=xn,Xm=Zi.findIndex,Jm=Vo,Qm="findIndex",ty=!0;Qm in[]&&Array(1).findIndex((function(){ty=!1})),Zm({target:"Array",proto:!0,forced:ty},{findIndex:function(t){return Xm(this,t,arguments.length>1?arguments[1]:void 0)}}),Jm(Qm);var ey=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],ny=function(){function t(e){ui(this,t),this.fragments=e.fragments||[],this.focusClass="inner-focus",this.style=e.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0}return wo(t,[{key:"updateDuration",value:function(t){var e=this;this.duration=parseInt(1e3*t);var n=0,i=this.fragments;this.fragments=i.map((function(t){return t.start=n,t.end=n+t.percent*e.duration,t.duration=t.percent*e.duration,n+=t.percent*e.duration,t}))}},{key:"updateProgress",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"played",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},n=this.progressList,i=this.fragments,r=e.newIndex,o=e.curIndex,s=e.millisecond;r!==o&&n.map((function(e,n){n<r?e[t].style.width="100%":n>r&&(e[t].style.width=0)}));var a=i[r],c=0===s?0:(s-a.start)/a.duration;n[r][t].style.width=c<0?0:"".concat(100*c,"%")}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},e=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(1e3*e,10)!==this.duration){if(!e&&0!==e)return;this.updateDuration(e)}var n=this.playedIndex,i=this.cachedIndex;if("Undefined"!==Kd.typeOf(t.played)){var r=this.findIndex(1e3*t.played,n);this.updateProgress("played",{newIndex:r,curIndex:n,millisecond:parseInt(1e3*t.played,10)}),this.playedIndex=r}if("Undefined"!==Kd.typeOf(t.cached)){var o=this.findIndex(1e3*t.cached,i);this.updateProgress("cached",{newIndex:o,curIndex:i,millisecond:parseInt(1e3*t.cached,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(t,e){var n=this.fragments;return 1===n.length?0:(t>n[e].start&&t<n[e].end||this.fragments.map((function(n,i){t>n.start&&t<=n.end&&(e=i)})),e)}},{key:"findHightLight",value:function(){for(var t=this.root.children,e=0;e<t.length;e++)if(Kd.hasClass(t[e],this.focusClass))return{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"findFragment",value:function(t){var e=this.root.children;return t<0||t>=e.length?null:{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var t=this.root.children,e=0;e<t.length;e++)Kd.removeClass(t[e],this.focusClass)}},{key:"setHightLight",value:function(t){var e=this.root.children;if(t<e.length)return Kd.addClass(e[t],this.focusClass),{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"render",value:function(){var t=this,e=this.style.progressColor;return this.root=Kd.createDom("xg-inners","",{},"progress-list"),this.fragments&&(this.progressList=this.fragments.map((function(n){var i=Kd.createDom("xg-inner","",{style:e?"background:".concat(e,"; flex: ").concat(n.percent):"flex: ".concat(n.percent)},"".concat(n.isFocus?"inner-focus":""," xgplayer-progress-inner"));return t.root.appendChild(i),ey.map((function(e){i.appendChild(Kd.createDom(e.tag,"",{style:e.styleKey?"background: ".concat(t.style[e.styleKey],"; width:0;"):"width:0;"},e.className))})),{cached:i.children[0],played:i.children[1]}}))),this.root}}]),t}(),iy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),mi(pi(i=e.call(this,t)),"onMoveOnly",(function(t){var e=pi(i),n=e.pos,r=e.config,o=e.player;Kd.event(t);var s=Kd.getEventPos(t,o.zoom),a=90===o.rotateDeg?s.clientY:s.clientX;if(!(n.moving&&Math.abs(n.x-a)<r.miniMoveStep)){n.moving=!0,n.x=a;var c=i.computeTime(t);i.triggerCallbacks("dragmove",c,t)}})),mi(pi(i),"onBodyClick",(function(t){t.preventDefault(),t.stopPropagation()})),mi(pi(i),"_mouseDownHandler",(function(t,e){i._state.time=e.currentTime,i.updateWidth(e.currentTime,e.percent,0)})),mi(pi(i),"_mouseUpHandler",(function(t,e){pi(i).pos.moving&&i.updateWidth(e.currentTime,e.percent,2)})),mi(pi(i),"_mouseMoveHandler",(function(t,e){var n=pi(i),r=n._state,o=n.pos,s=n.config,a=n.player;r.time<e.currentTime?e.forward=!0:e.forward=!1,r.time=e.currentTime,o.isDown&&!o.moving&&(o.moving=!0,s.isPauseMoving&&a.pause(),i.triggerCallbacks("dragstart",e,t)),i.updateWidth(e.currentTime,e.percent,1),i.triggerCallbacks("dragmove",e,t)})),mi(pi(i),"onMouseDown",(function(t){var e=pi(i),n=e.player,r=e.pos,o=e.config,s=e.playerConfig,a=Kd.getEventPos(t,n.zoom),c=90===n.rotateDeg?a.clientY:a.clientX;if(!(n.isMini||o.closeMoveSeek||!s.allowSeekAfterEnded&&n.ended)){t.stopPropagation(),i.focus(),Kd.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),Kd.checkIsFunction(o.onMoveStart)&&o.onMoveStart(),Kd.event(t),r.x=c,r.isDown=!0,r.moving=!1,n.focus({autoHide:!1}),i.isProgressMoving=!0,Kd.addClass(i.progressBtn,"active");var l=i.computeTime(t);return i._mouseDownHandlerHook(t,l),"touch"===i.domEventType?(i.root.addEventListener("touchmove",i.onMouseMove),i.root.addEventListener("touchend",i.onMouseUp)):(i.unbind("mousemove",i.onMoveOnly),document.addEventListener("mousemove",i.onMouseMove,!1),document.addEventListener("mouseup",i.onMouseUp,!1),n.root.addEventListener("click",i.onBodyClick,!1)),!0}})),mi(pi(i),"onMouseUp",(function(t){var e=pi(i),n=e.player,r=e.config,o=e.pos,s=e.playerConfig,a=e._state;t.stopPropagation(),t.preventDefault(),Kd.checkIsFunction(s.enableSwipeHandler)&&s.enableSwipeHandler(),Kd.checkIsFunction(r.onMoveEnd)&&r.onMoveEnd(),Kd.event(t),Kd.removeClass(i.progressBtn,"active");var c=i.computeTime(t);o.moving?i.triggerCallbacks("dragend",c,t):i.triggerCallbacks("click",c,t),i._mouseUpHandlerHook(t,c),o.moving=!1,o.isDown=!1,o.x=0,o.y=0,a.time=0,"touch"===i.domEventType?(i.root.removeEventListener("touchmove",i.onMouseMove),i.root.removeEventListener("touchend",i.onMouseUp),i.blur()):(document.removeEventListener("mousemove",i.onMouseMove,!1),document.removeEventListener("mouseup",i.onMouseUp,!1),n.root.removeEventListener("click",i.onBodyClick,!1),o.isEnter?!s.isMobileSimulateMode&&i.bind("mousemove",i.onMoveOnly):i.onMouseLeave(t)),Kd.setTimeout(pi(i),(function(){i.resetSeekState()}),10),n.focus()})),mi(pi(i),"onMouseMove",(function(t){var e=pi(i),n=e.pos,r=e.player,o=e.config;Kd.checkTouchSupport()&&t.preventDefault(),Kd.event(t);var s=Kd.getEventPos(t,r.zoom),a=90===r.rotateDeg?s.clientY:s.clientX,c=Math.abs(n.x-a);if(!(n.moving&&c<o.miniMoveStep||!n.moving&&c<o.miniStartStep)){n.x=a;var l=i.computeTime(t);i._mouseMoveHandlerHook(t,l)}})),mi(pi(i),"onMouseOut",(function(t){i.triggerCallbacks("mouseout",null,t)})),mi(pi(i),"onMouseOver",(function(t){i.triggerCallbacks("mouseover",null,t)})),mi(pi(i),"onMouseEnter",(function(t){var e=pi(i),n=e.player,r=e.pos;i.triggerCallbacks("mouseenter",null,t),r.isDown||r.isEnter||n.isMini||!n.config.allowSeekAfterEnded&&n.ended||(r.isEnter=!0,i.bind("mousemove",i.onMoveOnly),i.bind("mouseleave",i.onMouseLeave),i.focus())})),mi(pi(i),"onMouseLeave",(function(t){i.triggerCallbacks("mouseleave",null,t);var e=pi(i),n=e.player,r=e.pos;r.isEnter=!1,n.isMini||(i.unbind("mousemove",i.onMoveOnly),r.isDown?i.unbind("mouseleave",i.onMouseLeave):i.blur())})),i.useable=!1,i.isProgressMoving=!1,i.__dragCallBacks=[],i._state={now:-1,direc:0,time:0},i._disableBlur=!1,i}return wo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.useable=t}},{key:"createInner",value:function(){var t=this;this.innerList=new ny({fragments:this.config.fragments,style:this.playerConfig.commonStyle||{}}),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map((function(e){t[e]=t.innerList[e].bind(t.innerList)}))}},{key:"afterCreate",value:function(){var t=this;this.config.disable||this.playerConfig.isLive||(this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=this.find("xg-outer"),this.createInner(),"mobile"===tp.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(fp,(function(){t.onTimeupdate()})),this.on(hp,(function(){t.onTimeupdate(),t.onCacheUpdate()})),this.on(bp,(function(){t.onCacheUpdate()})),this.on(ap,(function(){t.onCacheUpdate(),t._state.now=0})),this.on(_p,(function(){t.onReset()})),this.bindDomEvents(),this.initCustomStyle())}},{key:"initCustomStyle",value:function(){var t=(this.playerConfig||{}).commonStyle.sliderBtnStyle,e=this.progressBtn;t&&("string"==typeof t?e.style.boxShadow=t:"object"===di(t)&&Object.keys(t).map((function(n){e.style[n]=t[n]})))}},{key:"triggerCallbacks",value:function(t,e,n){this.__dragCallBacks.length>0&&this.__dragCallBacks.map((function(i){if(i&&i.handler&&i.type===t)try{i.handler(e,n)}catch(t){console.error("[XGPLAYER][triggerCallbacks] ".concat(i," error"),t)}}))}},{key:"addCallBack",value:function(t,e){e&&"function"==typeof e&&this.__dragCallBacks.push({type:t,handler:e})}},{key:"removeCallBack",value:function(t,e){var n=this.__dragCallBacks,i=-1;n.map((function(n,r){n&&n.type===t&&n.handler===e&&(i=r)})),i>-1&&n.splice(i,1)}},{key:"bindDomEvents",value:function(){var t=this.player,e=t.controls,n=t.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),"touch"===this.domEventType?(this.root.addEventListener("touchstart",this.onMouseDown),e&&(e.root&&e.root.addEventListener("touchmove",Kd.stopPropagation),e.center&&e.center.addEventListener("touchend",Kd.stopPropagation))):(this.bind("mousedown",this.onMouseDown),!n.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut))}},{key:"focus",value:function(){Kd.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),Kd.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(t,e,n){var i=this.config,r=this.player;if(!i.isCloseClickSeek||0!==n){var o=t>r.duration?r.duration-.2:Number(t).toFixed(1);this.updatePercent(e),this.updateTime(t),(1!==n||i.isDragingSeek&&"audio"!==r.videoConfig.mediaType)&&(this._state.now=o,this._state.direc=o>r.currentTime?0:1,r.seek(o))}}},{key:"computeTime",value:function(t){var e,n,i,r=this.player,o=this.root.getBoundingClientRect(),s=o.width,a=o.height,c=o.top,l=o.left,u=Kd.getEventPos(t,r.zoom);90===r.rotateDeg?(e=a,n=c,i=u.clientY):(e=s,n=l,i=u.clientX);var h=i-n,f=(h=h>e?e:h<0?0:h)/e;return{percent:f=f<0?0:f>1?1:f,currentTime:parseInt(f*this.duration*1e3,10)/1e3,offset:h,width:e,left:n,e:t}}},{key:"updateTime",value:function(t){var e=this.player,n=this.duration;t>n?t=n:t<0&&(t=0);var i=e.plugins.time;i&&i.updateTime(t)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var t=this.player.plugins.time;t&&t.resetActive()}},{key:"updatePercent",value:function(t,e){if(this.isProgressMoving=!0,!this.config.disable){t=t>1?1:t<0?0:t,this.progressBtn.style.left="".concat(100*t,"%"),this.innerList.update({played:t*this.duration},this.duration);var n=this.player.plugins.miniprogress;n&&n.update({played:t*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(){var t=this.player,e=this._state,n=this.duration;if(!(t.isSeeking||this.isProgressMoving||t.state<6)){if(e.now>-1){var i=parseInt(1e3*e.now,10)-parseInt(1e3*t.currentTime,10);if(0===e.direc&&i>300||1===e.direc&&i>-300)return void(e.now=-1);e.now=-1}var r=this.timeOffset+t.currentTime;this.innerList.update({played:r},n),this.progressBtn.style.left="".concat(r/n*100,"%");var o=this.player.plugins.miniprogress;o&&o.update({played:r},n)}}},{key:"onCacheUpdate",value:function(){var t=this.player,e=this.duration,n=t.bufferedPoint;this.innerList.update({cached:n.end},e);var i=this.player.plugins.miniprogress;i&&i.update({cached:n.end},e)}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var t=this.player.plugins.miniprogress;t&&t.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var t=this.player,e=t.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null,"touch"===this.domEventType?(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),e&&(e.root&&e.root.removeEventListener("touchmove",Kd.stopPropagation),e.center&&e.center.removeEventListener("touchend",Kd.stopPropagation))):(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),t.root.removeEventListener("click",this.onBodyClick,!1))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var t=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===t?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){}}}}]),n}(_v),ry=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return wo(n,[{key:"afterCreate",value:function(){var t=this,e=this.player;this.config.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on(cp,(function(){t.animate(e.paused)})),this.on(op,(function(){t.animate(e.paused)})),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:im,class:"xg-icon-play"},pause:{icon:rm,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(t){t.preventDefault(),t.stopPropagation();var e=this.player;return this.emitUserAction(t,"switch_play_pause",{prop:"paused",from:e.paused,to:!e.paused}),e.ended?e.replay():e.paused?(e.play(),this.animate(!1)):(e.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".xgplayer-icon",t.play),this.appendChild(".xgplayer-icon",t.pause)}},{key:"animate",value:function(t){var e=this.i18nKeys;t?(this.setAttr("data-state","pause"),this.changeLangTextKey(this.find(".xg-tips"),e.PLAY_TIPS)):(this.setAttr("data-state","play"),this.changeLangTextKey(this.find(".xg-tips"),e.PAUSE_TIPS))}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PLAY_TIPS,'">').concat(this.i18n.PLAY_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_LEFT,index:0,disable:!1}}}]),n}(_v);function oy(){return(new DOMParser).parseFromString('<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>\n    </g>\n</svg>',"image/svg+xml").firstChild}var sy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return wo(n,[{key:"afterCreate",value:function(){var t=this;this.initIcons(),this.onClick=function(e){e.preventDefault(),e.stopPropagation(),t.config.onClick(e)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:oy,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(this.root,t.screenBack)}},{key:"show",value:function(){Kd.addClass(this.root,"show")}},{key:"hide",value:function(){Kd.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:vv.ROOT_TOP,index:0}}}]),n}(_v);function ay(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',"image/svg+xml").firstChild}function cy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n',"image/svg+xml").firstChild}var uy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(t=e.call.apply(e,[this].concat(r))),"_onOrientationChange",(function(e){t.player.fullscreen&&t.config.rotateFullscreen&&(90===window.orientation||-90===window.orientation?t.player.setRotateDeg(0):t.player.setRotateDeg(90))})),t}return wo(n,[{key:"afterCreate",value:function(){var t=this,e=this.config,n=this.playerConfig;if(!e.disable){e.target&&(this.playerConfig.fullscreenTarget=this.config.target);var i=Kd.getFullScreenEl();n.fullscreenTarget===i&&this.player.getFullscreen(),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(e){var n=t.player.fullscreen;t.emitUserAction(e,"switch_fullscreen",{prop:"fullscreen",from:n,to:!n})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(jp,(function(e){t.changeLangTextKey(t.find(".xg-tips"),e?t.i18nKeys.EXITFULLSCREEN_TIPS:t.i18nKeys.FULLSCREEN_TIPS),t.animate(e)})),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:sy,options:{config:{onClick:function(e){t.handleFullscreen(e)}}}})),"mobile"===tp.device&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:ay,class:"xg-get-fullscreen"},exitFullscreen:{icon:cy,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon","mobile"===tp.device?"touchend":"click",this.handleFullscreen),"mobile"===tp.device&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".xgplayer-icon",t.fullscreen),this.appendChild(".xgplayer-icon",t.exitFullscreen)}},{key:"toggleFullScreen",value:function(t){t&&(t.preventDefault(),t.stopPropagation());var e=this.player,n=this.config;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(e.fullscreen?e.exitCssFullscreen():e.getCssFullscreen(),this.animate(e.fullscreen)):n.rotateFullscreen?(e.fullscreen?e.exitRotateFullscreen():e.getRotateFullscreen(),this.animate(e.fullscreen)):n.switchCallback&&"function"==typeof n.switchCallback?n.switchCallback(e.fullscreen):e.fullscreen?e.exitFullscreen():e.getFullscreen()}},{key:"animate",value:function(t){t?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(t?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){_o(gi(n.prototype),"show",this).call(this)}},{key:"hide",value:function(){_o(gi(n.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var t="FULLSCREEN_TIPS";return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),n}(_v),ly=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),(i=e.call(this,t)).isActiving=!1,i}return wo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime||0}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var t=this,e=this.player.controls.config.mode;this.mode="flex"===e?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(vp,(function(){t.onTimeUpdate()})),this.on(fp,(function(){t.onTimeUpdate()})),this.on(_p,(function(){t.onReset()})))}},{key:"show",value:function(){"flex"!==this.mode&&_o(gi(n.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(){var t=this.player;if(!(this.config.disable||this.isActiving||t.state<6&&4!==t.state)){var e=this.currentTime+this.timeOffset;"flex"===this.mode?(this.centerCurDom.innerHTML=Kd.format(e),this.duration!==1/0&&this.duration>0&&(this.centerDurDom.innerHTML=Kd.format(this.duration))):(this.timeDom.innerHTML=Kd.format(e),this.duration!==1/0&&this.duration>0&&(this.durationDom.innerHTML=Kd.format(this.duration)))}}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=Kd.format(0),this.centerDurDom.innerHTML=Kd.format(0)):(this.timeDom.innerHTML=Kd.format(0),this.durationDom.innerHTML=Kd.format(0))}},{key:"createCenterTime",value:function(){var t=this.player;if(t.controls&&t.controls.center){var e=t.controls.center;this.centerCurDom=Kd.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=Kd.createDom("xg-icon","00:00",{},"xgplayer-time right"),e.children.length>0?e.insertBefore(this.centerCurDom,e.children[0]):e.appendChild(this.centerCurDom),e.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var t=this.config;this.duration===1/0||this.playerConfig.isLive?(Kd.hide(this.durationDom),Kd.hide(this.timeDom),Kd.hide(this.find(".time-separator")),Kd.show(this.find(".time-live-tag"))):Kd.hide(this.find(".time-live-tag")),t.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(t){t?(Kd.hide(this.durationDom),Kd.hide(this.timeDom),Kd.hide(this.find(".time-separator")),Kd.show(this.find(".time-live-tag"))):(Kd.hide(this.find(".time-live-tag")),Kd.show(this.find(".time-separator")),Kd.show(this.durationDom),Kd.show(this.timeDom))}},{key:"updateTime",value:function(t){this.isActiving=!0,!t&&0!==t||t>this.duration||("flex"!==this.mode?this.timeDom.innerHTML=Kd.format(t):this.centerCurDom.innerHTML=Kd.format(t))}},{key:"resetActive",value:function(){var t=this,e=this.player,n=function(){t.isActiving=!1};this.off(hp,n),e.isSeeking?this.once(hp,n):this.isActiving=!1}},{key:"destroy",value:function(){var t=this.player.controls.center;this.centerCurDom&&t.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&t.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_LEFT,index:2,disable:!1}}}]),n}(_v);function hy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function fy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function dy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n',"image/svg+xml").firstChild}var py=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(t=e.call.apply(e,[this].concat(r))),"onBarMousedown",(function(e){var n=pi(t).player,i=t.find(".xgplayer-slider"),r=t.find(".xgplayer-bar");i.focus(),Kd.event(e);var o=r.getBoundingClientRect(),s=Kd.getEventPos(e,n.zoom),a=o.height-(s.clientY-o.top);if(s.h=a,s.barH=o.height,t.pos=s,!(a<-2))return t.updateVolumePos(a,e),document.addEventListener("mouseup",t.onBarMouseUp),t.isStart=!0,!1})),mi(pi(t),"onBarMouseMove",(function(e){if(t.isStart){var n=pi(t),i=n.pos,r=n.player;e.preventDefault(),e.stopPropagation(),Kd.event(e);var o=Kd.getEventPos(e,r.zoom);t.isMoving=!0;var s=i.h-o.clientY+i.clientY;s>i.barH||t.updateVolumePos(s,e)}})),mi(pi(t),"onBarMouseUp",(function(e){Kd.event(e),document.removeEventListener("mouseup",t.onBarMouseUp),t.isStart=!1,t.isMoving=!1})),mi(pi(t),"onMouseenter",(function(e){t._timerId&&(Kd.clearTimeout(pi(t),t._timerId),t._timerId=null),Kd.addClass(t.root,"slide-show")})),mi(pi(t),"onMouseleave",(function(e){t._timerId&&(Kd.clearTimeout(pi(t),t._timerId),t._timerId=null),t._timerId=Kd.setTimeout(pi(t),(function(){Kd.removeClass(t.root,"slide-show"),t.isStart&&t.onBarMouseUp(e),t._timerId=null}),200)})),mi(pi(t),"onVolumeChange",(function(e){if(t.player){var n=t.player,i=n.muted,r=n.volume;t.isMoving||(t.find(".xgplayer-drag").style.height=i||0===r?"4px":"".concat(100*r,"%"),t.config.showValueLabel&&t.updateVolumeValue()),t.animate(i,r)}})),t}return wo(n,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:fy,class:"xg-volume-small"},volumeLarge:{icon:hy,class:"xg-volume"},volumeMuted:{icon:dy,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var t=this;if(this._timerId=null,!this.config.disable){this.initIcons();var e=this.playerConfig,n=e.commonStyle,i=e.volume;n.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=n.volumeColor),this.changeMutedHandler=this.hook("mutedChange",(function(e){t.changeMuted(e)}),{pre:function(t){t.preventDefault(),t.stopPropagation()}}),"mobile"===tp.device||this.playerConfig.isMobileSimulateMode||(this.bind("mouseenter",this.onMouseenter),this.bind(["blur","mouseleave"],this.onMouseleave),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(gp,this.onVolumeChange),this.once(mp,this.onVolumeChange),"Number"!==Kd.typeOf(i)&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(t,e){var n=this.player,i=this.find(".xgplayer-drag"),r=this.find(".xgplayer-bar");if(r&&i){var o=parseInt(t/r.getBoundingClientRect().height*1e3,10);i.style.height="".concat(t,"px");var s=Math.max(Math.min(o/1e3,1),0),a={volume:{from:n.volume,to:s}};n.muted&&(a.muted={from:!0,to:!1}),this.emitUserAction(e,"change_volume",{muted:n.muted,volume:n.volume,props:a}),n.volume=Math.max(Math.min(o/1e3,1),0),n.muted&&(n.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var t=this.player,e=t.volume,n=t.muted,i=this.find(".xgplayer-value-label"),r=Math.max(Math.min(e,1),0);i.innerText=n?0:Math.ceil(100*r)}},{key:"changeMuted",value:function(t){t&&t.stopPropagation();var e=this.player;this.isStart&&this.onBarMouseUp(t),this.emitUserAction(t,"change_muted",{muted:e.muted,volume:e.volume,props:{muted:{from:e.muted,to:!e.muted}}}),e.volume>0&&(e.muted=!e.muted),e.volume<.01&&(e.volume=this.config.miniVolume)}},{key:"animate",value:function(t,e){t||0===e?this.setAttr("data-state","mute"):e<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".xgplayer-icon",t.volumeSmall),this.appendChild(".xgplayer-icon",t.volumeLarge),this.appendChild(".xgplayer-icon",t.volumeMuted)}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon","mobile"===tp.device?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var t=this.config.default||this.player.volume,e=this.config.showValueLabel;return'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        '.concat(e?'<div class="xgplayer-value-label">'.concat(100*t,"</div>"):"",'\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: ').concat(100*t,'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>')}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),n}(_v);function vy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',"image/svg+xml").firstChild}var gy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),(i=e.call(this,t)).rotateDeg=i.config.rotateDeg||0,i}return wo(n,[{key:"afterCreate",value:function(){var t=this;this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(Dp,(function(){t.rotateDeg&&Kd.setTimeout(t,(function(){t.updateRotateDeg(t.rotateDeg,t.config.innerRotate)}),100)})),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(t){t.preventDefault(),t.stopPropagation(),this.emitUserAction(t,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(t,e){var n=this.player;t||(t=0);var i=this.player,r=i.root,o=i.innerContainer,s=i.video,a=r.offsetWidth,c=o&&e?o.offsetHeight:r.offsetHeight,l="100%",u="100%",h=0,f=0;.75!==t&&.25!==t||(l="".concat(c,"px"),u="".concat(a,"px"),h=-(c-a)/2,f=-(a-c)/2);var d="translate(".concat(h,"px,").concat(f,"px) rotate(").concat(t,"turn)"),p={transformOrigin:"center center",transform:d,webKitTransform:d,height:u,width:l},v=e?s:r,g=e?n.getPlugin("poster"):null;Object.keys(p).map((function(t){v.style[t]=p[t],g&&g.root&&(g.root.style[t]=p[t])}))}},{key:"rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.player;this.rotateDeg||(this.rotateDeg=0);var r=t?1:-1;this.rotateDeg=(this.rotateDeg+1+.25*r*n)%1,this.updateRotateDeg(this.rotateDeg,e),i.emit(Bp,360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:vy}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.ROTATE_TIPS,'">\n      ').concat(this.i18n.ROTATE_TIPS,"\n      </div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),n}(_v);function my(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}function yy(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}var by="picture-in-picture",wy="fullscreen",_y=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(t=e.call.apply(e,[this].concat(r))),"switchPIP",(function(e){if(!t.isPIPAvailable())return!1;e.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(e,"change_pip",{props:"pip",from:!0,to:!1}),t.setAttr("data-state","normal")):4===t.player.video.readyState&&(t.requestPIP(),t.emitUserAction(e,"change_pip",{props:"pip",from:!1,to:!0}),t.setAttr("data-state","pip"))})),t}return wo(n,[{key:"beforeCreate",value:function(t){"boolean"==typeof t.player.config.pip&&(t.config.showIcon=t.player.config.pip)}},{key:"afterCreate",value:function(){var t=this;this.isPIPAvailable()&&(this.pMode="inline",this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(Tp,(function(){t.config.showIcon&&(Kd.removeClass(t.find(".xgplayer-icon"),"xg-icon-disable"),t.bind("click",t.switchPIP))})))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:my,class:"xg-get-pip"},pipIconExit:{icon:yy,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".xgplayer-icon",t.pipIcon),this.appendChild(".xgplayer-icon",t.pipIconExit)}},{key:"initPipEvents",value:function(){var t=this,e=this.player;this.leavePIPCallback=function(){var n=e.paused;Kd.setTimeout(t,(function(){!n&&e.videoPlay()}),0),!n&&e.videoPlay(),t.setAttr("data-state","normal"),e.emit(Mp,!1)},this.enterPIPCallback=function(n){e.emit(Mp,!0),t.pipWindow=n.pictureInPictureWindow,t.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(n){var i=e.video.webkitPresentationMode;t.pMode===wy&&i!==wy&&e.onFullscreenChange(null,!1),t.pMode=i,i===by?t.enterPIPCallback(n):"inline"===i&&t.leavePIPCallback(n)},e.video&&(e.video.addEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.addEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(e.video)&&e.video.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var t=this.player,e=this.playerConfig;if(this.isPIPAvailable()&&!this.isPip)try{var i=e.poster;return i&&(t.video.poster="String"===Kd.typeOf(i)?i:i.poster),n.checkWebkitSetPresentationMode(t.video)?t.video.webkitSetPresentationMode("picture-in-picture"):t.video.requestPictureInPicture(),!0}catch(t){return console.error("requestPiP",t),!1}}},{key:"exitPIP",value:function(){var t=this.player;try{return this.isPIPAvailable()&&this.isPip&&(n.checkWebkitSetPresentationMode(t.video)?t.video.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(t){return console.error("exitPIP",t),!1}}},{key:"isPip",get:function(){var t=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===t.video||t.video.webkitPresentationMode===by}},{key:"isPIPAvailable",value:function(){var t=this.player.video;return("Boolean"!==Kd.typeOf(document.pictureInPictureEnabled)||document.pictureInPictureEnabled)&&("Boolean"===Kd.typeOf(t.disablePictureInPicture)&&!t.disablePictureInPicture||t.webkitSupportsPresentationMode&&"Function"===Kd.typeOf(t.webkitSetPresentationMode))}},{key:"destroy",value:function(){var t=this.player;t.video.removeEventListener("enterpictureinpicture",this.enterPIPCallback),t.video.removeEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(t.video)&&t.video.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon&&this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon xg-icon-disable">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PIP,'">').concat(this.i18n.PIP,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(t){return"function"==typeof t.webkitSetPresentationMode}}]),n}(_v);function ky(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Cy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),mi(pi(i=e.call(this,t)),"playNext",(function(t){var e=pi(i).player;t.preventDefault(),t.stopPropagation(),i.idx+1<i.config.urlList.length?(i.idx++,i.nextHandler(i.config.urlList[i.idx],i.idx),e.emit(Fp,i.idx+1)):(i.nextHandler(),e.emit(Fp))})),i.idx=-1,i}return wo(n,[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:ky}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var t="mobile"===tp.device?"touchend":"click";this.bind(t,this.playNext),this.show()}},{key:"changeSrc",value:function(t){var e=this.player;t&&(e.pause(),e.currentTime=0,e.switchURL?e.switchURL(t):e.src=t,e.config.url=t,e.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="PLAYNEXT_TIPS">'.concat(this.i18n.PLAYNEXT_TIPS,"</div>\n     </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),n}(_v),Oy={exports:{}};!function(t,e){t.exports=function t(e,n,i){var r,o,s=window,a="application/octet-stream",c=i||a,l=e,u=!n&&!i&&l,h=document.createElement("a"),f=function(t){return String(t)},d=s.Blob||s.MozBlob||s.WebKitBlob||f,p=n||"download";if(d=d.call?d.bind(s):Blob,"true"===String(this)&&(c=(l=[l,c])[0],l=l[1]),u&&u.length<2048&&(p=u.split("/").pop().split("?")[0],h.href=u,-1!==h.href.indexOf(u))){var v=new XMLHttpRequest;return v.open("GET",u,!0),v.responseType="blob",v.onload=function(e){t(e.target.response,p,a)},setTimeout((function(){v.send()}),0),v}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&d!==f))return navigator.msSaveBlob?navigator.msSaveBlob(w(l),p):b(l);c=(l=w(l)).type||a}else if(/([\x80-\xff])/.test(l)){for(var g=0,m=new Uint8Array(l.length),y=m.length;g<y;++g)m[g]=l.charCodeAt(g);l=new d([m],{type:c})}function w(t){for(var e=t.split(/[:;,]/),n=e[1],i=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),r=i.length,o=0,s=new Uint8Array(r);o<r;++o)s[o]=i.charCodeAt(o);return new d([s],{type:n})}function b(t,e){if("download"in h)return h.href=t,h.setAttribute("download",p),h.className="download-js-link",h.innerHTML="downloading...",h.style.display="none",document.body.appendChild(h),setTimeout((function(){h.click(),document.body.removeChild(h),!0===e&&setTimeout((function(){s.URL.revokeObjectURL(h.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,a)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,a)),n.src=t,setTimeout((function(){document.body.removeChild(n)}),333)}if(r=l instanceof d?l:new d([l],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(r,p);if(s.URL)b(s.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===f)try{return b("data:"+c+";base64,"+s.btoa(r))}catch(t){return b("data:"+c+","+encodeURIComponent(r))}(o=new FileReader).onload=function(t){b(this.result)},o.readAsDataURL(r)}return!0}}(Oy);var xy=Oy.exports;function Vy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n',"image/svg+xml").firstChild}var Sy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),mi(pi(i=e.call(this,t)),"download",(function(t){if(!i.isLock){i.emitUserAction(t,"download");var e=i.getAbsoluteURL(i.player.src);xy(e),i.isLock=!0,i.timer=window.setTimeout((function(){i.isLock=!1,window.clearTimeout(i.timer),i.timer=null}),300)}})),i.timer=null,i.isLock=!1,i}return wo(n,[{key:"afterCreate",value:function(){this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:Vy}}},{key:"getAbsoluteURL",value:function(t){if(!t.match(/^https?:\/\//)){var e=document.createElement("div");e.innerHTML='<a href="'.concat(t,'">x</a>'),t=e.firstChild.href}return t}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   <div class="xg-tips" lang-key="'.concat(this.i18nKeys.DOWNLOAD_TIPS,'">').concat(this.i18n.DOWNLOAD_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:3,disable:!0}}}]),n}(_v),Ty=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return wo(n,[{key:"beforeCreate",value:function(t){"boolean"==typeof t.player.config.screenShot&&(t.config.disable=!t.player.config.screenShot)}},{key:"afterCreate",value:function(){this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var t=this.config;this.initSize=function(e){t.fitVideo&&(t.width=e.vWidth,t.height=e.vHeight)},this.once(Dp,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(t,e){var n=document.createElement("a");n.href=t,n.download=e;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}},{key:"createCanvans",value:function(t,e){var n=document.createElement("canvas");this.canvasCtx=n.getContext("2d"),this.canvas=n,n.width=t||this.config.width,n.height=e||this.config.height}},{key:"onClickBtn",value:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.emitUserAction(t,"shot"),this.shot().then((function(t){e.emit(Np,t),e.saveScreenShot(t,e.config.name+e.config.format)}))}},{key:"shot",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{quality:.92,type:"image/png"},r=this.config,o=this.player,s=i.quality||r.quality,a=i.type||r.type;return new Promise((function(i,c){n.canvas?(n.canvas.width=t||r.width,n.canvas.height=e||r.height):n.createCanvans(t,e),n.canvasCtx.drawImage(o.video,0,0,t||r.width,e||r.height);var l=n.canvas.toDataURL(a,s).replace(a,"image/octet-stream");i(l=l.replace(/^data:image\/[^;]+/,"data:application/octet-stream"))}))}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.onClickBtn),this.off(Dp,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var t=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",e="SCREENSHOT";return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(t,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</span>")," \n      </div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),n}(_v),Py=function(){function t(e){ui(this,t),this.config=e.config,this.parent=e.root,this.root=Kd.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),e.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var n="mobile"===tp.device?"touchend":"click";this._delegates=_v.delegate.call(this,this.root,"li",n,this.onItemClick)}return wo(t,[{key:"renderItemList",value:function(t){var e=this,n=this.config,i=this.root;t?n.data=t:t=n.data,n.style&&Object.keys(n.style).map((function(t){i.style[t]=n[t]})),t.length>0&&(this.attrKeys=Object.keys(t[0])),this.root.innerHTML="",t.map((function(t,n){var i=t.selected?"option-item selected":"option-item";t["data-index"]=n,e.root.appendChild(Kd.createDom("li","<span>".concat(t.showText,"</span>"),t,i))}))}},{key:"onItemClick",value:function(t){t.delegateTarget||(t.delegateTarget=t.target);var e=t.delegateTarget;if(e&&Kd.hasClass(e,"selected"))return!1;var n="function"==typeof this.config.onItemClick?this.config.onItemClick:null,i=this.root.querySelector(".selected");Kd.addClass(e,"selected"),i&&Kd.removeClass(i,"selected"),n(t,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(e,this.attrKeys)})}},{key:"getAttrObj",value:function(t,e){if(!t||!e)return{};var n={};e.map((function(e){n[e]=t.getAttribute(e)}));var i=t.getAttribute("data-index");return i&&(n.index=Number(i)),n}},{key:"show",value:function(){Kd.removeClass(this.root,"hide"),Kd.addClass(this.root,"active")}},{key:"hide",value:function(){Kd.removeClass(this.root,"active"),Kd.addClass(this.root,"hide")}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map((function(t){t.destroy&&t.destroy()})),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),t}(),Ey="mobile"===tp.device,jy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),(i=e.call(this,t)).isActive=!1,i.curValue=null,i.curIndex=0,i}return wo(n,[{key:"updateLang",value:function(t){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var t=this,e=this.config;Ey&&"middle"!==e.listType&&(e.listType="rightSide"),e.hidePortrait&&Kd.addClass(this.root,"portrait"),this.once(pp,(function(){e.list&&e.list.length>0&&(t.renderItemList(e.list),t.show())})),Ey&&this.on(kp,(function(){t.isActive&&(t.optionsList&&t.optionsList.hide(),t.isActive=!1)})),this.activeEvent=Ey?"touchend":"mouseenter",this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||Kd.addClass(this.root,"show")}},{key:"hide",value:function(){Kd.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(t,e,n){if(void 0===t)return"";var i=this.config.list;return!n&&(n=this.player.lang),e=!e||Kd.isUndefined(t[e])?"text":e,"number"==typeof t&&(t=i[t]),"object"===di(t[e])?t[e][n]||t[e].zh:t[e]||""}},{key:"onEnter",value:function(t){t.preventDefault(),t.stopPropagation(),this.onToggle(!0)}},{key:"onLeave",value:function(t){t.preventDefault(),t.stopPropagation(),this.isActive&&this.onToggle(!1)}},{key:"onToggle",value:function(t){if(this.isActive!==t){var e=this.player.controls,n=this.config.listType;t?("rightSide"===n?e.blur():e.focus(),this.optionsList&&this.optionsList.show()):("rightSide"===n?e.focus():e.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=t}}},{key:"onItemClick",value:function(t,e){t.preventDefault(),t.stopPropagation();var n=this.config,i=n.listType,r=n.list;(Ey||"rightSide"===i)&&this.onToggle(!1),this.curIndex=e.to.index,this.curItem=r[this.curIndex],this.changeCurrentText(),this.onToggle(!1)}},{key:"changeCurrentText",value:function(){var t=this.config.list,e=t[this.curIndex<t.length?this.curIndex:0];e&&(this.find(".icon-text").innerHTML=this.getTextByLang(e,"iconText"))}},{key:"renderItemList",value:function(t,e){var n=this,i=this.config,r=this.optionsList,o=this.player;if("number"==typeof e&&(this.curIndex=e,this.curItem=i.list[e]),r)return r.renderItemList(t),void this.changeCurrentText();var s={config:{data:t||[],className:"rightSide"===i.listType?"right-side":"",onItemClick:function(t,e){n.onItemClick(t,e)}},root:"rightSide"===i.listType?o.root:this.root};this.config.isShowIcon&&(this.optionsList=new Py(s),this.changeCurrentText(),this.show())}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon btn-text">\n    <span class="icon-text"></span>\n    </div>\n   </xg-icon>')}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1}}}]),n}(_v),Ly=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),(i=e.call(this,t)).curTime=0,i.isPaused=!0,i}return wo(n,[{key:"beforeCreate",value:function(t){var e=t.config.list;Array.isArray(e)&&e.length>0&&(t.config.list=e.map((function(t){return!t.text&&t.name&&(t.text=t.name),t.text||(t.text=t.definition),t})))}},{key:"afterCreate",value:function(){var t=this;_o(gi(n.prototype),"afterCreate",this).call(this),this.on("resourceReady",(function(e){t.changeDefinitionList(e)})),this.on(Ip,(function(e){t.renderItemList(t.config.list,e.to)})),this.player.definitionList.length<2&&this.hide()}},{key:"initDefinition",value:function(){var t=this.config,e=t.list,n=t.defaultDefinition;if(e.length>0){var i=null;e.map((function(t){t.definition===n&&(i=t)})),i||(i=e[0]),this.changeDefinition(i)}}},{key:"renderItemList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.list||[],i=arguments.length>1?arguments[1]:void 0,r=i&&i.definition?i.definition:this.config.defaultDefinition;i&&e.forEach((function(t){t.selected=!1}));var o=0,s=e.map((function(e,n){var i={url:e.url,definition:e.definition||"",showText:t.getTextByLang(e)||e.definition,selected:!1};return(e.selected||e.definition&&e.definition===r)&&(i.selected=!0,o=n),i}));_o(gi(n.prototype),"renderItemList",this).call(this,s,o)}},{key:"changeDefinitionList",value:function(t){Array.isArray(t)&&(this.config.list=t.map((function(t){return!t.text&&t.name&&(t.text=t.name),t.text||(t.text=t.definition),t})),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(t,e){this.player.changeDefinition(t,e)}},{key:"onItemClick",value:function(t,e){_o(gi(n.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(t,"change_definition",{from:e.from,to:e.to}),this.player.changeDefinition(e.to,e.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0}}}]),n}(jy),Ry=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),(i=e.call(this,t)).curRate=1,i}return wo(n,[{key:"beforeCreate",value:function(t){var e=t.player.config.playbackRate,n=e?Array.isArray(e)?e:t.config.list:[];Array.isArray(n)&&(t.config.list=n.map((function(t){return"number"==typeof t?t={rate:t,text:"".concat(t,"x")}:!t.text&&t.rate&&(t.text="".concat(t.rate,"x")),t})))}},{key:"afterCreate",value:function(){var t=this;_o(gi(n.prototype),"afterCreate",this).call(this),this.on(yp,(function(){t.curValue!==t.player.playbackRate&&t.renderItemList()})),this.renderItemList()}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&_o(gi(n.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(t,e){_o(gi(n.prototype),"onItemClick",this).apply(this,arguments);var i=t.delegateTarget,r=Number(i.getAttribute("rate"));if(!r||r===this.curValue)return!1;var o={playbackRate:{from:this.player.playbackRate,to:r}};this.emitUserAction(t,"change_rate",{props:o}),this.curValue=r,this.player.playbackRate=r}},{key:"renderItemList",value:function(){var t=this,e=this.player.playbackRate||1;this.curValue=e;var i=0,r=this.config.list.map((function(n,r){var o={rate:n.rate};return o.rate===e&&(o.selected=!0,i=r),o.showText=t.getTextByLang(n),o}));_o(gi(n.prototype),"renderItemList",this).call(this,r,i)}},{key:"destroy",value:function(){_o(gi(n.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1}}}]),n}(jy);function Iy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Ay(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Dy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return wo(n,[{key:"afterCreate",value:function(){var t=this;this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(Lp,(function(e){t.animate(e)})),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(t){t.preventDefault(),t.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var t=this.icons,e=this.find(".xgplayer-icon");e.appendChild(t.cssFullscreen),e.appendChild(t.exitCssFullscreen)}},{key:"btnClick",value:function(t){t.preventDefault(),t.stopPropagation();var e=this.player.isCssfullScreen;this.emitUserAction(t,"switch_cssfullscreen",{cssfullscreen:e}),e?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(t){this.root&&(t?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(t))}},{key:"switchTips",value:function(t){var e=this.i18nKeys;this.changeLangTextKey(this.find(".xg-tips"),t?e.EXITCSSFULLSCREEN_TIPS:e.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:Iy,class:"xg-get-cssfull"},exitCssFullscreen:{icon:Ay,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class=\'xgplayer-cssfullscreen\'>\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.EXITCSSFULLSCREEN_TIPS,'">').concat(this.i18n.CSSFULLSCREEN_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),n}(_v),My=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return wo(n,[{key:"afterCreate",value:function(){var t=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(t){t.preventDefault(),t.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(pp,(function(){t.handleCanPlay()})),this.on(up,(function(e){t.onError(e)}))}},{key:"errorRetry",value:function(t){this.emitUserAction(t,"error_retry",{}),this.player.retry()}},{key:"handleCanPlay",value:function(){Kd.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.player,n=t.errorType,i=e.errorNote?this.i18n[e.errorNote]:"";if(!i)switch(n){case"decoder":i=this.i18n.MEDIA_ERR_DECODE;break;case"network":i=this.i18n.MEDIA_ERR_NETWORK;break;default:i=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=i,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),n}(_v),By=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return wo(n,[{key:"afterCreate",value:function(){var t=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],(function(e){(t.config.onClick||t.customOnClick)&&(e.preventDefault(),e.stopPropagation(),t.customOnClick?t.customOnClick(e):t.config.onClick(e))})),this.player.showPrompt=function(){t.show.apply(t,arguments)},this.player.hidePrompt=function(){t.hide()}}},{key:"setStyle",value:function(t){var e=this;Object.keys(t).map((function(n){e.root.style[n]=t[n]}))}},{key:"show",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(t){this.customOnClick=i;var r=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),Kd.addClass(this.root,"show"),"arrow"===n.mode&&Kd.addClass(this.root,"arrow"),this.find(".xgplayer-prompt-detail").innerHTML="string"==typeof t?t:"".concat(t.text||"")+"".concat(t.highlight?'<i class="highlight">'.concat(t.highlight,"</i>"):""),n.style&&this.setStyle(n.style);var o="boolean"==typeof n.autoHide?n.autoHide:this.config.autoHide;if(o){var s=n.interval||r;this.intervalId=setTimeout((function(){e.hide()}),s)}}}},{key:"hide",value:function(){Kd.removeClass(this.root,"show"),Kd.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(Ag.CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),n}(_v),Ny={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function Fy(t){Object.keys(Ny).map((function(e){void 0===t[e]&&(t[e]=Ny[e])}))}var Hy={initDots:function(){var t=this;this._ispots.map((function(e){t.createDot(e,!1)})),this._ispotsInit=!0},createDot:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player.plugins.progress;if(n&&(e&&(Fy(t),this._ispots.push(t)),this._ispotsInit||!e)){var i=this.calcuPosition(t.time,t.duration),r=t.style||{};r.left="".concat(i.left,"%"),r.width="".concat(i.width,"%");var o="xgspot_".concat(t.id," xgplayer-spot");i.isMini&&(o+=" mini");var s=Kd.createDom("xg-spot",t.template||"",{"data-text":t.text,"data-time":t.time,"data-id":t.id},o);Object.keys(r).map((function(t){s.style[t]=r[t]})),n.outer&&n.outer.appendChild(s)}},findDot:function(t){if(this.player.plugins.progress){var e=this._ispots.filter((function(e,n){return e.id===t}));return e.length>0?e[0]:null}},updateDot:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.player.plugins.progress;if(n){var i=this.findDot(t.id);if(i&&Object.keys(t).map((function(e){i[e]=t[e]})),this._ispotsInit){var r=n.find('xg-spot[data-id="'.concat(t.id,'"]'));if(r){var o=this.calcuPosition(t.time,t.duration),s=t.style||{};s.left="".concat(o.left,"%"),s.width="".concat(o.width,"%"),r.setAttribute("data-text",t.text),r.setAttribute("data-time",t.time),o.isMini?Kd.addClass(r,"mini"):Kd.removeClass(r,"mini"),Object.keys(s).map((function(t){r.style[t]=s[t]})),e&&this.showDot(t.id)}}}},deleteDot:function(t){var e=this._ispots,n=this.player.plugins.progress;if(n){for(var i=[],r=0;r<e.length;r++)e[r].id===t&&i.push(r);for(var o=i.length-1;o>=0;o--)if(e.splice(i[o],1),this._ispotsInit){var s=n.find('xg-spot[data-id="'.concat(t,'"]'));s&&s.parentElement.removeChild(s)}}},deleteAllDots:function(){var t=this.player.plugins.progress;if(t)if(this._ispotsInit){for(var e=t.root.getElementsByTagName("xg-spot"),n=e.length-1;n>=0;n--)t.outer.removeChild(e[n]);this._ispots=[]}else this._ispots=[]},updateAllDots:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.player.plugins.progress;if(n)if(this._ispotsInit){this._ispots=[];var i=n.root.getElementsByTagName("xg-spot"),r=i.length;if(r>e.length)for(var o=r-1;o>e.length-1;o--)n.outer.removeChild(i[o]);e.map((function(e,n){n<r?(i[n].setAttribute("data-id","".concat(e.id)),t._ispots.push(e),t.updateDot(e)):t.createDot(e)}))}else this._ispots=e},getAllDotsDom:function(){var t=this.player.plugins.progress;return t?t.root.getElementsByTagName("xg-spot"):[]},getDotDom:function(t){var e=this.player.plugins.progress;if(e)return e.find('xg-spot[data-id="'.concat(t,'"]'))}},Uy={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver"},$y=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),mi(pi(i=e.call(this,t)),"onMousemove",(function(t){(i._state.f||Kd.hasClass(t.target,"xg-spot-content"))&&(Kd.event(t),t.stopPropagation())})),mi(pi(i),"onMousedown",(function(t){(i._state.f||Kd.hasClass(t.target,"xg-spot-content"))&&(Kd.event(t),t.stopPropagation())})),mi(pi(i),"onDotMouseLeave",(function(t){i._curDot.removeEventListener("mouseleave",i.onDotMouseLeave),i.blurDot(t.target),i._curDot=null;var e=i.player.plugins.progress;e&&e.enableBlur(),i.show()})),mi(pi(i),"onProgressMouseOver",(function(t,e){if(Kd.hasClass(e.target,"xgplayer-spot")&&!i._curDot){i._curDot=e.target,i.focusDot(e.target),i._curDot.children.length>0&&i.hide();var n=i.player.plugins.progress;n&&n.disableBlur(),i._curDot.addEventListener("mouseleave",i.onDotMouseLeave)}})),i._ispots=[],i.videoPreview=null,i.videothumbnail=null,i.thumbnail=null,i._state={now:0,f:!1},i}return wo(n,[{key:"beforeCreate",value:function(t){var e=t.player.plugins.progress;e&&(t.root=e.root)}},{key:"afterCreate",value:function(){var t=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",(function(e,n){n.time&&t.player.seek(n.time)})),function(t){var e=t.config,n=t.player;Object.keys(Hy).map((function(e){t[e]=Hy[e].bind(t)}));var i=n.config.progressDot||e.ispots||[];t._ispots=i.map((function(t){return Fy(t),t})),t._ispotsInit=!1,n.once(vp,(function(){t.initDots()}))}(this)}},{key:"onPluginsReady",value:function(){this.player.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var t=this,e=this.player.plugins.progress;if(e&&(Object.keys(Uy).map((function(n){t[Uy[n]]=t[Uy[n]].bind(t),e.addCallBack(n,t[Uy[n]])})),"mobile"!==tp.device)){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown);var n=this.hook("previewClick",(function(){}));this.handlerPreviewClick=function(e){e.stopPropagation(),n(parseInt(1e3*t._state.now,10)/1e3,e)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(t,e){this.updatePosition(t.offset,t.width,t.currentTime,t.e)}},{key:"onProgressDragStart",value:function(t){console.log("onProgressDragStart"),this.isDrag=!0,this.videoPreview&&Kd.addClass(this.videoPreview,"show")}},{key:"onProgressDragEnd",value:function(t){this.isDrag=!1,this.videoPreview&&Kd.removeClass(this.videoPreview,"show")}},{key:"onProgressClick",value:function(t,e){if(Kd.hasClass(e.target,"xgplayer-spot")){e.stopPropagation(),e.preventDefault();var n={};["time","id","text"].map((function(t){n[t]=e.target.getAttribute("data-".concat(t))})),n.time&&(n.time=Number(n.time)),this.handlerSpotClick(e,n)}}},{key:"updateLinePos",value:function(t,e){var n,i,r=this.root,o=this.previewLine,s=this.timePoint,a="flex"===this.player.controls.mode,c=r.getBoundingClientRect().width,l=s.getBoundingClientRect().width,u=t-c/2;u<0&&!a?(u=0,n=t-c/2,!this.thumbnail&&(i=t-c/2-l/2)):u>e-c&&!a?(n=u-(e-c),!this.thumbnail&&(i=u-(e-c)-l/2),u=e-c):!this.thumbnail&&(i=-l/2),o.style.transform=void 0!==n?"translateX(".concat(n,"px)"):"",s.style.transform=void 0!==i?"translateX(".concat(i,"px)"):"",r.style.transform="translateX(".concat(u,"px)")}},{key:"updateTimeText",value:function(t){var e=this.timeText,n=this.timePoint;e.textContent=t,!this.thumbnail&&(n.textContent=t)}},{key:"updatePosition",value:function(t,e,n,i){var r=this.root,o=this.config,s=this._state;if(r){this.updateLinePos(t,e),s.now=n;var a=Kd.format(n);i&&i.target&&Kd.hasClass(i.target,"xgplayer-spot")?(this.showTips(i.target.getAttribute("data-text"),!1,a),this.focusDot(i.target),s.f=!0,o.isFocusDots&&s.f&&(s.now=parseInt(i.target.getAttribute("data-time"),10))):o.defaultText?(s.f=!1,this.showTips(o.defaultText,!0,a)):(s.f=!1,this.hideTips("")),this.updateTimeText(a),this.updateThumbnails(s.now)}}},{key:"updateThumbnails",value:function(t){var e=this.player,n=this.videoPreview,i=e.plugins.thumbnail;if(i&&i.usable){this.thumbnail&&i.update(this.thumbnail,t,160,90);var r=n&&n.getBoundingClientRect();this.videothumbnail&&i.update(this.videothumbnail,t,r.width,r.height)}}},{key:"changeThumbnail",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==tp.device){var e=this.player,n=this.config,i=e.getPlugin("thumbnail");if(i.changeConfig(t),i&&i.usable&&n.isShowThumbnail){Kd.removeClass(this.root,"short-line no-thumbnail"),this._hasThumnail=!0;var r=this.find(".xg-spot-thumbnail");this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.thumbnail&&r.removeChild(this.thumbnail),this.thumbnail=i.createThumbnail(r,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=Kd.createDom("xg-video-preview","",{},"xgvideo-preview"),e.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}else{Kd.addClass(this.root,"short-line no-thumbnail");var o=this.find(".xg-spot-thumbnail");this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.thumbnail&&o.removeChild(this.thumbnail),this.videothumbnail=null,this.thumbnail=null,this._hasThumnail=!1}}}},{key:"registerThumbnail",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==tp.device){var e=this.player,n=this.config,i=e.getPlugin("thumbnail");if(i&&Object.keys(t).map((function(e){i.config[e]=t[e]})),i&&i.usable&&n.isShowThumbnail){Kd.removeClass(this.root,"short-line no-thumbnail"),this._hasThumnail=!0;var r=this.find(".xg-spot-thumbnail");this.thumbnail=i.createThumbnail(r,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=Kd.createDom("xg-video-preview","",{},"xgvideo-preview"),e.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}else Kd.addClass(this.root,"short-line no-thumbnail")}}},{key:"calcuPosition",value:function(t,e){var n=this.player.plugins.progress,i=this.player,r=n.root.getBoundingClientRect().width,o=i.duration/r*6;return t+e>i.duration&&(e=i.duration-t),i.duration,i.duration,{left:t/i.duration*100,width:e/i.duration*100,isMini:e<o}}},{key:"showDot",value:function(t){var e=this.findDot(t);if(e){var n=this.root.getBoundingClientRect().width,i=e.time/this.player.duration*n;this.updatePosition(i,n,e.time)}}},{key:"focusDot",value:function(t,e){t&&(e||(e=t.getAttribute("data-id")),Kd.addClass(t,"active"),this._activeDotId=e)}},{key:"blurDot",value:function(t){if(!t){var e=this._activeDotId;t=this.getDotDom(e)}t&&(Kd.removeClass(t,"active"),this._activeDotId=null)}},{key:"showTips",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Kd.addClass(this.root,"no-timepoint"),t&&(Kd.addClass(this.find(".xg-spot-content"),"show-text"),e&&"production"===this.config.mode?(Kd.addClass(this.root,"product"),this.tipText.textContent=t):(Kd.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?t:"".concat(n," ").concat(t)))}},{key:"hideTips",value:function(){Kd.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",Kd.removeClass(this.find(".xg-spot-content"),"show-text"),Kd.removeClass(this.root,"product")}},{key:"hide",value:function(){Kd.addClass(this.root,"hide")}},{key:"show",value:function(){Kd.removeClass(this.root,"hide")}},{key:"destroy",value:function(){var t=this,e=this.player.plugins.progress;e&&Object.keys(Uy).map((function(n){e.removeCallBack(n,t[Uy[n]])})),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===tp.device||this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:""}}}]),n}(_v),Gy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),(i=e.call(this,t)).ratio=1,i.interval=-1,i.preloadMark={},i}return wo(n,[{key:"afterCreate",value:function(){var t=this;this.usable&&this.initThumbnail(),this.on([vp],(function(){var e=t.config,n=e.pic_num,i=e.interval;t.usable&&(t.interval=i>0?i:Math.round(1e3*t.player.duration/n)/1e3)}))}},{key:"usable",get:function(){var t=this.config,e=t.urls,n=t.pic_num;return e&&e.length>0&&n>0}},{key:"initThumbnail",value:function(){var t=this.config,e=t.width,n=t.height,i=t.pic_num,r=t.interval;this.ratio=e/n*100,this.interval=r>0?r:Math.round(1e3*this.player.duration/i)/1e3,this.preload(0)}},{key:"getUrlByIndex",value:function(t){return t>=0&&t<this.config.urls.length?this.config.urls[t]:""}},{key:"preload",value:function(t){var e=this,n=this.config.urls,i=n.length;[t-1,t,t+1,t+2].map((function(t){!e.preloadMark[t]&&t>=0&&t<i&&(Kd.preloadImg(n[t]),e.preloadMark[t]=!0)}))}},{key:"getPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.config,r=i.pic_num,o=i.row,s=i.col,a=i.width,c=i.height,l=Math.ceil(t/this.interval),u=(l=l>r?r:l)<o*s?0:Math.ceil(l/(o*s))-1,h=l-u*(s*o),f=h>0?Math.ceil(h/s)-1:0,d=h>0?h-f*s-1:0,p=0,v=0;if(e&&n){var g=e/n;g<a/c?v=(p=e)/(a/c):p=(v=n)*(a/c)}else v=(p=e||a)/(a/c);var m=this.getUrlByIndex(u);return{urlIndex:u,rowIndex:f,colIndex:d,url:m,height:v,width:p,style:{backgroundImage:"url(".concat(m,")"),backgroundSize:"".concat(p*s,"px auto"),backgroundPosition:"-".concat(d*p,"px -").concat(f*v,"px"),width:"".concat(p,"px"),height:"".concat(v,"px")}}}},{key:"update",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=this.config,s=o.pic_num,a=o.urls;if(!(s<1)&&a&&0!==a.length){var c=this.getPosition(e,n,i);this.preload(c.urlIndex),Object.keys(c.style).map((function(e){t.style[e]=c.style[e]})),Object.keys(r).map((function(e){t.style[e]=r[e]}))}}},{key:"changeConfig",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((function(n){void 0!==t.config[n]&&(t.config[n]=e[n])})),this.usable&&this.initThumbnail()}},{key:"createThumbnail",value:function(t,e){var n=Kd.createDom("xg-thumbnail","",{},"thumbnail ".concat(e));return t&&t.appendChild(n),n}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,width:160,height:90,scale:1,className:"",hidePortrait:!1}}}]),n}(_v),Wy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return wo(n,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},e=arguments.length>1?arguments[1]:void 0;e&&this.root&&(t.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(t.cached/e*100,"%")),t.played&&(this.find("xg-mini-progress-played").style.width="".concat(t.played/e*100,"%")))}},{key:"render",value:function(){if(this.playerConfig.progress&&this.playerConfig.miniprogress)return'<xg-mini-progress class="xg-mini-progress">\n    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>\n    </xg-mini-progress>'}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),n}(_v),zy="realtime",qy="firstframe";function Yy(){try{return window.performance.now()}catch(t){return(new Date).getTime()}}function Ky(t){return"safari"!==tp.browser||!/^blob/.test(t.currentSrc)&&!/^blob/.test(t.src)}var Zy=null,Xy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(t=e.call.apply(e,[this].concat(r))),"onLoadedData",(function(){if(t.player){var e=t.player.video;t.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10)}})),mi(pi(t),"start",(function(){var e=t.player.video,n=Yy();Ky(e)&&t.canvasCtx&&(t.stop(),(t.config.mode===zy||n-t.preTime>=t.interval)&&(e&&e.videoWidth&&t.update(e,e.videoWidth,e.videoHeight),t.preTime=n),t.frameId=window.setTimeout((function(){t.start()}),t.interval))})),mi(pi(t),"stop",(function(){t.frameId&&(window.clearTimeout(t.frameId),t.frameId=null)})),t}return wo(n,[{key:"afterCreate",value:function(){var t=this;!0===this.playerConfig.dynamicBg&&(this.config.disable=!1),n.isSupport||(this.config.disable=!0);var e=this.config,i=e.disable,r=e.mode;i||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0},this.isStart=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/this.config.frameRate,10),this.canvas=null,this.canvasCtx=null,this.once(Tp,(function(){t.player&&(t.init(),!t.player.paused&&t.start())})),this.once(mp,this.onLoadedData),this.on(Ep,(function(){t.once(mp,t.onLoadedData)})),r!==qy&&(this.on(op,(function(){t.start()})),this.on(cp,(function(){t.stop()}))),r===qy&&this.once(fp,(function(){var e=t.player.video;e&&Ky(e)&&e.videoWidth&&t.update(e,e.videoWidth,e.videoHeight)})))}},{key:"init",value:function(){var t=this.player,e=this.config;this.canvasFilter=n.supportCanvasFilter();try{var i=this.config.isInnerRender&&t.innerContainer||t.root;i.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg"><canvas>\n        </canvas><xgmask></xgmask></div>'),this.root=i.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=e.filter,this.canvas.style.webkitFilter=e.filter),this.mask=this.find("xgmask"),e.addMask&&(this.mask.style.background=e.maskBg),this.canvasCtx=this.canvas.getContext("2d");var r=this.playerConfig.poster;if(r){var o="String"===Kd.typeOf(r)?r:"String"===Kd.typeOf(r.poster)?r.poster:null;this.updateImg(o)}}catch(t){zd.logError("plugin:DynamicBg",t)}}},{key:"updateImg",value:function(t){var e=this;if(t){var n=this.canvas.getBoundingClientRect(),i=n.width,r=n.height,o=new window.Image;o.onload=function(){e.canvas&&(e.canvas.height=r,e.canvas.width=i,o=null)},o.src=t}}},{key:"update",value:function(t,e,n){if(this.canvas&&this.canvasCtx&&this.videoPI)try{var i=this._pos,r=this.config,o=this.canvas.getBoundingClientRect(),s=o.width,a=o.height;if(this.videoPI=parseInt(e/n*100,10),s!==i.width||a!==i.height){var c=parseInt(s/a*100,10);i.width=this.canvas.width=s,i.height=this.canvas.height=a;var l=a,u=s;c<this.videoPI?u=parseInt(a*this.videoPI/100,10):c>this.videoPI&&(l=parseInt(100*s/this.videoPI,10)),c<this.videoPI?u=parseInt(a*this.videoPI/100,10):c>this.videoPI&&(l=parseInt(100*s/this.videoPI,10)),i.rwidth=1.2*u,i.rheight=1.2*l,i.x=(s-i.rwidth)/2,i.y=(a-i.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=r.filter),this.canvasCtx.drawImage(t,i.x,i.y,i.rwidth,i.rheight)}catch(t){zd.logError("plugin:DynamicBg",t)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,mode:"framerate",frameRate:10,filter:"blur(50px)",addMask:!0,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return"boolean"==typeof Zy?Zy:Zy=function(){try{return!!document.createElement("canvas").getContext}catch(t){return!1}}()}},{key:"supportCanvasFilter",value:function(){return!("safari"===tp.browser||"firefox"===tp.browser)}}]),n}(_v),Jy={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}},Qy=o,tb=pt("iterator"),eb=!Qy((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,i){e.delete("b"),n+=i+t})),!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[tb]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),nb=Bt,ib=Lc,rb=Bi,ob=q,sb=function(t,e,n,i){try{return i?e(nb(n)[0],n[1]):e(n)}catch(e){throw ib(t),e}},ab=Vc,cb=Ae,ub=po,lb=Ec,hb=2147483647,fb=/[^\0-\u007E]/,db=/[.\u3002\uFF0E\uFF61]/g,pb="Overflow: input needs wider integers to process",vb=Math.floor,gb=String.fromCharCode,mb=function(t){return t+22+75*(t<26)},yb=function(t,e,n){var i=0;for(t=n?vb(t/700):t>>1,t+=vb(t/e);t>455;i+=36)t=vb(t/35);return vb(i+36*t/(t+38))},bb=function(t){var e,n,i=[],r=(t=function(t){for(var e=[],n=0,i=t.length;n<i;){var r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&r)<<10)+(1023&o)+65536):(e.push(r),n--)}else e.push(r)}return e}(t)).length,o=128,s=0,a=72;for(e=0;e<t.length;e++)(n=t[e])<128&&i.push(gb(n));var c=i.length,l=c;for(c&&i.push("-");l<r;){var u=hb;for(e=0;e<t.length;e++)(n=t[e])>=o&&n<u&&(u=n);var h=l+1;if(u-o>vb((hb-s)/h))throw RangeError(pb);for(s+=(u-o)*h,o=u,e=0;e<t.length;e++){if((n=t[e])<o&&++s>hb)throw RangeError(pb);if(n==o){for(var f=s,d=36;;d+=36){var p=d<=a?1:d>=a+26?26:d-a;if(f<p)break;var v=f-p,g=36-p;i.push(gb(mb(p+v%g))),f=vb(v/g)}i.push(gb(mb(f))),a=yb(s,h,l==c),s=0,++l}}++s,++o}return i.join("")},wb=Bt,_b=Ec,kb=xn,Cb=V,Ob=eb,xb=qt.exports,Vb=fc,Sb=Di,Tb=Uv,Pb=we,Eb=_c,jb=Q,Lb=Bi,Rb=rc,Ib=Bt,Ab=C,Db=_i,Mb=zn,Bb=d,Nb=function(t){var e=_b(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return wb(e.call(t))},Fb=Ec,Hb=pt,Ub=Cb("fetch"),$b=Cb("Request"),Gb=$b&&$b.prototype,Wb=Cb("Headers"),zb=Hb("iterator"),qb="URLSearchParams",Yb="URLSearchParamsIterator",Kb=Pb.set,Zb=Pb.getterFor(qb),Xb=Pb.getterFor(Yb),Jb=/\+/g,Qb=Array(4),tw=function(t){return Qb[t-1]||(Qb[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},ew=function(t){try{return decodeURIComponent(t)}catch(e){return t}},nw=function(t){var e=t.replace(Jb," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(tw(n--),ew);return e}},iw=/[!'()~]|%20/g,rw={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ow=function(t){return rw[t]},sw=function(t){return encodeURIComponent(t).replace(iw,ow)},aw=function(t,e){if(e)for(var n,i,r=e.split("&"),o=0;o<r.length;)(n=r[o++]).length&&(i=n.split("="),t.push({key:nw(i.shift()),value:nw(i.join("="))}))},cw=function(t){this.entries.length=0,aw(this.entries,t)},uw=function(t,e){if(t<e)throw TypeError("Not enough arguments")},lw=Tb((function(t,e){Kb(this,{type:Yb,iterator:Nb(Zb(t).entries),kind:e})}),"Iterator",(function(){var t=Xb(this),e=t.kind,n=t.iterator.next(),i=n.value;return n.done||(n.value="keys"===e?i.key:"values"===e?i.value:[i.key,i.value]),n})),hw=function(){Eb(this,hw,qb);var t,e,n,i,r,o,s,a,c,l=arguments.length>0?arguments[0]:void 0,u=this,h=[];if(Kb(u,{type:qb,entries:h,updateURL:function(){},updateSearchParams:cw}),void 0!==l)if(Ab(l))if("function"==typeof(t=Fb(l)))for(n=(e=t.call(l)).next;!(i=n.call(e)).done;){if((s=(o=(r=Nb(Ib(i.value))).next).call(r)).done||(a=o.call(r)).done||!o.call(r).done)throw TypeError("Expected sequence with length 2");h.push({key:Db(s.value),value:Db(a.value)})}else for(c in l)jb(l,c)&&h.push({key:c,value:Db(l[c])});else aw(h,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:Db(l))},fw=hw.prototype;if(Vb(fw,{append:function(t,e){uw(arguments.length,2);var n=Zb(this);n.entries.push({key:Db(t),value:Db(e)}),n.updateURL()},delete:function(t){uw(arguments.length,1);for(var e=Zb(this),n=e.entries,i=Db(t),r=0;r<n.length;)n[r].key===i?n.splice(r,1):r++;e.updateURL()},get:function(t){uw(arguments.length,1);for(var e=Zb(this).entries,n=Db(t),i=0;i<e.length;i++)if(e[i].key===n)return e[i].value;return null},getAll:function(t){uw(arguments.length,1);for(var e=Zb(this).entries,n=Db(t),i=[],r=0;r<e.length;r++)e[r].key===n&&i.push(e[r].value);return i},has:function(t){uw(arguments.length,1);for(var e=Zb(this).entries,n=Db(t),i=0;i<e.length;)if(e[i++].key===n)return!0;return!1},set:function(t,e){uw(arguments.length,1);for(var n,i=Zb(this),r=i.entries,o=!1,s=Db(t),a=Db(e),c=0;c<r.length;c++)(n=r[c]).key===s&&(o?r.splice(c--,1):(o=!0,n.value=a));o||r.push({key:s,value:a}),i.updateURL()},sort:function(){var t,e,n,i=Zb(this),r=i.entries,o=r.slice();for(r.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(r[e].key>t.key){r.splice(e,0,t);break}e===n&&r.push(t)}i.updateURL()},forEach:function(t){for(var e,n=Zb(this).entries,i=Lb(t,arguments.length>1?arguments[1]:void 0,3),r=0;r<n.length;)i((e=n[r++]).value,e.key,this)},keys:function(){return new lw(this,"keys")},values:function(){return new lw(this,"values")},entries:function(){return new lw(this,"entries")}},{enumerable:!0}),xb(fw,zb,fw.entries),xb(fw,"toString",(function(){for(var t,e=Zb(this).entries,n=[],i=0;i<e.length;)t=e[i++],n.push(sw(t.key)+"="+sw(t.value));return n.join("&")}),{enumerable:!0}),Sb(hw,qb),kb({global:!0,forced:!Ob},{URLSearchParams:hw}),!Ob&&"function"==typeof Wb){var dw=function(t){if(Ab(t)){var e,n=t.body;if(Rb(n)===qb)return(e=t.headers?new Wb(t.headers):new Wb).has("content-type")||e.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),Mb(t,{body:Bb(0,String(n)),headers:Bb(0,e)})}return t};if("function"==typeof Ub&&kb({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Ub(t,arguments.length>1?dw(arguments[1]):{})}}),"function"==typeof $b){var pw=function(t){return Eb(this,pw,"Request"),new $b(t,arguments.length>1?dw(arguments[1]):{})};Gb.constructor=pw,pw.prototype=Gb,kb({global:!0,forced:!0},{Request:pw})}}var vw,gw={URLSearchParams:hw,getState:Zb},mw=xn,yw=c,bw=eb,ww=r,_w=Rn,kw=qt.exports,Cw=_c,Ow=Q,xw=zh,Vw=function(t){var e,n,i,r,o,s,a=ob(t),c="function"==typeof this?this:Array,l=arguments.length,u=l>1?arguments[1]:void 0,h=void 0!==u,f=lb(a),d=0;if(h&&(u=rb(u,l>2?arguments[2]:void 0,2)),null==f||c==Array&&ab(f))for(n=new c(e=cb(a.length));e>d;d++)s=h?u(a[d],d):a[d],ub(n,d,s);else for(o=(r=f.call(a)).next,n=new c;!(i=o.call(r)).done;d++)s=h?sb(r,u,[i.value,d],!0):i.value,ub(n,d,s);return n.length=d,n},Sw=pa.codeAt,Tw=_i,Pw=Di,Ew=gw,jw=we,Lw=ww.URL,Rw=Ew.URLSearchParams,Iw=Ew.getState,Aw=jw.set,Dw=jw.getterFor("URL"),Mw=Math.floor,Bw=Math.pow,Nw="Invalid scheme",Fw="Invalid host",Hw="Invalid port",Uw=/[A-Za-z]/,$w=/[\d+-.A-Za-z]/,Gw=/\d/,Ww=/^0x/i,zw=/^[0-7]+$/,qw=/^\d+$/,Yw=/^[\dA-Fa-f]+$/,Kw=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Zw=/[\0\t\n\r #/:<>?@[\\\]^|]/,Xw=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Jw=/[\t\n\r]/g,Qw=function(t,e){var n,i,r;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return Fw;if(!(n=e_(e.slice(1,-1))))return Fw;t.host=n}else if(u_(t)){if(e=function(t){var e,n,i=[],r=t.toLowerCase().replace(db,".").split(".");for(e=0;e<r.length;e++)n=r[e],i.push(fb.test(n)?"xn--"+bb(n):n);return i.join(".")}(e),Kw.test(e))return Fw;if(null===(n=t_(e)))return Fw;t.host=n}else{if(Zw.test(e))return Fw;for(n="",i=Vw(e),r=0;r<i.length;r++)n+=a_(i[r],i_);t.host=n}},t_=function(t){var e,n,i,r,o,s,a,c=t.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(e=c.length)>4)return t;for(n=[],i=0;i<e;i++){if(""==(r=c[i]))return t;if(o=10,r.length>1&&"0"==r.charAt(0)&&(o=Ww.test(r)?16:8,r=r.slice(8==o?1:2)),""===r)s=0;else{if(!(10==o?qw:8==o?zw:Yw).test(r))return t;s=parseInt(r,o)}n.push(s)}for(i=0;i<e;i++)if(s=n[i],i==e-1){if(s>=Bw(256,5-e))return null}else if(s>255)return null;for(a=n.pop(),i=0;i<n.length;i++)a+=n[i]*Bw(256,3-i);return a},e_=function(t){var e,n,i,r,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,u=null,h=0,f=function(){return t.charAt(h)};if(":"==f()){if(":"!=t.charAt(1))return;h+=2,u=++l}for(;f();){if(8==l)return;if(":"!=f()){for(e=n=0;n<4&&Yw.test(f());)e=16*e+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,l>6)return;for(i=0;f();){if(r=null,i>0){if(!("."==f()&&i<4))return;h++}if(!Gw.test(f()))return;for(;Gw.test(f());){if(o=parseInt(f(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;h++}c[l]=256*c[l]+r,2!=++i&&4!=i||l++}if(4!=i)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;c[l++]=e}else{if(null!==u)return;h++,u=++l}}if(null!==u)for(s=l-u,l=7;0!=l&&s>0;)a=c[l],c[l--]=c[u+s-1],c[u+--s]=a;else if(8!=l)return;return c},n_=function(t){var e,n,i,r;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=Mw(t/256);return e.join(".")}if("object"==typeof t){for(e="",i=function(t){for(var e=null,n=1,i=null,r=0,o=0;o<8;o++)0!==t[o]?(r>n&&(e=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(e=i,n=r),e}(t),n=0;n<8;n++)r&&0===t[n]||(r&&(r=!1),i===n?(e+=n?":":"::",r=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},i_={},r_=xw({},i_,{" ":1,'"':1,"<":1,">":1,"`":1}),o_=xw({},r_,{"#":1,"?":1,"{":1,"}":1}),s_=xw({},o_,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),a_=function(t,e){var n=Sw(t,0);return n>32&&n<127&&!Ow(e,t)?t:encodeURIComponent(t)},c_={ftp:21,file:null,http:80,https:443,ws:80,wss:443},u_=function(t){return Ow(c_,t.scheme)},l_=function(t){return""!=t.username||""!=t.password},h_=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},f_=function(t,e){var n;return 2==t.length&&Uw.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},d_=function(t){var e;return t.length>1&&f_(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},p_=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&f_(e[0],!0)||e.pop()},v_=function(t){return"."===t||"%2e"===t.toLowerCase()},g_={},m_={},y_={},b_={},w_={},__={},k_={},C_={},O_={},x_={},V_={},S_={},T_={},P_={},E_={},j_={},L_={},R_={},I_={},A_={},D_={},M_=function(t,e,n,i){var r,o,s,a,c,l=n||g_,u=0,h="",f=!1,d=!1,p=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(Xw,"")),e=e.replace(Jw,""),r=Vw(e);u<=r.length;){switch(o=r[u],l){case g_:if(!o||!Uw.test(o)){if(n)return Nw;l=y_;continue}h+=o.toLowerCase(),l=m_;break;case m_:if(o&&($w.test(o)||"+"==o||"-"==o||"."==o))h+=o.toLowerCase();else{if(":"!=o){if(n)return Nw;h="",l=y_,u=0;continue}if(n&&(u_(t)!=Ow(c_,h)||"file"==h&&(l_(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=h,n)return void(u_(t)&&c_[t.scheme]==t.port&&(t.port=null));h="","file"==t.scheme?l=P_:u_(t)&&i&&i.scheme==t.scheme?l=b_:u_(t)?l=C_:"/"==r[u+1]?(l=w_,u++):(t.cannotBeABaseURL=!0,t.path.push(""),l=I_)}break;case y_:if(!i||i.cannotBeABaseURL&&"#"!=o)return Nw;if(i.cannotBeABaseURL&&"#"==o){t.scheme=i.scheme,t.path=i.path.slice(),t.query=i.query,t.fragment="",t.cannotBeABaseURL=!0,l=D_;break}l="file"==i.scheme?P_:__;continue;case b_:if("/"!=o||"/"!=r[u+1]){l=__;continue}l=O_,u++;break;case w_:if("/"==o){l=x_;break}l=R_;continue;case __:if(t.scheme=i.scheme,o==vw)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query;else if("/"==o||"\\"==o&&u_(t))l=k_;else if("?"==o)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query="",l=A_;else{if("#"!=o){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.path.pop(),l=R_;continue}t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query,t.fragment="",l=D_}break;case k_:if(!u_(t)||"/"!=o&&"\\"!=o){if("/"!=o){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,l=R_;continue}l=x_}else l=O_;break;case C_:if(l=O_,"/"!=o||"/"!=h.charAt(u+1))continue;u++;break;case O_:if("/"!=o&&"\\"!=o){l=x_;continue}break;case x_:if("@"==o){f&&(h="%40"+h),f=!0,s=Vw(h);for(var v=0;v<s.length;v++){var g=s[v];if(":"!=g||p){var m=a_(g,s_);p?t.password+=m:t.username+=m}else p=!0}h=""}else if(o==vw||"/"==o||"?"==o||"#"==o||"\\"==o&&u_(t)){if(f&&""==h)return"Invalid authority";u-=Vw(h).length+1,h="",l=V_}else h+=o;break;case V_:case S_:if(n&&"file"==t.scheme){l=j_;continue}if(":"!=o||d){if(o==vw||"/"==o||"?"==o||"#"==o||"\\"==o&&u_(t)){if(u_(t)&&""==h)return Fw;if(n&&""==h&&(l_(t)||null!==t.port))return;if(a=Qw(t,h))return a;if(h="",l=L_,n)return;continue}"["==o?d=!0:"]"==o&&(d=!1),h+=o}else{if(""==h)return Fw;if(a=Qw(t,h))return a;if(h="",l=T_,n==S_)return}break;case T_:if(!Gw.test(o)){if(o==vw||"/"==o||"?"==o||"#"==o||"\\"==o&&u_(t)||n){if(""!=h){var y=parseInt(h,10);if(y>65535)return Hw;t.port=u_(t)&&y===c_[t.scheme]?null:y,h=""}if(n)return;l=L_;continue}return Hw}h+=o;break;case P_:if(t.scheme="file","/"==o||"\\"==o)l=E_;else{if(!i||"file"!=i.scheme){l=R_;continue}if(o==vw)t.host=i.host,t.path=i.path.slice(),t.query=i.query;else if("?"==o)t.host=i.host,t.path=i.path.slice(),t.query="",l=A_;else{if("#"!=o){d_(r.slice(u).join(""))||(t.host=i.host,t.path=i.path.slice(),p_(t)),l=R_;continue}t.host=i.host,t.path=i.path.slice(),t.query=i.query,t.fragment="",l=D_}}break;case E_:if("/"==o||"\\"==o){l=j_;break}i&&"file"==i.scheme&&!d_(r.slice(u).join(""))&&(f_(i.path[0],!0)?t.path.push(i.path[0]):t.host=i.host),l=R_;continue;case j_:if(o==vw||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&f_(h))l=R_;else if(""==h){if(t.host="",n)return;l=L_}else{if(a=Qw(t,h))return a;if("localhost"==t.host&&(t.host=""),n)return;h="",l=L_}continue}h+=o;break;case L_:if(u_(t)){if(l=R_,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=vw&&(l=R_,"/"!=o))continue}else t.fragment="",l=D_;else t.query="",l=A_;break;case R_:if(o==vw||"/"==o||"\\"==o&&u_(t)||!n&&("?"==o||"#"==o)){if(".."===(c=(c=h).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(p_(t),"/"==o||"\\"==o&&u_(t)||t.path.push("")):v_(h)?"/"==o||"\\"==o&&u_(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&f_(h)&&(t.host&&(t.host=""),h=h.charAt(0)+":"),t.path.push(h)),h="","file"==t.scheme&&(o==vw||"?"==o||"#"==o))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==o?(t.query="",l=A_):"#"==o&&(t.fragment="",l=D_)}else h+=a_(o,o_);break;case I_:"?"==o?(t.query="",l=A_):"#"==o?(t.fragment="",l=D_):o!=vw&&(t.path[0]+=a_(o,i_));break;case A_:n||"#"!=o?o!=vw&&("'"==o&&u_(t)?t.query+="%27":t.query+="#"==o?"%23":a_(o,i_)):(t.fragment="",l=D_);break;case D_:o!=vw&&(t.fragment+=a_(o,r_))}u++}},B_=function(t){var e,n,i=Cw(this,B_,"URL"),r=arguments.length>1?arguments[1]:void 0,o=Tw(t),s=Aw(i,{type:"URL"});if(void 0!==r)if(r instanceof B_)e=Dw(r);else if(n=M_(e={},Tw(r)))throw TypeError(n);if(n=M_(s,o,null,e))throw TypeError(n);var a=s.searchParams=new Rw,c=Iw(a);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(a)||null},yw||(i.href=F_.call(i),i.origin=H_.call(i),i.protocol=U_.call(i),i.username=$_.call(i),i.password=G_.call(i),i.host=W_.call(i),i.hostname=z_.call(i),i.port=q_.call(i),i.pathname=Y_.call(i),i.search=K_.call(i),i.searchParams=Z_.call(i),i.hash=X_.call(i))},N_=B_.prototype,F_=function(){var t=Dw(this),e=t.scheme,n=t.username,i=t.password,r=t.host,o=t.port,s=t.path,a=t.query,c=t.fragment,l=e+":";return null!==r?(l+="//",l_(t)&&(l+=n+(i?":"+i:"")+"@"),l+=n_(r),null!==o&&(l+=":"+o)):"file"==e&&(l+="//"),l+=t.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},H_=function(){var t=Dw(this),e=t.scheme,n=t.port;if("blob"==e)try{return new B_(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&u_(t)?e+"://"+n_(t.host)+(null!==n?":"+n:""):"null"},U_=function(){return Dw(this).scheme+":"},$_=function(){return Dw(this).username},G_=function(){return Dw(this).password},W_=function(){var t=Dw(this),e=t.host,n=t.port;return null===e?"":null===n?n_(e):n_(e)+":"+n},z_=function(){var t=Dw(this).host;return null===t?"":n_(t)},q_=function(){var t=Dw(this).port;return null===t?"":String(t)},Y_=function(){var t=Dw(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},K_=function(){var t=Dw(this).query;return t?"?"+t:""},Z_=function(){return Dw(this).searchParams},X_=function(){var t=Dw(this).fragment;return t?"#"+t:""},J_=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(yw&&_w(N_,{href:J_(F_,(function(t){var e=Dw(this),n=Tw(t),i=M_(e,n);if(i)throw TypeError(i);Iw(e.searchParams).updateSearchParams(e.query)})),origin:J_(H_),protocol:J_(U_,(function(t){var e=Dw(this);M_(e,Tw(t)+":",g_)})),username:J_($_,(function(t){var e=Dw(this),n=Vw(Tw(t));if(!h_(e)){e.username="";for(var i=0;i<n.length;i++)e.username+=a_(n[i],s_)}})),password:J_(G_,(function(t){var e=Dw(this),n=Vw(Tw(t));if(!h_(e)){e.password="";for(var i=0;i<n.length;i++)e.password+=a_(n[i],s_)}})),host:J_(W_,(function(t){var e=Dw(this);e.cannotBeABaseURL||M_(e,Tw(t),V_)})),hostname:J_(z_,(function(t){var e=Dw(this);e.cannotBeABaseURL||M_(e,Tw(t),S_)})),port:J_(q_,(function(t){var e=Dw(this);h_(e)||(""==(t=Tw(t))?e.port=null:M_(e,t,T_))})),pathname:J_(Y_,(function(t){var e=Dw(this);e.cannotBeABaseURL||(e.path=[],M_(e,Tw(t),L_))})),search:J_(K_,(function(t){var e=Dw(this);""==(t=Tw(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",M_(e,t,A_)),Iw(e.searchParams).updateSearchParams(e.query)})),searchParams:J_(Z_),hash:J_(X_,(function(t){var e=Dw(this);""!=(t=Tw(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",M_(e,t,D_)):e.fragment=null}))}),kw(N_,"toJSON",(function(){return F_.call(this)}),{enumerable:!0}),kw(N_,"toString",(function(){return F_.call(this)}),{enumerable:!0}),Lw){var Q_=Lw.createObjectURL,tk=Lw.revokeObjectURL;Q_&&kw(B_,"createObjectURL",(function(t){return Q_.apply(Lw,arguments)})),tk&&kw(B_,"revokeObjectURL",(function(t){return tk.apply(Lw,arguments)}))}function ek(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function nk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ek(Object(n),!0).forEach((function(e){mi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Pw(B_,"URL"),mw({global:!0,forced:!bw,sham:!yw},{URL:B_});var ik=Gp,rk=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mi(pi(t=e.call.apply(e,[this].concat(r))),"_recordUserActions",(function(e){var n=t._getTime(),i=Object.assign({},e,{msg:e.msg||e.action});t._stats.info.push(nk(nk({type:"userAction"},n),{},{payload:i}))})),mi(pi(t),"_onReset",(function(){t.reset()})),mi(pi(t),"_recordInfo",(function(e){t.info(e)})),mi(pi(t),"_downloadStats",(function(){var e=t.getStats(),n=new Blob([JSON.stringify(e)],{type:"application/json"}),i=window.URL.createObjectURL(n),r=document.createElement("a");r.style.display="none",r.href=i,console.log("linkhref",i),r.download="player.txt",r.disabled=!1,r.click()})),t}return wo(n,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:(new Date).toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(Up,this._recordUserActions),this.on(ik.STATS_INFO,this._recordInfo),this.on(ik.STATS_DOWNLOAD,this._downloadStats),this.on(ik.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(t){t.profile?this._infoProfile(t):this._info(t)}},{key:"_info",value:function(t){var e=this._getTime();this._stats.info.push(nk(nk({},e),{},{payload:t}))}},{key:"_infoProfile",value:function(t){if(t&&t.startMs){var e=nk({cat:"function",dur:Date.now()-t.startMs,name:t.name||t.msg,ph:"X",pid:0,tid:0,ts:t.startMs,profile:!0},t);this._info(e)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var t;this._stats=(mi(t={},"info",[]),mi(t,"media",{}),t)}},{key:"getStats",value:function(){for(var t=this.player.video,e=[],n=0;n<t.buffered.length;n++)e.push({start:t.buffered.start(n),end:t.buffered.end(n)});var i={currentTime:t.currentTime,readyState:t.readyState,buffered:e,paused:t.paused,ended:t.ended};return this._stats.media=i,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){return this._stats.info.map((function(t){var e=t.payload.data,n="";try{e instanceof Error?n=e.msg:void 0!==e&&(n=JSON.stringify(e))}catch(t){console.log("err",t)}return"[".concat(t.timeFormat,"] : ").concat(t.payload.msg," ").concat(n," ")}))}},{key:"_getProfile",value:function(){var t={traceEvents:[]};return this._stats.info.forEach((function(e){e.payload.profile&&t.traceEvents.push(e.payload)})),t}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),n}(uv),ok=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return n}(Kg);return mi(ok,"defaultPreset",(function t(e,n){var i,r,o;ui(this,t);var s=n&&n.isMobileSimulateMode,a=n.isLive,c=[].concat(a?[]:[iy,Wy,$y,ly],[ry,uy,gy,Cy,Ly,Ry,Sy,Ty,py,_y]),l=[tm,nm,sm,Km,am,My,By,Gy,gm];this.plugins=[rk,Jg].concat(Xh(c),l);var u=s?"mobile":tp.device;switch(u){case"pc":(i=this.plugins).push.apply(i,[qm,bm,Dy]);break;case"mobile":(r=this.plugins).push.apply(r,[$m]);break;default:(o=this.plugins).push.apply(o,[qm,bm,Dy])}(tp.os.isIpad||"pc"===u)&&this.plugins.push(Xy),tp.os.isIpad&&this.plugins.push(bm),this.ignores=[],this.i18n=[Jy]})),mi(ok,"Util",Kd),mi(ok,"Sniffer",tp),mi(ok,"Errors",ip),mi(ok,"Events",Wp),mi(ok,"Plugin",_v),mi(ok,"BasePlugin",uv),mi(ok,"I18N",Wg),mi(ok,"STATE_CLASS",Ag),ok}()}).call(this,n(76))},1637:function(t,e,n){"use strict";n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return v})),n.d(e,"c",(function(){return y})),n.d(e,"b",(function(){return _}));n(21);var r=n(5),o=n(123),c=n(34),l=n(7),h=n(9),f=n(181);function d(t){var e=Object(f.j)({maxDurationMS:9e4}),n=e.stayDuration,d=e.isCancelled,v=e.cancel;function m(){return(m=Object(r.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!d.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,o.a.AddPointReport({growth_type:c.GrowthType.JScore,task_id:c.GrowthTaskID.ViewContent,item_id:e});case 5:(n=t.sent).err_no!==h.ERROR_NO.OK?console.warn("error reportViewContentJScore reason:".concat(n.err_msg)):v(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.warn("error reportViewContentJScore err:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}Object(l.z)((function(){n.value>=9e4&&function(t){m.apply(this,arguments)}(t)}))}function v(){return m.apply(this,arguments)}function m(){return(m=Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.AddPointReport({growth_type:c.GrowthType.JScore,task_id:c.GrowthTaskID.BindPhone,item_id:"0"});case 3:(e=t.sent).err_no!==h.ERROR_NO.OK&&console.warn("error reportBindPhoneJScore reason:".concat(e.err_msg)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn("error reportBindPhoneJScore err:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function y(){return w.apply(this,arguments)}function w(){return(w=Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.AddPointReport({growth_type:c.GrowthType.JScore,task_id:c.GrowthTaskID.UploadFavicon,item_id:"0"});case 3:(e=t.sent).err_no!==h.ERROR_NO.OK&&console.warn("error reportUploadAvatarJScore reason:".concat(e.err_msg)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn("error reportUploadAvatarJScore err:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function _(){return k.apply(this,arguments)}function k(){return(k=Object(r.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.a.AddPointReport({growth_type:c.GrowthType.JScore,task_id:c.GrowthTaskID.ModifyScreenName,item_id:"0"});case 3:(e=t.sent).err_no!==h.ERROR_NO.OK&&console.warn("error reportModifyScreenNameJScore reason:".concat(e.err_msg)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn("error reportModifyScreenNameJScore err:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}},1647:function(t,e,n){"use strict";n(39);var r=n(7),o=n(1652),c=n.n(o),l=n(1653),h=n.n(l),f=Object(r.b)({components:{LabelLeftIcon:c.a,LabelRightIcon:h.a},props:{book:{type:Object,default:function(){return{}}},isCountDown:{type:Boolean,default:!1},isOnlyDay:{type:Boolean,default:!1},isFloatDiscountLabel:{type:Boolean,default:!1},showWapStyle:{type:Boolean,default:!1}},setup:function(t,e){var n=e.root.$device.isMobile,o=Object(r.n)({days:"0",hours:"0",minutes:"0",seconds:"0"}),c=Object(r.n)(),l=Object(r.n)(),h=Object(r.n)(99),f=Object(r.a)((function(){var e,n,r;return!(0!==(null===(n=null===(e=t.book)||void 0===e?void 0:e.base_info)||void 0===n?void 0:n.price)&&!(null===(r=t.book)||void 0===r?void 0:r.is_buy))})),d=Object(r.a)((function(){var e;return(null===(e=t.book.max_discount)||void 0===e?void 0:e.name)||""})),v=Object(r.a)((function(){var e;return!!(null===(e=t.book.max_discount)||void 0===e?void 0:e.is_limited_time)})),m=Object(r.a)((function(){return!f.value&&!t.isFloatDiscountLabel&&t.isCountDown&&d.value&&v.value})),y=Object(r.a)((function(){if(!m.value)return"";if(t.isOnlyDay){var e=t.book.max_discount;return e&&1e3*(null==e?void 0:e.end_time)-Date.now()>0?"剩余 ".concat(Math.floor((1e3*(null==e?void 0:e.end_time)-Date.now())/1e3/60/60/24)," 天"):""}return n?"":"剩余 ".concat(o.value.days," 天 ").concat(o.value.hours,":").concat(o.value.minutes,":").concat(o.value.seconds,".").concat(w(h.value))})),w=function(t){return t<10?"0".concat(t):"".concat(t)},_=function(){var e=t.book.max_discount;if(e&&v.value){var n=1e3*(null==e?void 0:e.end_time)-Date.now();if(n>0){var r="".concat(Math.floor(n/1e3/60/60/24)),l=w(Math.floor(n/1e3/60/60%24)),f=w(Math.floor(n/1e3/60%60)),d=w(Math.floor(n/1e3%60));o.value={days:r,hours:l,minutes:f,seconds:d}}else clearInterval(c.value),h.value=0,window.location.reload();c.value||(c.value=setInterval((function(){var t=h.value;t>0?t-=1:t=99,h.value=t}),10))}};return Object(r.j)((function(){n||!m.value||t.isOnlyDay||(_(),l.value=setInterval((function(){_()}),1e3))})),Object(r.k)((function(){clearInterval(l.value),clearInterval(c.value)})),{isOwner:f,isWap:n,showLabel:d,countDownText:y}}}),d=(n(1654),n(29)),component=Object(d.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return!t.isOwner&&t.showLabel?n("div",{staticClass:"sale-tooltip-wrap",class:{"sale-tooltip-wrap-wap":t.showWapStyle,"sale-tooltip-wrap-float":t.isFloatDiscountLabel}},[t.isFloatDiscountLabel?n("LabelLeftIcon",{staticClass:"label-icon label-icon-left"}):t._e(),t._v(" "),t.isFloatDiscountLabel?n("div",{staticClass:"sale-tooltip"},[t._v("\n    "+t._s(t.showLabel)+"\n    "),t.countDownText?n("span",{staticClass:"count-down-text"},[t._v("\n      "+t._s(t.countDownText)+"\n    ")]):t._e()]):n("div",{staticClass:"sale-tooltip"},[t._v("\n    "+t._s(t.showLabel)+"\n    "),t.countDownText?n("span",{staticClass:"count-down-text"},[t._v("\n      "+t._s(t.countDownText)+"\n    ")]):t._e(),t._v(" "),n("div",{staticClass:"sale-tooltip-content"},[t._v("\n      "+t._s(t.showLabel)+"\n      "),t.countDownText?n("span",{staticClass:"count-down-text"},[t._v("\n        "+t._s(t.countDownText)+"\n      ")]):t._e()])]),t._v(" "),t.isFloatDiscountLabel?n("LabelRightIcon",{staticClass:"label-icon label-icon-right"}):t._e()],1):t._e()}),[],!1,null,"6a0ef028",null);e.a=component.exports},1649:function(t,e,n){},1652:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,d],style:[style,v],attrs:Object.assign({width:"7",height:"20",viewBox:"0 0 7 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),h.concat([n("path",{attrs:{d:"M0 5.33333C0 2.38781 2.38781 0 5.33333 0H76C76 0 72.0072 0 72.0072 4.11765C72.0072 4.91035 72.0072 5.89927 72.0072 6.97946C72.0072 12.8705 67.2534 17.6471 61.3624 17.6471C43.6926 17.6471 9.85589 17.6471 5.99862 17.6471C0.749827 17.6471 0 20 0 20V5.33333Z",fill:"#FFF2EF"}}),n("path",{attrs:{d:"M72.653 0.666667C72.4433 0.869927 72.2462 1.10455 72.0712 1.3752C71.619 2.07469 71.3405 2.97571 71.3405 4.11765V4.12229V4.12695V4.1316V4.13626V4.14093V4.1456V4.15027V4.15495V4.15963V4.16432V4.16901V4.17371V4.17841V4.18311V4.18782V4.19253V4.19725V4.20198V4.2067V4.21143V4.21617V4.22091V4.22566V4.2304V4.23516V4.23991V4.24468V4.24944V4.25421V4.25899V4.26377V4.26855V4.27334V4.27813V4.28293V4.28773V4.29254V4.29735V4.30216V4.30698V4.3118V4.31663V4.32146V4.3263V4.33114V4.33598V4.34083V4.34568V4.35054V4.3554V4.36027V4.36514V4.37001V4.37489V4.37977V4.38466V4.38955V4.39444V4.39934V4.40425V4.40916V4.41407V4.41898V4.4239V4.42883V4.43376V4.43869V4.44363V4.44857V4.45351V4.45846V4.46342V4.46838V4.47334V4.4783V4.48327V4.48825V4.49323V4.49821V4.5032V4.50819V4.51318V4.51818V4.52319V4.52819V4.53321V4.53822V4.54324V4.54827V4.55329V4.55833V4.56336V4.5684V4.57345V4.57849V4.58355V4.5886V4.59366V4.59873V4.6038V4.60887V4.61394V4.61902V4.62411V4.6292V4.63429V4.63939V4.64449V4.64959V4.6547V4.65981V4.66493V4.67005V4.67517V4.6803V4.68543V4.69057V4.69571V4.70085V4.706V4.71115V4.71631V4.72147V4.72663V4.7318V4.73697V4.74215V4.74733V4.75251V4.7577V4.76289V4.76808V4.77328V4.77848V4.78369V4.7889V4.79411V4.79933V4.80455V4.80978V4.81501V4.82024V4.82548V4.83072V4.83596V4.84121V4.84646V4.85172V4.85698V4.86224V4.86751V4.87278V4.87806V4.88334V4.88862V4.89391V4.8992V4.90449V4.90979V4.91509V4.92039V4.9257V4.93102V4.93633V4.94165V4.94698V4.9523V4.95763V4.96297V4.96831V4.97365V4.979V4.98435V4.9897V4.99506V5.00042V5.00578V5.01115V5.01652V5.0219V5.02728V5.03266V5.03804V5.04343V5.04883V5.05422V5.05963V5.06503V5.07044V5.07585V5.08126V5.08668V5.0921V5.09753V5.10296V5.10839V5.11383V5.11927V5.12471V5.13016V5.13561V5.14107V5.14652V5.15199V5.15745V5.16292V5.16839V5.17387V5.17935V5.18483V5.19032V5.19581V5.2013V5.2068V5.2123V5.2178V5.22331V5.22882V5.23433V5.23985V5.24537V5.25089V5.25642V5.26195V5.26749V5.27303V5.27857V5.28411V5.28966V5.29521V5.30077V5.30633V5.31189V5.31745V5.32302V5.3286V5.33417V5.33975V5.34533V5.35092V5.35651V5.3621V5.3677V5.3733V5.3789V5.3845V5.39011V5.39573V5.40134V5.40696V5.41258V5.41821V5.42384V5.42947V5.43511V5.44075V5.44639V5.45203V5.45768V5.46333V5.46899V5.47465V5.48031V5.48598V5.49164V5.49732V5.50299V5.50867V5.51435V5.52004V5.52572V5.53141V5.53711V5.54281V5.54851V5.55421V5.55992V5.56563V5.57134V5.57706V5.58278V5.5885V5.59423V5.59996V5.60569V5.61143V5.61717V5.62291V5.62865V5.6344V5.64015V5.64591V5.65166V5.65743V5.66319V5.66896V5.67473V5.6805V5.68628V5.69206V5.69784V5.70362V5.70941V5.7152V5.721V5.7268V5.7326V5.7384V5.74421V5.75002V5.75583V5.76165V5.76747V5.77329V5.77911V5.78494V5.79077V5.79661V5.80244V5.80828V5.81413V5.81997V5.82582V5.83168V5.83753V5.84339V5.84925V5.85511V5.86098V5.86685V5.87272V5.8786V5.88448V5.89036V5.89624V5.90213V5.90802V5.91391V5.91981V5.92571V5.93161V5.93752V5.94342V5.94934V5.95525V5.96116V5.96708V5.97301V5.97893V5.98486V5.99079V5.99672V6.00266V6.0086V6.01454V6.02049V6.02643V6.03238V6.03834V6.04429V6.05025V6.05621V6.06218V6.06815V6.07412V6.08009V6.08606V6.09204V6.09802V6.10401V6.10999V6.11598V6.12198V6.12797V6.13397V6.13997V6.14597V6.15198V6.15799V6.164V6.17001V6.17603V6.18205V6.18807V6.1941V6.20012V6.20615V6.21219V6.21822V6.22426V6.2303V6.23634V6.24239V6.24844V6.25449V6.26054V6.2666V6.27266V6.27872V6.28479V6.29085V6.29692V6.303V6.30907V6.31515V6.32123V6.32731V6.3334V6.33948V6.34557V6.35167V6.35776V6.36386V6.36996V6.37607V6.38217V6.38828V6.39439V6.4005V6.40662V6.41274V6.41886V6.42498V6.43111V6.43724V6.44337V6.4495V6.45564V6.46178V6.46792V6.47406V6.48021V6.48636V6.49251V6.49866V6.50482V6.51097V6.51713V6.5233V6.52946V6.53563V6.5418V6.54797V6.55415V6.56033V6.56651V6.57269V6.57887V6.58506V6.59125V6.59744V6.60364V6.60983V6.61603V6.62223V6.62844V6.63464V6.64085V6.64706V6.65328V6.65949V6.66571V6.67193V6.67815V6.68438V6.6906V6.69683V6.70306V6.7093V6.71553V6.72177V6.72801V6.73426V6.7405V6.74675V6.753V6.75925V6.76551V6.77176V6.77802V6.78428V6.79055V6.79681V6.80308V6.80935V6.81562V6.8219V6.82817V6.83445V6.84073V6.84702V6.8533V6.85959V6.86588V6.87217V6.87847V6.88476V6.89106V6.89736V6.90366V6.90997V6.91628V6.92259V6.9289V6.93521V6.94153V6.94784V6.95416V6.96048V6.96681V6.97313V6.97946C71.3405 12.5042 66.8834 16.9804 61.3624 16.9804H5.99862C3.2911 16.9804 1.65133 17.5844 0.666667 18.2649V5.33333C0.666667 2.756 2.756 0.666667 5.33333 0.666667H72.653Z",stroke:"#F64242","stroke-opacity":"0.1","stroke-width":"1.33333"}})]))}}},1653:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,d],style:[style,v],attrs:Object.assign({width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.9997 0C12.5147 0 10.4266 1.69963 9.83447 3.99987H20.165C19.5729 1.69963 17.4848 0 14.9997 0Z",fill:"#FFB6B6"}}),n("path",{attrs:{d:"M-61 5.33333C-61 2.38781 -58.6122 0 -55.6667 0H15C15 0 11.0072 0 11.0072 4.11765C11.0072 4.91035 11.0072 5.89927 11.0072 6.97946C11.0072 12.8705 6.25343 17.6471 0.362395 17.6471C-17.3074 17.6471 -51.1441 17.6471 -55.0014 17.6471C-60.2502 17.6471 -61 20 -61 20V5.33333Z",fill:"#FFF2EF"}}),n("path",{attrs:{d:"M11.653 0.666667C11.4433 0.869927 11.2462 1.10455 11.0712 1.3752C10.619 2.07469 10.3405 2.97571 10.3405 4.11765V4.12229V4.12695V4.1316V4.13626V4.14093V4.1456V4.15027V4.15495V4.15963V4.16432V4.16901V4.17371V4.17841V4.18311V4.18782V4.19253V4.19725V4.20198V4.2067V4.21143V4.21617V4.22091V4.22566V4.2304V4.23516V4.23991V4.24468V4.24944V4.25421V4.25899V4.26377V4.26855V4.27334V4.27813V4.28293V4.28773V4.29254V4.29735V4.30216V4.30698V4.3118V4.31663V4.32146V4.3263V4.33114V4.33598V4.34083V4.34568V4.35054V4.3554V4.36027V4.36514V4.37001V4.37489V4.37977V4.38466V4.38955V4.39444V4.39934V4.40425V4.40916V4.41407V4.41898V4.4239V4.42883V4.43376V4.43869V4.44363V4.44857V4.45351V4.45846V4.46342V4.46838V4.47334V4.4783V4.48327V4.48825V4.49323V4.49821V4.5032V4.50819V4.51318V4.51818V4.52319V4.52819V4.53321V4.53822V4.54324V4.54827V4.55329V4.55833V4.56336V4.5684V4.57345V4.57849V4.58355V4.5886V4.59366V4.59873V4.6038V4.60887V4.61394V4.61902V4.62411V4.6292V4.63429V4.63939V4.64449V4.64959V4.6547V4.65981V4.66493V4.67005V4.67517V4.6803V4.68543V4.69057V4.69571V4.70085V4.706V4.71115V4.71631V4.72147V4.72663V4.7318V4.73697V4.74215V4.74733V4.75251V4.7577V4.76289V4.76808V4.77328V4.77848V4.78369V4.7889V4.79411V4.79933V4.80455V4.80978V4.81501V4.82024V4.82548V4.83072V4.83596V4.84121V4.84646V4.85172V4.85698V4.86224V4.86751V4.87278V4.87806V4.88334V4.88862V4.89391V4.8992V4.90449V4.90979V4.91509V4.92039V4.9257V4.93102V4.93633V4.94165V4.94698V4.9523V4.95763V4.96297V4.96831V4.97365V4.979V4.98435V4.9897V4.99506V5.00042V5.00578V5.01115V5.01652V5.0219V5.02728V5.03266V5.03804V5.04343V5.04883V5.05422V5.05963V5.06503V5.07044V5.07585V5.08126V5.08668V5.0921V5.09753V5.10296V5.10839V5.11383V5.11927V5.12471V5.13016V5.13561V5.14107V5.14652V5.15199V5.15745V5.16292V5.16839V5.17387V5.17935V5.18483V5.19032V5.19581V5.2013V5.2068V5.2123V5.2178V5.22331V5.22882V5.23433V5.23985V5.24537V5.25089V5.25642V5.26195V5.26749V5.27303V5.27857V5.28411V5.28966V5.29521V5.30077V5.30633V5.31189V5.31745V5.32302V5.3286V5.33417V5.33975V5.34533V5.35092V5.35651V5.3621V5.3677V5.3733V5.3789V5.3845V5.39011V5.39573V5.40134V5.40696V5.41258V5.41821V5.42384V5.42947V5.43511V5.44075V5.44639V5.45203V5.45768V5.46333V5.46899V5.47465V5.48031V5.48598V5.49164V5.49732V5.50299V5.50867V5.51435V5.52004V5.52572V5.53141V5.53711V5.54281V5.54851V5.55421V5.55992V5.56563V5.57134V5.57706V5.58278V5.5885V5.59423V5.59996V5.60569V5.61143V5.61717V5.62291V5.62865V5.6344V5.64015V5.64591V5.65166V5.65743V5.66319V5.66896V5.67473V5.6805V5.68628V5.69206V5.69784V5.70362V5.70941V5.7152V5.721V5.7268V5.7326V5.7384V5.74421V5.75002V5.75583V5.76165V5.76747V5.77329V5.77911V5.78494V5.79077V5.79661V5.80244V5.80828V5.81413V5.81997V5.82582V5.83168V5.83753V5.84339V5.84925V5.85511V5.86098V5.86685V5.87272V5.8786V5.88448V5.89036V5.89624V5.90213V5.90802V5.91391V5.91981V5.92571V5.93161V5.93752V5.94342V5.94934V5.95525V5.96116V5.96708V5.97301V5.97893V5.98486V5.99079V5.99672V6.00266V6.0086V6.01454V6.02049V6.02643V6.03238V6.03834V6.04429V6.05025V6.05621V6.06218V6.06815V6.07412V6.08009V6.08606V6.09204V6.09802V6.10401V6.10999V6.11598V6.12198V6.12797V6.13397V6.13997V6.14597V6.15198V6.15799V6.164V6.17001V6.17603V6.18205V6.18807V6.1941V6.20012V6.20615V6.21219V6.21822V6.22426V6.2303V6.23634V6.24239V6.24844V6.25449V6.26054V6.2666V6.27266V6.27872V6.28479V6.29085V6.29692V6.303V6.30907V6.31515V6.32123V6.32731V6.3334V6.33948V6.34557V6.35167V6.35776V6.36386V6.36996V6.37607V6.38217V6.38828V6.39439V6.4005V6.40662V6.41274V6.41886V6.42498V6.43111V6.43724V6.44337V6.4495V6.45564V6.46178V6.46792V6.47406V6.48021V6.48636V6.49251V6.49866V6.50482V6.51097V6.51713V6.5233V6.52946V6.53563V6.5418V6.54797V6.55415V6.56033V6.56651V6.57269V6.57887V6.58506V6.59125V6.59744V6.60364V6.60983V6.61603V6.62223V6.62844V6.63464V6.64085V6.64706V6.65328V6.65949V6.66571V6.67193V6.67815V6.68438V6.6906V6.69683V6.70306V6.7093V6.71553V6.72177V6.72801V6.73426V6.7405V6.74675V6.753V6.75925V6.76551V6.77176V6.77802V6.78428V6.79055V6.79681V6.80308V6.80935V6.81562V6.8219V6.82817V6.83445V6.84073V6.84702V6.8533V6.85959V6.86588V6.87217V6.87847V6.88476V6.89106V6.89736V6.90366V6.90997V6.91628V6.92259V6.9289V6.93521V6.94153V6.94784V6.95416V6.96048V6.96681V6.97313V6.97946C10.3405 12.5042 5.88338 16.9804 0.362396 16.9804H-55.0014C-57.7089 16.9804 -59.3487 17.5844 -60.3333 18.2649V5.33333C-60.3333 2.756 -58.244 0.666667 -55.6667 0.666667H11.653Z",stroke:"#F64242","stroke-opacity":"0.1","stroke-width":"1.33333"}})]))}}},1654:function(t,e,n){"use strict";n(1214)},1685:function(t,e,n){t.exports=n.p+"5e2cfe768dbb98a0bf497ff46eec11fe.svg"},1686:function(t,e,n){t.exports=n.p+"37ca4f63b2d6ce3142b550147fe4476c.svg"},1687:function(t,e,n){"use strict";n(1280)},1711:function(t,e,n){"use strict";var r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"title"},[this._v("未登录")]),this._v(" "),e("div",{staticClass:"desc"},[this._v("注册或登录后即可继续操作")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("img",{attrs:{src:n(1685)}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("img",{attrs:{src:n(1686)}})])}],o=n(18),c={data:function(){return{show:!1}},computed:{isWechat:function(){return Object(o.h)()}},filters:{},methods:{loginWithWechat:function(){return this.$getBean("oauthBusiness").loginWithWechat()},close:function(){this.show=!1},authoLogin:function(){this.show=!1,this.$requestLogin()}},mounted:function(){var t=this,e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.AUTH_WECHAT_QUICK_LOGIN,(function(){t.$requestLogin()}))}},l=(n(1687),n(29)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"wechat-quick-login"},[n("div",{staticClass:"quick-box"},[t._m(0),t._v(" "),n("div",{staticClass:"auth-box"},[n("div",{staticClass:"auth-btn wx",on:{click:t.loginWithWechat}},[t._m(1),t._v(" "),n("span",[t._v("微信快捷登录")])]),t._v(" "),n("div",{staticClass:"auth-btn jj",on:{click:t.authoLogin}},[t._m(2),t._v(" "),n("span",[t._v("稀土掘金账号登录")])])]),t._v(" "),n("div",{staticClass:"agreement-box"},[t._v("\n      注册登录即表示同意\n      "),n("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/terms",expression:"'/terms'",modifiers:{blank:!0}}]},[t._v("用户协议")]),t._v("\n      、\n      "),n("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/privacy",expression:"'/privacy'",modifiers:{blank:!0}}]},[t._v("隐私政策")])]),t._v(" "),n("div",{staticClass:"footer"},[n("div",{staticClass:"box",on:{click:t.close}},[t._v("取消")])])])]):t._e()}),r,!1,null,"3a1cf91f",null);e.a=component.exports},1712:function(t,e,n){"use strict";n(43),n(53);var r=n(7),o=n(176),c=n(26),l=n(178),h=n(104),f=Object(r.b)({components:{BTooltip:o.Tooltip},props:{bookInfo:{type:Object,default:function(){return{}}},eventPage:{type:String,default:""}},emits:["read","fetch"],setup:function(t,e){var n=Object(r.a)((function(){var t,n;return(null===(n=null===(t=e.root.$store.state)||void 0===t?void 0:t.auth)||void 0===n?void 0:n.user)||null})),o=e.root.$getBean("eventBus"),f=Object(r.w)(),d=Object(r.a)((function(){var e,r,o;if(t.bookInfo.isBorrowing){var c=null===(r=null===(e=t.bookInfo)||void 0===e?void 0:e.reading_progress)||void 0===r?void 0:r.last_section_id;return"0"!==c&&c?"继续学习":"立即学习"}return(null===(o=t.bookInfo)||void 0===o?void 0:o.borrowTimes)>0&&n.value.is_vip?"再次借阅":"VIP借阅"})),v=Object(r.a)((function(){return t.bookInfo.isBorrowing?"有效期至 ".concat(Object(c.a)(1e3*t.bookInfo.validEndTime,"YYYY-MM-DD")):"借过".concat(t.bookInfo.borrowTimes,"次")})),m=Object(r.f)("refreshBook",(function(){return null})),y=Object(h.b)((function(){e.emit("fetch"),m()}),500);Object(r.j)((function(){o.on(o.eventType.SHOW_VIP_FETCH,(function(){y()}))})),Object(r.k)((function(){o.off(o.eventType.SHOW_VIP_FETCH)}));return{buttonVipTitle:d,buttonVipDescript:v,handleClick:function(){var r={event_page:t.eventPage,book_id:t.bookInfo.id,author_id:t.bookInfo.user_info.user_id,platform:e.root.$device.isMobile?"h5":"web"};return e.root.$TEA("member_rent_click",r),n.value?n.value.isBindedPhone?void(t.bookInfo.isBorrowing?e.emit("read"):n.value.is_vip?o.emit(o.eventType.SHOW_VIP_BORROW_MODAL,t.bookInfo,r):f.push({name:"vipIndex",query:{utm_source:window.location.pathname.includes("section")?"course_section":"course_detail",utm_medium:"rent"}})):e.root.$requestBindPhoneNumber(l.c,{toUrl:location.href}):e.root.$requestLogin()},currentUser:n}}}),d=(n(1935),n(29)),component=Object(d.a)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.bookInfo.canVipBorrow?r("div",{staticClass:"vip-borrow-button"},[r("BTooltip",{staticClass:"tooltip",attrs:{content:"如果您下单购买了借阅中或曾经借阅过的课程，我们将把消耗的借阅卡退还给您，每门课程最多退还1张",theme:"light",placement:"bottom",disabled:!t.bookInfo.isBorrowing||t.$device.isMobile,"max-width":"244px"}},[r("div",{staticClass:"vip-borrow",on:{click:t.handleClick}},[t.bookInfo.isBorrowing?r("img",{staticClass:"mark",attrs:{src:n(1934),alt:"借阅中"}}):t._e(),t._v(" "),r("div",{staticClass:"title"},[t._v(t._s(t.buttonVipTitle))]),t._v(" "),t.bookInfo.borrowTimes>0&&t.currentUser.is_vip?r("div",{staticClass:"descript"},[t._v("\n        "+t._s(t.buttonVipDescript)+"\n      ")]):t._e()])])],1):t._e()}),[],!1,null,"3a33652f",null);e.a=component.exports},1723:function(t,e,n){},1724:function(t,e,n){},1727:function(t,e,n){},1765:function(t,e,n){"use strict";n(39);var r=n(7),o=n(1647),c=n(1094),l=Object(r.b)({components:{SaleTooltip:o.a},props:{book:{type:Object,default:function(){return{}}},isOwner:{type:Boolean,default:!1},sectionRoute:{type:Object,default:function(){return{}}},isFloatDiscountLabel:{type:Boolean,default:!1}},emits:["buyBook"],setup:function(t,e){var n,o=e.emit;return{isWap:null===(n=e.root.$device)||void 0===n?void 0:n.isMobile,bookId:Object(r.a)((function(){var e;return(null===(e=t.book)||void 0===e?void 0:e.booklet_id)||""})),hasReadSection:Object(r.a)((function(){var e,n;return!!(null===(n=null===(e=t.book)||void 0===e?void 0:e.reading_progress)||void 0===n?void 0:n.last_section_id)})),hasBorrow:Object(r.a)((function(){var e,n;return!!(null===(n=null===(e=t.book)||void 0===e?void 0:e.reading_progress)||void 0===n?void 0:n.borrow_times)})),hasDiscount:Object(r.a)((function(){var e,n;return(null===(e=t.book.max_discount)||void 0===e?void 0:e.pay_money)!==(null===(n=t.book.max_discount)||void 0===n?void 0:n.price)})),currentPrice:Object(r.a)((function(){var e;return Object(c.d)((null===(e=t.book.max_discount)||void 0===e?void 0:e.pay_money)||0)})),originPrice:Object(r.a)((function(){var e;return Object(c.d)((null===(e=t.book.max_discount)||void 0===e?void 0:e.price)||0)})),showLabel:Object(r.a)((function(){var e;return(null===(e=t.book.max_discount)||void 0===e?void 0:e.name)||""})),buyBook:function(){o("buyBook")}}}}),h=(n(1936),n(29)),component=Object(h.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-buy-button-wrap",class:{"discount-label-show":t.showLabel&&!t.isOwner&&!t.hasBorrow,"discount-label-float":t.isFloatDiscountLabel}},[!t.showLabel||t.isOwner||t.hasBorrow?t._e():n("SaleTooltip",{staticClass:"sale-tooltip-entry",attrs:{book:t.book,"is-count-down":!t.isWap,"is-float-discount-label":t.isFloatDiscountLabel}}),t._v(" "),n("div",{staticClass:"book-buy-button"},[t.isOwner?n("router-link",{staticClass:"book-owner",attrs:{"data-book-id":t.bookId,to:t.sectionRoute}},[t._v("\n      "+t._s(t.hasReadSection?"继续学习":"立即学习")+"\n    ")]):n("div",{on:{click:function(e){return e.stopPropagation(),t.buyBook(e)}}},[n("div",{staticClass:"price-box",class:{"price-box-line":!(t.hasBorrow||t.hasDiscount)}},[n("span",{staticClass:"price-unit"},[t._v("¥")]),t._v(" "),n("span",[t._v("\n          "+t._s(t.currentPrice+" 立即购买")+"\n        ")])]),t._v(" "),t.hasBorrow?n("div",{staticClass:"borrow-desc"},[t._v("\n        "+t._s("退还 1 张借阅卡")+"\n      ")]):t.hasDiscount?n("div",{staticClass:"origin-price"},[t._v("\n        "+t._s("原价 ¥"+t.originPrice)+"\n      ")]):t._e()])],1)],1)}),[],!1,null,"5123efa4",null);e.a=component.exports},1774:function(t,e,n){"use strict";n(1649)},1896:function(t,e,n){"use strict";n(16),n(15),n(11),n(6),n(14);var r=n(0),o=n(280),c=n(84),l=n(4),h=n(177),f=n(51),d=n(296);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var m={components:{Avatar:h.a,DropDownList:d.a},data:function(){return{bdPageUrlForNav:o.e,isShowUserDropdownList:!1,translateGithubURL:f.e}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.mapGetters)({user:l.USER})),methods:{hideActionList:function(){this.isShowUserDropdownList=!1},onUserActionClick:function(){this.isShowUserDropdownList=!this.isShowUserDropdownList},openEditorPage:function(){var t=this.$getBean("editorBusiness");window.location.href=t.getPostEditUrl()},openXiaoceEditorPage:function(){var t=this.$getBean("editorBusiness");window.location.href=t.getXiaoceEditUrl()},openDraftIndexPage:function(){var t=this.$getBean("editorBusiness");window.location.href=t.getDraftIndexUrl()},login:function(){this.$requestLogin()},register:function(){this.$requestRegister()},logout:function(){window.confirm("确定登出吗？每一片贫瘠的土地都需要坚定的挖掘者！")&&this.$requestLogout()}},mounted:function(){var t=this,e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.ROOT_CONTAINER_CLICK,(function(){t.hideActionList()}))},watch:{isShowUserDropdownList:function(t){t&&this.$TEA("avatar_menu_visit")}}},y=(n(1774),n(29)),component=Object(y.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-auth"},[t.user?n("div",{staticClass:"nav-item menu",on:{click:function(e){return e.stopPropagation(),t.onUserActionClick(e)}}},[n("avatar",{staticClass:"avatar",attrs:{user:t.user,decorative:!0,alt:t.user.username+"的头像"}}),t._v(" "),n("DropDownList",{attrs:{"is-show-user-dropdown-list":t.isShowUserDropdownList}})],1):t._e(),t._v(" "),t.user?t._e():n("div",{staticClass:"nav-item auth"},[n("span",{staticClass:"login",on:{click:t.login}},[t._v("登录")])])])}),[],!1,null,"27c6ac96",null);e.a=component.exports},1934:function(t,e,n){t.exports=n.p+"d9fd35ba8ea6d69f1746f621a0dd8433.svg"},1935:function(t,e,n){"use strict";n(1723)},1936:function(t,e,n){"use strict";n(1724)},1937:function(t,e,n){},1938:function(t,e,n){},1939:function(t,e){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=22)}([function(t,e,n){"use strict";var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,n){"use strict";var r=n(12)("wks"),o=n(13),i=n(0).Symbol,u="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))}).store=r},function(t,e,n){"use strict";var r=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=r)},function(t,e,n){"use strict";var r=n(4);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return"object"===(void 0===t?"undefined":r(t))?null!==t:"function"==typeof t}},function(t,e,n){"use strict";var r=n(6);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){"use strict";t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";t.exports=!n(15)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){"use strict";var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,n){"use strict";var r=n(3),o=n(26),i=n(27),u=Object.defineProperty;e.f=n(7)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";t.exports=!1},function(t,e,n){"use strict";var r=n(8),o=n(1)("toStringTag"),i="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:i?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},function(t,e,n){"use strict";var r=n(2),o=n(0),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(10)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){"use strict";var r=0,o=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+o).toString(36))}},function(t,e,n){"use strict";var r=n(9),o=n(28);t.exports=n(7)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";var r=n(4),o=n(0).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){"use strict";var r=n(0),o=n(14),i=n(18),u=n(13)("src"),c=n(29),s=(""+c).split("toString");n(2).inspectSource=function(t){return c.call(t)},(t.exports=function(t,e,n,c){var l="function"==typeof n;l&&(i(n,"name")||o(n,"name",e)),t[e]!==n&&(l&&(i(n,u)||o(n,u,t[e]?""+t[e]:s.join(String(e)))),t===r?t[e]=n:c?t[e]?t[e]=n:o(t,e,n):(delete t[e],o(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[u]||c.call(this)}))},function(t,e,n){"use strict";var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,n){"use strict";t.exports={}},function(t,e,n){"use strict";var r,o,i,u=n(5),c=n(38),s=n(39),l=n(16),a=n(0),h=a.process,p=a.setImmediate,f=a.clearImmediate,d=a.MessageChannel,v=a.Dispatch,m=0,y={},w=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},_=function(t){w.call(t.data)};p&&f||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++m]=function(){c("function"==typeof t?t:Function(t),e)},r(m),m},f=function(t){delete y[t]},"process"==n(8)(h)?r=function(t){h.nextTick(u(w,t,1))}:v&&v.now?r=function(t){v.now(u(w,t,1))}:d?(i=(o=new d).port2,o.port1.onmessage=_,r=u(i.postMessage,i,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts?(r=function(t){a.postMessage(t+"","*")},a.addEventListener("message",_,!1)):r="onreadystatechange"in l("script")?function(t){s.appendChild(l("script")).onreadystatechange=function(){s.removeChild(this),w.call(t)}}:function(t){setTimeout(u(w,t,1),0)}),t.exports={set:p,clear:f}},function(t,e,n){"use strict";var r=n(6);function o(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new o(t)}},function(t,e,n){t.exports=n(23)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(24);var r,i=(r=n(48))&&r.__esModule?r:{default:r};e.default={url:i.default},t.exports=e.default},function(t,e,n){"use strict";var r,o,i,u,c=n(10),s=n(0),l=n(5),a=n(11),h=n(25),p=n(4),f=n(6),d=n(30),v=n(31),m=n(37),y=n(20).set,w=n(40)(),_=n(21),b=n(41),g=n(42),k=n(43),C=s.TypeError,O=s.process,x=O&&O.versions,V=x&&x.v8||"",S=s.Promise,T="process"==a(O),P=function(){},E=o=_.f,j=!!function(){try{var t=S.resolve(1),e=(t.constructor={})[n(1)("species")]=function(t){t(P,P)};return(T||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e&&0!==V.indexOf("6.6")&&-1===g.indexOf("Chrome/66")}catch(t){}}(),L=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},R=function(t,e){if(!t._n){t._n=!0;var n=t._c;w((function(){for(var r=t._v,o=1==t._s,i=0,u=function(e){var n,i,u,c=o?e.ok:e.fail,s=e.resolve,l=e.reject,a=e.domain;try{c?(o||(2==t._h&&D(t),t._h=1),!0===c?n=r:(a&&a.enter(),n=c(r),a&&(a.exit(),u=!0)),n===e.promise?l(C("Promise-chain cycle")):(i=L(n))?i.call(n,s,l):s(n)):l(r)}catch(t){a&&!u&&a.exit(),l(t)}};n.length>i;)u(n[i++]);t._c=[],t._n=!1,e&&!t._h&&I(t)}))}},I=function(t){y.call(s,(function(){var e,n,r,o=t._v,i=A(t);if(i&&(e=b((function(){T?O.emit("unhandledRejection",o,t):(n=s.onunhandledrejection)?n({promise:t,reason:o}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",o)})),t._h=T||A(t)?2:1),t._a=void 0,i&&e.e)throw e.v}))},A=function(t){return 1!==t._h&&0===(t._a||t._c).length},D=function(t){y.call(s,(function(){var e;T?O.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})}))},M=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),R(e,!0))},B=function t(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw C("Promise can't be resolved itself");(n=L(e))?w((function(){var o={_w:r,_d:!1};try{n.call(e,l(t,o,1),l(M,o,1))}catch(t){M.call(o,t)}})):(r._v=e,r._s=1,R(r,!1))}catch(t){M.call({_w:r,_d:!1},t)}}};j||(S=function(t){d(this,S,"Promise","_h"),f(t),r.call(this);try{t(l(B,this,1),l(M,this,1))}catch(t){M.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(44)(S.prototype,{then:function(t,e){var n=E(m(this,S));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=T?O.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r;this.promise=t,this.resolve=l(B,t,1),this.reject=l(M,t,1)},_.f=E=function(t){return t===S||t===u?new i(t):o(t)}),h(h.G+h.W+h.F*!j,{Promise:S}),n(45)(S,"Promise"),n(46)("Promise"),u=n(2).Promise,h(h.S+h.F*!j,"Promise",{reject:function(t){var e=E(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(c||!j),"Promise",{resolve:function(t){return k(c&&this===u?S:this,t)}}),h(h.S+h.F*!(j&&n(47)((function(t){S.all(t).catch(P)}))),"Promise",{all:function(t){var e=this,n=E(e),r=n.resolve,o=n.reject,i=b((function(){var n=[],i=0,u=1;v(t,!1,(function(t){var c=i++,s=!1;n.push(void 0),u++,e.resolve(t).then((function(t){s||(s=!0,n[c]=t,--u||r(n))}),o)})),--u||r(n)}));return i.e&&o(i.v),n.promise},race:function(t){var e=this,n=E(e),r=n.reject,o=b((function(){v(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},function(t,e,n){"use strict";var r=n(0),o=n(2),i=n(14),u=n(17),c=n(5),s=function t(e,n,s){var l,a,h,p,f=e&t.F,d=e&t.G,v=e&t.P,m=e&t.B,y=d?r:e&t.S?r[n]||(r[n]={}):(r[n]||{}).prototype,w=d?o:o[n]||(o[n]={}),_=w.prototype||(w.prototype={});for(l in d&&(s=n),s)h=((a=!f&&y&&void 0!==y[l])?y:s)[l],p=m&&a?c(h,r):v&&"function"==typeof h?c(Function.call,h):h,y&&u(y,l,h,e&t.U),w[l]!=h&&i(w,l,p),v&&_[l]!=h&&(_[l]=h)};r.core=o,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){"use strict";t.exports=!n(7)&&!n(15)((function(){return 7!=Object.defineProperty(n(16)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){"use strict";var r=n(4);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";t.exports=n(12)("native-function-to-string",Function.toString)},function(t,e,n){"use strict";t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){"use strict";var r=n(5),o=n(32),i=n(33),u=n(3),c=n(34),s=n(36),l={},a={},h=t.exports=function(t,e,n,h,p){var f,d,v,m,y=p?function(){return t}:s(t),w=r(n,h,e?2:1),_=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(i(y)){for(f=c(t.length);f>_;_++)if((m=e?w(u(d=t[_])[0],d[1]):w(t[_]))===l||m===a)return m}else for(v=y.call(t);!(d=v.next()).done;)if((m=o(v,w,d.value,e))===l||m===a)return m};h.BREAK=l,h.RETURN=a},function(t,e,n){"use strict";var r=n(3);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){"use strict";var r=n(19),o=n(1)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){"use strict";var r=n(35),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){"use strict";var r=Math.ceil,o=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?o:r)(t)}},function(t,e,n){"use strict";var r=n(11),o=n(1)("iterator"),i=n(19);t.exports=n(2).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){"use strict";var r=n(3),o=n(6),i=n(1)("species");t.exports=function(t,e){var n,u=r(t).constructor;return void 0===u||null==(n=r(u)[i])?e:o(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){"use strict";var r=n(0).document;t.exports=r&&r.documentElement},function(t,e,n){"use strict";var r=n(0),o=n(20).set,i=r.MutationObserver||r.WebKitMutationObserver,u=r.process,c=r.Promise,s="process"==n(8)(u);t.exports=function(){var t,e,n,l=function(){var r,o;for(s&&(r=u.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(s)n=function(){u.nextTick(l)};else if(!i||r.navigator&&r.navigator.standalone)if(c&&c.resolve){var a=c.resolve(void 0);n=function(){a.then(l)}}else n=function(){o.call(r,l)};else{var h=!0,p=document.createTextNode("");new i(l).observe(p,{characterData:!0}),n=function(){p.data=h=!h}}return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e,n){"use strict";t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){"use strict";var r=n(0).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var r=n(3),o=n(4),i=n(21);t.exports=function(t,e){if(r(t),o(e)&&e.constructor===t)return e;var n=i.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(17);t.exports=function(t,e,n){for(var o in e)r(t,o,e[o],n);return t}},function(t,e,n){"use strict";var r=n(9).f,o=n(18),i=n(1)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e,n){"use strict";var r=n(0),o=n(9),i=n(7),u=n(1)("species");t.exports=function(t){var e=r[t];i&&e&&!e[u]&&o.f(e,u,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(1)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],u=i[r]();u.next=function(){return{done:n=!0}},i[r]=function(){return u},t(i)}catch(t){}return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t){try{t=JSON.parse(r.default.base64decode(t))}catch(t){return Promise.reject("base64 decode error")}var i=[];for(var u in n)i.push(u+"="+n[u]);var c="//"+e+"?"+t.GetPlayInfoToken+"&ssl=true";return i.length>0&&(c+="&"+i.join("&")),new o.default({type:"json",method:"GET",url:c}).then((function(t){return t.response&&t.response.Result?t.response.Result:t.response||t}))}return Promise.reject("vid, host and token can't be empty")};var r=i(n(49)),o=i(n(50));function i(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={base64decode:function(t){var e,n,r,o,i,u,c,s=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];for(u=t.length,i=0,c="";i<u;){do{e=s[255&t.charCodeAt(i++)]}while(i<u&&-1===e);if(-1===e)break;do{n=s[255&t.charCodeAt(i++)]}while(i<u&&-1===n);if(-1===n)break;c+=String.fromCharCode(e<<2|(48&n)>>4);do{if(61==(r=255&t.charCodeAt(i++)))return c;r=s[r]}while(i<u&&-1===r);if(-1===r)break;c+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(61==(o=255&t.charCodeAt(i++)))return c;o=s[o]}while(i<u&&-1===o);if(-1===o)break;c+=String.fromCharCode((3&r)<<6|o)}return c}};e.default=r,t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.url,o=e.method,i=void 0===o?"GET":o,u=e.type,c=void 0===u?"arraybuffer":u,s=e.data,l=void 0===s?{}:s,a=e.headers,h=void 0===a?{}:a;return r(this,t),new Promise((function(t,e){var r=new window.XMLHttpRequest,o=i.toUpperCase(),u=[];for(var s in l)u.push(s+"="+l[s]);if("GET"!==o)throw new Error("xhr "+o+" is not supported");for(var a in r.open(o,""+n),c&&(r.responseType=c),h)r.setRequestHeader(a,""+h[a]);r.send(),r.onload=function(){200===r.status||206===r.status?t(r):e(r)},r.onerror=function(){e(r)}}))},t.exports=e.default}])},1940:function(t,e,n){},1941:function(t,e,n){},1942:function(t,e,n){},1943:function(t,e){t.exports='<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.25163 12.8332C8.75789 12.8332 9.16829 13.2436 9.16829 13.7499V19.7082C9.16829 19.9613 8.96309 20.1665 8.70996 20.1665H7.79329C7.54016 20.1665 7.33496 19.9613 7.33496 19.7082V14.6665H2.29329C2.04016 14.6665 1.83496 14.4613 1.83496 14.2082V13.2915C1.83496 13.0384 2.04016 12.8332 2.29329 12.8332H8.25163ZM14.21 1.83319C14.4631 1.83319 14.6683 2.03839 14.6683 2.29152V7.33319H19.71C19.9631 7.33319 20.1683 7.53839 20.1683 7.79152V8.70819C20.1683 8.96132 19.9631 9.16652 19.71 9.16652H13.7516C13.2454 9.16652 12.835 8.75612 12.835 8.24986V2.29152C12.835 2.03839 13.0402 1.83319 13.2933 1.83319H14.21Z" fill="white"/>\n</svg>\n'},1944:function(t,e){t.exports='<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1.8333 3.83334C1.8333 2.72877 2.72873 1.83334 3.8333 1.83334H6.41663C6.9229 1.83334 7.3333 2.24375 7.3333 2.75001C7.3333 3.25627 6.9229 3.66668 6.41663 3.66668H3.66663V6.41668C3.66663 6.92294 3.25623 7.33334 2.74997 7.33334C2.24371 7.33334 1.8333 6.92294 1.8333 6.41668V3.83334ZM20.1667 18.1666C20.1667 19.2712 19.2713 20.1666 18.1667 20.1666H15.5834C15.0771 20.1666 14.6667 19.7562 14.6667 19.2499C14.6667 18.7437 15.0771 18.3333 15.5834 18.3333H18.3334V15.5833C18.3334 15.077 18.7438 14.6666 19.25 14.6666C19.7563 14.6666 20.1667 15.077 20.1667 15.5833V18.1666ZM3.83301 20.1666C2.72844 20.1666 1.83301 19.2712 1.83301 18.1666V15.5833C1.83301 15.077 2.24341 14.6666 2.74967 14.6666C3.25594 14.6666 3.66634 15.077 3.66634 15.5833V18.3333H6.41634C6.9226 18.3333 7.33301 18.7437 7.33301 19.2499C7.33301 19.7562 6.9226 20.1666 6.41634 20.1666H3.83301ZM18.1667 1.83325C19.2713 1.83325 20.1667 2.72868 20.1667 3.83325V6.41659C20.1667 6.92285 19.7563 7.33325 19.25 7.33325C18.7438 7.33325 18.3334 6.92285 18.3334 6.41659V3.66659H15.5834C15.0771 3.66659 14.6667 3.25618 14.6667 2.74992C14.6667 2.24366 15.0771 1.83325 15.5834 1.83325H18.1667Z" fill="white"/>\n</svg>\n'},1945:function(t,e){t.exports='<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.2 2C8.64183 2 9 2.41041 9 2.91667V19.4167C9 19.9229 8.64183 20.3333 8.2 20.3333H5.8C5.35817 20.3333 5 19.9229 5 19.4167V2.91667C5 2.41041 5.35817 2 5.8 2H8.2Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16.2 2C16.6418 2 17 2.41041 17 2.91667V19.4167C17 19.9229 16.6418 20.3333 16.2 20.3333H13.8C13.3582 20.3333 13 19.9229 13 19.4167V2.91667C13 2.41041 13.3582 2 13.8 2H16.2Z" fill="white"/>\n</svg>\n'},1946:function(t,e){t.exports='<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M5.07935 1.9805L17.9127 10.2291C18.474 10.5899 18.474 11.4103 17.9127 11.7711L5.07935 20.0197C4.4693 20.4118 3.66699 19.9739 3.66699 19.2488V2.75145C3.66699 2.02633 4.4693 1.58838 5.07935 1.9805Z" fill="white"/>\n</svg>\n'},1947:function(t,e){t.exports='<svg width="96" height="96" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M48 31.9668C42.7607 31.9668 38.1082 34.4796 35.182 38.367L42.1667 38.3668C42.9767 38.3668 43.6333 39.0235 43.6333 39.8335V42.1668C43.6333 42.9768 42.9767 43.6335 42.1667 43.6335H29.3333V43.6337L29.3223 43.6333L29.1482 43.6269L29.1482 43.6271L29.1371 43.6263C27.7743 43.5257 26.7 42.3885 26.7 41.0002V28.1668C26.7 27.3568 27.3567 26.7002 28.1667 26.7002H30.5C31.31 26.7002 31.9667 27.3568 31.9667 28.1668V28.1669L31.9655 33.9789C35.8693 29.5181 41.6057 26.7002 48 26.7002C59.7637 26.7002 69.3 36.2365 69.3 48.0002C69.3 59.7638 59.7637 69.3002 48 69.3002C38.0401 69.3002 29.6775 62.4643 27.3466 53.2288C27.2348 52.7861 27.574 52.3676 28.0215 52.3676L32.045 52.3677C32.3562 52.3677 32.625 52.5725 32.7171 52.8623C34.7762 59.3406 40.8405 64.0335 48 64.0335C56.855 64.0335 64.0333 56.8551 64.0333 48.0002C64.0333 39.1452 56.855 31.9668 48 31.9668Z" fill="white" stroke="white" stroke-width="0.6"/>\n</svg>\n'},1948:function(t,e){t.exports='<svg width="96" height="96" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M48 4C72.3005 4 92 23.6995 92 48C92 72.3005 72.3005 92 48 92C23.6995 92 4 72.3005 4 48C4 23.6995 23.6995 4 48 4Z" fill="black" fill-opacity="0.4"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M42 28C43.1046 28 44 28.8954 44 30V66C44 67.1046 43.1046 68 42 68H36C34.8954 68 34 67.1046 34 66V30C34 28.8954 34.8954 28 36 28H42Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M60 28C61.1046 28 62 28.8954 62 30V66C62 67.1046 61.1046 68 60 68H54C52.8954 68 52 67.1046 52 66V30C52 28.8954 52.8954 28 54 28H60Z" fill="white"/>\n</svg>\n'},1949:function(t,e){t.exports='<svg width="96" height="96" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M40.896 28.5117L66.496 45.1739C68.5013 46.4791 68.5013 49.5205 66.496 50.8257L40.896 67.488C38.7646 68.8752 36 67.2795 36 64.6621V31.3376C36 28.7202 38.7646 27.1245 40.896 28.5117Z" fill="white"/>\n</svg>\n'},1950:function(t,e){t.exports='<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1.29617 1.02794C1.11742 1.20669 1.11742 1.49728 1.29617 1.67603L19.4453 19.8251C19.6245 20.0043 19.9146 20.0043 20.0938 19.8251L20.7419 19.177C20.9206 18.9978 20.9206 18.7077 20.7419 18.5289L18.6125 16.3995L17.3122 15.0988L16.0078 13.7948L14.6933 12.4799L12.375 10.1621L10.5417 8.32873L8.69596 6.48257L7.38834 5.1754L2.5928 0.379859C2.41359 0.200651 2.12346 0.200651 1.94471 0.379859L1.29617 1.02794ZM4.58369 7.78479C4.58369 7.54966 4.67398 7.32508 4.83257 7.15641L6.41702 8.74087V13.7637L10.542 16.9368V12.8659L12.3754 14.6992V18.3333C12.3754 18.8398 11.9651 19.25 11.4587 19.25H10.8537C10.6516 19.25 10.4549 19.1831 10.295 19.0598L4.94165 14.9417C4.71569 14.7684 4.58369 14.4998 4.58369 14.2152V7.78479ZM10.5417 6.38409V5.06318L9.79503 5.63747L8.4874 4.32984L10.2946 2.94018C10.4546 2.81689 10.6512 2.74997 10.8533 2.74997H11.4583C11.9648 2.74997 12.375 3.16018 12.375 3.66664V8.21743L10.5417 6.38409ZM16.6942 12.5367L15.1249 10.9674C15.1166 10.2918 14.8655 9.6749 14.4544 9.20053C14.2751 8.99336 14.2536 8.67528 14.447 8.48186L15.0827 7.84661C15.2528 7.67611 15.5282 7.66511 15.6941 7.83974C16.4774 8.66199 16.9582 9.77482 16.9582 10.9999C16.9582 11.5389 16.8652 12.0564 16.6942 12.5367ZM19.4321 15.2748L18.0856 13.9283C18.5366 13.0505 18.7914 12.055 18.7914 11C18.7914 9.28763 18.1208 7.73204 17.0277 6.58163C16.8476 6.39142 16.8389 6.09029 17.0241 5.90513L17.6694 5.25979C17.8436 5.08563 18.125 5.07921 18.2969 5.25613C19.7379 6.74158 20.6247 8.76696 20.6247 11C20.6247 12.5652 20.1888 14.0282 19.4321 15.2748ZM1.83333 7.33326C1.58033 7.33326 1.375 7.53859 1.375 7.79159V14.2083C1.375 14.4613 1.58033 14.6666 1.83333 14.6666H2.75C3.003 14.6666 3.20833 14.4613 3.20833 14.2083V7.79159C3.20833 7.53859 3.003 7.33326 2.75 7.33326H1.83333Z" fill="white"/>\n</svg>\n'},1951:function(t,e){t.exports='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.89549 4.29745L15.8541 11.3411C16.3334 11.6492 16.3334 12.3497 15.8541 12.6578L4.89549 19.7014C4.37456 20.0362 3.68945 19.6623 3.68945 19.0431V4.95578C3.68945 4.33659 4.37456 3.96262 4.89549 4.29745Z" fill="white"/>\n<rect x="17.9453" y="4.17578" width="2.36553" height="15.6551" rx="0.5" fill="white"/>\n</svg>\n'},1952:function(t,e){t.exports='<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.8537 2.75H11.4587C11.9421 2.75 12.3379 3.12376 12.3728 3.59823L12.3754 3.66667V18.3333C12.3754 18.8168 12.0016 19.2125 11.5271 19.2475L11.4587 19.25H10.8537C10.6804 19.25 10.5112 19.2008 10.3657 19.1091L10.295 19.0598L4.94165 14.9417C4.73623 14.7842 4.60847 14.5479 4.58694 14.2924L4.58369 14.2152V7.78479C4.58369 7.52604 4.69278 7.28055 4.88238 7.10789L4.94165 7.05833L10.295 2.94021C10.4321 2.83453 10.5961 2.77027 10.7675 2.75407L10.8537 2.75H11.4587H10.8537ZM10.5413 5.0632L6.41631 8.23624V13.7637L10.5413 16.9368V5.0632ZM18.2975 5.25616C19.7385 6.74161 20.6253 8.76699 20.6253 11C20.6253 13.2394 19.733 15.2707 18.2842 16.7576C18.1128 16.9336 17.8313 16.9272 17.6576 16.753L17.0123 16.1081C16.8267 15.9225 16.8358 15.62 17.0169 15.4302C18.1169 14.2784 18.792 12.7183 18.792 11C18.792 9.28766 18.1215 7.73207 17.0283 6.58166C16.8482 6.39145 16.8395 6.09032 17.0247 5.90516L17.67 5.25982C17.8442 5.08566 18.1256 5.07924 18.2975 5.25616ZM2.75 7.33329C3.003 7.33329 3.20833 7.53862 3.20833 7.79162V14.2083C3.20833 14.4613 3.003 14.6666 2.75 14.6666H1.83333C1.58033 14.6666 1.375 14.4613 1.375 14.2083V7.79162C1.375 7.53862 1.58033 7.33329 1.83333 7.33329H2.75ZM15.6944 7.83977C16.4772 8.66202 16.958 9.77485 16.958 11C16.958 12.232 16.4717 13.3508 15.6806 14.1744C15.5143 14.3476 15.2402 14.3362 15.0701 14.1666L14.4354 13.5314C14.241 13.337 14.2635 13.0176 14.4445 12.8104C14.868 12.3269 15.1247 11.6934 15.1247 11C15.1247 10.312 14.8717 9.68273 14.4541 9.20056C14.2749 8.99339 14.2534 8.67531 14.4468 8.48189L15.0825 7.84664C15.253 7.67614 15.528 7.66514 15.6944 7.83977Z" fill="white"/>\n</svg>\n'},1953:function(t,e,n){"use strict";n(1727)},1954:function(t,e,n){},1955:function(t,e,n){},2103:function(t,e,n){"use strict";n(16),n(15),n(11),n(6),n(14);var r=n(0),o=(n(21),n(5)),c=n(7),l=(n(43),n(83),n(31)),h=(n(45),n(179),n(1290)),f=n.n(h),d=n(24),v=n(1),m=n(1939),y=n.n(m),w=d.c,_=w?"//vod.bytedanceapi.com":"//staging-openapi-boe.byted.org";function k(t){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,r,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"dash",t.prev=1,t.next=4,Object(v.e)({url:"/user_api/v1/video/play_token",query:{vid:e,format_type:n}});case 4:return r=t.sent,t.abrupt("return",r.data);case 8:throw t.prev=8,t.t0=t.catch(1),new Error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}function O(){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(v.e)({url:"/user_api/v1/video/key_token"});case 2:return e=t.sent,t.abrupt("return",e.data||"");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function V(t,e){return S.apply(this,arguments)}function S(){return(S=Object(o.a)(regeneratorRuntime.mark((function t(e,n){var r,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(e,n);case 2:if(r=t.sent,"hls"!==n){t.next=11;break}return t.next=6,O();case 6:return o=t.sent,c=w?"https://kds.bytedance.com":"https://b-kds.bytedance.com",t.abrupt("return",{EncryptHlsPlugin:{playDomain:_,keyDomain:c,playAuthToken:r,keyToken:o}});case 11:return t.next=13,y.a.url(r,_);case 13:if(!(l=t.sent).Error){t.next=16;break}throw new Error("视频地址获取失败");case 16:return t.abrupt("return",{dashOpts:l});case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n(1940),n(1941),n(22),n(23),n(59);var T=n(12),P=n(13),E=n(30),j=n(32),L=n(19);n(1942);function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(L.a)(t);if(e){var o=Object(L.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(j.a)(this,n)}}var I=h.Plugin.POSITIONS,A=function(t){Object(E.a)(n,t);var e=R(n);function n(t){var r;return Object(T.a)(this,n),(r=e.call(this,t)).handleRateChange=function(){r.playbackrateText?(r.playbackrateText.innerText="".concat(r.player.playbackRate,"倍"),r.root.classList.add("active"),r.timer&&clearTimeout(r.timer),r.timer=window.setTimeout((function(){r.timer=void 0,r.root.classList.remove("active")}),3e3)):console.warn("span element does not exist")},r}return Object(P.a)(n,[{key:"afterCreate",value:function(){this.playbackrateText=this.find("span.playbackrate-text"),this.on(h.Events.RATE_CHANGE,this.handleRateChange)}},{key:"render",value:function(){return'<div class="xgplayer-playbackrate-toast">正在用 <span class="playbackrate-text">1倍</span> 速率播放</div>'}},{key:"destroy",value:function(){this.off(h.Events.RATE_CHANGE,this.handleRateChange)}}],[{key:"pluginName",get:function(){return"DefinitionToast"}},{key:"defaultConfig",get:function(){return{position:I.ROOT}}}]),n}(h.Plugin),D=n(1943),M=n.n(D),B=n(1944),N=n.n(B),F=n(1945),H=n.n(F),U=n(1946),$=n.n(U),G=n(1947),W=n.n(G),z=n(1948),Y=n.n(z),K=n(1949),Z=n.n(K),X=n(1950),J=n.n(X),Q=n(1951),tt=n.n(Q),et=n(1952),nt=n.n(et),it=[480,720,1080],ot={space:{code:32,action:"playPause",disable:!1},up:{code:38,action:"upVolume",disable:!1},down:{code:40,action:"downVolume",disable:!1},left:{code:37,action:"customSeekBack",disable:!1},right:{code:39,action:"customSeek",disable:!1},esc:{code:27,action:"exitFullscreen",disable:!1}},st={autoplay:!1,cssFullscreen:!1,playbackRate:[.75,1,1.25,1.5,2],defaultDefinition:"720p",icons:{play:$.a,pause:H.a,fullscreen:N.a,exitFullscreen:M.a,startPlay:Z.a,startPause:Y.a,replay:W.a,volumeSmall:nt.a,volumeLarge:nt.a,volumeMuted:J.a,playNext:tt.a},definitionText:{"480p":"标清 480P","720p":"高清 720P","1080p":"超清 1080P"}};function at(t,e){return ct.apply(this,arguments)}function ct(){return(ct=Object(o.a)(regeneratorRuntime.mark((function t(e,r){var o,c,l,h,d,v,m,y,w,_,k,C,O,x,S,T,P,E,j,L,R,I=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=I.length>2&&void 0!==I[2]&&I[2],c=I.length>3&&void 0!==I[3]?I[3]:"hls",w=[],_=void 0,k=[A],t.next=7,V(e,c);case 7:if(C=t.sent,w=(null===(h=null===(l=C.dashOpts)||void 0===l?void 0:l.Data)||void 0===h?void 0:h.PlayInfoList)||[],O=null===(d=w[w.length-1])||void 0===d?void 0:d.MainPlayUrl,x=(null===(m=null===(v=C.dashOpts)||void 0===v?void 0:v.Data)||void 0===m?void 0:m.CoverUrl)||"","hls"!==c){t.next=23;break}return t.next=14,n.e(318).then(n.t.bind(null,4413,7));case 14:if(S=t.sent,T=S.default,null===(y=null==T?void 0:T.isSupported)||void 0===y?void 0:y.call(T,window&&(null===navigator||void 0===navigator?void 0:navigator.userAgent))){t.next=21;break}throw P="不支持的浏览器 ".concat(window&&(null===navigator||void 0===navigator?void 0:navigator.userAgent)),(E=new Error(P)).code=-1,E;case 21:k.push(T),_=C.EncryptHlsPlugin;case 23:return j=Object.assign(st,{url:O,volume:o?1:.5,poster:x,plugins:k,EncryptHlsPlugin:_},r),ut(L=new f.a(j)),"hls"===c&&(R=w.filter((function(t){return it.includes(t.Height)})).map((function(t){return{name:t.Definition,url:t.MainPlayUrl}})),L.emit("resourceReady",R)),t.abrupt("return",L);case 28:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ut(t){t.on("ABR_AUTO_DESC_CHANGE",(function(e,n,r){!function(t,e,n,r){if(!t)return;var o=t.root.querySelector(".xgplayer-definition [url='__auto__']");o&&(o.innerHTML=e+"".concat(n?"(".concat(n,")"):"")+"".concat(r||""))}(t,e,n,r)})),t.on(h.Events.DEFINITION_CHANGE,(function(e){var n=e.to.showText;!function(t,e){if("自动"===e)return;var n=t.root.querySelector(".xg-options-icon.xgplayer-definition.show .icon-text"),r=e.split(" "),text=Object(l.a)(r,2)[1];n&&text&&(n.innerHTML=text)}(t,void 0===n?"":n),ht(t.getPlugin("definition"))})),t.on(h.Events.RATE_CHANGE,(function(){lt(t),ht(t.getPlugin("playbackrate"))})),t.on(h.Events.PLAYING,(function(){lt(t)})),t.on(h.Events.SHORTCUT,(function(data){t.fullscreen&&("customSeek"===data.action?t.seek(t.currentTime+10):"customSeekBack"===data.action&&t.seek(t.currentTime-10))}))}function lt(t){if(t){var e=t.playbackRate,n=t.controls.right.querySelector(".xg-options-icon.xgplayer-playbackrate.show .icon-text");1===e&&(n.innerHTML="倍速")}}function ht(t){var e,n=t.find(".xg-options-list");null===(e=null==n?void 0:n.classList)||void 0===e||e.replace("active","hide"),t.isActive=!1}function ft(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function pt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ft(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):ft(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var vt=Object(c.b)({props:{vid:{type:String,default:""},videoType:{type:String,default:"hls"},videoConfig:{type:Object,default:function(){return{}}},videoLoading:{type:Boolean,default:!1}},emits:["handleEvent"],setup:function(t,e){var n=e.emit,r=function(){var t=Object(c.n)(!0),e=Object(c.n)("uninitialize"),n=Object(c.n)(),r=Object(c.c)(),l=null==r?void 0:r.proxy.$device.isMobile,h=Object(c.n)(),f=Object(c.a)((function(){var t;return"".concat((null===(t=h.value)||void 0===t?void 0:t.offsetWidth)/16*9)})),d=Object(c.n)("");return{initVideoPlay:function(){var c=Object(o.a)(regeneratorRuntime.mark((function o(c,h,v){var m;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if("initializing"!==e.value||c!==d.value){o.next=2;break}return o.abrupt("return");case 2:return d.value=c,e.value="initializing",o.prev=4,o.next=7,at(c,pt({id:"mse",width:"100%",height:"".concat(f.value,"px"),keyboard:l?void 0:{keyCodeMap:ot}},v),l,h);case 7:if(m=o.sent){o.next=13;break}return e.value="uninitialize",o.abrupt("return");case 13:e.value="initialized";case 14:n.value=m,o.next=22;break;case 17:o.prev=17,o.t0=o.catch(4),-1===(null===o.t0||void 0===o.t0?void 0:o.t0.code)&&(t.value=!1),console.warn("video player init err:",o.t0),null==r||r.proxy.$error("视频加载失败");case 22:case"end":return o.stop()}}),o,null,[[4,17]])})));return function(t,e,n){return c.apply(this,arguments)}}(),mseRef:h,isVideoSupported:t,playerInstance:n,playerState:e}}(),l=r.initVideoPlay,h=r.mseRef,f=r.isVideoSupported,d=r.playerInstance,v=r.playerState;return Object(c.y)([function(){return t.vid},h,function(){return t.videoLoading}],Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.vid&&h.value&&!t.videoLoading){e.next=2;break}return e.abrupt("return");case 2:return d.value&&(d.value.destroy(),d.value=null),e.next=5,l(t.vid,t.videoType,t.videoConfig);case 5:n("handleEvent",d.value);case 6:case"end":return e.stop()}}),e)}))),{immediate:!0}),{mseRef:h,isVideoSupported:f,playerState:v}}}),gt=(n(1953),n(29)),component=Object(gt.a)(vt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video"},[n("div",{ref:"mseRef",attrs:{id:"mse"}},[t.isVideoSupported?t._e():n("div",{staticClass:"not-supported"},[n("span",[t._v("视频播放器暂不支持您的浏览器，")]),t._v(" "),n("span",[t._v("请在掘金 App 或者 PC 端观看视频")])]),t._v(" "),"initialized"===t.playerState?t._t("content"):t._e()],2)])}),[],!1,null,"1a72956a",null);e.a=component.exports},2188:function(t,e,n){"use strict";n(1937)},2189:function(t,e,n){"use strict";n(1938)},2197:function(t,e,n){"use strict";n(1954)},2198:function(t,e,n){"use strict";n(1955)},2200:function(t,e,n){"use strict";var r,o=n(12),c=n(13);n(11),n(6),n(54),n(281);function l(t){if(t<0||!t)return"0秒";if(0<=t&&t<60)return t+"秒";var e=Math.floor(t/60),s=Math.floor(t%60);return s>0?e+"分"+s+"秒":e+"分"}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=new Map,c=[];return t.forEach((function(t){var h,f,d,v="";t.sectionId===(null===(h=e.reading_progress)||void 0===h?void 0:h.last_section_id)&&(v="上次学到"),(null===(f=t.reading_progress)||void 0===f?void 0:f.reading_progress)>=100&&(v="已学完"),2===(null===(d=t.reading_progress)||void 0===d?void 0:d.has_update)&&(v="有更新");var m="";m=e.price>0?t.isFree?"试学章节":"付费章节":"免费章节",c.push(t.sectionId),o.set(t.sectionId,{sectionId:t.sectionId,title:t.title||"小册章节标题",readCount:t.readCount,commentCount:t.commentCount,readDurationStr:l(t.readDuration),status:v,isFinished:t.isFinished,freeStatus:m,canEdit:n===r.author,vid:t.vid,hasVideo:!!t.vid})})),{sectionMap:o,sectionOrder:c}}function f(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o&&o.id?(null===(t=o.roles)||void 0===t?void 0:t.isAdmin)?r.admin:o.id===(null===(e=n.user)||void 0===e?void 0:e.user_id)?r.author:n.is_buy?r.buyer:r.common:r.unlogin}!function(t){t.unlogin="unlogin",t.admin="admin",t.author="author",t.buyer="buyer",t.common="common"}(r||(r={}));var d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.a)(this,t),this.bookId="",this.userRole=r.common,this.sectionMap=new Map,this.sectionOrder=[],this.bookId=n.booklet_id,this.userRole=f(n,c);var l=h(e,n,this.userRole);this.sectionMap=l.sectionMap,this.sectionOrder=l.sectionOrder}return Object(c.a)(t,[{key:"getSectionList",value:function(){var t=this,e=[];return this.sectionOrder.forEach((function(n){var r;e.push((r=t.sectionMap.get(n),JSON.parse(JSON.stringify(r))))})),e}},{key:"setSectionFree",value:function(){}}]),t}();e.a=d},2201:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"20",viewBox:"0 0 16 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.5822 5.29608C12.5184 2.81844 10.4914 0.833008 8.00036 0.833008C5.46911 0.833008 3.41703 2.88301 3.41703 5.41634V6.66634C1.80591 6.66761 0.500583 7.97418 0.500855 9.5853L0.501795 15.167C0.502167 17.3759 2.29292 19.1663 4.50179 19.1663H11.5004C13.7095 19.1663 15.5004 17.3755 15.5004 15.1663V9.58301C15.5004 7.97218 14.1945 6.66634 12.5837 6.66634V5.41634L12.5822 5.29608ZM8.00006 11.0002C9.10472 11.0002 10.0001 11.8968 10.0001 13.0002C10.0001 14.1035 9.10472 15.0002 8.00006 15.0002C6.89539 15.0002 6.00006 14.1035 6.00006 13.0002C6.00006 11.8968 6.89539 11.0002 8.00006 11.0002ZM5.08581 5.3163C5.13867 3.75039 6.42352 2.5 8.00079 2.5C9.61162 2.5 10.9175 3.80417 10.9175 5.41667V6.66667H5.08412V5.41667L5.08581 5.3163Z",fill:"#C2C8D1"}})]))}}},2415:function(t,e,n){"use strict";n(16),n(15),n(11),n(6),n(14);var r=n(0),o=n(4),c=n(84),l=(n(39),n(1195)),h=n(1712),f=n(1765),d={components:{VipBorrowButton:h.a,BookBuyButton:f.a,BookThumb:l.a},props:["bookInfo"],computed:{isWapSection:function(){return"bookWapSection"===this.$route.name}},methods:{buyBook:function(){this.$emit("buy")}}},v=(n(2188),n(29)),m=Object(v.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"buying-guide-wrap"},[n("div",{staticClass:"buying-guide",class:{"buying-guide--m":t.isWapSection}},[n("div",{staticClass:"buying-inner"},[n("div",{staticClass:"poster"},[n("BookThumb",{staticClass:"thumb",attrs:{book:t.bookInfo}})],1),t._v(" "),n("div",{staticClass:"title"},[t._v("此章节为付费章节")]),t._v(" "),n("div",{staticClass:"desc"},[t._v("现在购买立即解锁全部内容")]),t._v(" "),n("div",{staticClass:"button-container"},[n("BookBuyButton",{attrs:{book:t.bookInfo,"is-float-discount-label":!0},on:{buyBook:t.buyBook}}),t._v(" "),n("VipBorrowButton",{attrs:{"book-info":t.bookInfo,"event-page":"lock"}})],1)])])])}),[],!1,null,"7e23cee3",null).exports,y={components:{BookThumb:l.a},props:["bookInfo"],computed:{isWapSection:function(){return"bookWapSection"===this.$route.name}}},w=(n(2189),Object(v.a)(y,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"section-writing-wrap"},[e("div",{staticClass:"section-writing",class:{"section-writing--m":this.isWapSection}},[e("div",{staticClass:"writing-inner"},[e("div",{staticClass:"poster"},[e("BookThumb",{staticClass:"thumb",attrs:{book:this.bookInfo}})],1),this._v(" "),e("div",{staticClass:"title"},[this._v("此章节正在写作中")])])])])}),[],!1,null,"217a0058",null).exports),_=(n(45),n(121),n(21),n(5)),k=(n(83),n(991)),C=n(48),O=n(104),x=n(1092),content=n(889),V=n(7),S=n(1290),T=n(2103),P=n(1637);function E(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var L=Object(V.b)({components:{CommentListBox:k.a,MarkdownViewer:x.default,VipBorrowButton:h.a,BookBuyButton:f.a,Video:T.a},props:["bookInfo","sectionInfo","free"],setup:function(t,e){var n=e.root,r=Object(V.v)();return Object(P.d)(r.value.params.sectionId),j({},function(t,e){var n={miniscreen:Object(V.a)((function(){return e.$device.isMobile}))?null:{width:320,height:180,isShowIcon:!0,isScrollSwitch:!0}};return{isLegacyBookletVid:Object(V.a)((function(){var e;return"6844733803647205384"===(null===(e=t.bookInfo)||void 0===e?void 0:e.id)})),handleVideoEvent:function(t){console.log("%c 🌭 player","color:#f5ce50",t);var n=e.$getBean("eventBus");t.on(S.Events.FULLSCREEN_CHANGE,(function(t){n.emit(n.eventType.VIDEO_FULLSCREEN_CHANGE,t)}))},videoConfig:n}}(t,n))},data:function(){return{htmlContent:"",canFetch:!0,isVideoSupported:!0,commentList:[],query:{entryId:"",startTime:"",pageSize:20},readingPostion:0,videoWrapperHeight:0,mobilePlayerStyle:{}}},computed:j({subject:function(){return{item_id:this.section.section_id,item_type:13,user_id:this.section.user_id,comment_count:this.section.comment_count}},curSectionId:function(){return this.$route.params.sectionId},isLastSectionId:function(){var t,e,n=(null===(e=null===(t=this.bookInfo.base_info)||void 0===t?void 0:t.section_ids)||void 0===e?void 0:e.split("|"))||[];return(n.length>0?n[n.length-1]:0)===this.curSectionId},isMobileBrowser:function(){return this.$device.isMobile},section:function(){return Object.assign({},this.sectionInfo,{user:this.bookInfo.user})},showBuyButton:function(){return!this.free&&this.sectionInfo.isFree&&this.sectionInfo&&this.isMobileBrowser&&!this.bookInfo.isBorrowing}},Object(c.mapGetters)({user:o.USER,login:o.LOGIN})),watch:{$route:function(){this.fetch()},sectionInfo:{handler:function(t){var e=this;return Object(_.a)(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null==t?void 0:t.id)){n.next=18;break}if(e.htmlContent=t.html,e.bookletId=t.bookId,e.sectionId=t.id,e.readingPostion=Number((null===(r=t.reading_progress)||void 0===r?void 0:r.reading_position)||"0"),e.initPosition(),!(null===(o=e.user)||void 0===o?void 0:o.id)){n.next=18;break}return n.prev=7,n.next=10,Object(content.a)({booklet_id:e.bookletId,section_id:e.sectionId,reading_position:e.readingPostion});case 10:if(0===(c=n.sent).err_no||"0"===c.err_no){n.next=13;break}throw c;case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(7),console.warn("阅读记录上报失败",n.t0);case 18:e.setupVideoPlayer();case 19:case"end":return n.stop()}}),n,null,[[7,15]])})))()},immediate:!0}},mounted:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isMounted=!0,t.initRecordReadPos(),t._handleCurrentReadRecord=function(){var e=t.getCurrentReadPos();t.doRecord(e)},Object(C.o)(t._handleCurrentReadRecord),window.addEventListener("beforeunload",t._handleCurrentReadRecord),t.setupVideoPlayer();case 6:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){if(this.removeScrollListener){this.removeScrollListener();var t=this.getCurrentReadPos();this.doRecord(t)}Object(C.q)(this._handleCurrentReadRecord),window.removeEventListener("beforeunload",this._handleCurrentReadRecord)},methods:{setupVideoPlayer:function(){var t;(null===(t=this.sectionInfo)||void 0===t?void 0:t.vid)&&(this.removeVideoTag(),this.$refs.sectionPage&&this.calculateHeight())},calculateHeight:function(){var t=this.$refs.sectionPage,e=t.offsetLeft,n=t.offsetTop,r=t.offsetWidth,o=(this.isMobileBrowser?r:this.$refs.mse.clientWidth)/16*9;this.mobilePlayerStyle={left:"".concat(e,"px"),top:"".concat(n,"px"),width:"".concat(r,"px"),height:"".concat(r/16*9,"px")},this.videoWrapperHeight=o},initPosition:function(){this.$route.hash?this.initHashToElement(this.$route.hash):0<this.readingPostion&&this.readingPostion<=100&&this.scrollToContentPos(this.readingPostion)},removeVideoTag:function(){var content=this.sectionInfo.html||"";content=content.replace(/^<div\s+data-source="https:\/\/video-cdn\.juejin\.im.+?<\/div>/,""),this.htmlContent=content},buyBook:function(){this.$emit("buy")},syncCommentNum:function(t){var e=t.count,n=t.type;"add"===n?this.section.comment_count+=1:"sub"===n?this.section.comment_count-=e?e+1:1:this.section.comment_count=e,this.section.comment_count=this.section.comment_count>0?this.section.comment_count:0},initHashToElement:function(t){var e=this;this.$nextTick((function(){var n=t;if(n&&"#mark-star"!==n)if("#comment"===n)e.$refs.commentForm.focus(),Object(C.r)(e.$refs.commentForm);else{var r=n.substring(1),o=e.$refs.content.$el.querySelectorAll('[data-id="'.concat(r,'"]'))[0],c=e.isMobileBrowser?35:70,l=o.offsetTop;window.scrollTo(0,l-c)}}))},scrollToContentPos:function(t){var e=this;this.$nextTick((function(){var n,r;if(!(null===(r=null===(n=e.$refs)||void 0===n?void 0:n.content)||void 0===r?void 0:r.$el))return 0;var o=Object(C.h)().height,c=e.$refs.content.$el.getBoundingClientRect().height;window.scrollTo(0,c*t/100-o+122)}))},initRecordReadPos:function(){var t,e,n=this;(null===(t=this.user)||void 0===t?void 0:t.id)&&"0"!==(null===(e=this.user)||void 0===e?void 0:e.id)&&(this.removeScrollListener=Object(C.m)(window,Object(O.a)((function(){n.scrollRecord(n.getCurrentReadPos())}),500)))},getCurrentReadPos:function(){var t,e;if(!(null===(e=null===(t=this.$refs)||void 0===t?void 0:t.content)||void 0===e?void 0:e.$el))return 0;var n=Object(C.h)().height,r=this.$refs.content.$el.getBoundingClientRect(),o=r.y,c=r.height;if(0===c)return 0;var l=Math.round((n-o)/c*100);return l<0?0:l>100?100:l},scrollRecord:function(t){Math.abs(t-this.readingPostion)>5&&this.doRecord(t)},doRecord:function(t){var e=this;return Object(_.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===(r=e.user)||void 0===r?void 0:r.id){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,Object(content.a)({booklet_id:e.bookletId,section_id:e.sectionId,reading_position:t});case 5:if(0===(o=n.sent).err_no||"0"===o.err_no){n.next=8;break}throw o;case 8:e.readingPostion=t,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),console.warn("阅读记录上报失败",n.t0);case 14:case"end":return n.stop()}}),n,null,[[2,11]])})))()}}});n(2197);function R(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function I(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?R(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):R(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var A={components:{SectionBuyingGuide:m,SectionWriting:w,SectionContent:Object(v.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section-content"},[n("div",{ref:"sectionPage",staticClass:"section-page book-section-view"},[n("div",{staticClass:"video-wrapper",style:t.isMobileBrowser?{height:t.videoWrapperHeight+"px"}:{}},[n("Video",{staticClass:"video",style:t.isMobileBrowser?t.mobilePlayerStyle:{},attrs:{"video-type":t.isLegacyBookletVid?"mp4":"hls",vid:t.sectionInfo.vid||"","video-config":t.videoConfig},on:{handleEvent:t.handleVideoEvent}})],1),t._v(" "),t.sectionInfo.markdown||t.htmlContent?n("markdown-viewer",{ref:"content",attrs:{markdown:t.sectionInfo.markdown,html:t.htmlContent}}):t._e(),t._v(" "),t.showBuyButton?n("div",{staticClass:"bottom-mobile-buy"},[n("BookBuyButton",{attrs:{book:t.bookInfo,"is-float-discount-label":!0},on:{buyBook:t.buyBook}}),t._v(" "),n("VipBorrowButton",{staticClass:"borrow",attrs:{"event-page":"free","book-info":t.bookInfo}})],1):t._e(),t._v(" "),t.sectionInfo.markdown||t.htmlContent?n("section",{ref:"commentBox",staticClass:"book-comments"},[n("div",{staticClass:"box-title"},[t._v("留言")]),t._v(" "),n("CommentListBox",{attrs:{subject:t.subject,"jj-helper-item-id":t.bookletId,"jj-helper-item-type":12,expanded:!0,sticky:!1},on:{syncCommentNum:t.syncCommentNum}})],1):t._e()],1)])}),[],!1,null,"841680ca",null).exports},props:["bookInfo","sectionInfo","free"],data:function(){return{}},computed:I(I({},Object(c.mapGetters)({logined:o.LOGINED,user:o.USER})),{},{isAuthor:function(){return!!this.user&&this.bookInfo.user.id===(null==this?void 0:this.user.id)},isAdmin:function(){var t,e;return!!this.user&&(null==this||null===(t=this.user)||void 0===t||null===(e=t.roles)||void 0===e?void 0:e.isAdmin)},sectionContentComponent:function(){var t,e,n,r,o=0===(null==this||null===(t=this.bookInfo)||void 0===t?void 0:t.price),c=1===(null==this||null===(e=this.sectionInfo)||void 0===e?void 0:e.is_free),l=(null==this||null===(n=this.bookInfo)||void 0===n?void 0:n.is_buy)||!1,h=0===(null==this||null===(r=this.sectionInfo)||void 0===r?void 0:r.status)||!1,f=(null==this?void 0:this.bookInfo.isBorrowing)||!1;return this.isAdmin||this.isAuthor?"section-content":c||o||l||f?h?"section-writing":"section-content":"section-buying-guide"}}),methods:{buyBook:function(){this.$coursePayment(this.user,this.bookInfo.id)}}},D=(n(2198),Object(v.a)(A,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"section-view"},[e(this.sectionContentComponent,{tag:"component",attrs:{"book-info":this.bookInfo,"section-info":this.sectionInfo,free:this.free},on:{buy:this.buyBook}})],1)}),[],!1,null,"3bdbd109",null));e.a=D.exports},2574:function(t,e,n){},2575:function(t,e,n){},2576:function(t,e,n){},2577:function(t,e,n){},3396:function(t,e,n){t.exports=n.p+"img/wx-qr.966373a.jpg"},3397:function(t,e,n){"use strict";n(2574)},3398:function(t,e,n){t.exports=n.p+"87ad47e35a060899d2234a8b5e7f378f.svg"},3399:function(t,e,n){t.exports=n.p+"54d8a353dfbeff543c8a513821df8caf.svg"},3400:function(t,e,n){"use strict";n(2575)},3401:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,d],style:[style,v],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.24984 3.33331H12.9165C13.3558 3.33331 13.7157 3.67326 13.7476 4.10445L13.7498 4.16665V15.8333C13.7498 16.2726 13.4099 16.6325 12.9787 16.6644L12.9165 16.6666H1.24984C0.81052 16.6666 0.450602 16.3267 0.41879 15.8955L0.416504 15.8333V4.16665C0.416504 3.72733 0.756453 3.36741 1.18764 3.3356L1.24984 3.33331H12.9165H1.24984ZM12.0831 4.99994H2.08309V14.9999H12.0831V4.99994ZM19.5831 6.47177V13.5281C19.5831 14.1758 18.8058 14.5759 18.1948 14.2427L14.9998 12.4999V7.49993L18.1948 5.75718C18.8058 5.42393 19.5831 5.82402 19.5831 6.47177ZM17.9164 7.94361L16.6664 8.44361V11.5563L17.9164 12.0563V7.94361ZM6.24976 6.66661V9.16661H3.74976V6.66661H6.24976Z",fill:"#8A919F"}})]))}}},3402:function(t,e,n){"use strict";n(2576)},3403:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,d],style:[style,v],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"},y)},w),h.concat([n("path",{attrs:{fill:"#BABABA","fill-rule":"evenodd",d:"M11 0h9v9h-9V0zM0 0h9v9H0V0zm0 11h9v9H0v-9zm14-5h3V3h-3v3zM3 6h3V3H3v3zm0 11v-3h3v3H3zm8-6h3v3h-3v-3zm3 3h3v3h-3v-3zm3-3h3v3h-3v-3zm-6 6h3v3h-3v-3zm6 0h3v3h-3v-3z"}})]))}}},3404:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,l=e._v,data=e.data,h=e.children,f=void 0===h?[]:h,d=data.class,v=data.staticClass,style=data.style,m=data.staticStyle,y=data.attrs,w=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[d,v],style:[style,m],attrs:Object.assign({width:"40px",height:"40px",viewBox:"0 0 40 40",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:sketch":"http://www.bohemiancoding.com/sketch/ns"},w)},_),f.concat([n("title",[l("juejin_logo copy")]),n("desc",[l("Created with Sketch.")]),n("defs"),n("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","sketch:type":"MSPage"}},[n("g",{attrs:{id:"juejin_logo-copy","sketch:type":"MSArtboardGroup",fill:"#007FFF"}},[n("path",{attrs:{d:"M23.2819984,7.7030545 L19.8538714,5 L16.2721918,7.8241757 L16.0865388,7.97375707 L19.8538714,10.977629 L23.6327866,7.97375707 L23.2819984,7.7030545 Z M36.2727433,18.185664 L19.8439434,31.1400064 L3.42507143,18.1936064 L1,20.1414735 L19.8439434,35 L38.6981457,20.1335312 L36.2727433,18.185664 Z M19.8439434,19.2367048 L10.903809,12.1875172 L8.47840667,14.1353844 L19.8439434,23.0970293 L31.2190771,14.127442 L28.7936748,12.1795749 L19.8439434,19.2367048 Z",id:"Fill-1-Copy-2","sketch:type":"MSShapeGroup"}})])])]))}}},3405:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,l=e._v,data=e.data,h=e.children,f=void 0===h?[]:h,d=data.class,v=data.staticClass,style=data.style,m=data.staticStyle,y=data.attrs,w=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[d,v],style:[style,m],attrs:Object.assign({width:"16px",height:"13px",viewBox:"0 0 16 13",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},w)},_),f.concat([n("title",[l("Group 4")]),n("desc",[l("Created with Sketch.")]),n("defs"),n("g",{attrs:{id:"全屏",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[n("g",{attrs:{id:"2_fullscreen_close-sidebar",transform:"translate(-19.000000, -25.000000)",fill:"#979797"}},[n("g",{attrs:{id:"Group-4",transform:"translate(19.000000, 25.000000)"}},[n("rect",{attrs:{id:"Rectangle-3",x:"0",y:"5.5",width:"16",height:"1.5"}}),n("rect",{attrs:{id:"Rectangle-3",x:"0",y:"0",width:"16",height:"1.5"}}),n("rect",{attrs:{id:"Rectangle-3-Copy",x:"0",y:"11",width:"16",height:"1.5"}})])])])]))}}},3406:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,d],style:[style,v],attrs:Object.assign({width:"137",height:"28",viewBox:"0 0 137 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),h.concat([n("path",{attrs:{d:"M17.5865 17.3955H17.5902L28.5163 8.77432L25.5528 6.39453L17.5902 12.6808H17.5865L17.5828 12.6845L9.62018 6.40201L6.6604 8.78181L17.5828 17.3992L17.5865 17.3955Z",fill:"#1E80FF"}}),n("path",{attrs:{d:"M17.5872 6.77268L21.823 3.40505L17.5872 0.00748237L17.5835 0L13.3552 3.39757L17.5835 6.76894L17.5872 6.77268Z",fill:"#1E80FF"}}),n("path",{attrs:{d:"M17.5865 23.2854L17.5828 23.2891L2.95977 11.7531L0 14.1291L0.284376 14.3574L17.5865 28L28.5238 19.3752L35.1768 14.1254L32.2133 11.7456L17.5865 23.2854Z",fill:"#1E80FF"}}),n("path",{attrs:{d:"M133.287 18.4172H131.162L129.923 23.0758H126.825V16.7559H135.364V14.7315H126.825V11.1469H133.074V9.12256H118.454V11.1469H124.703V14.7315H116.164V16.7559H124.703V23.0758H121.601L120.363 18.4172H118.237L119.487 23.0758H115.543V25.1001H135.985V23.0758H132.041L133.287 18.4172Z",fill:"#323232"}}),n("path",{attrs:{d:"M130.522 3.3151L130.2 2.94092H121.321L120.999 3.3151C119.298 5.2467 117.378 6.97337 115.278 8.46009V10.9522C116.206 10.3573 120.183 7.72295 122.327 4.98768H129.235C131.375 7.72295 135.356 10.3573 136.284 10.9522V8.46009C134.169 6.97586 132.235 5.2491 130.522 3.3151Z",fill:"#323232"}}),n("path",{attrs:{d:"M94.9037 8.53127H96.494V6.50323H94.9037V2.88867H92.9056V6.50323H91.3303V8.53127H92.9094V14.7914L91.3303 15.3377V17.5828L92.9094 17.0365V20.7371C92.8414 22.2391 92.5579 23.7236 92.0674 25.145H94.1629C94.6112 23.7165 94.863 22.2335 94.9112 20.7371V16.3442L96.5053 15.7904V13.5229L94.9112 14.0767L94.9037 8.53127Z",fill:"#323232"}}),n("path",{attrs:{d:"M99.1875 2.88867H97.6608V20.7446C97.6727 22.2359 97.4852 23.7221 97.1033 25.1637H99.1875C99.5206 23.7145 99.6851 22.2316 99.6776 20.7446V9.77357H112.321V2.88867H99.1875ZM110.308 7.75303H99.6851V4.91671H110.304L110.308 7.75303Z",fill:"#323232"}}),n("path",{attrs:{d:"M110.305 23.405H107.566V17.6838H110.021H110.702H111.91V11.8166H110.021V15.9363H107.566V11.1431H105.676V15.9363H103.27V11.8166H101.381V17.6838H102.298H103.27H105.676V23.405H102.967V19.173H101.074V25.1524H102.286H102.967H110.305H110.683H112.195V19.173H110.305V23.405Z",fill:"#323232"}}),n("path",{attrs:{d:"M53.0024 2.91846V4.83801L56.5908 6.11397L53.0024 7.38618V9.30573L59.2887 7.07187L65.5749 9.30573V7.38618L61.9865 6.11397L65.5749 4.83801V2.91846L59.2887 5.15232L53.0024 2.91846Z",fill:"#323232"}}),n("path",{attrs:{d:"M79.9508 11.697H88.5944V9.47813H79.9508V2.80273H77.5299V9.47813H68.8863V11.697H77.5299V22.9823H67.76V25.2012H89.7207V22.9823H79.9508V11.697Z",fill:"#323232"}}),n("path",{attrs:{d:"M48.9461 5.39227L52.2913 5.18272V3.24072L43.6813 3.78328V5.72529L47.0265 5.512V8.50545H43.5803V10.4213H47.0265V25.164H48.9461V10.4213H52.3923V8.50545H48.9461V5.39227Z",fill:"#323232"}}),n("path",{attrs:{d:"M57.6539 9.01025H55.6595L55.1768 10.3648H52.9991V12.2357H54.5145L52.55 17.7662H53.8821V24.1534H55.7007V16.8457H58.6642V25.1787H60.5837V16.8457H63.4612V21.059C63.4534 22.1374 63.181 23.1974 62.6679 24.146H64.7147C65.1423 23.173 65.3627 22.1217 65.362 21.059V15.6932V15.1282H60.5837V13.2572H58.6642V15.1282H55.4836L56.5313 12.2245H65.594V10.3536H57.1749L57.6539 9.01025Z",fill:"#323232"}}),n("path",{attrs:{d:"M43.562 24.6246H45.4591L46.2786 11.4272H44.3815L43.562 24.6246Z",fill:"#323232"}}),n("path",{attrs:{d:"M49.7849 11.4272L50.3499 23.2963H52.247L51.682 11.4272H49.7849Z",fill:"#323232"}})]))}}},3407:function(t,e,n){"use strict";n(2577)},4457:function(t,e,n){"use strict";n.r(e);var r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[this._v("关注公众号")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"qr-img"},[e("img",{attrs:{src:n(3396)}})])}],o=(n(16),n(15),n(11),n(14),n(6),n(121),n(45),n(39),n(0)),c=n(48),l=n(4),h=n(84),f=n(2415),d={props:["curIndex","list"]},v=(n(3397),n(29)),m=Object(v.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-progress"},[n("ul",t._l(t.list,(function(e,r){return n("li",{class:{active:r<=t.curIndex}})})),0)])}),[],!1,null,"6fbc2a2e",null).exports,y=n(1712),w={components:{VipBorrowButton:y.a},props:["free","curIndex","list","isBorrowing","bookInfo","foldPc"],data:function(){return{}},computed:{notLastPage:function(){return this.curIndex<this.list.length-1},notFirstPage:function(){return this.curIndex>0},bookId:function(){return this.$route.params.id}},methods:{buyBook:function(){this.$emit("buy")},prevPage:function(){this.$emit("prev")},nextPage:function(){this.$emit("next")}}},_=(n(3400),Object(v.a)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"handle"},[t.list.length>0?r("div",{staticClass:"book-handle",class:{"fold-pc":t.foldPc}},[t.notFirstPage?r("div",{staticClass:"step-btn step-btn--prev",on:{click:t.prevPage}},[r("img",{attrs:{src:n(3398)}})]):t._e(),t._v(" "),t.notLastPage?r("div",{staticClass:"step-btn step-btn--next",on:{click:t.nextPage}},[r("img",{attrs:{src:n(3399)}})]):t._e()]):t._e(),t._v(" "),t.notLastPage||t.free||t.bookInfo.isBorrowing?t._e():r("div",{staticClass:"buy-container"},[r("button",{staticClass:"buy",on:{click:t.buyBook}},[t._v("购买")]),t._v(" "),r("VipBorrowButton",{staticClass:"borrow",attrs:{"book-info":t.bookInfo,"event-page":"free"}})],1)])}),[],!1,null,"7f935304",null).exports),k=n(1711),C=n(2200),O=n(2201),x=n.n(O),V=n(3401),S=n.n(V),T=n(176);function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function E(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j={components:{LockIcon:x.a,CameraIcon:S.a,BAlert:T.Alert},props:["free","admin","info","list","sectionId","isVideoCourse"],data:function(){return{sectionList:[],userRole:"",initShowDitoryVisible:!0}},computed:E(E({},Object(h.mapGetters)({user:l.USER})),{},{tryRead:function(){var t=this.info,e=t.price,n=t.isBuy;return!(0===e)&&this.admin||!n},bookId:function(){return this.$route.params.id}}),watch:{sectionId:{handler:function(){var t=this;this.$nextTick((function(){var e,n;(null===(e=t.$refs)||void 0===e?void 0:e.activeRef)&&Array.isArray(null===(n=t.$refs)||void 0===n?void 0:n.activeRef)&&t.bookDirectoryVisible(t.$refs.activeRef[0])}))},immediate:!0}},created:function(){this.initData()},methods:{initData:function(){var t=new C.a(this.list,this.info,this.user);this.userRole=t.userRole,this.sectionList=t.getSectionList()},setFreeSection:function(t,e){this.$emit("setFreeSection",t,e)},routeSectionId:function(t){var e=t.sectionId;e!==this.$route.params.sectionId&&this.$emit("linkSection",e)},bookDirectoryVisible:function(t){t&&!this.$device.isMobile&&this.sectionId&&(null==t||t.scrollIntoView({behavior:this.initShowDitoryVisible?"auto":"smooth",block:"nearest",inline:"center"}),this.initShowDitoryVisible=!1)}}},L=(n(3402),Object(v.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-directory-comp beautify-scrollbar-warp",class:{"is-admin":"admin"===t.userRole,"is-author":"author"===t.userRole,"is-buyer":"buyer"===t.userRole}},[n("div",{staticStyle:{padding:"0 15px"}},["admin"===t.userRole?n("b-alert",{attrs:{"show-icon":""}},[t._v("\n      当前是管理员状态,以下所有章节都可点击阅读\n    ")]):"author"===t.userRole?n("b-alert",{attrs:{"show-icon":""}},[t._v("\n      您是小册作者,以下所有章节都可点击阅读\n    ")]):t._e()],1),t._v(" "),n("div",{staticClass:"section-list"},t._l(t.sectionList,(function(e,r){return n("a",{key:e.sectionId,ref:t.sectionId===e.sectionId?"activeRef":"",refInFor:!0,staticClass:"section",class:{unfinished:!e.isFinished,"route-active":t.sectionId===e.sectionId},on:{click:function(n){return t.routeSectionId(e)}}},[n("div",{staticClass:"left"},[n("div",{staticClass:"index"},[t._v(t._s(r+1))])]),t._v(" "),n("div",{staticClass:"center"},[n("div",{staticClass:"main-line"},[n("div",{staticClass:"title"},[t.isVideoCourse||e.hasVideo?n("CameraIcon",{staticClass:"icon-camera"}):t._e(),t._v(" "),n("span",{staticClass:"title-text"},[t._v(t._s(e.title))])],1),t._v(" "),n("div",{staticClass:"right"},[e.isFinished?"buyer"===t.userRole||t.info.isBorrowing?t._e():["付费章节"===e.freeStatus?n("div",{staticClass:"lock"},[n("LockIcon")],1):t._e(),t._v(" "),"试学章节"===e.freeStatus?n("div",{staticClass:"label"},[t._v("\n                试学\n              ")]):t._e()]:n("div",{staticClass:"lock"},[n("LockIcon")],1)],2)]),t._v(" "),n("div",{staticClass:"sub-line"},[e.isFinished?["已学完"===e.status?n("div",{staticClass:"label",staticStyle:{color:"#8a919f",background:"#e4e6eb"}},[t._v("\n              已学完\n            ")]):"上次学到"===e.status?n("div",{staticClass:"label",staticStyle:{color:"#1e80ff",background:"#eaf2ff"}},[t._v("\n              上次学到\n            ")]):"有更新"===e.status?n("div",{staticClass:"label",staticStyle:{color:"#f53f3f",background:"#ffece8"}},[t._v("\n              有更新\n            ")]):t._e(),t._v(" "),n("span",[t._v("学习时长: "+t._s(e.readDurationStr))])]:n("div",[t._v("写作中...")])],2)])])})),0)])}),[],!1,null,"3cf5100c",null).exports),R=n(1896),I=n(1765),A=n(225),D=n(184),M=n(24),B=n(7),N=n(3403),F=n.n(N),H=n(3404),U=n.n(H),$=n(3405),G=n.n($),W=n(3406),z=n.n(W),Y=n(9);function K(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Z(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?K(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):K(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var X=Object(B.b)({components:{UserAuth:R.a,BookDirectory:L,BookDirection:_,BookProgress:m,WechatQuickLogin:k.a,SectionPrev:f.a,SectionNext:f.a,AppOpenDrawer:function(){return Promise.all([n.e(11),n.e(13)]).then(n.bind(null,4558))},QrIcon:F.a,JuejinIcon:U.a,MenuIcon:G.a,JuejinLogoIcon:z.a,VipBorrowButton:y.a,BookBuyButton:I.a},provide:function(){var t=this;return{refreshBook:function(){t.fetch()}}},data:function(){return{sectionError:!1,sectionList:[],bookInfo:null,sectionInfo:{},direction:"next",view:"prev",unfoldM:!1,foldPc:!1,isViewNavOnTop:!1,isHeaderVisible:!0,needHide:!1,qrHide:!1,isPlayingFullscreen:!1}},computed:Z(Z({},Object(h.mapGetters)({user:l.USER,logined:l.LOGINED})),{},{isVideoCourse:function(){var t,e;return(null===(e=null===(t=this.bookInfo)||void 0===t?void 0:t.base_info)||void 0===e?void 0:e.course_type)===Y.BookletCourseType.Video},isAuthor:function(){var t,e;return(null===(t=this.author)||void 0===t?void 0:t.id)===(null===(e=this.user)||void 0===e?void 0:e.id)},isAdmin:function(){var t,e=this.user||{};return(null===(t=null==e?void 0:e.roles)||void 0===t?void 0:t.isAdmin)||this.isAuthor},canPayment:function(){var t=this.bookInfo,e=t.price,n=t.isBuy;return e>0&&!n&&!this.isAuthor},directionClass:function(){return"prev"===this.direction?"transition--prev":"transition--next"},bookId:function(){return this.$route.params.id},sectionId:function(){return this.$route.params.sectionId},filterList:function(){var t=this;return this.isAdmin?this.sectionList.map((function(t){return t.sectionId})).filter((function(t){return t})):this.sectionList.map((function(e){return!(!(t.free||e.isFree||t.bookInfo.isBorrowing)||!e.isFinished)&&e.sectionId})).filter((function(t){return t}))},sectionIdList:function(){return this.bookInfo&&this.bookInfo.section||[]},curDirectoryIndex:function(){return this.sectionIdList&&this.sectionIdList.indexOf(this.sectionId)},curFreeDirectoryIndex:function(){var t=this.$route.params.sectionId;return this.filterList.indexOf(t)},free:function(){var t=this.bookInfo,e=t.price,n=t.isBuy,r=0===e;return r||n},author:function(){var t=this.bookInfo;return t&&t.user||{}},isMobile:function(){return this.$device.isMobile},scheme:function(){var t=this.$route.params||{},e=t.id,n=t.sectionId;return Object(D.e)("https://".concat(M.b,"/book/").concat(e,"/section/").concat(n),D.a.bookSectionDetail.gd_label)}}),watch:{$route:function(){this.bookInfo||this.fetch(),this.getSection(),this.loopComponent()}},shareInfo:function(){var t=this.bookInfo||{};return{title:"".concat(t.title," - ").concat(this.author.username," - 掘金课程"),noTemplate:!0,description:t.desc,thumb:t.img,url:this.$route.fullPath}},head:function(){var title=this.bookInfo&&this.bookInfo.title||"",t=this.author.username||"";return t=t?t+" - ":"",{titleTemplate:null,title:"".concat(title=title?title+" - ":"").concat(t,"掘金课程")}},methods:Z(Z({},Object(h.mapActions)({toogle_suspension:l.CHANGE_SUSPENSION_PANEL})),{},{buyBook:function(){return this.$coursePayment(this.user,this.bookId)},getXiaoce:function(){var t=this;return this.getXiaoceById().then((function(){t.isVideoCourse&&"bookSection"===t.$route.name&&t.$router.replace({name:"videoCourseSection",params:t.$route.params})}))},getXiaoceById:function(){var t=this;return Object(A.b)(this.bookId).then((function(e){var n=e.bookInfo,r=e.sections;t.bookInfo=n;t.sectionList=r.length?r.map((function(t){return Object.assign(t,{read:!1})})):[],Number(t.sectionId)?t.getSection():t.redirectSection()}))},getSection:function(){var t=this,e=this.sectionId;this.setSectionListIsRead(e),Object(A.e)(e).then((function(e){if(e||t.redirectSection(),!e.id)return Promise.reject(new Error);t.sectionInfo=Object.assign({},e,{html:e.content,markdown:e.markdown_show}),t.enterSectionTEA()})).catch((function(e){console.error(e),t.sectionInfo=null}))},setFreeSection:function(t,e){var n=this;this.$getBean("xiaoceBusiness").setFreeSection(t,e).then((function(){n.getListSection()})).catch((function(t){n.$alertMsg(t)}))},redirectSection:function(){var t=this.filterList&&this.filterList[0];t?(this.setSectionListIsRead(t),this.$router.replace({params:{id:this.bookId,sectionId:t}})):this.$router.push({name:this.isVideoCourse?"videoCourseInfo":"bookInfo",params:{id:this.bookId}})},loopComponent:function(){var t=this.view;this.view="prev"===t?"next":"prev"},prevPage:function(t){(t=t||this.filterList[this.curFreeDirectoryIndex-1])&&(this.setSectionListIsRead(t),this.sectionInfo={},this.direction="prev",this.$router.push({params:{sectionId:t},query:this.$route.query}))},nextPage:function(t){(t=t||this.filterList[this.curFreeDirectoryIndex+1])&&(this.setSectionListIsRead(t),this.direction="next",this.sectionInfo={},this.$router.push({params:{sectionId:t},query:this.$route.query}))},setSectionIsRead:function(t,e){var n=Object.assign(this.sectionList[t],{read:e});this.$set(this.sectionList,t,n)},setSectionListIsRead:function(t){var e=this,n=this.sectionIdList.indexOf(t);n>-1&&this.sectionIdList.forEach((function(t,r){r<n?e.setSectionIsRead(r,!0):e.setSectionIsRead(r,!1)}))},linkSection:function(t){var e=this.sectionIdList.indexOf(t);this.curDirectoryIndex>e?(this.direction="prev",this.prevPage(t)):(this.direction="next",this.nextPage(t)),this.unfoldM=!1},toggleSummary:function(){var t=this.unfoldM,e=this.foldPc;this.unfoldM=!t,this.foldPc=!e},toggleQrPopup:function(){var t=this.qrHide;this.qrHide=!t},hideQrPopup:function(){var t=this;this.qrHide=!0,window.localStorage.setItem("bookQrHideSection",!0);var e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.ROOT_CONTAINER_CLICK,(function(){t.qrHide=!0}))},initQrHide:function(){var t=window.localStorage.getItem("bookQrHideSection");this.qrHide=t},initScroll:function(){var t=this;this.removeScrollDirectionChangeEventListener=Object(c.n)(window,(function(e,n){var r="up"===e,o=n<=50;t.needHide=o&&!r,t.isHeaderVisible=o||r}),50),this.removeScrollEventListener=Object(c.m)(window,(function(){window.pageYOffset<=50&&!t.isHeaderVisible?t.isHeaderVisible=!0:t.needHide&&(t.needHide=!1,t.isHeaderVisible=!1)}),50)},initPlayDirection:function(){var t=this;this.removeDirectionListener=Object(c.k)(document,"keyup",(function(e){e.ctrlKey||t.isPlayingFullscreen||(37===e.keyCode?t.prevPage():39===e.keyCode&&t.nextPage())}))},fetch:function(){this.getXiaoce()},reset:function(){this.toogle_suspension(!0)},handleVisibilityChange:function(){"visible"===document.visibilityState&&this.enterSectionTEA()},enterSectionTEA:function(){var t=this.sectionInfo;this.$TEA("book_section_detail_visit",{book_id:t.booklet_id,section_id:t.section_id,is_trial_section:t.is_free,is_purchased:this.bookInfo.isBuy?1:0,platform:this.isMobile?"h5":"web",rent_status:this.bookInfo.isBorrowing?"underway":this.bookInfo.borrowTimes>0?"finish":"never"})}}),mounted:function(){var t,e,n=this;this.initQrHide(),this.initScroll(),this.toogle_suspension(!1),this.fetch(),this.initPlayDirection();var r=this.$getBean("eventBus");r.onVmLife(this,r.eventType.VIDEO_FULLSCREEN_CHANGE,(function(t){n.isPlayingFullscreen=t})),Object(c.o)(this.handleVisibilityChange),this.isMobile&&!(null===(e=null===(t=this.$store.state)||void 0===t?void 0:t.header)||void 0===e?void 0:e.isPopupZlink)&&(window.open("https://z.juejin.cn/SMF5","_blank"),this.$store.commit("header/POPUP_ZLINK"))},beforeDestroy:function(){this.reset(),this.removeDirectionListener(),this.removeScrollEventListener(),this.removeScrollDirectionChangeEventListener(),Object(c.q)(this.handleVisibilityChange)}}),J=(n(3407),Object(v.a)(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.bookInfo?n("div",{staticClass:"book-read-view"},[n("section",{staticClass:"book-section",class:{"fold-pc":t.foldPc}},[n("div",{staticClass:"book-summary",class:{"unfold-mobile":t.unfoldM}},[n("div",{staticClass:"book-summary-masker",on:{click:t.toggleSummary}}),t._v(" "),n("div",{staticClass:"book-summary-inner"},[n("div",{staticClass:"book-summary__header"},[n("app-link",{staticClass:"logo",attrs:{to:t.$courseIndex()}},[n("JuejinLogoIcon",{staticStyle:{height:"100%",width:"auto"}})],1),t._v(" "),n("div",{staticClass:"label"},[t._v("课程")]),t._v(" "),1==t.bookInfo.isPublish?n("div",{staticClass:"audit"},[t._v("审核中")]):t._e()],1),t._v(" "),t.free||t.bookInfo.isBorrowing?t._e():n("div",{staticClass:"buy-sticky"},[n("BookBuyButton",{staticClass:"section-buy",attrs:{book:t.bookInfo,"is-float-discount-label":!0},on:{buyBook:t.buyBook}}),t._v(" "),n("VipBorrowButton",{attrs:{"event-page":"free","book-info":t.bookInfo},on:{fetch:t.getXiaoceById}})],1),t._v(" "),n("book-directory",{staticClass:"book-directory",class:{bought:!t.canPayment||t.bookInfo.isBorrowing},attrs:{free:t.free,admin:t.isAdmin,info:t.bookInfo,list:t.sectionList,"cur-index":t.curDirectoryIndex,sectionId:t.sectionId,"is-video-course":t.isVideoCourse},on:{setFreeSection:t.setFreeSection,linkSection:t.linkSection}}),t._v(" "),n("div",{staticClass:"book-summary__footer",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"qr-icon",on:{click:function(e){return e.stopPropagation(),t.toggleQrPopup(e)}}},[n("QrIcon")],1),t._v(" "),n("div",{staticClass:"qr-tips",class:{show:!t.qrHide}},[n("span",{staticClass:"ion-close",on:{click:t.hideQrPopup}}),t._v(" "),t._m(0),t._v(" "),t._m(1)])])],1)]),t._v(" "),n("div",{staticClass:"book-content"},[n("div",{staticClass:"book-content-inner"},[n("div",{staticClass:"book-content__header",class:{visible:t.isHeaderVisible}},[n("div",{staticClass:"switch",on:{click:t.toggleSummary}},[n("JuejinIcon",{staticStyle:{width:"30px",height:"30px","vertical-align":"middle"}})],1),t._v(" "),n("div",{staticClass:"menu",on:{click:t.toggleSummary}},[n("MenuIcon")],1),t._v(" "),n("div",{staticClass:"title"},[n("app-link",{attrs:{to:t.$bookInfo(t.bookId,t.isVideoCourse?"video":"book")}},[t._v("\n              "+t._s(t.bookInfo.title)+"\n            ")])],1),t._v(" "),n("user-auth",{staticClass:"user-auth"}),t._v(" "),t.foldPc?n("book-progress",{staticClass:"book-progress",attrs:{"cur-index":t.curDirectoryIndex,list:t.sectionIdList}}):t._e()],1),t._v(" "),n("div",{ref:"bookBody",staticClass:"book-body",class:[t.directionClass,{mobile:t.isMobile}]},[n("section-"+t.view,{tag:"component",staticClass:"book-section-content",attrs:{free:t.free,user:t.user,"book-info":t.bookInfo,"section-info":t.sectionInfo},on:{buy:t.buyBook}})],1),t._v(" "),n("book-direction",{directives:[{name:"show",rawName:"v-show",value:t.sectionInfo&&t.curFreeDirectoryIndex>-1,expression:"sectionInfo && curFreeDirectoryIndex > -1"}],staticClass:"book-direction",attrs:{free:t.free,"cur-index":t.curFreeDirectoryIndex,list:t.filterList,"is-borrowing":t.bookInfo.isBorrowing,"book-info":t.bookInfo,"fold-pc":t.foldPc},on:{buy:t.buyBook,prev:t.prevPage,next:t.nextPage}})],1)])]),t._v(" "),n("wechat-quick-login"),t._v(" "),t.$device.isMobile?n("AppOpenDrawer",{attrs:{zlink:"https://z.juejin.cn/SMF5",scheme:t.scheme}}):t._e()],1):t._e()}),r,!1,null,"c2465156",null));e.default=J.exports},855:function(t,e,n){"use strict";n.d(e,"g",(function(){return f})),n.d(e,"h",(function(){return d})),n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return m})),n.d(e,"f",(function(){return y})),n.d(e,"e",(function(){return w})),n.d(e,"d",(function(){return k})),n.d(e,"c",(function(){return C}));n(16),n(15),n(11),n(6),n(14),n(21);var r=n(0),o=n(5),c=n(1);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function f(t){var e=t.item_id,n=t.item_type,r=t.comment_content,o=t.comment_pics;return Object(c.e)({url:"/interact_api/v1/comment/publish",method:"post",body:{item_id:e,item_type:n,comment_content:r,comment_pics:o,client_type:2608}})}function d(t){var e=t.reply_to_comment_id,n=t.reply_to_reply_id,r=t.reply_to_user_id,o=t.item_id,l=t.item_type,h=t.reply_content,f=t.reply_pics;return Object(c.e)({url:"/interact_api/v1/reply/publish",method:"post",body:{reply_to_comment_id:e,reply_to_reply_id:n,reply_to_user_id:r,item_id:o,item_type:l,reply_content:h,reply_pics:f,client_type:2608}})}function v(t){var e=t.comment_id;return Object(c.e)({url:"/interact_api/v1/comment/delete",method:"post",body:{comment_id:String(e)}}).then((function(t){return t.data}))}function m(t){var e=t.comment_id,n=t.reply_id;return Object(c.e)({url:"/interact_api/v1/reply/delete",method:"post",body:{comment_id:e,reply_id:n}}).then((function(t){return t.data}))}function y(t){var e=t.comment_id,n=t.item_id,r=t.item_type,cursor=t.cursor,o=t.limit;return Object(c.e)({url:"/interact_api/v1/reply/list",method:"post",body:{comment_id:e,item_id:n,item_type:r,cursor:cursor,limit:o,client_type:2608}})}function w(t){return _.apply(this,arguments)}function _(){return(_=Object(o.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.e)({url:"/interact_api/v1/comment/hots",method:"post",body:e});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t){return Object(c.e)({url:"/interact_api/v1/comment/list",method:"post",body:h(h({},t),{},{client_type:2608})})}function C(t){return Object(c.e)({url:"/interact_api/v1/comment/detail",method:"post",body:{comment_id:t,clent_type:2608},showError:!1})}},858:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n(6);var r=n(12),o=n(13),c=function(){function t(){Object(r.a)(this,t),this.busy=!1}return Object(o.a)(t,[{key:"do",value:function(t){var e=this;return this.busy?Promise.resolve():(this.busy=!0,Promise.resolve("function"==typeof t?t():t).then((function(t){return e.busy=!1,t})).catch((function(t){return e.busy=!1,Promise.reject(t)})))}}]),t}();function l(){return new c}},859:function(t,e,n){"use strict";n(121);var r=n(69),o=n(269),c=n(273),l=n(7),h=n(18),f=Object(l.b)({components:{Lazy:c.a},props:{url:{type:String,default:""},default:{type:String,default:void 0},quality:{type:Number,default:void 0},width:{type:Number,default:0},height:{type:Number,default:0},shrink:{type:Boolean,default:!1},format:{type:String,default:void 0},alt:{type:String,default:"image"},blank:{type:String,default:""},hasMark:{type:Boolean,default:!1},lazy:{type:Boolean,default:!0}},computed:{defaultThumbUrl:function(){return this.default||r.h},thumbUrl:function(){var t,e,n=this.url||(this.blank?"":this.defaultThumbUrl);return this.shrink?Object(o.e)(n,this.width*r.l,this.height*r.l,{format:this.format,quality:this.quality,supportWebP:Object(h.m)(null===(t=this.$nuxt)||void 0===t?void 0:t.context)},this.hasMark?"zoomCrop":"noMark"):Object(o.b)(n,this.width*r.l,this.height*r.l,{format:this.format,quality:this.quality},this.hasMark?"zoomCrop":"noMark",{supportWebP:Object(h.m)(null===(e=this.$nuxt)||void 0===e?void 0:e.context)})}}}),d=n(29),component=Object(d.a)(f,(function(){var t=this.$createElement;return(this._self._c||t)("lazy",{attrs:{url:this.thumbUrl,alt:this.alt,lazy:this.lazy,"loading-style":{aspectRatio:""+this.width/this.height}}})}),[],!1,null,null,null);e.a=component.exports},875:function(t,e,n){"use strict";n.r(e);n(16),n(15),n(11),n(14),n(6);var r=n(0),o=n(8),c=n(4),l=n(858),h=n(177),f=n(28),d=n(84),v=n(987),m=Object(o.d)({components:{Triangle:v.a},props:{disalbe:{type:Boolean,default:!1},promise:Promise},setup:function(t,e){var data=Object(o.q)({visible:!1,top:0,left:0,isTop:!1}),n=Object(o.r)(null),r=Object(o.r)(null),c=Object(o.r)();return{data:data,popoverStyle:Object(o.a)((function(){return{top:"".concat(data.top,"px"),left:"".concat(data.left,"px")}})),contentElem:c,showPopover:function(o){t.disalbe||(clearTimeout(r.value),e.emit("show"),n.value=setTimeout((function(){Promise.resolve(t.promise).then((function(){n.value&&(data.visible=!0,e.root.$nextTick((function(){var t=o.target,e=null==t?void 0:t.getBoundingClientRect(),n=t.offsetWidth||33,r=t.offsetHeight||33,l=c.value,h=(null==l?void 0:l.offsetWidth)||260,f=(null==l?void 0:l.offsetHeight)||160,d=e.left-h/2+n/2,v=e.top-f-12;data.isTop=!1,v<60&&(data.isTop=!0,v=e.top+r+8),d=Math.max(0,d),data.left=d,data.top=v})))}))}),300))},hidePopover:function(){clearTimeout(n.value),n.value=null,e.emit("hide"),r.value=setTimeout((function(){r.value=null,data.visible=!1}),300)}}}}),y=(n(1216),n(29)),w=Object(y.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popover-box",on:{mouseenter:function(e){return t.showPopover(e)},mouseleave:t.hidePopover}},[n("transition",{attrs:{name:"fade"}},[t.data.visible?n("div",{ref:"contentElem",staticClass:"popover-content",style:t.popoverStyle},[t._t("content"),t._v(" "),n("triangle",{staticClass:"triangle-bottom",class:{isTop:t.data.isTop}})],2):t._e()]),t._v(" "),t._t("default")],2)}),[],!1,null,"f1a2074a",null).exports,_=n(876),k=n(1190);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function O(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var x=Object(o.d)({components:{Avatar:h.a,Popover:w,Button:_.a,ImButton:k.a},props:{userId:String,showJscoreLevel:{type:Boolean,default:!1},enablePopover:{type:Boolean,default:!0}},data:function(){return{user:null,followLock:Object(l.a)(),fetchUserPromise:null,isFollowing:!1}},computed:O(O({},Object(d.mapGetters)({currentUser:c.USER})),{},{position:function(){return this.user&&(this.$userPosition(this.user)||this.user.description||"暂无简介")},self:function(){return this.currentUser&&this.currentUser.id===this.userId},followed:function(){return this.user&&this.user.followed}}),methods:{toFollowing:function(){window.open("/user/".concat(this.userId,"/following"),"_blank")},toFollower:function(){window.open("/user/".concat(this.userId,"/followers"),"_blank")},handleShow:function(){this.fetchUserPromise=this.fetch().then((function(t){if(t.is_logout)return Promise.reject()}))},fetch:function(){var t=this;return Object(f.i)(this.userId,{ignore404:!0}).then((function(e){return t.user=e,e}))},toggleFollow:function(){var t=this;this.isFollowing=!0,this.followLock.do((function(){return t.$ensureAuthorized().then((function(){return t.$store.dispatch(c.TOGGLE_FOLLOW_USER,t.user).catch((function(e){t.$error(e)}))})).catch((function(t){return console.warn("follow failed err:",t)})).finally((function(){return t.isFollowing=!1}))}))}}}),V=(n(1219),n(1220),Object(y.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Popover",{staticClass:"user-popover",attrs:{promise:t.fetchUserPromise},on:{show:t.handleShow},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"info-row",on:{click:function(t){t.stopPropagation()}}},[n("app-link",{attrs:{to:t.$userRoute(t.user),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:t.user,decorative:!0,alt:t.user.username+"的头像"}})],1),t._v(" "),n("div",{staticClass:"user-info"},[n("username",{attrs:{user:t.user,"show-jscore-level":t.showJscoreLevel}}),t._v(" "),n("div",{staticClass:"position"},[t._v(t._s(t.position))])],1)],1),t._v(" "),t.self?t._e():n("div",{staticClass:"operate-btn"},[n("Button",{staticClass:"follow-btn",attrs:{"st:name":"followBtn",attention:!0,"custom-attention-text":"关注","cancel-attention-text":"已关注",cancel:t.followed,loading:t.isFollowing,size:"large","show-icon":!1},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleFollow(e)}}}),t._v(" "),n("ImButton",{staticClass:"im-btn",attrs:{"tea-type":"personal_information_card","user-id":t.userId}})],1),t._v(" "),n("div",{staticClass:"meta-row",on:{click:function(t){t.stopPropagation()}}},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"item",on:{click:t.toFollowing}},[n("div",{staticClass:"count"},[t._v(t._s(t.user.followingCount||0))]),t._v(" "),n("div",{staticClass:"title"},[t._v("关注")])]),t._v(" "),n("li",{staticClass:"divider"}),t._v(" "),n("li",{staticClass:"item",on:{click:t.toFollower}},[n("div",{staticClass:"count"},[t._v(t._s(t.user.followerCount||0))]),t._v(" "),n("div",{staticClass:"title"},[t._v("粉丝")])])])])]},proxy:!0}])},[t._v(" "),t._t("default")],2)}),[],!1,null,"9421b4e2",null));e.default=V.exports},876:function(t,e,n){"use strict";var r=n(8),o=n(917),c=n.n(o),l=n(918),h=n.n(l),f=n(919),d=n.n(f),v=n(920),m=n.n(v),y=n(921),w=n.n(y),_=Object(r.d)({props:{type:{type:String,default:"primary"},attention:Boolean,customAttentionText:String,cancelAttentionText:String,size:{type:String,default:"medium"},status:{type:String,default:"default"},disabled:Boolean,loading:Boolean,cancel:Boolean,text:String,icon:String,showIcon:{type:Boolean,default:!0}},setup:function(t,e){var n=Object(r.a)((function(){return t.attention}));return{handleClick:function(n){t.disabled||t.loading||e.emit("click",n)},isAttentionType:n,attentionText:Object(r.a)((function(){return"mini"===t.size&&t.loading?"":t.cancel?t.loading?"取消":t.cancelAttentionText||"已关注":t.customAttentionText||"关注"})),iconSrc:Object(r.a)((function(){return t.loading?t.cancel||n.value&&"primary"!==t.type?m.a:w.a:n.value&&t.showIcon?"mini"===t.size?"":t.icon||t.cancel?d.a:"primary"===t.type?c.a:h.a:""}))}}}),k=(n(922),n(29)),component=Object(k.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"ui-btn",class:[t.type,t.size,t.status,t.cancel?"cancel":"",t.attention?"attention":""],attrs:{disabled:t.disabled||t.loading},on:{click:t.handleClick}},[t.iconSrc?n("img",{staticClass:"img",class:t.loading?"loading":"",attrs:{src:t.iconSrc}}):t._e(),t._v(" "),t.isAttentionType?[t._v("\n    "+t._s(t.attentionText)+"\n  ")]:t._t("default",[t._v(t._s(t.text))])],2)}),[],!1,null,"05e27314",null);e.a=component.exports},879:function(t,e,n){},883:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));n(83),n(45),n(27),n(18);var r=function(text){try{var textarea=document.createElement("textarea");document.body.appendChild(textarea),textarea.value=text,textarea.select(),document.execCommand("copy"),document.body.removeChild(textarea)}catch(t){throw"copy link error"}};function o(content){if(!(content=(null==content?void 0:content.trim())||""))return"";var t=((null==content?void 0:content.trim())||"").split("\n")[0];return t.length<=30?t:t.substring(0,30)}},884:function(t,e,n){"use strict";n(16),n(15),n(11),n(14),n(45),n(6),n(83);var r,o=n(31),c=(n(21),n(5)),l=n(0),h=n(4),f=n(981),d=n(177),v=n(982),m=n(954),y=n(915),w=n(909),_=n(855),k=n(906),C=n(911),O=n(897),x=n(180),V=n(988),S=n.n(V),T=n(17);function P(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function E(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j=(r={},Object(l.a)(r,T.e.ArticleIdType,"article"),Object(l.a)(r,T.e.PinType,"pin"),Object(l.a)(r,T.e.Book,"小册"),Object(l.a)(r,T.e.Realtime,"news"),r),L={components:{AuthCard:v.a,Avatar:d.a,Emoji:f.a,ImageIcon:S.a},props:["commentList","replyList","subject","comment","parent","autoFocus","placeholder","mode","small"],data:function(){return{active:!1,focused:!1,submitting:!1,content:"",imageFile:null,imagePreviewUrl:"",emoji:""}},computed:{me:function(){return this.$store.getters.USER},bindedPhone:function(){return this.me&&this.me.isBindedPhone},empty:function(){return!this.content.length},canSubmit:function(){return this.content.length&&!this.submitting},isActionBoxVisible:function(){return(this.focused||!this.empty||this.imageFile)&&this.me&&this.bindedPhone},submitButtonTitle:function(){return this.submitting?"提交中...":"发表评论"},sendTip:function(){return this.$device.isMacOS?"⌘ + Enter":"Ctrl + Enter"}},watch:{focused:function(t){t&&!this.me&&this.$requestLogin(),t||!this.empty||this.imageFile||(this.$emit("emptyBlur"),this.$store.dispatch(h.UPDATE_PIN_ON_FOCUS,!1))},imageFile:function(){Object(O.g)(this.$refs.richInput)}},methods:{onFocus:function(){this.focused=!0,this.$store.dispatch(h.UPDATE_PIN_ON_FOCUS,!0)},onOuterClick:function(){this.empty&&(this.focused=!1)},onFormBoxClick:function(t){var e=t.target;if(this.bindedPhone){var input=this.$refs.richInput;input.focus(),input.contains(e)||Object(O.g)(input)}},onInput:function(){this.focused=!0,Object(O.e)(this.$refs.richInput),this.content=this.emojiToText(this.$refs.richInput.innerHTML),this.content=Object(O.b)(this.content)},onPaste:function(t){t.preventDefault(),Object(O.f)(t,this.onFileSelected);var text=Object(O.a)(t),html=Object(x.d)(text);Object(O.c)(this.$refs.richInput,html),this.focused=!0,this.content=this.emojiToText(this.$refs.richInput.innerHTML),this.content=Object(O.b)(this.content)},onKeydown:function(t){var e=this;if(this.content.length&&!this.submitting)return Object(m.a)(t,(function(){return e.submit()}))},cleanContent:function(){this.$refs.richInput.innerHTML="",this.content=""},updateEmoji:function(t){this.emoji=t,Object(O.c)(this.$refs.richInput,Object(x.c)(this.emoji)),this.focused=!0,this.content=this.emojiToText(this.$refs.richInput.innerHTML),this.content=Object(O.b)(this.content)},showFileDialog:function(){this.$refs.input.click()},changeFile:function(t){this.imageFile=t,window.URL.revokeObjectURL(this.imagePreviewUrl),this.imagePreviewUrl=t?window.URL.createObjectURL(t):""},cleanFile:function(){this.changeFile(null)},onFileSelected:function(t){var e=this;this.$refs.input.value=null,t&&(this.isWithVaildSize(t)?Object(y.a)(t,w.a).then((function(n){n?e.changeFile(t):e.$error("不支持此格式的图片")})):this.$error("文件过大"))},isWithVaildSize:function(t){return t.size<=w.c},uploadFile:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,c,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.imageFile){e.next=11;break}return e.next=3,Object(k.a)(t.me.user_id,[t.imageFile]);case 3:return n=e.sent,r=Object(o.a)(n,1),c=r[0],l=t.imageFile.type.split("/")[1],h={gif:0,png:1,jpg:2,jpeg:2},e.abrupt("return",{pic_url:c.Url,width:c.ImageHeight,height:c.ImageWidth,pic_type:h[l]||1});case 11:return e.abrupt("return",Promise.resolve());case 12:case"end":return e.stop()}}),e)})))()},submit:function(){var t=this;return this.submitting=!0,this.uploadFile().then((function(image){return t.createSubmitTask(image)})).then((function(e){var n;if(0===e.err_no?(t.$emit("syncCommentNum",{type:"add"}),t.submitting=!1,t.$alertMsg("评论成功"),t.$emit("submitted"),t.reset()):t.$error(e.err_msg||"评论失败，请稍后重试"),Object(C.a)()){var r=Object(C.b)();t.$TEA("search_detail_action",E(E({},r),{},{action_type:T.a.Comment,action_value:(null===(n=t.commentList)||void 0===n?void 0:n.length)||0}))}})).catch((function(e){t.submitting=!1,t.$error(e)}))},createSubmitTask:function(image){var t=this,e=this.subject,n=e.item_id,r=e.item_type,o=e.user_id;return this.$TEA("comment_action",{comment_type:j[r],comment_parent_id:n,author_user_id:o,comment_url:location.href,mode:this.mode}),this.comment?this.comment.reply_info?Object(_.h)({reply_to_comment_id:this.comment.reply_info.reply_comment_id,reply_to_reply_id:this.comment.reply_info.reply_id,reply_to_user_id:this.comment.reply_info.user_id,item_id:n,item_type:r,reply_content:this.content,reply_pics:void 0===image?[]:[image]}).then((function(e){return 0===e.err_no&&(t.replyList||[]).push(e.data),e})):Object(_.h)({reply_to_comment_id:this.comment.comment_info.comment_id,reply_to_reply_id:null,reply_to_user_id:null,item_id:n,item_type:r,reply_content:this.content,reply_pics:void 0===image?[]:[image]}).then((function(e){return 0===e.err_no&&(t.replyList||[]).push(e.data),e})):Object(_.g)({item_id:n,item_type:r,comment_content:this.content,comment_pics:void 0===image?[]:[image]}).then((function(e){var n;return 0===e.err_no&&(null===(n=t.commentList)||void 0===n||n.unshift(e.data)),e}))},reset:function(){this.cleanFile(),this.cleanContent()},emojiToText:function(html){return html.replace(/<img.*?alt=".*?/g,"").replace(/".?src=.*?>/g,"")}},mounted:function(){var t=this;this.autoFocus&&this.$nextTick((function(){t.$refs.richInput.focus()}))}},R=(n(989),n(29)),component=Object(R.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"outer-click",rawName:"v-outer-click",value:function(){return t.onOuterClick()},expression:"() => onOuterClick()"}],staticClass:"comment-form",class:{focused:t.focused,reply:!!t.comment,"sub-reply":!!t.parent,small:t.small}},[n("div",{staticClass:"avatar-box"},[n("avatar",{staticClass:"avatar",attrs:{user:t.me}})],1),n("div",{staticClass:"form-box",class:{disabled:t.submitting}},[n("auth-card",{attrs:{user:t.me},on:{click:t.onFormBoxClick}},[n("div",{staticClass:"input-box"},[n("div",{ref:"richInput",staticClass:"rich-input",class:{empty:t.empty},attrs:{contenteditable:"true",spellcheck:"false",placeholder:t.placeholder||"输入评论（Enter换行，"+t.sendTip+"发送）",disabled:!0},on:{focus:t.onFocus,input:t.onInput,paste:t.onPaste,keydown:t.onKeydown,keyup:function(t){t.stopPropagation()}}}),t.imagePreviewUrl?n("div",{staticClass:"image-preview-box"},[n("div",{staticClass:"image-preview",style:{backgroundImage:"url("+t.imagePreviewUrl+")"}}),n("div",{staticClass:"clean-btn",on:{click:t.cleanFile}},[n("svg",{attrs:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("rect",{attrs:{width:"12",height:"12",rx:"2",fill:"#86909C"}}),t._v(" "),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.98095 5.49307L8.22012 3.25389C8.28521 3.18881 8.39074 3.18881 8.45582 3.25389L8.69153 3.4896C8.75661 3.55468 8.75661 3.66021 8.69153 3.7253L6.45235 5.96447L8.69153 8.20364C8.75661 8.26873 8.75661 8.37426 8.69153 8.43934L8.45582 8.67505C8.39074 8.74013 8.28521 8.74013 8.22012 8.67505L5.98095 6.43587L3.74178 8.67505C3.67669 8.74013 3.57116 8.74013 3.50608 8.67505L3.27037 8.43934C3.20529 8.37426 3.20529 8.26873 3.27037 8.20364L5.50954 5.96447L3.27037 3.7253C3.20529 3.66021 3.20529 3.55468 3.27037 3.4896L3.50608 3.25389C3.57116 3.18881 3.67669 3.18881 3.74178 3.25389L5.98095 5.49307Z",fill:"white"}})])])]):t._e()])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible||!t.small,expression:"isActionBoxVisible || !small"}],staticClass:"action-box"},[n("emoji",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible,expression:"isActionBoxVisible"}],staticClass:"emoji-btn",on:{selectEmoji:t.updateEmoji}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible,expression:"isActionBoxVisible"}],staticClass:"image-btn",on:{click:t.showFileDialog}},[n("ImageIcon",{staticClass:"icon"}),n("span",[t._v("图片")])],1),n("div",{staticClass:"submit"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible,expression:"isActionBoxVisible"}]},[t._v(t._s(t.sendTip))]),n("button",{staticClass:"submit-btn",attrs:{disabled:!t.canSubmit},on:{click:t.submit}},[t._v(t._s(t.submitButtonTitle))])])],1)],1),n("input",{ref:"input",staticClass:"hidden",attrs:{type:"file"},on:{change:function(e){return t.onFileSelected(e.target.files[0])}}})])}),[],!1,null,"733426cc",null);e.a=component.exports},889:function(t,e,n){"use strict";n.d(e,"B",(function(){return o})),n.d(e,"v",(function(){return c})),n.d(e,"A",(function(){return l})),n.d(e,"u",(function(){return h})),n.d(e,"t",(function(){return f})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return v})),n.d(e,"h",(function(){return m})),n.d(e,"b",(function(){return y})),n.d(e,"w",(function(){return w})),n.d(e,"x",(function(){return _})),n.d(e,"q",(function(){return k})),n.d(e,"r",(function(){return C})),n.d(e,"z",(function(){return O})),n.d(e,"s",(function(){return x})),n.d(e,"D",(function(){return V})),n.d(e,"j",(function(){return S})),n.d(e,"k",(function(){return T})),n.d(e,"i",(function(){return P})),n.d(e,"C",(function(){return E})),n.d(e,"g",(function(){return j})),n.d(e,"p",(function(){return L})),n.d(e,"c",(function(){return R})),n.d(e,"a",(function(){return I})),n.d(e,"y",(function(){return A})),n.d(e,"o",(function(){return D})),n.d(e,"n",(function(){return M})),n.d(e,"E",(function(){return B})),n.d(e,"l",(function(){return N})),n.d(e,"f",(function(){return F})),n.d(e,"m",(function(){return H}));var r=n(1);function o(t,e,n){return Object(r.c)({url:"/tag_api/v1/query_category_list",method:"POST",showError:t,headers:e,jsonBody:n})}function c(t,e,n){return Object(r.c)({url:"/study_api/v1/translate/query_claim",method:"POST",showError:t,headers:e,jsonBody:n})}function l(t,e,n){return Object(r.c)({url:"/study_api/v1/translate/query_user",method:"POST",showError:t,headers:e,jsonBody:n})}function h(t,e,n){return Object(r.c)({url:"/study_api/v1/translate/query_auto_claim",method:"POST",showError:t,headers:e,jsonBody:n})}function f(t,e,n){return Object(r.c)({url:"/study_api/v1/translate/query_all_recommend",method:"POST",showError:t,headers:e,jsonBody:n})}function d(data,t,e,n){return Object(r.c)({url:"/interact_api/v1/digg/cancel",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function v(data,t,e,n){return Object(r.c)({url:"/interact_api/v1/digg/save",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function m(data,t,e,n){return Object(r.c)({url:"/interact_api/v1/follow/undo",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function y(data,t,e,n){return Object(r.c)({url:"/content_api/v1/column/articles_cursor",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function w(data,t,e,n){return Object(r.c)({url:"/study_api/v1/translate/query_recommend",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function _(data,t,e,n){return Object(r.c)({url:"/study_api/v1/translate/query_recommend_list",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function k(data,t,e,n){return Object(r.c)({url:"/study_api/v1/translate/publish_claim",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function C(data,t,e,n){return Object(r.c)({url:"/study_api/v1/translate/publish_recommend",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function O(data,t,e,n){return Object(r.c)({url:"/study_api/v1/translate/query_translate",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function x(data,t,e,n){return Object(r.c)({url:"/study_api/v1/translate/publish_translate",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function V(data,t,e,n){return Object(r.c)({url:"/tag_api/v1/theme/list_by_hot",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function S(data,t,e,n){return Object(r.c)({url:"/recommend_api/v1/short_msg/detail_rec",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function T(data,t,e,n){return Object(r.c)({url:"/recommend_api/v1/short_msg/topic",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function P(data,t,e,n){return Object(r.c)({url:"/list_api/v1/annual/user_annual",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function E(data,t,e,n){return Object(r.c)({url:"/tag_api/v1/query_topic_detail",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function j(data,t,e,n){return Object(r.c)({url:"/interact_api/v1/follow/do",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function L(data,t,e,n){return Object(r.c)({url:"/study_api/v1/translate/pre_query_status",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function R(data,t,e,n){return Object(r.c)({url:"/content_api/v1/short_msg/list_by_theme",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function I(data,t,e,n){return Object(r.c)({url:"/booklet_api/v1/reading/submit_progress",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function A(data,t,e,n){return Object(r.c)({url:"/study_api/v1/translate/query_recommend_status",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function D(data,t,e,n){return Object(r.c)({url:"/study_api/v1/translate/pre_lock_translate",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function M(data,t,e,n){return Object(r.c)({url:"/study_api/v1/translate/pre_count",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function B(data,t,e,n){return Object(r.c)({url:"/tag_api/v1/topic/list_by_search_cursor",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function N(data,t,e,n){return Object(r.c)({url:"/study_api/v1/translate/abstain_claim",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function F(data,t,e,n){return Object(r.c)({url:"/interact_api/v1/digg/user_list",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function H(data,t,e,n){return Object(r.c)({url:"/study_api/v1/translate/pre_audit_translate",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}},890:function(t,e,n){"use strict";n(122);var r=n(48);n(6);function o(t){return new Promise((function(e,n){var img=new window.Image;img.onload=function(){return e({width:img.naturalWidth,height:img.naturalHeight,url:t})},img.onerror=function(){return n()},img.src=t}))}var c=function(){return{loading:!1,loaded:!1,error:!1,src:null,imageStyle:{top:"",left:"",width:"",height:"",transform:""},token:Date.now()}},l={props:["backgroundColor","margin","full"],data:c,methods:{show:function(t){var e=t.thumbUrl,n=t.originalUrl,rect=t.rect;this.loadImage({originalUrl:n,rect:rect}),this.loadTumb({thumbUrl:e,rect:rect})},close:function(){Object.assign(this,c()),this.unlockScroll()},loadTumb:function(t){var e=this,n=t.thumbUrl,rect=t.rect,r=this.token;o(n).then((function(t){if(e.isInSameView(r)&&!e.loaded&&!e.error){var o=e.computeRenderedRect(t.width,t.height);e.applyRect(o),e.src=n,e.applyTransform(e.computeTransform(o,rect))}})).catch((function(t){e.isInSameView(r)&&console.error(t)}))},loadImage:function(t){var e=this,n=t.originalUrl,rect=t.rect,r=this.token;this.loading=!0,o(n).then((function(image){if(e.isInSameView(r)){var t=!!e.src,o=!e.full&&e.isLargeLongImage(image),c=e.computeRenderedRect(image.width,image.height,o);e.applyRect(c),e.src=n,e.loading=!1,e.loaded=!0,o&&e.lockScroll(),t||e.applyTransform(e.computeTransform(c,rect))}})).catch((function(t){e.isInSameView(r)&&(console.error(t),e.loading=!1,e.error=!0)}))},applyRect:function(rect){Object.assign(this.imageStyle,{top:rect.top+"px",left:rect.left+"px",width:rect.width+"px",height:rect.height+"px"})},applyTransform:function(t){var e=this;this.imageStyle.transform=t,this.$nextTick((function(){e.forceReflow(),e.imageStyle.transform=""}))},initScrollEventListener:function(){var t=this,e=this.$getBean("eventBus"),n=e.eventType.ROOT_CONTAINER_SCROLL;e.onVmLife(this,n,(function(){t.src&&t.close()}))},computeRenderedRect:function(t,e,n){var o=Object(r.h)(),c=this.getSafeAreaSize();if(n){var l=Math.min(o.width,t,960),h=l*e/t;return{top:0,left:(o.width-l)/2,width:l,height:h}}var f=t/c.width,d=e/c.height,v=Math.max(f,d,1),m=t/v,y=e/v;return{top:(o.height-y)/2,left:(o.width-m)/2,width:m,height:y}},computeTransform:function(t,rect){var e=rect.width/t.width,n=rect.height/t.height,r=rect.width-t.width,o=rect.height-t.height,c=rect.top-t.top+o/2,l=rect.left-t.left+r/2,h="translate3d(".concat(l,"px, ").concat(c,"px, 0)"),f="scale3d(".concat(e,", ").concat(n,", 1)");return"".concat(h," ").concat(f)},forceReflow:function(){document.body.clientWidth},isInSameView:function(t){return t===this.token},isLargeLongImage:function(image){var t=this.getSafeAreaSize(),e=t.width,n=t.height,r=n/e,o=image.height/image.width,c=o>1&&o>r;return(image.width>e||image.height>n)&&c},getSafeAreaSize:function(){var t=Object(r.h)(),e=t.width,n=t.height;return{width:Math.max(0,e-2*(+this.margin||0)),height:Math.max(0,n-2*(+this.margin||0))}},lockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.LOCK_ROOT_CONTAINER_SCROLL)},unlockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)}},mounted:function(){this.initScrollEventListener()}},h=(n(974),n(29)),f=Object(h.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"fade"}},[t.src?r("div",{staticClass:"image-viewer",class:{loading:t.loading},on:{click:t.close}},[r("div",{staticClass:"image-box",style:{backgroundColor:t.backgroundColor}},[t.error?r("img",{staticClass:"image error",attrs:{src:n(892)}}):r("img",{staticClass:"image",style:t.imageStyle,attrs:{src:t.src}})])]):t._e()])}),[],!1,null,"10b7b0e6",null).exports,d=n(997),v=n.n(d),m=function(){return{isLargeLongMode:!1,isZoomMode:!1,loading:!1,loaded:!1,error:!1,src:null,offsetX:0,offsetY:0,canZoom:!1,token:Date.now()}},y={props:["backgroundColor","margin","full"],data:m,methods:{show:function(t){var e=t.thumbUrl,n=t.originalUrl,rect=t.rect;this.loadImage({originalUrl:n,rect:rect}),this.loadTumb({thumbUrl:e,rect:rect})},close:function(){this.destroyGesture(),Object.assign(this,m()),this.unlockScroll()},loadTumb:function(t){var e=this,n=t.thumbUrl,r=(t.rect,this.token);o(n).then((function(t){!e.isInSameView(r)||e.loaded||e.error||(e.src=n)})).catch((function(t){e.isInSameView(r)&&console.error(t)}))},loadImage:function(t){var e=this,n=t.originalUrl,r=(t.rect,this.token);this.loading=!0,o(n).then((function(image){if(e.isInSameView(r)){var t=!e.full&&e.isLargeLongImage(image);e.src=n,e.loading=!1,e.loaded=!0,e.isLargeLongMode=t,e.canZoom=e.isLargeImage(image),e.initGesture(),e.isLargeLongMode&&e.lockScroll()}})).catch((function(t){e.isInSameView(r)&&(console.error(t),e.loading=!1,e.error=!0)}))},isInSameView:function(t){return t===this.token},isLargeLongImage:function(image){var t=Object(r.h)(),e=t.width,n=t.height,o=n/e,c=image.height/image.width,l=c>1&&c>o;return(image.width>e||image.height>n)&&l},isLargeImage:function(image){var t=Object(r.h)(),e=t.width;return t.height<image.height||e<image.width},lockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.LOCK_ROOT_CONTAINER_SCROLL)},unlockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)},initScrollEventListener:function(){var t=this,e=this.$getBean("eventBus"),n=e.eventType.ROOT_CONTAINER_SCROLL;e.onVmLife(this,n,(function(){t.src&&!t.isZoomMode&&t.close()}))},adjustOffset:function(){var t=Object(r.h)(),e=t.width,n=t.height,rect=this.$refs.image.getBoundingClientRect();rect.width<e?this.offsetX=0:rect.left>0?this.offsetX-=rect.left:rect.left+rect.width<e&&(this.offsetX+=e-rect.left-rect.width),rect.height<n?this.offsetY=0:rect.top>0?this.offsetY-=rect.top:rect.top+rect.height<n&&(this.offsetY+=n-rect.top-rect.height)},initGesture:function(){var t=this;this.$nextTick((function(){t.finger=new v.a(t.$refs.imageBox,{singleTap:function(e){t.isZoomMode?(t.isZoomMode=!1,t.offsetX=0,t.offsetY=0):t.close()},doubleTap:function(e){t.canZoom&&(t.isZoomMode=!t.isZoomMode,t.isZoomMode?t.lockScroll():(t.unlockScroll(),t.offsetX=0,t.offsetY=0))},pressMove:function(e){var n=e.deltaX,r=e.deltaY;t.isZoomMode&&(t.offsetX+=n,t.offsetY+=r)},touchEnd:function(){t.isZoomMode&&window.setTimeout((function(){t.adjustOffset()}),100)}})}))},destroyGesture:function(){this.finger&&this.finger.destroy()}},mounted:function(){this.initScrollEventListener()}},w=(n(975),Object(h.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"fade"}},[t.src?r("div",{staticClass:"image-viewer mobile",class:{loading:t.loading}},[r("div",{ref:"imageBox",staticClass:"image-box",class:{"large-long":t.isLargeLongMode},style:{backgroundColor:t.backgroundColor}},[t.error?r("img",{staticClass:"image error",attrs:{src:n(892)}}):r("img",{ref:"image",staticClass:"image",class:{zoom:t.isZoomMode},style:{transform:"translate3d("+t.offsetX+"px, "+t.offsetY+"px, 0)"},attrs:{src:t.src}})])]):t._e()])}),[],!1,null,"93a27598",null).exports),_=n(269);var k={components:{Desktop:f,Mobile:w},props:["selector","backgroundColor","margin","full"],data:function(){return{component:null}},methods:{attachContainer:function(t){this.container!==t&&(this.removeEventListener(),this.addEventListener(t),this.container=t)},onClick:function(t){var e,n=t.target;if(this.isMatched(n)){var r=(e=n).getAttribute("data-src")||e.getAttribute("src")||function(t){var e=(t.style.backgroundImage||"").match(/url\("?'?(.+?)"?'?\)/i);return e&&e[1]}(e);if(r){var o=Object(_.d)(r),rect=n.getBoundingClientRect();this.$refs.viewer.show({thumbUrl:r,originalUrl:o,rect:rect})}}},addEventListener:function(t){var e=this;t.__removeIamgeViewListener=Object(r.k)(t,"click",(function(t){e.onClick(t)}),!0)},removeEventListener:function(){this.container&&this.container.__removeIamgeViewListener()},isMatched:function(t){return!t.classList.contains("equation")&&!this.$el.contains(t)&&Object(r.j)(t,this.selector||"img")}},mounted:function(){this.component=this.$device.isMobile?"Mobile":"Desktop"},beforeDestroy:function(){this.removeEventListener()}},C=(n(976),Object(h.a)(k,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"image-viewer-box"},[e(this.component,{ref:"viewer",tag:"component",attrs:{selector:this.selector,"background-color":this.backgroundColor,margin:this.margin,full:this.full}})],1)}),[],!1,null,"5ca9a68f",null));e.a=C.exports},892:function(t,e,n){t.exports=n.p+"img/image-error.3338abe.png"},893:function(t,e,n){},894:function(t,e,n){},895:function(t,e,n){},897:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"g",(function(){return c})),n.d(e,"b",(function(){return f})),n.d(e,"f",(function(){return d})),n.d(e,"a",(function(){return v})),n.d(e,"c",(function(){return m})),n.d(e,"e",(function(){return y}));n(45);var r=n(180);function o(t){t.preventDefault(),window.getSelection().deleteFromDocument&&window.getSelection().deleteFromDocument();try{var text=window.clipboardData.getData("Text");try{window.getSelection().createRange().pasteHTML(text)}catch(t){var e=document.createTextNode(text);window.getSelection().getRangeAt(0).insertNode(e)}}catch(e){var n=(t.originalEvent||t).clipboardData.getData("text/plain");document.execCommand("insertText",!1,n)}}function c(t){if(document.createRange){var e=document.createRange();e.selectNodeContents(t),e.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(e)}else if(document.selection){var r=document.body.createTextRange();r.moveToElementText(t),r.collapse(!1),r.select()}}function l(){return"function"==typeof document.createRange||"function"==typeof window.getSelection}function h(){var t=null,e=null;return l?(e=document.getSelection()).getRangeAt&&e.rangeCount&&(t=document.getSelection().getRangeAt(0)):t=document.selection.createRange(),t}function f(html){var text=html;return text=text.replace(/<\s*script[^>]*>[\s\S]*?<\/script>/gim,"").replace(/<\s*style[^>]*>[\s\S]*?<\/style>/gim,"").replace(/<!--.*?-->/gim,"").replace(/<!DOCTYPE.*?>/gi,"").replace(/<\/div>/gi,"").replace(/(<br><div>|<div>|<br>)/gi,"\n").replace(/&nbsp;/gi,"").replace(/<.*?>/gi,"").replace(/&lt;/gi,"<").replace(/&amp;/gi,"&").replace(/&gt;/gi,">").replace(/&#39;/gi,"'").replace(/&quot;/g,'"')}function d(t,e){var n="",r=t.clipboardData.items;if(r){for(var i=0;i<r.length;i++)-1!=r[i].type.indexOf("image")&&(n=r[i].getAsFile());"function"==typeof e&&n&&e(n)}}function v(t){window.getSelection().deleteFromDocument&&window.getSelection().deleteFromDocument();try{return window.clipboardData.getData("Text")}catch(e){return(t.originalEvent||t).clipboardData.getData("text/plain")}}function m(t,html){var e,n,r=h();if(r&&function t(e,n){return!(!n||!e)&&(e===n||t(e,n.parentElement))}(t,r.startContainer)||c(t),t.focus(),window.getSelection){if((e=window.getSelection()).getRangeAt&&e.rangeCount){(n=e.getRangeAt(0)).deleteContents(),(t=document.createElement("div")).innerHTML=html;for(var o,l,f=document.createDocumentFragment();o=t.firstChild;)l=f.appendChild(o);n.insertNode(f),l&&((n=n.cloneRange()).setStartAfter(l),n.collapse(!0),e.removeAllRanges(),e.addRange(n))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(html)}function y(t){var e=h(),n=e.startContainer;if(3===n.nodeType){for(var text=n.nodeValue,o=e.startOffset-1,c=e.endOffset-1,f=[];o>=0;){if("["===text[o]){f[0]=o;break}o--}for(;c<=text.length-1;){if("]"===text[c]){f[1]=c;break}c++}if(void 0!==f[0]&&void 0!==f[1]){var d=text.slice(f[0],f[1]+1),v=Object(r.c)(d);if(v){var y=document.createRange();y.setStart(n,f[0]),y.setEnd(n,f[1]+1),function(t){if(t){var e=null,n=null;l?((n=document.getSelection()).removeAllRanges(),n.addRange(t)):((e=document.selection.createRange()).setEndPoint("EndToEnd",t),0===t.text.length?e.collapse(!1):e.setEndPoint("StartToStart",t),e.select())}}(y),m(t,v)}}}}},906:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(11),n(54),n(6),n(21);var r=n(5),o=n(1);function c(t,e){return l.apply(this,arguments)}function l(){return(l=Object(r.a)(regeneratorRuntime.mark((function t(e,o){var c,l,d,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.e(15).then(n.t.bind(null,1088,7));case 3:return c=t.sent,l=c.default,t.next=7,h();case 7:return d=t.sent,v=function(t){return new Promise((function(n,r){var o=new l({userId:e,appId:2608,imageConfig:{serviceId:"k3u1fbpfcp"}}),c=o.addFile({file:t,stsToken:d,type:"image"});o.start(c),o.on("complete",(function(t){n(t.uploadResult)})),o.on("error",(function(t){console.log(t.extra,"bytedUploader Error"),r(t.extra)}))}))},t.next=11,Promise.all(o.map(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,r,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e);case 2:return n=t.sent,r=n.ImageHeight,o=n.ImageWidth,c=n.Uri,t.next=8,f(c);case 8:return l=t.sent,t.abrupt("return",{ImageHeight:r,ImageWidth:o,Uri:c,Url:l.data.main_url});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 11:return t.abrupt("return",t.sent);case 14:throw t.prev=14,t.t0=t.catch(0),new Error("上传图片失败");case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}function h(){return Object(o.e)({url:"/imagex/gen_token",query:{client:"web"}}).then((function(t){return t.data.token}))}function f(t){return Object(o.e)({url:"/imagex/get_img_url",query:{uri:t}})}},907:function(t,e,n){"use strict";var r,o;n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return o})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return f})),n.d(e,"f",(function(){return d})),function(t){t.UNPLAY="unplay",t.PLAYING="playing",t.PAUSED="paused",t.PLAYED="played"}(r||(r={})),function(t){t.detailRoute="bytetechVideoDetail",t.singleDetailRoute="bytetechVideoSingleDetail"}(o||(o={}));var c,l={routeName:"courseIndex",videoCategory:"bytetech",vipBookType:"vip"},h={title:"掘金课程是什么？",desc:"一个小篇幅、高浓度、成体系、有收益的技术学习平台",spreadQrcode:"https://z.juejin.cn/L54A"};!function(t){t.PutOnTimeSort="1",t.SaleCountDesc="7",t.PriceAsc="8",t.PriceDesc="9",t.DefaultSort="10"}(c||(c={}));var f={10:"recommend",7:"hot",1:"new",9:"price_h2l",8:"price_l2h"},d={discussTitle:"加入掘金会员，查看并参与课程讨论，字节内部课免费学",resouceTitle:"加入掘金会员，即可查看学习资料，字节内部课免费学"}},909:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"a",(function(){return h}));var r=["jpg","jpeg","png","gif","webp"],o=5242880,c=9,l=1e3,h=["jpg","png","gif"]},911:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l}));n(43),n(53);var r=n(17),o={left:[{id:0,title:"综合"},{id:2,title:"文章"},{id:12,title:"课程"},{id:9,title:"标签"},{id:1,title:"用户"}],right:[{id:0,title:"时间不限"},{id:1,title:"最近一天"},{id:2,title:"最近一周"},{id:3,title:"最近三月"}]},c=function(){return document.referrer.includes("/search")},l=function(){if(!c())return{};try{var t=sessionStorage.getItem("SEARCH_PARAMS"),e=JSON.parse(t),n=e.query,o=e.search_attached_info,l=void 0===o?"":o,h=e.rank,f=e.display_search_type;return{query:n,detail_from:r.f.Search,search_attached_info:l,rank:h,display_search_type:f}}catch(t){return{}}}},913:function(t,e,n){},915:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n(39),n(22),n(23),n(436),n(6);var r=[{name:"jpg",regx:/^ffd8ff/},{name:"gif",regx:/^474946/},{name:"png",regx:/89504e47/},{name:"webp",regx:/57454250/},{name:"bmp",regx:/^424d/},{name:"any",regx:/./}];function o(t,e){return function(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(t){return e(t.target.result)},r.onerror=function(t){return n(t)},r.readAsArrayBuffer(t.slice(0,64))}))}(t).then(c).then(l.bind(null,e))}function c(t){return Array.prototype.slice.call(new Uint8Array(t)).reduce((function(t,data){return t+data.toString(16)}),"")}function l(t,header){for(var i=0;i<r.length;i++)if(r[i].regx.test(header))return-1!==t.indexOf(r[i].name);return!1}},917:function(t,e,n){t.exports=n.p+"c5c64e06a56896da43c1d084d2482cf3.svg"},918:function(t,e,n){t.exports=n.p+"bd960fe696b2c2b82cea3c0e2e2f2aae.svg"},919:function(t,e,n){t.exports=n.p+"062856d97fc330530a3a64c01d915edc.svg"},920:function(t,e,n){t.exports=n.p+"img/loading.b144729.png"},921:function(t,e,n){t.exports=n.p+"img/loading-light.e96acb8.png"},922:function(t,e,n){"use strict";n(879)},923:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.56162 2.16903C8.66569 2.09612 8.78195 2.06075 8.88247 2.09071C8.97653 2.11874 9.23851 2.25868 9.50988 2.9675C9.64419 3.31832 9.9356 4.24191 9.42155 6.05383C9.29751 6.49103 9.61394 6.95254 10.0926 6.95922L13.492 7.00667L13.492 7.00672H13.4991C13.6049 7.00672 13.7228 7.01937 13.8134 7.05849C13.8544 7.07622 13.8815 7.0959 13.8999 7.11552C13.9166 7.13326 13.9368 7.16198 13.9515 7.21587C13.9848 7.33735 14.0228 7.74663 13.9473 8.42213C13.874 9.07808 13.698 9.9443 13.341 10.9593C13.0424 11.8083 12.6601 12.5287 12.0684 13.4874C12.0558 13.5047 12.0462 13.5192 12.0418 13.526L12.0404 13.528C12.0292 13.5449 12.0242 13.5526 12.018 13.5613C12.0076 13.5759 12.0018 13.5815 11.9983 13.5845C11.996 13.5865 11.9908 13.5907 11.9777 13.5954C11.9638 13.6004 11.9311 13.6095 11.8706 13.6095H5.56278L5.56373 6.58441C5.87126 6.41852 6.19881 6.20079 6.54112 5.8401C6.93883 5.42103 7.33789 4.82891 7.76254 3.94134C7.84974 3.75908 7.91745 3.55913 7.97574 3.37714C7.99264 3.32437 8.0087 3.2733 8.02438 3.22344L8.02439 3.2234C8.066 3.09109 8.10495 2.96727 8.14985 2.84264C8.2758 2.49303 8.40247 2.28052 8.56162 2.16903ZM10.452 2.6068C10.1323 1.7716 9.70208 1.28228 9.17063 1.12389C8.64564 0.967414 8.20308 1.18842 7.98278 1.34276C7.55169 1.64476 7.33837 2.11859 7.20071 2.50071C7.14817 2.64656 7.10002 2.79968 7.05661 2.93775C7.0422 2.98357 7.02832 3.02773 7.01496 3.06941C6.95791 3.24755 6.90763 3.39066 6.85248 3.50594C6.45683 4.33291 6.1121 4.82661 5.80935 5.14563C5.51322 5.45766 5.23983 5.62142 4.9473 5.76772C4.71095 5.88592 4.55494 6.12857 4.55491 6.40111L4.55388 13.912C4.55383 14.3021 4.87002 14.6183 5.26008 14.6183H11.8706C12.2097 14.6183 12.4663 14.5109 12.6519 14.3531C12.7387 14.2792 12.7988 14.2038 12.8387 14.1479C12.8556 14.1243 12.8704 14.102 12.8786 14.0895L12.8813 14.0854L12.8826 14.0835L12.8955 14.068L12.9142 14.0377C13.5304 13.0409 13.9578 12.2465 14.2927 11.294C14.6745 10.2085 14.8679 9.26762 14.9499 8.53421C15.0297 7.82035 15.009 7.25796 14.9246 6.94965C14.805 6.51236 14.5104 6.26063 14.2134 6.13235C13.9385 6.01358 13.661 5.9981 13.5028 5.99787L10.4907 5.95583C10.9296 4.15742 10.648 3.11853 10.452 2.6068ZM1.0008 6.46734C0.981809 6.06471 1.30313 5.72787 1.70621 5.72787H2.75264C3.14266 5.72787 3.45883 6.04405 3.45883 6.43407V13.9437C3.45883 14.3337 3.14266 14.6499 2.75264 14.6499H2.06044C1.68335 14.6499 1.37279 14.3536 1.35502 13.977L1.0008 6.46734Z",fill:"#8A919F"}})]))}}},924:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.452 2.6068C10.1323 1.7716 9.70208 1.28228 9.17063 1.12389C8.64564 0.967414 8.20308 1.18842 7.98278 1.34276C7.55169 1.64476 7.33837 2.11859 7.20071 2.50071C7.14817 2.64655 7.10003 2.79966 7.05661 2.93773L7.05661 2.93775C7.0422 2.98357 7.02832 3.02773 7.01496 3.06941C6.95791 3.24755 6.90763 3.39066 6.85248 3.50594C6.45683 4.33291 6.1121 4.82661 5.80935 5.14563C5.51322 5.45766 5.23983 5.62142 4.9473 5.76772C4.71095 5.88592 4.55494 6.12857 4.55491 6.40111L4.55388 13.912C4.55383 14.3021 4.87002 14.6183 5.26008 14.6183H11.8706C12.2097 14.6183 12.4663 14.5109 12.6519 14.3531C12.7388 14.2792 12.7988 14.2038 12.8387 14.1479C12.8556 14.1243 12.8704 14.102 12.8786 14.0895L12.8813 14.0854L12.8826 14.0835L12.8955 14.068L12.9142 14.0377C13.5304 13.0409 13.9578 12.2465 14.2927 11.294C14.6745 10.2085 14.8679 9.26762 14.9499 8.53421C15.0297 7.82035 15.009 7.25796 14.9246 6.94965C14.805 6.51236 14.5104 6.26063 14.2134 6.13235C13.9385 6.01358 13.661 5.9981 13.5028 5.99787L10.4907 5.95583C10.9296 4.15742 10.648 3.11853 10.452 2.6068ZM1.0008 6.46734C0.981809 6.06471 1.30313 5.72787 1.70621 5.72787H2.75264C3.14266 5.72787 3.45883 6.04405 3.45883 6.43407V13.9437C3.45883 14.3337 3.14266 14.6499 2.75264 14.6499H2.06044C1.68335 14.6499 1.37279 14.3536 1.35502 13.977L1.0008 6.46734Z",fill:"#1E80FF"}})]))}}},925:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"#86909c",xmlns:"http://www.w3.org/2000/svg"},y)},w),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 1C14.3682 1 14.6667 1.29848 14.6667 1.66667V12.3333C14.6667 12.7015 14.3682 13 14 13H10.5924L8.44602 14.932C8.19248 15.1601 7.8076 15.1601 7.55406 14.932L5.40737 13H2.00004C1.63185 13 1.33337 12.7015 1.33337 12.3333V1.66667C1.33337 1.29848 1.63185 1 2.00004 1H14ZM13.3334 2.33333H2.6667V11.6667H5.919L8 13.5395L10.0807 11.6667H13.3334V2.33333ZM11.3334 6.66667C11.3334 6.48257 11.1841 6.33333 11 6.33333H5.00003C4.81594 6.33333 4.6667 6.48257 4.6667 6.66667V7.33333C4.6667 7.51743 4.81594 7.66667 5.00003 7.66667H11C11.1841 7.66667 11.3334 7.51743 11.3334 7.33333V6.66667Z"}})]))}}},926:function(t,e,n){},927:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 10.5759L13.4212 5.15476C13.5513 5.02459 13.7624 5.02459 13.8926 5.15476L14.364 5.62616C14.4941 5.75634 14.4941 5.96739 14.364 6.09757L8.4714 11.9901C8.21106 12.2505 7.78894 12.2505 7.5286 11.9901L1.63604 6.09757C1.50586 5.96739 1.50586 5.75634 1.63604 5.62616L2.10744 5.15476C2.23762 5.02459 2.44867 5.02459 2.57885 5.15476L8 10.5759Z",fill:"#4E5969"}})]))}}},928:function(t,e,n){},929:function(t,e,n){},930:function(t,e,n){},931:function(t,e,n){},932:function(t,e,n){},942:function(t,e,n){},943:function(t,e,n){},948:function(t,e,n){},954:function(t,e,n){"use strict";function r(t,e){if((10==t.keyCode||13==t.keyCode)&&(t.ctrlKey||t.metaKey))return e()}n.d(e,"a",(function(){return r}))},974:function(t,e,n){"use strict";n(893)},975:function(t,e,n){"use strict";n(894)},976:function(t,e,n){"use strict";n(895)},980:function(t,e,n){},981:function(t,e,n){"use strict";var r=n(8),o=n(1046),c=n.n(o),l=Object(r.d)({components:{EmotionIcon:c.a,Picker:function(){return n.e(47).then(n.bind(null,4503))}},emits:["selectEmoji"],setup:function(t,e){var n=e.root,o=e.emit,c=Object(r.r)(!1);var l=Object(r.r)(!1),h=Object(r.x)(c,(function(){l.value=!0,h()}));return{once:l,visible:c,toggleShow:function(){var t=n.$store.getters.USER;return t?t.isBindedPhone?void(c.value=!c.value):n.$requestBindPhoneNumber():n.$requestLogin()},hide:function(){c.value=!1},handleChange:function(t){o("selectEmoji",t.source)}}}}),h=(n(1047),n(29)),component=Object(h.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"outer-click",rawName:"v-outer-click",value:t.hide,expression:"hide"}],staticClass:"emoji-container"},[n("div",{staticClass:"emoji-box",class:t.visible&&"active",on:{click:t.toggleShow}},[n("EmotionIcon",{staticClass:"icon"}),t._v(" "),n("span",[t._v("表情")])],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.once?n("Picker",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],on:{change:t.handleChange}}):t._e()],1)],1)}),[],!1,null,"9fe533ba",null);e.a=component.exports},982:function(t,e,n){"use strict";var r={props:["user"],computed:{isVisible:function(){if(this.user){var t=this.user.isBindedPhone;return this.user&&!t}return!1}},methods:{bindPhone:function(){this.$requestBindPhoneNumber()}}},o=(n(1048),n(29)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"auth-card"},[n("transition",{attrs:{name:"fade"}},[t.isVisible?n("div",{staticClass:"auth-cover"},[n("span",{staticClass:"hint"}),t._v("\n      您需要\n      "),n("a",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.bindPhone(e)}}},[t._v("绑定手机号")]),t._v("\n      后才可在社区内发布内容。\n    ")]):t._e()]),t._v(" "),t._t("default")],2)}),[],!1,null,"7c7c7498",null);e.a=component.exports},987:function(t,e,n){"use strict";n(1090);var r=n(29),component=Object(r.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"container"},[e("em",{staticClass:"triangle"})])}],!1,null,"68da8972",null);e.a=component.exports},988:function(t,e,n){n(16),n(15),n(11),n(6),n(14);var r=n(40),o=n(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,m=data.attrs,y=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){r(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},y)},w),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 1.3335C14.3514 1.3335 14.6394 1.60546 14.6648 1.95041L14.6666 2.00016V14.0002C14.6666 14.3516 14.3947 14.6396 14.0497 14.665L14 14.6668H1.99998C1.64853 14.6668 1.36059 14.3949 1.33514 14.0499L1.33331 14.0002V2.00016C1.33331 1.64871 1.60527 1.36077 1.95023 1.33532L1.99998 1.3335H14ZM13.3333 2.66618H2.66664V13.3328H13.3333V2.66618ZM11.9219 6.7879C11.9719 6.83791 12 6.90574 12 6.97647V11.7993C12 11.9098 11.9104 11.9993 11.8 11.9993H6.81615C6.7975 11.9993 6.77945 11.9968 6.76232 11.992L3.91042 11.9847C3.79996 11.9844 3.71063 11.8947 3.7109 11.7842C3.71102 11.7313 3.73209 11.6807 3.76948 11.6433L6.52468 8.88807C6.62882 8.78393 6.79766 8.78393 6.9018 8.88807L8.17297 10.1593L11.5447 6.7879C11.6489 6.68376 11.8177 6.68376 11.9219 6.7879ZM5.99997 3.99951V5.99951H3.99997V3.99951H5.99997Z"}})]))}}},989:function(t,e,n){"use strict";n(913)},991:function(t,e,n){"use strict";n(21);var r=n(5),o=n(68),c=n(48),l=n(890),h=n(858),f=n(177),d=n(859),v=n(884),m=n(182),y=n(875),w=n(855),_=n(58),k=n(272),C=n(180),O=n(923),x=n.n(O),V=n(924),S=n.n(V),T=n(925),P=n.n(T),E=n(178),j={components:{CommentForm:v.a,UserPopover:y.default,Avatar:f.a,Thumb:d.a,LikeIcon:x.a,LikeActiveIcon:S.a,CommentIcon:P.a},props:["replyList","subject","parent","reply","removable","user","mode","isHiddenReply","jjHelperItemId","jjHelperItemType"],data:function(){return{likeLock:Object(h.a)(),isReplyFormVisible:!1,isShowAll:!1,isLikeLoading:!1,replyCount:this.reply.reply_info.reply_count,extend:!1}},computed:{isMobile:function(){return this.$device.isMobile},parentReply:function(){var t,content=null===(t=this.reply.parent_reply)||void 0===t?void 0:t.reply_content;return this.hasParentRemove&&content?"该评论已被删除":content?Object(k.b)(content):""},hasParentRemove:function(){var t;return 0===(null===(t=this.reply.parent_reply)||void 0===t?void 0:t.reply_status)},currentUser:function(){var t=this.$store.getters;return"USER"in t?t.USER:null},removableReply:function(){return this.removable||this.isCurrentUsersReply()},hasAuthorBadge:function(){return this.subject.user_id===this.reply.user_info.user_id},imageUrl:function(){return this.reply.reply_info.reply_pics[0]&&this.reply.reply_info.reply_pics[0].pic_url},limitedContent:function(){return Object(m.d)(this.reply.reply_info.reply_content,{maxLineCount:this.maxLineCount,perLineLength:this.perLineLength,escapeReg:C.a})},collapsed:function(){return this.limitedContent.length<this.reply.reply_info.reply_content.length&&!this.isShowAll&&this.reply.reply_info.reply_content.length-this.limitedContent.length>this.perLineLength},replyPlaceholder:function(){return"回复".concat(this.reply.user_info.user_name,"...")},perLineLength:function(){return this.$device.isMobile?30:40},maxLineCount:function(){return this.$device.isMobile?4:6},isAutoFocus:function(){return!this.user||this.user.isBindedPhone}},methods:{parseUrlEmoji:k.b,onSyncCommentNum:function(t){"add"===t.type&&(this.replyCount=this.replyCount+(t.count||1)),"sub"===t.type&&(this.replyCount=this.replyCount-(t.count||1)),this.$emit("syncCommentNum",t)},isCurrentUsersReply:function(){return this.currentUser&&this.currentUser.user_id===this.reply.user_info.user_id},toggleLike:function(){var t=this;return this.currentUser?this.currentUser.isBindedPhone?void(this.isLikeLoading||this.$ensureAuthorized().then((function(){t.isLikeLoading=!0,t.reply.user_interact.is_digg?Object(_.c)({itemId:t.reply.reply_info.reply_id,type:6}).then((function(e){t.isLikeLoading=!1,0!==e.err_no?t.$error(e.err_msg):(t.reply.reply_info.digg_count--,t.reply.user_interact.is_digg=!t.reply.user_interact.is_digg)})):(Object(_.b)({itemId:t.reply.reply_info.reply_id,type:6}).then((function(e){t.isLikeLoading=!1,0!==e.err_no?t.$error(e.err_msg):(t.reply.reply_info.digg_count++,t.reply.user_interact.is_digg=!t.reply.user_interact.is_digg)})),t.$TEA("like_action",{like_comment_mode:t.mode}))}))):this.$requestBindPhoneNumber(E.b.interact):this.$requestLogin()},onReplyFormEmptyBlur:function(){var t=this;window.setTimeout((function(){t.isReplyFormVisible=!1}))},onSubmitted:function(){this.isReplyFormVisible=!1,this.$emit("submitted")},deleteComment:function(t){var e=this;this.$ensureAuthorized("login").then((function(){window.confirm("确定删除这条评论吗？")&&Object(w.b)({comment_id:t.reply_info.reply_comment_id,reply_id:t.reply_info.reply_id}).then((function(){e.replyList.some((function(n,r){n.reply_info.reply_id===t.reply_info.reply_id&&e.replyList.splice(r,1)})),e.$alertMsg("删除成功"),e.$emit("syncCommentNum",{type:"sub"})})).catch((function(){e.$alertMsg("删除失败，刷新后重试")}))}))}},mounted:function(){var t=this.$refs.content;if(t){var e=t.clientHeight;t.scrollHeight>e&&(this.extend=!0)}}},L=(n(998),n(29)),R=Object(L.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"subcomment"},[n("UserPopover",{attrs:{"user-id":t.reply.user_info.user_id,"show-jscore-level":!0}},[n("app-link",{staticClass:"user-link",attrs:{to:t.$userRoute(t.reply.user_info.user_id),blank:!0}},[n("Avatar",{staticClass:"avatar",attrs:{user:t.reply.user_info,size:48}})],1)],1),t._v(" "),n("div",{staticClass:"content-box"},[n("div",{staticClass:"content-wrapper"},[n("span",{staticClass:"delete",class:{removable:t.removableReply},on:{click:function(e){return t.deleteComment(t.reply)}}},[t._v("\n        删除\n      ")]),t._v(" "),n("div",{staticClass:"user-box"},[n("UserPopover",{attrs:{"user-id":t.reply.user_info.user_id,"show-jscore-level":!0}},[n("username",{staticClass:"username",attrs:{user:t.reply.user_info,universal:!0,"show-jpower-level":!1}})],1),t._v(" "),t.hasAuthorBadge&&!t.isMobile?n("span",{staticClass:"author-badge-text"},[t._v("\n          （作者）\n        ")]):t._e(),t._v(" "),t.reply.reply_user&&t.reply.reply_user.user_name&&!t.isMobile?n("div",{staticClass:"rely-box"},[n("span",[t._v("回复")]),t._v(" "),n("UserPopover",{attrs:{"user-id":t.reply.reply_user.user_id,"show-jscore-level":!0}},[n("app-link",{staticClass:"repliedname",attrs:{to:t.$userRoute(t.reply.reply_user)}},[t._v("\n              "+t._s(t.reply.reply_user.user_name)+"\n            ")])],1)],1):t._e(),t._v(" "),n("span",{staticClass:"divide"}),t._v(" "),n("time",{staticClass:"time",attrs:{datetime:t._f("iso")(1e3*t.reply.reply_info.ctime),title:new Date(1e3*t.reply.reply_info.ctime)}},[t._v("\n          "+t._s(t._f("relative")(1e3*t.reply.reply_info.ctime))+"\n        ")])],1),t._v(" "),n("div",{ref:"content",staticClass:"content",class:{extend:t.isShowAll,hasimage:!!t.imageUrl},domProps:{innerHTML:t._s(t.parseUrlEmoji(t.reply.reply_info.reply_content))}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.extend&&!t.isShowAll,expression:"extend && !isShowAll"}],staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!0}}},[t._v("\n        展开\n      ")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.extend&&t.isShowAll,expression:"extend && isShowAll"}],staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!1}}},[t._v("\n        收起\n      ")]),t._v(" "),t.imageUrl?n("Thumb",{staticClass:"viewable",attrs:{"data-src":t.imageUrl,url:t.imageUrl,width:160,height:160,format:"jpg"}}):t._e(),t._v(" "),t.parentReply?n("div",{staticClass:"parent-wrapper"},[t.hasParentRemove?t._e():n("div",[t._v("“")]),t._v(" "),n("div",{staticClass:"parent-content",domProps:{innerHTML:t._s(t.parentReply)}}),t._v(" "),t.hasParentRemove?t._e():n("div",[t._v("”")])]):t._e(),t._v(" "),n("div",{staticClass:"action-box"},[n("div",{staticClass:"item dig-item",class:t.reply.user_interact.is_digg&&"active",on:{click:t.toggleLike}},[t.reply.user_interact.is_digg?n("LikeActiveIcon"):n("LikeIcon"),t._v("\n          "+t._s(t.reply.reply_info.digg_count||"点赞")+"\n        ")],1),t._v(" "),t.isHiddenReply?t._e():n("div",{staticClass:"item",class:t.isReplyFormVisible&&"active",on:{click:function(e){t.isReplyFormVisible=!t.isReplyFormVisible}}},[n("CommentIcon"),t._v("\n          "+t._s(t.isReplyFormVisible?"取消回复":t.replyCount||"回复")+"\n        ")],1)])],1),t._v(" "),t.isReplyFormVisible?n("CommentForm",{staticClass:"replyform",attrs:{subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,parent:t.parent,comment:t.reply,replyList:t.replyList,autoFocus:t.isAutoFocus,placeholder:t.replyPlaceholder,mode:t.mode},on:{emptyBlur:t.onReplyFormEmptyBlur,submitted:t.onSubmitted,syncCommentNum:t.onSyncCommentNum}}):t._e()],1)],1)}),[],!1,null,"74f0bca7",null).exports,I=n(927),A=n.n(I),D={components:{SubComment:R,MoreIcon:A.a},props:["subject","parent","expanded","removable","user","mode","isHiddenReply","hiddenSubComment","jjHelperItemId","jjHelperItemType"],data:function(){return{list:[],cursor:"0",limit:20,count:0,has_more:!0,loading:!1,showAll:!1}},computed:{canFetchMore:function(){var t=this.parent.comment_info.reply_count;return!!this.list.length&&(t>2&&t<=10&&(this.showAll=!0),this.expanded?"0"===this.cursor?this.parent.comment_info.reply_count>this.list.length:this.has_more:this.list.length&&this.parent.comment_info.reply_count>this.list.length)}},watch:{parent:function(t){this.list=t.reply_infos}},methods:{getRouterParams:function(){return{name:{2:"column",4:"pin",12:"book"}[this.subject.item_type],params:{id:this.subject.item_id}}},refetch:function(){this.$emit("refetch")},fetchMore:function(){var t=this;!this.loading&&this.has_more&&(this.loading=!0,Object(w.f)({comment_id:this.parent.comment_info.comment_id,item_id:this.subject.item_id,item_type:this.subject.item_type,cursor:this.cursor,limit:this.limit}).then((function(e){var data=e.data,n=e.count,r=e.has_more,cursor=e.cursor;t.loading=!1,t.mergeList(data),t.count=n,t.has_more=r,t.cursor=cursor})).catch((function(e){t.loading=!1,console.error(e)})))},mergeList:function(t){var e,n=this.list.reduce((function(t,e){return t[e.reply_info.reply_id]=!0,t}),{}),r=t.filter((function(t){return!n[t.reply_info.reply_id]}));(e=this.list).push.apply(e,Object(o.a)(r))},onSyncCommentNum:function(t){this.$emit("syncCommentNum",t)}},created:function(){this.list=this.hiddenSubComment?[]:this.parent.reply_infos}},M=(n(999),Object(L.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.list.length?n("div",{staticClass:"sub-comment-list"},[n("div",t._l(t.list,(function(e){return n("sub-comment",{key:e.reply_info.reply_id,staticClass:"sub-comment",attrs:{"data-jj-helper-comment-id":e.reply_info&&e.reply_info.reply_id,"data-jj-helper-item-id":t.jjHelperItemId,"data-jj-helper-item-type":t.jjHelperItemType,subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,parent:t.parent,reply:e,replyList:t.list,removable:t.removable,user:t.user,mode:t.mode,isHiddenReply:t.isHiddenReply},on:{refetch:t.refetch,syncCommentNum:t.onSyncCommentNum}})})),1),t._v(" "),t.canFetchMore&&t.has_more?n("div",{staticClass:"fetch-more"},[t.expanded||t.showAll?t.loading?n("span",{staticClass:"fetch-more-comment"},[t._v("加载中...")]):n("span",{staticClass:"fetch-more-comment",on:{click:t.fetchMore}},[t._v("\n      查看更多回复\n      "),n("MoreIcon")],1):n("app-link",{staticClass:"fetch-more-comment",attrs:{to:t.getRouterParams(),blank:!0}},[t._v("\n      查看更多回复\n    ")])],1):t._e()]):t._e()}),[],!1,null,"681890ca",null).exports),B=n(7),N=n(1e3),F=n.n(N),H=n(907),U=Object(B.b)({components:{VideoSingleIcon:F.a},props:{comment:{type:Object,default:function(){return{}}}},setup:function(t,e){var n=e.root,r=Object(B.a)((function(){return n.$userPosition(t.comment.user_info)}));return{isMobile:n.$device.isMobile,position:r,getVideoDetailRoute:function(t){return{name:H.e.singleDetailRoute,params:{id:t.parent_id,sectionId:t.item_id}}}}}}),$=(n(1001),Object(L.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-more-info"},[!t.isMobile&&t.position?n("span",{staticClass:"divide"}):t._e(),t._v(" "),t.position?n("span",{staticClass:"position"},[t._v("\n    "+t._s(t.position)+"\n  ")]):t._e(),t._v(" "),!t.isMobile||t.isMobile&&t.position?n("span",{class:{divide:!t.isMobile,dot:t.isMobile}}):t._e(),t._v(" "),n("time",{staticClass:"time",attrs:{datetime:t._f("iso")(1e3*t.comment.comment_info.ctime),title:new Date(1e3*t.comment.comment_info.ctime)}},[t._v("\n    "+t._s(t._f("relative")(1e3*t.comment.comment_info.ctime))+"\n  ")]),t._v(" "),t.comment.root_item&&t.comment.root_item.item_id?n("span",{staticClass:"dot"}):t._e(),t._v(" "),t.comment.root_item&&t.comment.root_item.item_id?n("router-link",{staticClass:"extra-info",attrs:{to:t.getVideoDetailRoute(t.comment.root_item)}},[n("div",{staticClass:"video-title"},[t._v("来自分辑-"+t._s(t.comment.root_item.title))]),t._v(" "),n("VideoSingleIcon",{staticClass:"single-video-icon"})],1):t._e()],1)}),[],!1,null,"29d7f98b",null).exports),G={components:{Avatar:f.a,Thumb:d.a,CommentForm:v.a,SubCommentList:M,UserPopover:y.default,LikeIcon:x.a,CommentIcon:P.a,LikeActiveIcon:S.a,CommentExtraInfo:$},props:["list","subject","comment","expanded","mode","isHiddenReply","hiddenSubComment","jjHelperItemId","jjHelperItemType"],data:function(){return{likeLock:Object(h.a)(),isReplyFormVisible:!1,isShowAll:!1,isLikeLoading:!1,parseUrlEmoji:k.b,extend:!1,replyCount:this.comment.comment_info.reply_count}},computed:{isMobile:function(){return this.$device.isMobile},isDelete:function(){var t;return null===(t=this.comment.user_info)||void 0===t?void 0:t.is_logout},currentUser:function(){var t=this.$store.getters;return"USER"in t?t.USER:null},isCurrentUsersSubject:function(){return this.currentUser&&this.currentUser.user_id===this.subject.user_id},isCurrentUsersComment:function(){return this.currentUser&&this.currentUser.user_id===this.comment.user_info.user_id},isAdmin:function(){return this.currentUser&&"admin"===this.currentUser.role},hasAuthorBadge:function(){return this.subject.user_id===this.comment.user_info.user_id},removable:function(){return this.isAdmin||this.isCurrentUsersSubject||this.isCurrentUsersComment},mobile:function(){return this.$device.isMobile},imageUrl:function(){return this.comment.comment_info.comment_pics[0]&&this.comment.comment_info.comment_pics[0].pic_url},replyPlaceholder:function(){return"回复".concat(this.comment.user_info.user_name,"...")},isAutoFocus:function(){return!this.currentUser||this.currentUser.isBindedPhone}},methods:{toggleLike:function(){var t=this;return this.currentUser?this.currentUser.isBindedPhone?void(this.isLikeLoading||this.$ensureAuthorized().then((function(){t.isLikeLoading=!0,t.comment.user_interact.is_digg?Object(_.c)({itemId:t.comment.comment_info.comment_id,type:5}).then((function(e){t.isLikeLoading=!1,0!==e.err_no?t.$error(e.err_msg):(t.comment.comment_info.digg_count--,t.comment.user_interact.is_digg=!t.comment.user_interact.is_digg)})):(Object(_.b)({itemId:t.comment.comment_info.comment_id,type:5}).then((function(e){t.isLikeLoading=!1,0!==e.err_no?t.$error(e.err_msg):(t.comment.comment_info.digg_count++,t.comment.user_interact.is_digg=!t.comment.user_interact.is_digg)})),t.$TEA("like_action",{like_comment_mode:t.mode}))}))):this.$requestBindPhoneNumber(E.b.interact):this.$requestLogin()},onReplyFormEmptyBlur:function(){var t=this;window.setTimeout((function(){t.isReplyFormVisible=!1}))},onSubmitted:function(){this.isReplyFormVisible=!1,this.$refs.subCommentList.onSubmitted()},refetch:function(){this.$emit("refetch")},deleteComment:function(t){var e=this;this.$ensureAuthorized("login").then((function(){window.confirm("确定删除这条评论吗？")&&Object(w.a)({comment_id:t.comment_info.comment_id}).then((function(){e.list.some((function(n,r){n.comment_info.comment_id===t.comment_info.comment_id&&e.list.splice(r,1)})),e.$alertMsg("删除成功"),e.$emit("syncCommentNum",{type:"sub",count:t.reply_infos.length})})).catch((function(){e.$alertMsg("删除失败，刷新后重试")}))}))},onSyncCommentNum:function(t){"add"===t.type&&(this.replyCount=this.replyCount+(t.count||1)),"sub"===t.type&&(this.replyCount=this.replyCount-(t.count||1)),this.$emit("syncCommentNum",t)}},mounted:function(){var t=this.$refs.content;if(t){var e=t.clientHeight;t.scrollHeight>e&&(this.extend=!0)}}},W=(n(1002),Object(L.a)(G,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("UserPopover",{staticClass:"popover",attrs:{"user-id":t.comment.user_info.user_id,"enable-popover":Boolean(!t.isDelete),"show-jscore-level":!0}},[n("app-link",{staticClass:"user-link",attrs:{to:t.$userRoute(t.comment.user_info.user_id),blank:!0}},[n("Avatar",{staticClass:"avatar",attrs:{user:t.comment.user_info,alt:t.comment.user_info.user_name+"的头像"}})],1)],1),t._v(" "),n("div",{staticClass:"content-box"},[n("div",{staticClass:"comment-main"},[n("span",{staticClass:"delete",class:{removable:t.removable},on:{click:function(e){return t.deleteComment(t.comment)}}},[t._v("\n        删除\n      ")]),t._v(" "),n("div",{staticClass:"user-box"},[n("UserPopover",{attrs:{"user-id":t.comment.user_info.user_id,"enable-popover":Boolean(!t.isDelete),"show-jscore-level":!0}},[n("username",{staticClass:"username",attrs:{user:t.comment.user_info,universal:!0,"show-jscore-level":!0}})],1),t._v(" "),t.hasAuthorBadge&&!t.isMobile?n("span",{staticClass:"author-badge-text"},[t._v("\n          （作者）\n        ")]):t._e(),t._v(" "),t.isMobile?t._e():n("CommentExtraInfo",{attrs:{comment:t.comment}})],1),t._v(" "),t.isMobile?n("CommentExtraInfo",{attrs:{comment:t.comment}}):t._e(),t._v(" "),n("div",{ref:"content",staticClass:"content",class:{extend:t.extend&&t.isShowAll,hasimage:!!t.imageUrl},domProps:{innerHTML:t._s(t.parseUrlEmoji(t.comment.comment_info.comment_content))}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.extend&&!t.isShowAll,expression:"extend && !isShowAll"}],staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!0}}},[t._v("\n        展开\n      ")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.extend&&t.isShowAll,expression:"extend && isShowAll"}],staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!1}}},[t._v("\n        收起\n      ")]),t._v(" "),t.imageUrl?n("Thumb",{staticClass:"viewable",attrs:{"data-src":t.imageUrl,url:t.imageUrl,width:160,height:160,format:"jpg"}}):t._e(),t._v(" "),n("div",{staticClass:"action-box"},[n("div",{staticClass:"action-left"},[n("div",{staticClass:"item dig-item",class:t.comment.user_interact.is_digg&&"active",on:{click:t.toggleLike}},[t.comment.user_interact.is_digg?n("LikeActiveIcon"):n("LikeIcon"),t._v("\n            "+t._s(t.comment.comment_info.digg_count||"点赞")+"\n          ")],1),t._v(" "),t.isHiddenReply?t._e():n("div",{staticClass:"item",class:t.isReplyFormVisible&&"active",on:{click:function(e){t.isReplyFormVisible=!t.isReplyFormVisible}}},[n("CommentIcon"),t._v("\n            "+t._s(t.isReplyFormVisible?"取消回复":t.replyCount||"回复")+"\n          ")],1)])])],1),t._v(" "),n("div",{staticClass:"subcomment-wrapper"},[t.isReplyFormVisible?n("CommentForm",{staticClass:"comment-form",attrs:{subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,comment:t.comment,"reply-list":t.comment.reply_infos,"auto-focus":t.isAutoFocus,placeholder:t.replyPlaceholder,mode:t.mode},on:{emptyBlur:t.onReplyFormEmptyBlur,submitted:t.onSubmitted,syncCommentNum:t.onSyncCommentNum}}):t._e(),t._v(" "),n("SubCommentList",{ref:"subCommentList",attrs:{"hidden-sub-comment":t.hiddenSubComment,subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,parent:t.comment,expanded:t.expanded,removable:t.isAdmin||t.isCurrentUsersSubject,user:t.currentUser,mode:t.mode,"is-hidden-reply":t.isHiddenReply},on:{refetch:t.refetch,syncCommentNum:t.onSyncCommentNum}})],1)])],1)}),[],!1,null,"e1bd52a4",null).exports),z={components:{ImageViewer:l.a,Comment:W},props:["subject","list","expanded","mode","isHiddenReply","hiddenSubComment","jjHelperItemId","jjHelperItemType"],methods:{initImageViewer:function(){this.$refs.imageViewer.attachContainer(this.$el)},refetch:function(){this.$emit("refetch")},onSyncCommentNum:function(t){this.$emit("syncCommentNum",t)}},mounted:function(){this.initImageViewer()}},Y=Object(L.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-list"},[n("ImageViewer",{ref:"imageViewer",attrs:{selector:".viewable"}}),t._v(" "),t._l(t.list,(function(e){return n("comment",{key:e.comment_id,staticClass:"comment",attrs:{"data-jj-helper-comment-id":e.comment_id,"data-jj-helper-item-id":t.jjHelperItemId,"data-jj-helper-item-type":t.jjHelperItemType,"data-jj-helper-comment-status":e.comment_info.comment_status,list:t.list,comment:e,subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,expanded:t.expanded,"hidden-sub-comment":t.hiddenSubComment,isHiddenReply:t.isHiddenReply,mode:t.mode},on:{refetch:t.refetch,syncCommentNum:t.onSyncCommentNum}})}))],2)}),[],!1,null,null,null).exports,K=n(8),Z=n(1003),X=n.n(Z),J=Object(K.d)({props:{subject:{type:Object,required:!0},jjHelperItemId:{type:String,default:""},jjHelperItemType:{type:String,default:""}},components:{HotIcon:X.a,CommentComp:W,ImageViewer:l.a},setup:function(t){var e=Object(K.r)([]);Object(K.y)((function(){var n=t.subject,r=n.item_id,o=n.item_type;r&&o&&Object(w.e)({item_id:r,item_type:o}).then((function(t){return e.value=t}))}));var n=Object(K.a)((function(){return e.value.slice(0,5)})),r=Object(K.r)(),o=Object(K.r)();return Object(K.x)([r,o],(function(){r.value&&o.value&&r.value.attachContainer(o.value)})),{list:n,imageViewer:r,commentContainer:o}}}),Q=(n(1004),Object(L.a)(J,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.list.length>0?n("div",{staticClass:"container"},[n("ImageViewer",{ref:"imageViewer",attrs:{selector:".viewable"}}),t._v(" "),n("div",{staticClass:"title"},[t._v("\n    热门评论\n    "),n("HotIcon")],1),t._v(" "),n("div",{ref:"commentContainer",staticClass:"list"},t._l(t.list,(function(e){return n("CommentComp",{key:e.comment_id,attrs:{"data-jj-helper-comment-id":e.comment_id,"data-jj-helper-item-id":t.jjHelperItemId,"data-jj-helper-item-type":t.jjHelperItemType,list:t.list,comment:e,subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,expanded:!0,mode:"top"}})})),1)],1):t._e()}),[],!1,null,"00f8bb4c",null).exports),tt={components:{CommentForm:v.a,CommentList:Y,HotCommentList:Q,MoreIcon:A.a},props:["subject","expanded","sticky","forbidInput","small","hasSort","hasHot","threeSiftComment","isHiddenReply","isBestComment","hiddenSubComment","jjHelperItemId","jjHelperItemType"],data:function(){return{list:[],cursor:"0",limit:20,count:0,has_more:!0,loading:!1,listSize:0,sort:"new",hasLoadMore:!1}},watch:{"subject.item_id":{handler:function(t){t&&!this.$isServer&&this.fetchData()}},sortData:{handler:function(){this.$isServer||this.fetchData()}}},computed:{sortData:function(){return{new:0,hot:1}[this.sort]||0}},methods:{setSort:function(t){this.$TEA("comment_switch",{switch:t}),this.sort=t},getMore:function(){var t=this;if(!this.expanded){var e=this.$router.resolve({name:{2:"column",4:"pin",12:"book"}[this.subject.item_type],params:{id:this.subject.item_id},hash:"#comment"}).href;window.open(e,"_blank")}if(this.expanded&&!this.hasLoadMore){this.hasLoadMore=!0,this.fetchMoreIfConditionIsSatisfied();var n=this.$getBean("eventBus");n.onVmLife(this,n.eventType.ROOT_CONTAINER_SCROLL,(function(){t.fetchMoreIfConditionIsSatisfied()})),Object(c.l)(this.$el,(function(){t.fetchMoreIfConditionIsSatisfied()}))}},fetchMore:function(){var t=this;if(!this.loading&&this.has_more){this.loading=!0;var e=this.subject,n=e.item_id,r=e.item_type;Object(w.d)({item_id:n,item_type:r,cursor:this.cursor,limit:this.limit,sort:this.sortData}).then((function(e){var data=e.data,cursor=e.cursor,n=e.count,r=e.has_more;t.listSize=data.length,t.loading=!1,t.mergeList(data),t.count=n,t.cursor=cursor,t.has_more=r})).catch((function(e){t.loading=!1,console.error(e)}))}},mergeList:function(t){var e,n=this.list.reduce((function(t,e){return t[e.comment_id]=!0,t}),{}),r=t.filter((function(t){return!n[t.comment_id]}));(e=this.list).push.apply(e,Object(o.a)(r))},fetchMoreIfConditionIsSatisfied:function(){Object(c.b)(this.$el)>-200&&this.fetchMore()},onRefetch:function(){this.fetchData()},onSyncCommentNum:function(t){this.$emit("syncCommentNum",t)},handleBookCommentScroll:function(){var t=this,e=document.documentElement.clientHeight,n=document.body.scrollHeight;if(document.documentElement.scrollTop+e>=n&&this.has_more&&!this.threeSiftComment){var r=this.subject,c=r.item_id,l=r.item_type;this.limit=this.expanded?20:5,Object(w.d)({item_id:c,item_type:l,cursor:this.cursor,limit:this.limit,sort:this.sortData}).then((function(e){var data=e.data,cursor=e.cursor,n=e.count,r=e.has_more,c=data.filter((function(t){return 5===t.comment_info.comment_status}));t.list=[].concat(Object(o.a)(t.list),Object(o.a)(c)),t.cursor=cursor,t.count=n,t.has_more=r}))}},fetchData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,data,cursor,l,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.subject,r=n.item_id,o=n.item_type,!t.loading&&r){e.next=3;break}return e.abrupt("return");case 3:return t.loading=!0,t.limit=t.expanded?20:5,t.cursor="0",t.count=0,t.has_more=!0,e.prev=8,e.next=11,Object(w.d)({item_id:r,item_type:o,cursor:t.cursor,limit:t.limit,sort:t.sortData});case 11:c=e.sent,data=c.data,cursor=c.cursor,l=c.count,h=c.has_more,t.listSize=data.length,t.loading=!1,t.list=data,t.threeSiftComment&&data.length>3&&(t.list=t.list.filter((function(t){return 5===t.comment_info.comment_status})),t.list.length>3&&t.$emit("isListLenMore3"),t.list&&0!==t.list.length&&t.$emit("isShowCommentMode"),t.list=t.list.slice(0,3)),t.count=l,t.cursor=cursor,t.has_more=h,t.isBestComment&&(t.list=t.list.filter((function(t){return 5===t.comment_info.comment_status})),addEventListener("scroll",t.handleBookCommentScroll)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(8),t.loading=!1,console.error(e.t0);case 30:case"end":return e.stop()}}),e,null,[[8,26]])})))()}},mounted:function(){this.fetchData()},beforeDestroy:function(){removeEventListener("scroll",this.handleBookCommentScroll)}},et=(n(1005),Object(L.a)(tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",class:t.small&&"small",attrs:{"data-jj-helper":"comment-container"}},[t.forbidInput?t._e():n("CommentForm",{staticClass:"comment-form",class:{hasborder:t.list&&t.list.length},attrs:{commentList:t.list,subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,small:t.small},on:{syncCommentNum:t.onSyncCommentNum}}),t._v(" "),t.hasHot?n("HotCommentList",{staticClass:"hot-list hasborder",attrs:{subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType}}):t._e(),t._v(" "),t.list.length?n("div",{staticClass:"comment-list-wrapper"},[n("div",{staticClass:"title"},[t._v("\n      全部评论（"+t._s(t.subject.comment_count)+"）\n      "),t.hasSort?n("div",{staticClass:"sort"},[n("div",{staticClass:"item",class:"new"===t.sort&&"active",on:{click:function(e){return t.setSort("new")}}},[t._v("\n          最新\n        ")]),t._v(" "),n("div",{staticClass:"divide"}),t._v(" "),n("div",{staticClass:"item",class:"hot"===t.sort&&"active",on:{click:function(e){return t.setSort("hot")}}},[t._v("\n          最热\n        ")])]):t._e()]),t._v(" "),n("comment-list",{staticClass:"comment-list",attrs:{list:t.list,subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,expanded:t.expanded,isHiddenReply:t.isHiddenReply,"hidden-sub-comment":t.hiddenSubComment,mode:t.sort},on:{refetch:t.onRefetch,syncCommentNum:t.onSyncCommentNum}}),t._v(" "),t.list.length<t.subject.comment_count&&t.has_more?n("p",{staticClass:"fetch-more-comment",on:{click:t.getMore}},[t._v("\n      "+t._s(t.hasLoadMore?"加载中...":"查看全部 "+t.subject.comment_count+" 条回复")+"\n      "),t.expanded&&!t.hasLoadMore?n("MoreIcon"):t._e()],1):t._e()],1):t._e()],1)}),[],!1,null,"76f63394",null));e.a=et.exports},997:function(t,e,n){!function(){function e(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function n(t,n){var r=function(t,n){var r=e(t)*e(n);if(0===r)return 0;var o=function(t,e){return t.x*e.x+t.y*e.y}(t,n)/r;return o>1&&(o=1),Math.acos(o)}(t,n);return function(t,e){return t.x*e.y-e.x*t.y}(t,n)>0&&(r*=-1),180*r/Math.PI}var r=function(t){this.handlers=[],this.el=t};function o(t,e){var n=new r(t);return n.add(e),n}r.prototype.add=function(t){this.handlers.push(t)},r.prototype.del=function(t){t||(this.handlers=[]);for(var i=this.handlers.length;i>=0;i--)this.handlers[i]===t&&this.handlers.splice(i,1)},r.prototype.dispatch=function(){for(var i=0,t=this.handlers.length;i<t;i++){var e=this.handlers[i];"function"==typeof e&&e.apply(this.el,arguments)}};var c=function(t,option){this.element="string"==typeof t?document.querySelector(t):t,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var e=function(){};this.rotate=o(this.element,option.rotate||e),this.touchStart=o(this.element,option.touchStart||e),this.multipointStart=o(this.element,option.multipointStart||e),this.multipointEnd=o(this.element,option.multipointEnd||e),this.pinch=o(this.element,option.pinch||e),this.swipe=o(this.element,option.swipe||e),this.tap=o(this.element,option.tap||e),this.doubleTap=o(this.element,option.doubleTap||e),this.longTap=o(this.element,option.longTap||e),this.singleTap=o(this.element,option.singleTap||e),this.pressMove=o(this.element,option.pressMove||e),this.twoFingerPressMove=o(this.element,option.twoFingerPressMove||e),this.touchMove=o(this.element,option.touchMove||e),this.touchEnd=o(this.element,option.touchEnd||e),this.touchCancel=o(this.element,option.touchCancel||e),this._cancelAllHandler=this.cancelAll.bind(this),window.removeEventListener("scroll",this._cancelAllHandler),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}};c.prototype={start:function(t){if(t.touches){this.now=Date.now(),this.x1=t.touches[0].pageX,this.y1=t.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(t,this.element),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var n=this.preV;if(t.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var r={x:t.touches[1].pageX-this.x1,y:t.touches[1].pageY-this.y1};n.x=r.x,n.y=r.y,this.pinchStartLen=e(n),this.multipointStart.dispatch(t,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout(function(){this.longTap.dispatch(t,this.element),this._preventTap=!0}.bind(this),750)}},move:function(t){if(t.touches){var r=this.preV,o=t.touches.length,c=t.touches[0].pageX,l=t.touches[0].pageY;if(this.isDoubleTap=!1,o>1){var h=t.touches[1].pageX,f=t.touches[1].pageY,d={x:t.touches[1].pageX-c,y:t.touches[1].pageY-l};null!==r.x&&(this.pinchStartLen>0&&(t.zoom=e(d)/this.pinchStartLen,this.pinch.dispatch(t,this.element)),t.angle=n(d,r),this.rotate.dispatch(t,this.element)),r.x=d.x,r.y=d.y,null!==this.x2&&null!==this.sx2?(t.deltaX=(c-this.x2+h-this.sx2)/2,t.deltaY=(l-this.y2+f-this.sy2)/2):(t.deltaX=0,t.deltaY=0),this.twoFingerPressMove.dispatch(t,this.element),this.sx2=h,this.sy2=f}else null!==this.x2?(t.deltaX=c-this.x2,t.deltaY=l-this.y2):(t.deltaX=0,t.deltaY=0),this.pressMove.dispatch(t,this.element);this.touchMove.dispatch(t,this.element),this._cancelLongTap(),this.x2=c,this.y2=l,o>1&&t.preventDefault()}},end:function(t){if(t.changedTouches){this._cancelLongTap();var e=this;t.touches.length<2&&(this.multipointEnd.dispatch(t,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(t.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout((function(){e.swipe.dispatch(t,e.element)}),0)):(this.tapTimeout=setTimeout((function(){e._preventTap||e.tap.dispatch(t,e.element),e.isDoubleTap&&(e.doubleTap.dispatch(t,e.element),clearTimeout(e.singleTapTimeout),e.isDoubleTap=!1)}),0),e.isDoubleTap||(e.singleTapTimeout=setTimeout((function(){e.singleTap.dispatch(t,e.element)}),250))),this.touchEnd.dispatch(t,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}},cancelAll:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)},cancel:function(t){this.cancelAll(),this.touchCancel.dispatch(t,this.element)},_cancelLongTap:function(){clearTimeout(this.longTapTimeout)},_cancelSingleTap:function(){clearTimeout(this.singleTapTimeout)},_swipeDirection:function(t,e,n,r){return Math.abs(t-e)>=Math.abs(n-r)?t-e>0?"Left":"Right":n-r>0?"Up":"Down"},on:function(t,e){this[t]&&this[t].add(e)},off:function(t,e){this[t]&&this[t].del(e)},destroy:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,null}},t.exports=c}()},998:function(t,e,n){"use strict";n(926)},999:function(t,e,n){"use strict";n(928)}}]);