(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{1189:function(t,e,n){},1223:function(t,e,n){},1236:function(t,e,n){"use strict";n(21);var r=n(5),o=n(48),c=n(1640),l=n(852),d=n(8),f=n(18),h=n(98),v=Object(d.d)({components:{Entry:c.a,XituSkeleton:l.a,LoginItem:function(){return n.e(39).then(n.bind(null,4501))}},props:["list","loading","emptyText","noEmptyIndication","user","fromPage","enableDislikeButton","enableTransferButton","loginItemIndex"],emits:["transfer","collection-delete"],fetch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.enableDislikeButton){e.next=2;break}return e.abrupt("return");case 2:if(!t.dislikeWhiteListUserIds){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,h.a.GetDislikeWhiteList();case 7:r=e.sent,o=null!==(n=r.user_ids)&&void 0!==n?n:[],t.dislikeWhiteListUserIds=o.reduce((function(t,e){return t[e]=!0,t}),{}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),t.dislikeWhiteListUserIds={},console.warn("get dislike whitelist err:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})))()},data:function(){return{dislikeWhiteListUserIds:void 0}},computed:{nodata:function(){return!this.noEmptyIndication&&!this.loading&&this.list&&0===this.list.length},isLoading:function(){var t,e=null===(t=this.$store.state.env)||void 0===t?void 0:t.ua;return!Object(f.l)(e)&&this.loading}},methods:{entryIsWhiteListed:function(t){var e,n,r;if(!this.dislikeWhiteListUserIds)return!0;var o=null===(e=t.author_user_info)||void 0===e?void 0:e.user_id;return null!==(r=null===(n=this.dislikeWhiteListUserIds)||void 0===n?void 0:n[o])&&void 0!==r&&r},fetchMoreIfConditionIsSatisfied:function(){Object(o.b)(this.$refs.list.$el)>-200&&this.$emit("should-fetch-more")},onEntryDeleted:function(t){this.$emit("deleted",t)},handleTransfer:function(t){this.$emit("transfer",t)},handleCollectionDelete:function(t){this.$emit("collection-delete",t)}},mounted:function(){var t=this,e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.ROOT_CONTAINER_SCROLL,(function(){t.fetchMoreIfConditionIsSatisfied()})),Object(o.l)(this.$refs.list.$el,(function(){t.fetchMoreIfConditionIsSatisfied()}))}}),m=(n(1638),n(29)),component=Object(m.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("xitu-skeleton",{ref:"list",staticClass:"entry-list list",attrs:{"tag-name":"transition-group",name:"entry-list",tag:"div"},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[t._l(t.list,(function(e,r){return n("li",{key:e.id,staticClass:"item",attrs:{"data-growing-container":"true","data-growing-title":"entryList"}},[n("entry",{attrs:{entry:e,index:r,fromPage:t.fromPage,isLastOne:r===t.list.length-1,"enable-dislike-button":t.enableDislikeButton&&!t.entryIsWhiteListed(e),"enable-transfer-button":t.enableTransferButton},on:{deleted:t.onEntryDeleted,transfer:t.handleTransfer,"collection-delete":t.handleCollectionDelete}}),t._v(" "),r+1!==t.loginItemIndex||t.user?t._e():n("LoginItem",{attrs:{text:"可定制个人专属的推荐内容列表"}})],1)})),t._v(" "),t.nodata?n("div",{staticClass:"empty text-muted"},[t._v("\n    "+t._s(t.emptyText||"列表为空")+"\n  ")]):t._e()],2)}),[],!1,null,"2bf301c8",null);e.a=component.exports},1243:function(t,e,n){"use strict";var r={props:["title","pure"]},o=(n(1660),n(29)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidebar-block",class:{pure:t.pure,shadow:!t.pure}},[t.pure?[t._t("default")]:[t.title?n("div",{staticClass:"block-title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),n("div",{staticClass:"block-body"},[t._t("default")],2)]],2)}),[],!1,null,"71f2d09e",null);e.a=component.exports},1638:function(t,e,n){"use strict";n(1189)},1660:function(t,e,n){"use strict";n(1223)},1730:function(t,e,n){t.exports=n.p+"img/realtime_qrcode.f1a7fba.png"},1731:function(t,e,n){t.exports=n.p+"img/article.9d13ff7.png"},1732:function(t,e,n){},1742:function(t,e,n){},1965:function(t,e,n){t.exports=n.p+"img/home.59780ae.png"},1966:function(t,e,n){"use strict";n(1732)},2019:function(t,e,n){"use strict";n(1742)},2020:function(t,e,n){},2052:function(t,e,n){},2053:function(t,e,n){},2104:function(t,e,n){"use strict";n(39);var r=n(1243),o=n(8),c={realtimesIndex:n(1730),realtimesCategory:n(1730),timelineIndex:n(1965),entryPublic:n(1731),column:n(1731)},l=Object(o.d)({components:{SidebarBlock:r.a},props:["closeable","title","desc"],data:function(){return{visible:!0}},methods:{close:function(){window.localStorage.setItem("HIDE_APP_DOWNLOAD_SIDEBAR_BLOCK","true"),this.visible=!1}},computed:{linkPath:function(){return"/app"},qrImageUrl:function(){return c[this.$route.name]||c.timelineIndex},label:function(){return this.desc||"一个帮助开发者成长的社区"}},created:function(){this.closeable&&(this.visible=!window.localStorage.getItem("HIDE_APP_DOWNLOAD_SIDEBAR_BLOCK"))}}),d=(n(1966),n(29)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("sidebar-block",{staticClass:"app-download-sidebar-block"},[n("router-link",{attrs:{to:t.linkPath,target:"_blank"}},[n("div",{staticClass:"app-link"},[n("img",{staticClass:"qr-img",attrs:{src:t.qrImageUrl}}),t._v(" "),n("div",{staticClass:"content-box"},[n("div",{staticClass:"headline"},[t._v(t._s(t.title||"下载稀土掘金APP"))]),t._v(" "),n("div",{staticClass:"desc"},[t._v(t._s(t.label))])]),t._v(" "),t.closeable?n("div",{staticClass:"close-btn ion-close-round",attrs:{title:"关闭"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.close(e)}}}):t._e()])])],1):t._e()}),[],!1,null,"11c44dd5",null);e.a=component.exports},2116:function(t,e,n){"use strict";var r={name:"EmptyItem",props:["emptyText"],computed:{isLogin:function(){return this.$store.getters.USER}},methods:{login:function(){this.$requestLogin()}}},o=(n(2019),n(29)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activity-empty shadow"},[n("svg",{staticClass:"icon empty-icon",attrs:{width:"66",height:"68",viewBox:"0 0 66 68"}},[n("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(4 3)"}},[n("g",{attrs:{fill:"#F7F7F7"}},[n("path",{attrs:{d:"M9 10h23.751v3.221H9zM9 16.494h41.083v4.026H9zM9 26.104h23.751v3.221H9zM9 42.208h23.751v3.221H9zM9 33.351h41.083v4.026H9zM9 49.455h41.083v4.026H9z"}})]),t._v(" "),n("rect",{attrs:{width:"56",height:"60",x:"1.139",y:"1.338",stroke:"#EBEBEB","stroke-width":"2",rx:"6"}})])]),t._v(" "),n("span",{staticClass:"empty-text"},[t._v(t._s(t.emptyText))]),t.isLogin?t._e():n("button",{staticClass:"login-button",on:{click:t.login}},[t._v("登录")])])}),[],!1,null,"8739e5ce",null);e.a=component.exports},2287:function(t,e,n){"use strict";n(2020)},2317:function(t,e,n){t.exports=n.p+"img/juejin-tutu.d58819c.png"},2318:function(t,e,n){t.exports=n.p+"img/juejin-extension-icon.4b79fb4.png"},2319:function(t,e,n){t.exports=n.p+"img/juejin-miner.b78347c.png"},2320:function(t,e,n){"use strict";n(2052)},2321:function(t,e,n){t.exports=n.p+"img/police.d0289dc.png"},2322:function(t,e,n){t.exports=n.p+"img/weibo.0cd39f5.png"},2323:function(t,e,n){t.exports=n.p+"img/wechat.ce329e6.png"},2324:function(t,e,n){t.exports=n.p+"img/juejin-qr.b247fde.jpeg"},2325:function(t,e,n){"use strict";n(2053)},2466:function(t,e,n){"use strict";n(11),n(6),n(443);var r=n(0),o={name:"dropdown",data:function(){return{selectedOption:{name:"",title:""},isExpanded:!1,placeholderText:"请选择"}},watch:{defaultSelectOption:function(option){option&&(this.selectedOption=option)}},props:{defaultSelectOption:Object,placeholder:String,opitions:Array,routeKey:{type:String,default:"sort"}},methods:{toggleDropdown:function(){this.isExpanded=!this.isExpanded},getSortRoute:function(t){return{query:Object.assign({},this.$route.query,Object(r.a)({},this.routeKey,t))}},setCurrentSelectedOption:function(option){this.selectedOption=option,this.isExpanded=!1,this.$emit("update-selected-option",this.selectedOption)},setConfigData:function(){this.placeholder&&(this.placeholderText=this.placeholder),this.defaultSelectOption&&Object.values(this.defaultSelectOption).length&&(this.selectedOption=this.defaultSelectOption)}},mounted:function(){this.setConfigData()}},c=(n(2287),n(29)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"drop-down"},[t.selectedOption.title?n("li",{staticClass:"dropdown-toggle",on:{click:t.toggleDropdown}},[t._v("\n    "+t._s(t.selectedOption.title)+"\n    "),n("i",{staticClass:"icon",class:{toggled:t.isExpanded}})]):n("li",{staticClass:"dropdown-toggle",on:{click:t.toggleDropdown}},[t._v("\n    "+t._s(t.placeholderText)+"\n    "),n("i",{staticClass:"icon",class:{toggled:t.isExpanded}})]),t._v(" "),t.isExpanded?n("ul",{staticClass:"dropdown-menu"},t._l(t.opitions,(function(option,e){return n("router-link",{key:e,attrs:{tag:"li",to:t.getSortRoute(option.name)},nativeOn:{click:function(e){return t.setCurrentSelectedOption(option)}}},[n("a",[t._v(t._s(option.title))])])})),1):t._e()])}),[],!1,null,"60ed272e",null);e.a=component.exports},2468:function(t,e,n){"use strict";n(121);var r=n(280),o=n(8),c=n(269),l=n(69),d=n(49),f=n(9),h=Object(o.d)({props:{banner:{type:Object},width:{type:[Number,String],default:240},height:{type:[Number,String],default:0},recordShow:{type:Boolean,default:!0}},emits:["close"],setup:function(t,e){var n=e.emit,h=Object(o.a)((function(){var e,n=(null===(e=t.banner)||void 0===e?void 0:e.imageUrl)||"";return n?Object(c.c)(n,{resizeWidth:parseInt(t.width)*l.l||void 0,resizeHeight:parseInt(t.height)*l.l||void 0},"noMark"):""})),v=Object(o.a)((function(){var e;return(null===(e=t.banner)||void 0===e?void 0:e.position)===f.PositionType.SideBarFixed})),m=Object(o.a)((function(){var e;return(null===(e=t.banner)||void 0===e?void 0:e.url)||""}));return{imageUrl:h,bdPageUrlForBanner:r.a,close:function(){n("close")},recordBannerClick:function(){Object(d.d)(v.value?"ad_web_banner_top_click":"ad_web_banner_click",{ad_url:m.value})},handleVisibleChange:function(e){e&&t.recordShow&&v.value&&Object(d.d)("ad_web_banner_top_show",{ad_url:m.value})}}}}),v=(n(2320),n(29)),component=Object(v.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"visible-change",rawName:"v-visible-change.once",value:t.handleVisibleChange,expression:"handleVisibleChange",modifiers:{once:!0}}],staticClass:"banner"},[n("a",{directives:[{name:"link",rawName:"v-link.external.blank",value:t.banner.url,expression:"banner.url",modifiers:{external:!0,blank:!0}}],on:{click:t.recordBannerClick}},[n("img",{staticClass:"banner-image",attrs:{alt:t.banner.description,src:t.imageUrl,width:t.width,height:t.height}})]),t._v(" "),n("div",{staticClass:"ctrl-box"},[n("i",{staticClass:"ion-close-round close-btn",on:{click:t.close}}),t._v(" "),n("a",{directives:[{name:"link",rawName:"v-link.blank",value:t.bdPageUrlForBanner,expression:"bdPageUrlForBanner",modifiers:{blank:!0}}],staticClass:"label"},[n("span",{staticClass:"inco"},[t._v("投放")]),t._v(" "),n("span",[t._v("广告")])])])])}),[],!1,null,"417857b2",null);e.a=component.exports},2469:function(t,e,n){"use strict";var r=[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"item"},[e("span",[this._v("版权所有：北京北比信息技术有限公司")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"item"},[e("span",[this._v("公司地址：北京市海淀区信息路甲28号13层B座13B-5")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"item"},[e("span",[this._v("公司座机：010-83434395")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"item"},[e("span",[this._v("\n        举报邮箱：\n        "),e("a",{attrs:{href:"mailto:feedback@xitu.io"}},[this._v("feedback@xitu.io")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"item wechat",attrs:{"st:name":"wechatBtn"}},[e("img",{staticClass:"icon",attrs:{src:n(2323),alt:"微信"}}),this._v(" "),e("div",{staticClass:"qr-panel"},[e("div",{staticClass:"title"},[this._v("微信扫一扫")]),this._v(" "),e("img",{staticClass:"qr",attrs:{src:n(2324)}})])])}],o=(n(179),n(43),n(53),n(8)),c=Object(o.d)({props:{showMorePosts:{type:Boolean,default:!0}},setup:function(t,e){var n=e.root;return{morePostsMeta:Object(o.a)((function(){var e,r;if(!t.showMorePosts)return{};var o=n.$route.params.category,c=o&&!["recommended","following"].includes(o);return{link:"/more_posts"+(c?"/".concat(o):""),title:c&&(null===(r=null===(e=n.$store.state.view.timelineIndex.categoryNavList)||void 0===e?void 0:e.find((function(t){return t.category_url===o})))||void 0===r?void 0:r.title)||""}})),recordLink:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802026719",weiboLink:"http://weibo.com/xitucircle"}}}),l=(n(2325),n(29)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"index-aside-footer",attrs:{"st:block":"more"}},[r("ul",{staticClass:"more-list"},[r("li",{staticClass:"item"},[r("app-link",{attrs:{blank:!0,to:"/terms",rel:"nofollow"}},[t._v("用户协议")])],1),t._v(" "),r("li",{staticClass:"item"},[r("app-link",{attrs:{blank:!0,to:"/license",rel:"nofollow","st:name":"businessLicense"}},[t._v("\n        营业执照\n      ")])],1),t._v(" "),r("li",{staticClass:"item"},[r("app-link",{attrs:{blank:!0,to:"/privacy",rel:"nofollow"}},[t._v("隐私政策")])],1),t._v(" "),r("li",{staticClass:"item"},[r("app-link",{attrs:{blank:!0,to:"/about",rel:"nofollow"}},[t._v("关于我们")])],1)]),t._v(" "),r("ul",{staticClass:"more-list"},[r("li",{staticClass:"item"},[r("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/map-author-A-1",expression:"'/map-author-A-1'",modifiers:{blank:!0}}],attrs:{"st:name":"sitemap"}},[t._v("站点地图")])]),t._v(" "),r("li",{staticClass:"item"},[r("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/book/5c90640c5188252d7941f5bb",expression:"'/book/5c90640c5188252d7941f5bb'",modifiers:{blank:!0}}],attrs:{"st:name":"guideLink"}},[t._v("\n        使用指南\n      ")])]),t._v(" "),r("li",{staticClass:"item"},[r("app-link",{attrs:{to:"/links",blank:!0}},[t._v("友情链接")])],1),t._v(" "),t.showMorePosts?r("li",{staticClass:"item"},[r("app-link",{attrs:{blank:!0,to:t.morePostsMeta.link}},[t._v("\n        更多"+t._s(t.morePostsMeta.title)+"文章\n      ")])],1):t._e()]),t._v(" "),r("ul",{staticClass:"more-list"},[r("li",{staticClass:"item"},[r("app-link",{attrs:{blank:!0,external:!0,to:"https://beian.miit.gov.cn",rel:"nofollow"}},[t._v("\n        京ICP备18012699号-3\n      ")])],1)]),t._v(" "),r("ul",{staticClass:"more-list"},[r("li",{staticClass:"item"},[r("app-link",{attrs:{blank:!0,external:!0,to:"/icp",rel:"nofollow"}},[t._v("\n        京ICP证：京B2-20191272\n      ")])],1)]),t._v(" "),r("ul",{staticClass:"more-list"},[r("li",{staticClass:"item"},[r("app-link",{attrs:{blank:!0,external:!0,to:t.recordLink,rel:"nofollow"}},[r("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:n(2321),alt:"police"}}),t._v("\n        京公网安备11010802026719号\n      ")])],1),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3)]),t._v(" "),r("ul",{staticClass:"more-list"},[r("li",{staticClass:"item"},[r("a",[t._v("©"+t._s((new Date).getFullYear())+" 稀土掘金")])])]),t._v(" "),r("ul",{staticClass:"more-list account-list"},[r("li",{staticClass:"item weibo",attrs:{"st:name":"weiboBtn"}},[r("app-link",{attrs:{external:!0,blank:!0,to:t.weiboLink}},[r("img",{staticClass:"icon",attrs:{src:n(2322),alt:"微博"}})])],1),t._v(" "),t._m(4)])])}),r,!1,null,"2de6f29e",null);e.a=component.exports},3047:function(t,e,n){},3048:function(t,e,n){},3049:function(t,e,n){},3050:function(t,e,n){},3051:function(t,e,n){},3052:function(t,e,n){},3053:function(t,e,n){},3054:function(t,e,n){},3055:function(t,e,n){},4234:function(t,e,n){"use strict";n(3047)},4235:function(t,e,n){t.exports=n.p+"img/sign.d62085a.gif"},4236:function(t,e,n){"use strict";n(3048)},4237:function(t,e,n){"use strict";n(3049)},4238:function(t,e,n){"use strict";n(3050)},4239:function(t,e,n){"use strict";n(3051)},4240:function(t,e,n){t.exports=n.p+"fc83e0ee86af1f7d21961b08125cb277.svg"},4241:function(t,e,n){"use strict";n(3052)},4242:function(t,e,n){"use strict";n(3053)},4243:function(t,e,n){"use strict";n(3054)},4244:function(t,e,n){"use strict";n(3055)},4432:function(t,e,n){"use strict";n.r(e);n(16),n(15),n(14);var r=n(68),o=(n(11),n(6),n(54),n(43),n(53),n(0)),c=(n(138),n(275),n(21),n(5)),l=n(84),d=n(4),f=n(223),h=n(864),v=n(48),m=n(2468),_={props:["userList"],components:{Avatar:n(177).a},computed:{userDesc:function(){var t,e;return(null===(t=this.user)||void 0===t?void 0:t.titleDescription)||(null===(e=this.user)||void 0===e?void 0:e.description)}},methods:{recommendationRoute:function(){return{name:"recommendation",params:{type:"authors",category:"recommended"}}}}},y=(n(4234),n(29)),k=Object(y.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recommend-author-block"},[n("header",{staticClass:"user-block-header"},[t._v("🎖️作者榜")]),t._v(" "),n("div",{staticClass:"user-list"},[t._l(t.userList,(function(e){return n("div",{key:e.id,staticClass:"item"},[n("app-link",{staticClass:"link",attrs:{to:t.$userRoute(e),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:e,alt:e.username+"的头像"}}),t._v(" "),n("div",{staticClass:"user-info"},[n("username",{staticClass:"username",attrs:{user:e}}),t._v(" "),t.$userPosition(e)?n("div",{staticClass:"position"},[t._v("\n            "+t._s(t.$userPosition(e))+"\n          ")]):t._e(),t._v(" "),t.userDesc?n("div",{staticClass:"description"},[t._v("\n            "+t._s(t.userDesc)+"\n          ")]):t._e()],1)],1)],1)})),t._v(" "),n("router-link",{staticClass:"item",attrs:{to:t.recommendationRoute(),target:"_blank"}},[n("div",{staticClass:"more"},[n("span",[t._v("完整榜单")]),t._v(" "),n("i",{staticClass:"icon ion-chevron-right"})])])],2)])}),[],!1,null,"edec7d04",null).exports,w=n(2104),C=n(2469),O=n(280),x=n(8),T=n(284),E=n(123),L=n(49),j=n(25),S=n(66),$=n.n(S);function D(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function I(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?D(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):D(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var R=Object(x.d)({setup:function(t,e){var n=Object(x.r)({}),r=Object(x.r)(0),o=Object(x.r)(!1),c=Object(x.a)((function(){var t,n;return null!==(n=null===(t=e.root.$store.state)||void 0===t?void 0:t.auth.user)&&void 0!==n?n:{}})),l=Object(x.r)(0);E.a.GetTodayStatus().then((function(t){n.value=t.data,n.value.lt_task_exist&&(!o.value&&d(!0),window.localStorage.getItem(j.a.singnInAwardShowTime)!==$()().format("YYYY-MM-DD")&&(_.value=!0,window.localStorage.setItem(j.a.singnInAwardShowTime,$()().format("YYYY-MM-DD")))),l.value++})),c.value.user_id&&Object(T.e)().then((function(t){var e;r.value=(null===(e=t.data)||void 0===e?void 0:e.cont_count)||0,l.value++}));function d(t){!o.value&&n.value.lt_task_exist&&t&&(Object(L.d)("main_page_sign_in_seven_days_visit"),o.value=!0)}var f,h,v,m,_=Object(x.r)(!1);return Object(x.m)((function(){e.root.$TEA("main_page_sign_in_visit")})),I(I({todayStatus:n,handleGotoSignin:function(){n.value.lt_task_exist&&Object(L.d)("main_page_sign_in_seven_days_click"),e.root.$router.push({path:"/user/center/signin",query:{from:"main_page"}})}},(f=new Date,h=f.getHours(),v=f.getMinutes(),m=Object(x.a)((function(){return n.value.lt_task_exist&&n.value.extra.lt_task_title_web?n.value.extra.lt_task_title_web:h<9&&h>=6||9===h&&0===v?"早上好！":h>=9&&h<=11?"上午好！":12===h||13===h&&v<=30?"中午好！":h>=13&&h<=17||18===h&&0===v?"下午好！":"晚上好！"})),c.value&&c.value.user_id||setTimeout((function(){l.value=2})),{helloText:m})),{},{days:r,requestSuccessNum:l,handleVisibleChange:d,needAnimationToday:_})}}),N=(n(4236),Object(y.a)(R,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"visible-change",rawName:"v-visible-change",value:t.handleVisibleChange,expression:"handleVisibleChange"}],staticClass:"signin-tip"},[r("div",{staticClass:"first-line"},[r("div",{staticClass:"icon-text"},[r("span",{staticClass:"title"},[t.todayStatus.check_in_done?[t._v("\n          连续签到\n          "),r("span",{staticClass:"title-days"},[t._v(t._s(t.days)+"天")])]:[t._v(t._s(t.helloText))]],2),t._v(" "),r("div",{staticClass:"second-line"},[t._v("点亮在社区的每一天")])]),t._v(" "),t.todayStatus.check_in_done?r("button",{staticClass:"btn signedin-btn",on:{click:t.handleGotoSignin}},[r("span",{staticClass:"btn-text signed-text"},[t._v("已签到")])]):t.needAnimationToday?r("div",{staticClass:"sign-in-with-animation",on:{click:t.handleGotoSignin}},[r("img",{attrs:{src:n(4235),alt:"去签到"}})]):r("button",{staticClass:"btn signin-btn",on:{click:t.handleGotoSignin}},[r("span",{staticClass:"btn-text"},[t._v("去签到")])])])])}),[],!1,null,"5a2f4f06",null).exports),P=n(51);function A(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function B(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?A(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):A(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var F=Object(x.d)({components:{Banner:m.a,IndexAsideFooter:C.a,RecommendAuthorBlock:k,AppDownloadSidebarBlock:w.a,SigninTip:N},data:function(){return{bdPageUrlForLink:O.c,bdPageUrlForMore:O.d,sticky:!1,removeScrollListener:function(){},translateGithubURL:P.e}},computed:B(B({},Object(l.mapGetters)({user:d.USER})),{},{state:function(){return this.$store.state.component.indexAside},userList:function(){return this.state.userList}}),watch:{"state.bannerList":{handler:function(t){var e=this;t&&t.length>0&&t.forEach((function(element){e.$TEA("ad_web_banner_show",{ad_url:element.url})}))},deep:!0}},mounted:function(){var t=this;this.$store.dispatch(this.state.actionType.FETCH_USER),this.$store.dispatch(this.state.actionType.FETCH_BANNER),this.removeScrollListener=Object(v.m)(window,(function(){var e=t.$refs.aside.getBoundingClientRect().height;t.sticky=window.pageYOffset>e+100}))},beforeDestroy:function(){this.removeScrollListener()},methods:{closeBanner:function(t){return this.$store.dispatch(this.state.actionType.CLOSE_BANNER,t)},recommendationRoute:function(){this.$router.push({name:"recommendation",params:{type:"authors",category:"recommended"}})}}}),M=(n(4237),Object(y.a)(F,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("aside",{ref:"aside",staticClass:"index-aside",class:{sticky:t.sticky},attrs:{"st:block":"sidebar"}},[r("SigninTip",{staticClass:"signin"}),t._v(" "),t._l(t.state.bannerList,(function(e,n){return r("div",{key:n,staticClass:"sidebar-block banner-block"},[r("banner",{staticClass:"banner",attrs:{banner:e,height:200},on:{close:function(n){return t.closeBanner(e)}}})],1)})),t._v(" "),r("app-download-sidebar-block",{staticClass:"sidebar-block"}),t._v(" "),r("div",{staticClass:"sidebar-block sticky-block"},[t._l(t.state.bannerList,(function(e,i){return r("banner",{key:i,staticClass:"banner sticky-banner",attrs:{"record-show":!1,banner:e},on:{close:function(n){return t.closeBanner(e)}}})})),t._v(" "),r("app-download-sidebar-block",{staticClass:"sidebar-block"})],2),t._v(" "),t.userList.length?r("div",{staticClass:"sidebar-block user-block"},[r("recommend-author-block",{staticClass:"sticky-author-block",attrs:{"user-list":t.userList}})],1):t._e(),t._v(" "),r("div",{staticClass:"sidebar-block link-block"},[r("ul",{staticClass:"link-list"},[r("li",{staticClass:"item"},[r("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/book/6844733795329900551",expression:"'/book/6844733795329900551'",modifiers:{blank:!0}}],staticClass:"link"},[r("img",{staticClass:"icon",attrs:{src:n(2317)}}),t._v(" "),r("span",{staticClass:"title"},[t._v("稀土掘金漫游指南")])])]),t._v(" "),r("li",{staticClass:"item"},[r("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/extension",expression:"'/extension'",modifiers:{blank:!0}}],staticClass:"link"},[r("img",{staticClass:"icon",attrs:{src:n(2318)}}),t._v(" "),r("span",{staticClass:"title"},[t._v("安装掘金浏览器插件")])])]),t._v(" "),r("li",{staticClass:"item"},[r("a",{directives:[{name:"link",rawName:"v-link.external.blank",value:t.translateGithubURL,expression:"translateGithubURL",modifiers:{external:!0,blank:!0}}],staticClass:"link"},[r("img",{staticClass:"icon",attrs:{src:n(2319)}}),t._v(" "),r("span",{staticClass:"title"},[t._v("前往掘金翻译计划")])])])])]),t._v(" "),r("IndexAsideFooter",{attrs:{"st:block":"more"}})],2)}),[],!1,null,"2320f638",null).exports),U=n(74),H={props:["category","activeTag","activeCategory","tagsList"],data:function(){return{visible:!1,tagList:[],top:0,left:0}},computed:{popoverStyle:function(){return{top:"".concat(this.top,"px"),left:"".concat(this.left,"px")}}},methods:{isActive:function(t){return this.activeTag.title===t.title&&this.activeCategory.id===this.category.id},showPopover:function(t){var e=this;this.visiblePopover(t)||(clearTimeout(this.hideToken),this.showToken=setTimeout((function(){e.fetch().then((function(){e.showToken&&(e.visible=!0,e.$nextTick((function(){var n=t.target.getBoundingClientRect(),r=e.$refs.popover,o=null==r?void 0:r.offsetHeight,c=n.left-12,l=n.top-o-12;l<60&&(l=n.top/2+7),c=Math.max(0,c),e.left=c,e.top=l})))}))}),100))},visiblePopover:function(t){var e=t.target,n=e.textContent||e.innerText;return["recommended","following"].includes(this.category.alias)||this.activeCategory.title===n},hidePopover:function(){var t=this;clearTimeout(this.showToken),this.showToken=null,this.hideToken=setTimeout((function(){t.visible=!1}),100)},fetch:function(){var t=this,e=this.category.id;if(this.tagsList&&this.tagsList.length){var n=this.tagsList.filter((function(t){return t.id===e}));if(n&&n.length>0)return this.tagList=n[0].tagList,Promise.resolve(this.tagList)}return Object(U.b)(e).then((function(n){t.tagList=n,t.$emit("afterFetch",{id:e,tagList:n})}))},getTagRoute:function(t){return{params:{category:this.category.alias,tag:t}}}}},V=(n(4238),Object(y.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"category-popover-box",attrs:{"st:block":"categoryPopover","st:state":t.category.id},on:{mouseenter:function(e){return t.showPopover(e)},mouseleave:t.hidePopover}},[n("transition",{attrs:{name:"fade"}},[t.visible?n("div",{ref:"popover",staticClass:"category-popover",style:t.popoverStyle},[n("nav",{staticClass:"tag-nav",attrs:{role:"navigation"}},[n("ul",{staticClass:"tag-list"},t._l(t.tagList,(function(e){return n("router-link",{key:e.id+t.category.id,staticClass:"tag",class:{active:t.isActive(e)},attrs:{tag:"li",to:t.getTagRoute(e.title)}},[n("a",[t._v(t._s(e.title))])])})),1)])]):t._e()]),t._v(" "),t._t("default")],2)}),[],!1,null,"9786f6f8",null).exports),z=(n(174),{props:["state","isViewNavOnTop","user"],components:{CategoryPopover:V},data:function(){return{tagsList:[]}},computed:{categoryAlias:function(){return this.$route.params.category||"recommended"},categoryList:function(){return this.user?this.state.categoryNavList:this.state.categoryNavList.filter((function(t){return"following"!==t.alias}))},tagList:function(){return this.state.tagNavList.concat(this.state.splitTagList)},hide:function(){return"following"===this.state.category||"recommended"===this.state.category},activeTag:function(){var t=this.state.tag;return this.tagList.filter((function(e){return e.title===t}))[0]||{}},activeCategory:function(){var t=this;return this.categoryList.filter((function(e){return e.alias===t.categoryAlias}))[0]||{}}},methods:{getCategoryRoute:function(t){return{params:{category:t,tag:null}}},getTagRoute:function(t){return{params:{tag:t}}},afterFetch:function(t){this.tagsList.filter((function(e){return e.id===t.id})).length<=0&&this.tagsList.push(t)}}}),G=(n(4239),Object(y.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"view-nav",class:{top:t.isViewNavOnTop},attrs:{role:"navigation"}},[n("div",{staticClass:"nav-list left"},[t._l(t.categoryList,(function(e,r){return n("router-link",{key:r,staticClass:"nav-item",class:{active:t.categoryAlias===e.alias},attrs:{to:t.getCategoryRoute(e.alias)}},[n("category-popover",{attrs:{category:e,activeCategory:t.activeCategory,activeTag:t.activeTag,tagsList:t.tagsList},on:{afterFetch:t.afterFetch}},[t._v("\n        "+t._s(e.title)+"\n      ")])],1)})),t._v(" "),t.user?n("router-link",{staticClass:"nav-item right",attrs:{to:"/subscribe/subscribed"}},[t._v("\n      标签管理\n    ")]):t._e()],2)])}),[],!1,null,"7e1071b3",null).exports),W=(n(39),n(104)),nav=n(304),Y=n(2116),K=n(1236),J=n(2466),X=n(852),Q=n(98),Z=n(9),tt=n(176),et=n(908),nt=n(4240),it=n.n(nt),st=n(184),at=Object(x.d)({components:{Popup:function(){return n.e(195).then(n.bind(null,1089))},Dropdown:J.a,EntryList:K.a,EmptyItem:Y.a,XituSkeleton:X.a,BlockUserPopup:function(){return n.e(166).then(n.bind(null,4567))},NoData:et.a},props:["listState","adList","user"],emits:["should-fetch-more","deleted","user-entries-deleted","tag-entries-deleted"],setup:function(){return{emptyIcon:it.a}},data:function(){return{sortList:nav.d,orderOpitions:nav.a,blockUserEntry:null,blockFailedData:null,throttledFetchMore:null}},computed:{tag:function(){return this.listState.tag||""},isChangePageReminder:function(){return"全部"!==this.tag},enableDislikeButton:function(){return(!this.tag||"全部"===this.tag)&&"popular"===(this.listState.sort||"popular")&&"following"!==this.category},category:function(){return this.listState.category},state:function(){switch(this.category){case"recommended":return this.listState.recommendList;case"following":return this.listState.followingList;default:return this.listState.timelineList}},emptyText:function(){return"following"===this.category?"暂无关注人发布的文章":"暂无数据，快来该分类下写文章 ~"},defaultSelectOption:function(){var t=this.listState.sort;if(t){var e=this.orderOpitions.filter((function(e){return e.name===t}))[0];if(e)return e}return this.orderOpitions[0]},visibleDropdown:function(){return["hottest","three_days_hottest","weekly_hottest","monthly_hottest"].includes(this.listState.sort)},visibleHeader:function(){return"following"!==this.listState.category}},watch:{"state.list":function(t,e){t&&e&&e.length>=5&&t.length<5&&this.throttledFetchMore()}},mounted:function(){var t=this;this.registerDislikeEvent(),this.throttledFetchMore=Object(W.b)((function(){return t.$emit("should-fetch-more")}),300)},methods:{openBlockSetting:function(t){this.blockFailedData=null,window.open(t,"_blank")},getSortRoute:function(t){return t="popular"===t?void 0:t,{query:Object.assign({},this.$route.query,{sort:t})}},shouldFetchMore:function(){var t=this;this.refetch||(this.refetch=Object(W.b)((function(){t.$emit("should-fetch-more")}),1e3,!0)),this.refetch()},setItemActive:function(t){return"three_days_hottest"===t.name&&this.visibleDropdown},onEntryDeleted:function(t){this.$emit("deleted",t)},onUserEntriesDeleted:function(t){this.$emit("user-entries-deleted",t)},onTagEntriesDeleted:function(t){this.$emit("tag-entries-deleted",t)},confirmRemoveUserEntry:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.blockUserEntry=null,n.prev=1,n.next=4,Q.a.MUpdateDislike({item_ids:[t.author_user_info.user_id],item_type:Z.IdType.UserIdType,dis_type:Z.IdType.ArticleIdType,action:1});case 4:e.onUserEntriesDeleted(t.author_user_info),r=tt.Message.success({closable:!1,duration:st.h,isHtml:!0,content:'将不再推荐该作者文章，在<a target="_blank" href="/user/settings/block?type=author">「屏蔽管理」</a>可取消屏蔽'}),setTimeout((function(){var t;return null==r||null===(t=r.close)||void 0===t?void 0:t.call(r)}),st.h),e.$TEA("item_ban_author_click",{author_type:"article",item_id:t.article_id,item_author_id:t.author_user_info.user_id}),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),console.warn("block user ".concat(t.author_user_info.user_id," err:"),n.t0),n.t0.statusCode===Z.ERROR_NO.AUTHOR_DISLIKE_LIMIT?("/user/settings/block?type=author",'<p class="block-failed-message">屏蔽作者<span class="highlight">已达上限20</span>，</p><p class="block-failed-message">是否前往「屏蔽管理」清理屏蔽作者？</p>',e.blockFailedData={message:'<p class="block-failed-message">屏蔽作者<span class="highlight">已达上限20</span>，</p><p class="block-failed-message">是否前往「屏蔽管理」清理屏蔽作者？</p>',href:"/user/settings/block?type=author"}):e.blockFailedData=null;case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))()},confirmRemoveTagEntry:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Q.a.MUpdateDislike({item_ids:t.length?t.map((function(t){return t.tag_id})):[],item_type:Z.IdType.TagIdType,dis_type:Z.IdType.ArticleIdType,action:1});case 3:e.onTagEntriesDeleted(t),r=tt.Message.success({closable:!1,duration:st.h,isHtml:!0,content:'不再推荐相关标签内容，在<a target="_blank" href="/user/settings/block?type=tag">「屏蔽管理」</a>可取消屏蔽'}),setTimeout((function(){var t;return null==r||null===(t=r.close)||void 0===t?void 0:t.call(r)}),st.h),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),console.warn("dislike tags",t,"err:",n.t0),n.t0.statusCode===Z.ERROR_NO.TAG_DISLIKE_LIMIT?("/user/settings/block?type=tag",'<p class="block-failed-message">屏蔽标签<span class="highlight">已达上限20</span>，</p><p class="block-failed-message">是否前往「屏蔽管理」清理屏蔽标签？</p>',e.blockFailedData={message:'<p class="block-failed-message">屏蔽标签<span class="highlight">已达上限20</span>，</p><p class="block-failed-message">是否前往「屏蔽管理」清理屏蔽标签？</p>',href:"/user/settings/block?type=tag"}):e.blockFailedData=null;case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},registerDislikeEvent:function(){var t=this,e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.HIDE_ENTRY_ITEM,(function(e){var n=tt.Message.success({content:"将减少类似内容推荐",duration:st.h,closable:!1});setTimeout((function(){var t;return null==n||null===(t=n.close)||void 0===t?void 0:t.call(n)}),st.h),t.onEntryDeleted(e.article_id)})),e.onVmLife(this,e.eventType.CONFIRM_BLOCK_USER,(function(e){t.blockUserEntry=e})),e.onVmLife(this,e.eventType.BLOCK_ENTRY_TAGS,function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.confirmRemoveTagEntry(r);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}}}),ot=(n(4241),n(4242),Object(y.a)(at,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"entry-list-container"},[n("header",{directives:[{name:"show",rawName:"v-show",value:t.visibleHeader,expression:"visibleHeader"}],staticClass:"list-header"},[n("nav",{staticClass:"list-nav",attrs:{role:"navigation"}},[n("ul",{staticClass:"nav-list left"},t._l(t.sortList.left,(function(e,r){return n("router-link",{key:r,staticClass:"nav-item",class:{active:t.listState.sort===e.name,dropdown:t.setItemActive(e)},attrs:{tag:"li",to:t.getSortRoute(e.name)}},[n("a",[t._v(t._s(e.title))])])})),1),t._v(" "),n("div",{staticClass:"dorp-down-area"},[t.visibleDropdown?n("dropdown",{staticClass:"dorp-down",attrs:{opitions:t.orderOpitions,"default-select-option":t.defaultSelectOption}}):t._e()],1)])]),t._v(" "),n("xitu-skeleton",{staticClass:"entry-list-wrap",model:{value:t.state.skeleton,callback:function(e){t.$set(t.state,"skeleton",e)},expression:"state.skeleton"}},[t.state.list&&t.state.list.length?n("entry-list",{attrs:{user:t.user,list:t.state.list,"ad-list":t.adList,"enable-dislike-button":t.enableDislikeButton,loading:t.state.skeleton,"empty-text":"请前往「标签管理」页订阅标签","login-item-index":t.$device.isDesktop&&"popular"===t.listState.sort?9:null},on:{deleted:t.onEntryDeleted,"should-fetch-more":t.shouldFetchMore}}):n("div",{staticClass:"loading-empty"},[t.enableDislikeButton&&t.isChangePageReminder?n("div",{staticClass:"new-reminder"},[n("NoData",{attrs:{icon:t.emptyIcon}},[n("span",{staticClass:"first-line"},[t._v("啊哦~当前标签下的推荐文章已经没有了~")]),t._v(" "),n("span",[t._v("浏览「最新」或前往「屏蔽管理」取消屏蔽该标签")])]),t._v(" "),n("button",{staticClass:"empty-btn"},[n("app-link",{staticClass:"link",attrs:{to:"/user/settings/block?type=tag"}},[t._v("\n            屏蔽管理\n          ")])],1)],1):n("empty-Item",{attrs:{"empty-text":t.emptyText}})],1)],1),t._v(" "),n("Transition",{attrs:{name:"fade"}},[t.blockUserEntry?n("BlockUserPopup",{attrs:{"user-entry":t.blockUserEntry},on:{dismiss:function(e){t.blockUserEntry=null},confirm:t.confirmRemoveUserEntry}}):t._e()],1),t._v(" "),n("Transition",{attrs:{name:"fade"}},[t.blockFailedData?n("Popup",{staticClass:"block-failed-popup",attrs:{"html-content":t.blockFailedData.message,"ok-text":"前往"},on:{confirm:function(e){return t.openBlockSetting(t.blockFailedData.href)},cancel:function(e){t.blockFailedData=null}}}):t._e()],1)],1)}),[],!1,null,"d15bb770",null).exports),ct={props:["state","isFold"],computed:{category:function(){return this.state.category},tagTitle:function(){return this.state.tag},tagNavList:function(){return this.state.tagNavList},splitTagList:function(){return this.state.splitTagList},tagList:function(){return this.tagNavList.concat(this.isFold?[]:this.splitTagList).filter((function(t){return"5c0e1c8d518825787d33db98"!==t.tagId}))}},methods:{getTagRoute:function(t){return{params:{tag:t="全部"===t?void 0:t}}},handleFold:function(){this.$emit("un-fold")}}},lt=(n(4243),Object(y.a)(ct,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"tag-nav",attrs:{role:"navigation"}},[n("ul",{staticClass:"nav-list tag-list"},[t._l(t.tagList,(function(e){return n("router-link",{key:e.tagId+t.category,staticClass:"nav-item tag",class:{active:t.tagTitle===e.title},attrs:{tag:"li",to:t.getTagRoute(e.title)}},[n("a",[t._v(t._s(e.title))])])})),t._v(" "),t.isFold&&t.splitTagList.length?n("li",{staticClass:"nav-item tag unfold",on:{click:t.handleFold}},[t._v("\n      展开\n    ")]):t._e()],2)])}),[],!1,null,"e810fa66",null).exports),ut=n(152),pt=n(167),ft=n(865),ht=(n(18),n(185)),vt=n(24);function mt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function gt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?mt(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):mt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var bt="@/view/timelineIndex/UPDATE_STATE",_t=function(t){return t.state.view.timelineIndex};function yt(t){return kt.apply(this,arguments)}function kt(){return(kt=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,o,c,l,d,f,h,v,data,m,_,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.store,o=e.params,c=e.$reqs,l=e.error,t.prev=1,null==(d=_t(n))||!d.categoryNavList.length){t.next=5;break}return t.abrupt("return");case 5:return f=o.category,t.next=8,c.getCategoryList();case 8:if(h=t.sent,v=h.data,(data=void 0===v?[]:v).length){t.next=13;break}return t.abrupt("return");case 13:if(m=data.map((function(t){return t.category_url})),m=[].concat(Object(r.a)(m),["recommended","following"]),_=data.map((function(t){return ut.a.fromDescriptor(t)})),y=Object(ft.getTdkTemplateList)(),n.commit(bt,{categoryNavList:Object(pt.b)(_),tdkTemplates:y}),!f||m.includes(f)){t.next=20;break}return t.abrupt("return",l({statusCode:404}));case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(1),console.warn("error fetchCategoryNavList err:",t.t0);case 25:case"end":return t.stop()}}),t,null,[[1,22]])})))).apply(this,arguments)}function wt(t){var e=_t(t);if(null==e||!e.categoryNavList.length)return t.dispatch(e.actionType.FETCH_CATEGORY_LIST)}function Ct(t){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,r,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=o.length>1&&void 0!==o[1]?o[1]:{since:(new Date).toISOString()},n.since,t.next=16;break;case 10:r.commit(bt,{serverRenderTimelineList:!0}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),e.logger.error("err fetchForSpider in timelineIndexView err:",t.t0);case 16:case"end":return t.stop()}}),t,null,[[3,13]])})))).apply(this,arguments)}function xt(t,e){var n=e.since,r=_t(t),o=t.state.route,c=o.params.category||"recommended",l=o.params.tag||"全部",d=o.query.sort||"popular";return t.dispatch(r.actionType.FETCH,{category:c,tag:l,sort:d,since:n})}function Tt(t,e){return Et.apply(this,arguments)}function Et(){return(Et=Object(c.a)(regeneratorRuntime.mark((function t(e,n){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=_t(e),o=r.actionType.DELETE_ENTRY,t.next=4,e.dispatch(o,{id:n});case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Lt={provide:{showJscoreLevelInEntry:!0},fetch:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yt(t);case 2:if(n=t.params,r=n.category,o=n.tag,!(c=(_t(t.store).categoryNavList.filter((function(t){return t.alias===r}))[0]||{}).id)||!o){e.next=21;break}return e.prev=5,e.next=8,Object(U.b)(c);case 8:if(l=e.sent,!((d=l.findIndex((function(t){return new RegExp("^".concat(t.title,"$"),"i").test(o)})))<0)){e.next=15;break}return t.redirect(301,"/".concat(r)),e.abrupt("return");case 15:o!==l[d].title&&t.redirect(301,"/".concat(r,"/").concat(l[d].title),t.query);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),console.warn("error getTagListByCategoryId err:",e.t0);case 21:return e.next=23,Ct(t);case 23:case"end":return e.stop()}}),e,null,[[5,18]])})))()},components:{Navigator:G,TagNavigator:lt,EntryBlock:ot,IndexAside:M},data:function(){return{isFold:!0,afterPosition:"",isViewNavOnTop:!1,since:(new Date).toISOString()}},computed:gt(gt({},Object(l.mapGetters)({user:d.USER,unreadNotificationCount:d.UNREAD_NOTIFICATION_COUNT})),{},{displayedUnreadNotificationAmount:function(){return Object(f.c)(this.unreadNotificationCount.total)},state:function(){var t=_t(this.$store);return t},categoryName:function(){return this.$route.params.category},adEntryList:function(){return this.state.timelineAdList},categoryTitle:function(){var t=this,e=this.state.categoryNavList.filter((function(e){return e.category_url===t.state.category}))[0];return e&&e.title},hideTagNavigator:function(){return!this.categoryName||["following","recommended"].includes(this.categoryName)},scheme:function(){return Object(st.e)("https://".concat(vt.b),st.a.homepage.gd_label)}}),watch:{$route:{handler:function(){this.fetchList()},immediate:!1}},head:function(){var t=this.$route.params,e=t.category,n=t.tag,title=e?"following"===e?"关注 - 文章 - 掘金":"".concat(this.categoryTitle||"推荐 - 文章"," - 掘金"):"稀土掘金",r=this.displayedUnreadNotificationAmount?"(".concat(this.displayedUnreadNotificationAmount,") "):"",o="";e&&e.length&&(o+="/".concat(e),n&&n.length&&(o+="/".concat(n)));var link=Object(h.a)(o),c=_t(this.$store);return null!=c&&c.tdkTemplates.length&&Object(ft.setTdkTemplateList)(c.tdkTemplates),gt(gt({},Object(h.d)({title:"".concat(r).concat(title)},this.$route.path,{})),{},{titleTemplate:null,script:[{type:"application/ld+json",json:{"@context":"https://schema.org","@type":"WebSite",url:"https://juejin.cn/",potentialAction:{"@type":"SearchAction",target:"https://juejin.cn/search?query={search_term_string}","query-input":"required name=search_term_string"}}}]},link)},methods:{onFold:function(){this.isFold=!1},getCategoryRoute:function(t){return{params:{category:t}}},getSortRoute:function(t){return{query:Object.assign({},this.$route.query,{sort:t})}},onShouldFetchMore:function(){this.$active&&this.fetchMore()},onHeaderVisibilityChanged:function(t){this.isViewNavOnTop=!t},fetchList:function(){window.scrollTo({top:0});var t=this.since;this.$TEA("article_timeline_load",{article_timeline_type:this.$route.params.category||"recommended"}),function(t,e){var n=e.since,r=t.state.route,o=r.params.category||"recommended",c=r.params.tag||"全部",l=r.query.sort||"popular";Promise.all([xt(t,{category:o,tag:c,since:n,sort:l})])}(this.$store,{since:t})},fetch:function(){var t=this;window.scrollTo({top:0}),this.$TEA("article_timeline_load",{article_timeline_type:this.$route.params.category||"recommended"});var e=[wt(this.$store)];if(!_t(this.$store).serverRenderTimelineList){var n=this.since;e.push(xt(this.$store,{since:n}))}return Promise.all(e).catch((function(e){t.$error(e)}))},fetchMore:function(){return this.$TEA("article_timeline_load",{article_timeline_type:this.$route.params.category||"recommended"}),t=this.$store,e=_t(t),n=t.state.route.params.category||"recommended",r=e.actionType.FETCH_MORE,t.dispatch(r,{category:n});var t,e,n,r},reset:function(){return t=this.$store,e=_t(t).actionType.RESET,void t.dispatch(e);var t,e},onEntryDeleted:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Tt(e.$store,t);case 2:e.updateLazyLoadState(300);case 3:case"end":return n.stop()}}),n)})))()},onUserEntriesDeleted:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=_t(e.$store),o=r.actionType.DELETE_USER_ENTRIES,n.next=4,e.$store.dispatch(o,t);case 4:e.updateLazyLoadState(300);case 5:case"end":return n.stop()}}),n)})))()},onTagEntriesDeleted:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=_t(e.$store),o=r.actionType.DELETE_TAG_ENTRIES,n.next=4,e.$store.dispatch(o,t);case 4:e.updateLazyLoadState(300);case 5:case"end":return n.stop()}}),n)})))()},updateLazyLoadState:function(t){var e=this;t?setTimeout((function(){return e.$lazy.updateState()}),t):this.$lazy.updateState()}},mounted:function(){var t=this;this.fetch().then((function(){return t.$Slardar(ht.b)}))},beforeDestroy:function(){this.timer&&window.clearInterval(this.timer),this.reset()}},jt=(n(4244),Object(y.a)(Lt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view-container",{staticClass:"container",attrs:{"with-view-nav":!0,zlink:"https://z.juejin.cn/YE2X",scheme:t.scheme},on:{headerVisibilityChanged:t.onHeaderVisibilityChanged}},[n("div",{staticClass:"view timeline-index-view"},[n("navigator",{attrs:{state:t.state,user:t.user,isViewNavOnTop:t.isViewNavOnTop}}),t._v(" "),n("div",{staticClass:"timeline-container"},[n("transition",{attrs:{name:"fade"}},[t.hideTagNavigator?t._e():n("tag-navigator",{staticClass:"tag-navigator",attrs:{state:t.state,isFold:t.isFold},on:{"un-fold":function(e){t.isFold=!1}}})],1),t._v(" "),n("div",{staticClass:"timeline-content"},[n("div",{staticClass:"timeline-entry-list"},[[n("entry-block",{attrs:{user:t.user,listState:t.state,adList:t.adEntryList},on:{deleted:t.onEntryDeleted,"user-entries-deleted":t.onUserEntriesDeleted,"tag-entries-deleted":t.onTagEntriesDeleted,"should-fetch-more":t.onShouldFetchMore}})]],2),t._v(" "),n("index-aside",{staticClass:"aside",class:{top:t.isViewNavOnTop}})],1)],1)],1)])}),[],!1,null,"1ac49b3e",null));e.default=jt.exports},852:function(t,e,n){"use strict";n(43),n(53),n(121);var r=n(8),o=Object(r.d)({name:"xitu-skeleton",props:{tagName:{type:String,default:"div"},value:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},num:{type:Number,default:1,validator:function(t){return t>0&&!isNaN(t)&&isFinite(t)}},rows:{type:Number,default:4,validator:function(t){return t>=0&&!isNaN(t)&&isFinite(t)}},avatarShape:{type:String,validator:function(t){return["circle","square"].includes(t)||""===t},default:""},avatarWidth:{type:Number,default:45}},data:function(){return{visible:this.value}},computed:{mainClass:function(){return{"xitu-skeleton":!0,"xitu-skeleton-animated":this.animated}},avatarCls:function(){return["xitu-skeleton-avatar","xitu-skeleton-avatar-".concat(this.avatarShape)]},avatarStyle:function(){return{width:"".concat(this.avatarWidth,"px"),height:"".concat(this.avatarWidth,"px")}}},methods:{},watch:{value:function(t){this.visible=t}}}),c=(n(863),n(29)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.tagName,t._b({tag:"component"},"component",t.$attrs,!1),[t.visible?n("div",{class:t.mainClass},t._l(t.num,(function(e){return n("div",{key:e,staticClass:"xitu-skeleton-item"},[t.avatarShape?n("span",{class:t.avatarCls,style:t.avatarStyle}):t._e(),t._v(" "),t.rows?n("div",{staticClass:"xitu-skeleton-content"},t._l(t.rows,(function(i){return n("div",{key:i,staticClass:"xitu-skeleton-line"})})),0):t._e()])})),0):t._t("default")],2)}),[],!1,null,"3ff8f708",null);e.a=component.exports},853:function(t,e,n){},863:function(t,e,n){"use strict";n(853)},865:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,c){function l(t){try{f(r.next(t))}catch(t){c(t)}}function d(t){try{f(r.throw(t))}catch(t){c(t)}}function f(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(l,d)}f((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,body){var e,n,r,g,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(l){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],n=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.setTdkTemplateList=e.getTdkTemplateList=e.buildTdk=void 0;var l=c(n(896)),d=n(866),f=n(868),h=n(869),v=[],m=null,_=!1;function y(t){return r(this,void 0,void 0,(function(){var e,data,n,r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,l.default.request({url:"https://seo"+(_?"-boe":"")+".bytedance.net/api/tdk/query",method:"post",data:{site:t}})];case 1:if(e=o.sent(),data=e.data,(n=e.status)>=400)throw new Error("获取 TDK 失败，status code: "+n);if(data.errno)throw new Error("获取 TDK 失败，errno: "+data.errno+",message: "+data.message);return O(data.data),[3,3];case 2:return r=o.sent(),console.warn(r),[3,3];case 3:return[2]}}))}))}function k(template,t){var e=template.replace(/\{\{\s*(\w+)\s*\}\}/g,"{{$1}}");for(var n in t)e=e.replace("{{"+n+"}}",t[n]);return e.replace(/{{([\s\S]+?)}}/g,"")}function w(path,t){var e=function(path,t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(d.isMatch(path,r.path))return r}}(path,v);return e?{title:k(e.title,t),description:k(e.description,t),keywords:k(e.keywords,t)}:{title:"",description:"",keywords:""}}function C(t){return!t.title&&!t.description&&!t.keywords}function O(t){v=JSON.parse(JSON.stringify(t))}e.buildTdk=function(t,e,path,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=36e5),_=r;var c={title:"",description:"",keywords:""};try{if("string"!=typeof e||"string"!=typeof path)throw new Error("由模板构建 TDK 时，必须要传入合法 site 和 path，当前 site="+e+"，path="+path);c=w(path,n),h.isSsrServer()&&(!function(t,e){t<3e5&&(console.warn("模板刷新时间间隔不能小于 5 分钟，当前设置 "+t+"ms"),t=3e5),m||(m=setInterval((function(){y(e)}),t*(1+.1*(Math.random()-.5))),y(e))}(o,e),f.metricsEmitCounter("tdk.build",1,"toutiao.growth.seo_platform",{site:e||"empty",path:path||"empty",fallback:+C(c),tdkTemplateListLength:v.length,errMsg:"success"}))}catch(t){console.warn(t),h.isSsrServer()&&f.metricsEmitCounter("tdk.build",1,"toutiao.growth.seo_platform",{site:e||"empty",path:path||"empty",fallback:+C(c),tdkTemplateListLength:v.length,errMsg:t.toString()})}return C(c)?(console.warn("使用兜底 TDK"),t):c},e.getTdkTemplateList=function(){return JSON.parse(JSON.stringify(v))},e.setTdkTemplateList=O},866:function(t,e,n){"use strict";const r=n(867),o=new Map;function c(pattern,t){t={caseSensitive:!1,...t};const e=pattern+JSON.stringify(t);if(o.has(e))return o.get(e);const n="!"===pattern[0];n&&(pattern=pattern.slice(1)),pattern=r(pattern).replace(/\\\*/g,"[\\s\\S]*");const c=new RegExp(`^${pattern}$`,t.caseSensitive?"":"i");return c.negated=n,o.set(e,c),c}t.exports=(t,e,n)=>{if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError(`Expected two arrays, got ${typeof t} ${typeof e}`);if(0===e.length)return t;const r="!"===e[0][0];e=e.map(pattern=>c(pattern,n));const o=[];for(const input of t){let t=r;for(const pattern of e)pattern.test(input)&&(t=!pattern.negated);t&&o.push(input)}return o},t.exports.isMatch=(input,pattern,t)=>{const e=Array.isArray(input)?input:[input],n=Array.isArray(pattern)?pattern:[pattern];return e.some(input=>n.every(pattern=>{const e=c(pattern,t),n=e.test(input);return e.negated?!n:n}))}},867:function(t,e,n){"use strict";t.exports=t=>{if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},868:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.metricsEmitCounter=void 0;e.metricsEmitCounter=function(t,e,n,r){null}},869:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSsrServer=void 0,e.isSsrServer=function(){try{return!(window&&document&&location&&alert)}catch(t){return!0}}},885:function(t,e,n){},908:function(t,e,n){"use strict";var r=n(8),o=n(946),c=n.n(o),l=Object(r.d)({props:{label:String,icon:String},setup:function(){return{defaultIcon:c.a}}}),d=(n(947),n(29)),component=Object(d.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"empty-box"},[e("img",{attrs:{src:this.icon||this.defaultIcon}}),this._v(" "),e("div",{staticClass:"empty-text"},[this._t("default",[e("span",[this._v(this._s(this.label||"这里什么都没有"))])])],2)])}),[],!1,null,"516408cd",null);e.a=component.exports},946:function(t,e,n){t.exports=n.p+"ed038d31a0ab338af3a27716116e762f.svg"},947:function(t,e,n){"use strict";n(885)}}]);